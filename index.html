<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Mom Method - AI Business & Life Launch Wizard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Firebase SDK -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.23.0/firebase-app-compat.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.23.0/firebase-auth-compat.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.23.0/firebase-firestore-compat.min.js"></script>
    
    <style>
        :root {
            --sage-green: #6B8E6B;
            --warm-cream: #FAF7F0;
            --deep-teal: #2D5B69;
            --charcoal: #2C3E50;
            --soft-gold: #D4A574;
            --light-sage: #E8F5E8;
            --sage-alpha: rgba(107, 142, 107, 0.1);
            --teal-alpha: rgba(45, 91, 105, 0.1);
            --gold-alpha: rgba(212, 165, 116, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--charcoal);
            background: var(--warm-cream);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Path Selection Modal */
        .path-selector {
            background: white;
            border-radius: 24px;
            padding: 48px;
            margin: 32px 0;
            box-shadow: 0 16px 48px rgba(44, 62, 80, 0.1);
        }

        .path-selector h3 {
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            color: var(--charcoal);
            text-align: center;
            margin-bottom: 32px;
        }

        .path-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .path-option {
            background: var(--warm-cream);
            border-radius: 16px;
            padding: 32px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            text-align: center;
        }

        .path-option:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 32px rgba(107, 142, 107, 0.2);
        }

        .path-option.selected {
            border-color: var(--sage-green);
            background: var(--light-sage);
        }

        .path-icon {
            font-size: 3rem;
            margin-bottom: 16px;
        }

        .path-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--charcoal);
            margin-bottom: 12px;
        }

        .path-description {
            color: var(--charcoal);
            opacity: 0.8;
            line-height: 1.6;
        }

        /* Calendar Integration Section */
        .calendar-integration {
            background: linear-gradient(135deg, var(--sage-green), var(--deep-teal));
            color: white;
            padding: 48px;
            border-radius: 24px;
            margin: 32px 0;
            text-align: center;
        }

        .calendar-integration h3 {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            margin-bottom: 24px;
        }

        .calendar-instructions {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 32px;
            margin: 24px 0;
            text-align: left;
        }

        .calendar-instructions ol {
            margin: 16px 0;
            padding-left: 24px;
        }

        .calendar-instructions li {
            margin: 12px 0;
            line-height: 1.6;
        }

        .calendar-paste-area {
            margin: 24px 0;
        }

        .calendar-paste-area textarea {
            width: 100%;
            min-height: 200px;
            padding: 20px;
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.9);
            color: var(--charcoal);
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 14px;
        }

        /* Authentication Modal */
        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(44, 62, 80, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
        }

        .auth-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .auth-content {
            background: white;
            border-radius: 24px;
            padding: 50px;
            max-width: 500px;
            width: 90%;
            position: relative;
            transform: translateY(20px);
            transition: transform 0.4s ease;
        }

        .auth-modal.active .auth-content {
            transform: translateY(0);
        }

        .auth-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--charcoal);
            opacity: 0.7;
        }

        .auth-close:hover {
            opacity: 1;
        }

        .auth-title {
            font-family: 'Playfair Display', serif;
            color: var(--sage-green);
            margin-bottom: 32px;
            font-size: 2rem;
            text-align: center;
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .auth-input {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--light-sage);
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }

        .auth-input:focus {
            outline: none;
            border-color: var(--sage-green);
            box-shadow: 0 0 0 4px var(--sage-alpha);
        }

        .auth-button {
            background: linear-gradient(135deg, var(--sage-green), #5A7A5A);
            color: white;
            padding: 18px 36px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .auth-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(107, 142, 107, 0.35);
        }

        .google-auth-button {
            background: white;
            border: 2px solid var(--light-sage);
            color: var(--charcoal);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-top: 16px;
        }

        .google-auth-button:hover {
            background: var(--light-sage);
            transform: translateY(-2px);
        }

        .auth-switch {
            text-align: center;
            margin-top: 24px;
            color: var(--charcoal);
            opacity: 0.8;
        }

        .auth-link {
            color: var(--sage-green);
            cursor: pointer;
            text-decoration: underline;
        }

        .auth-error {
            background: #ffebee;
            border: 1px solid #e57373;
            color: #c62828;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            font-size: 14px;
        }

        .auth-success {
            background: #e8f5e8;
            border: 1px solid var(--sage-green);
            color: var(--sage-green);
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            font-size: 14px;
        }

        /* Welcome Modal */
        .welcome-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(44, 62, 80, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 1;
            visibility: visible;
            transition: all 0.4s ease;
        }

        .welcome-modal.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .welcome-content {
            background: white;
            border-radius: 24px;
            padding: 60px 50px;
            max-width: 600px;
            width: 90%;
            text-align: center;
            transform: translateY(0);
            transition: transform 0.4s ease;
            box-shadow: 0 30px 80px rgba(44, 62, 80, 0.2);
        }

        .welcome-content h2 {
            font-family: 'Playfair Display', serif;
            color: var(--sage-green);
            margin-bottom: 24px;
            font-size: 2.4rem;
            font-weight: 600;
        }

        .welcome-content p {
            color: var(--charcoal);
            margin-bottom: 40px;
            font-size: 1.1rem;
            line-height: 1.7;
            opacity: 0.8;
        }

        .welcome-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .welcome-btn {
            padding: 18px 36px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
            font-family: 'Inter', sans-serif;
        }

        .welcome-btn.primary {
            background: linear-gradient(135deg, var(--sage-green), #5A7A5A);
            color: white;
            box-shadow: 0 8px 24px rgba(107, 142, 107, 0.3);
        }

        .welcome-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(107, 142, 107, 0.4);
        }

        .welcome-btn.secondary {
            background: var(--deep-teal);
            color: white;
        }

        .welcome-btn.secondary:hover {
            background: #1E3D47;
            transform: translateY(-2px);
        }

        .welcome-btn.auth {
            background: var(--soft-gold);
            color: white;
        }

        .welcome-btn.auth:hover {
            background: #C79660;
            transform: translateY(-2px);
        }

        /* User Status Bar */
        .user-status-bar {
            background: linear-gradient(135deg, var(--sage-green), var(--deep-teal));
            color: white;
            padding: 16px 32px;
            text-align: center;
            position: relative;
            z-index: 100;
        }

        .user-status-bar.hidden {
            display: none;
        }

        .user-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .user-welcome {
            font-weight: 600;
        }

        .logout-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }

        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Language Selection */
        .language-selector {
            text-align: center;
            margin-bottom: 40px;
            padding: 32px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(44, 62, 80, 0.08);
        }

        .language-selector h2 {
            margin-bottom: 24px;
            color: var(--charcoal);
            font-size: 1.6rem;
            font-weight: 600;
        }

        .language-buttons {
            display: flex;
            gap: 24px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .language-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 40px;
            background: var(--sage-green);
            color: white;
            border: none;
            border-radius: 16px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            min-width: 200px;
            box-shadow: 0 6px 20px rgba(107, 142, 107, 0.25);
        }

        .language-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(107, 142, 107, 0.35);
        }

        .language-btn.active {
            background: var(--soft-gold);
            transform: translateY(-2px);
        }

        .language-btn .flag {
            font-size: 2rem;
            margin-bottom: 12px;
        }

        .language-btn small {
            margin-top: 8px;
            opacity: 0.9;
        }

        /* Learning Style Adaptation */
        .visual-preference-calm {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-left: 4px solid #6c757d;
        }

        .visual-preference-energetic {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border-left: 4px solid #fd7e14;
        }

        .visual-preference-minimal {
            background: white;
            border: 1px solid #dee2e6;
            border-left: 4px solid var(--sage-green);
        }

        .learning-style-indicator {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 8px;
        }

        .adaptive-help {
            background: var(--light-sage);
            border-radius: 12px;
            padding: 16px;
            margin-top: 16px;
            font-size: 14px;
            line-height: 1.5;
        }

        .form-section.adapted {
            border-left: 6px solid var(--soft-gold);
        }

        /* Progress Container */
        .progress-container {
            background: white;
            border-radius: 20px;
            padding: 32px;
            margin-bottom: 32px;
            box-shadow: 0 8px 32px rgba(44, 62, 80, 0.08);
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .step-counter {
            font-weight: 700;
            color: var(--sage-green);
            font-size: 1.3rem;
        }

        .time-estimate {
            background: var(--soft-gold);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .overall-progress {
            width: 100%;
            height: 12px;
            background: var(--light-sage);
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 32px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--sage-green), var(--deep-teal));
            transition: width 0.5s ease;
            border-radius: 6px;
            width: 14.29%;
        }

        .progress-bar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 16px;
            margin-bottom: 0;
        }

        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 16px;
            border-radius: 16px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--sage-alpha);
        }
        
        .progress-step:hover {
            background: var(--teal-alpha);
            transform: translateY(-2px);
        }

        .progress-step.active {
            background: var(--sage-green);
            color: white;
        }

        .progress-step.completed {
            background: var(--deep-teal);
            color: white;
        }

        .progress-step.next {
            background: var(--soft-gold);
            color: white;
        }

        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-bottom: 12px;
            transition: all 0.3s ease;
        }

        .progress-step.active .step-number {
            background: rgba(255, 255, 255, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .step-text {
            font-size: 0.9rem;
            text-align: center;
            font-weight: 600;
        }

        /* Main Card */
        .main-card {
            background: white;
            border-radius: 24px;
            box-shadow: 0 16px 48px rgba(44, 62, 80, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, var(--sage-green), var(--deep-teal));
            color: white;
            padding: 60px 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: shimmer 8s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
        }

        .header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            margin-bottom: 16px;
            position: relative;
            z-index: 1;
            font-weight: 600;
        }

        .header .subtitle {
            font-size: 1.3rem;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            font-weight: 400;
        }

        .badge {
            display: inline-block;
            background: var(--soft-gold);
            color: white;
            padding: 12px 28px;
            border-radius: 30px;
            font-weight: 700;
            margin-top: 24px;
            font-size: 1rem;
            position: relative;
            z-index: 1;
        }

        .header .cta-section {
            margin-top: 40px;
            position: relative;
            z-index: 1;
        }

        .btn-current {
            background: linear-gradient(135deg, var(--soft-gold), #C79660);
            color: white;
            box-shadow: 0 8px 24px rgba(212, 165, 116, 0.3);
            font-size: 1.2rem;
            padding: 20px 40px;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-current:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(212, 165, 116, 0.4);
        }

        .content {
            padding: 50px 40px;
        }

        .step-description {
            background: var(--light-sage);
            padding: 32px;
            border-radius: 16px;
            margin-bottom: 40px;
            border-left: 6px solid var(--sage-green);
        }

        .step-description h2 {
            font-family: 'Playfair Display', serif;
            color: var(--charcoal);
            margin-bottom: 16px;
            font-size: 2rem;
            font-weight: 600;
        }

        .step-description p {
            color: var(--charcoal);
            font-size: 1.1rem;
            opacity: 0.8;
        }

        .empowerment-message {
            background: linear-gradient(135deg, var(--gold-alpha), rgba(212, 165, 116, 0.15));
            border: 2px solid var(--soft-gold);
            border-radius: 20px;
            padding: 32px;
            margin: 32px 0;
            text-align: center;
        }

        .empowerment-title {
            color: var(--charcoal);
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 16px;
            font-family: 'Playfair Display', serif;
        }

        .empowerment-text {
            color: var(--charcoal);
            line-height: 1.7;
            opacity: 0.9;
        }

        .form-section {
            margin-bottom: 40px;
            padding: 40px;
            background: white;
            border-radius: 20px;
            border: 2px solid var(--light-sage);
            box-shadow: 0 4px 16px rgba(107, 142, 107, 0.08);
            position: relative;
        }

        .form-section h3 {
            font-family: 'Playfair Display', serif;
            color: var(--charcoal);
            margin-bottom: 32px;
            font-size: 1.5rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .form-group {
            margin-bottom: 28px;
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            color: var(--charcoal);
            font-size: 1rem;
        }

        .required {
            color: var(--soft-gold);
            margin-left: 4px;
        }

        .form-control {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--light-sage);
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            background: var(--warm-cream);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--sage-green);
            box-shadow: 0 0 0 4px var(--sage-alpha);
            background: white;
        }

        .char-counter {
            position: absolute;
            bottom: 8px;
            right: 12px;
            font-size: 12px;
            color: var(--charcoal);
            opacity: 0.6;
        }

        .validation-message {
            margin-top: 8px;
            font-size: 14px;
            color: #e57373;
        }

        .validation-message.success {
            color: var(--sage-green);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--sage-green), #5A7A5A);
            color: white;
            box-shadow: 0 8px 24px rgba(107, 142, 107, 0.25);
            padding: 18px 36px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(107, 142, 107, 0.35);
        }

        /* Platform Buttons */
        .platform-button {
            display: inline-block;
            padding: 16px 32px;
            border-radius: 12px;
            text-decoration: none;
            color: white;
            font-weight: 600;
            font-size: 16px;
            transition: all 0.3s ease;
            margin: 8px;
            cursor: pointer;
            border: none;
        }

        .platform-button.chatgpt-button {
            background: linear-gradient(135deg, #00a67e, #00c896);
        }

        .platform-button.gemini-button {
            background: linear-gradient(135deg, #4285f4, #34a853);
        }

        .platform-button.claude-button {
            background: linear-gradient(135deg, #cc785c, #d97757);
        }

        .platform-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        }

        /* Business Idea Selector */
        .business-idea-selector {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin: 32px 0;
            border: 2px solid var(--light-sage);
            box-shadow: 0 8px 32px rgba(44, 62, 80, 0.08);
        }

        .idea-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-top: 24px;
        }

        .idea-card {
            background: var(--warm-cream);
            border-radius: 16px;
            padding: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .idea-card:hover,
        .idea-card.selected {
            border-color: var(--sage-green);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(107, 142, 107, 0.2);
        }

        /* Auto-populated prompts */
        .auto-populated-prompt {
            background: var(--light-sage);
            border-radius: 12px;
            padding: 20px;
            margin: 16px 0;
            border-left: 4px solid var(--sage-green);
        }

        .auto-populate-status {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .auto-populate-status.ready {
            background: var(--light-sage);
            color: var(--sage-green);
        }

        /* Returning user status */
        .returning-user-status {
            background: linear-gradient(135deg, var(--gold-alpha), rgba(212, 165, 116, 0.15));
            border: 2px solid var(--soft-gold);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 24px;
            text-align: center;
        }

        /* Celebration section */
        .celebration-section {
            background: linear-gradient(135deg, var(--sage-green), var(--deep-teal));
            color: white;
            padding: 60px 40px;
            text-align: center;
            border-radius: 24px;
            margin: 40px 0;
            position: relative;
            overflow: hidden;
        }

        .celebration-section::before {
            content: 'üéâ';
            position: absolute;
            font-size: 6rem;
            opacity: 0.1;
            animation: celebrate 3s infinite;
        }

        @keyframes celebrate {
            0%, 100% { transform: rotate(-10deg) scale(1); }
            50% { transform: rotate(10deg) scale(1.1); }
        }

        /* Services Section */
        .services-section {
            background: var(--warm-cream);
            padding: 80px 20px;
            margin: 50px -40px -50px -40px;
            border-radius: 0;
        }

        .services-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .services-title {
            font-family: 'Playfair Display', serif;
            text-align: center;
            font-size: 2.8rem;
            color: var(--charcoal);
            margin-bottom: 16px;
            font-weight: 600;
        }

        .services-subtitle {
            text-align: center;
            font-size: 1.3rem;
            color: var(--charcoal);
            opacity: 0.8;
            margin-bottom: 60px;
        }

        .track-section {
            margin-bottom: 80px;
            padding: 50px;
            background: white;
            border-radius: 24px;
            border-left: 8px solid var(--sage-green);
            box-shadow: 0 12px 40px rgba(44, 62, 80, 0.08);
        }

        .track-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            color: var(--charcoal);
            margin-bottom: 16px;
            font-weight: 600;
            text-align: center;
        }

        .track-subtitle {
            font-size: 1.2rem;
            color: var(--charcoal);
            opacity: 0.8;
            text-align: center;
            margin-bottom: 50px;
            line-height: 1.6;
        }

        .service-blocks {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 40px;
            margin-bottom: 30px;
        }

        .service-block {
            background: var(--warm-cream);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 12px 32px rgba(44, 62, 80, 0.08);
            text-align: center;
            position: relative;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 2px solid transparent;
        }

        .service-block:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 48px rgba(44, 62, 80, 0.12);
            border-color: var(--sage-green);
        }

        .popular-service {
            border: 3px solid var(--soft-gold);
            transform: scale(1.02);
            background: white;
        }

        .popular-badge {
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--soft-gold);
            color: white;
            padding: 8px 24px;
            border-radius: 24px;
            font-size: 0.9rem;
            font-weight: 700;
        }

        .service-icon {
            font-size: 1rem;
            font-weight: 700;
            color: var(--sage-green);
            background: var(--light-sage);
            padding: 12px 20px;
            border-radius: 24px;
            display: inline-block;
            margin-bottom: 20px;
        }

        .service-block h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.6rem;
            color: var(--charcoal);
            margin-bottom: 16px;
            font-weight: 600;
        }

        .service-price {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--sage-green);
            margin-bottom: 20px;
            font-family: 'Inter', sans-serif;
        }

        .service-description {
            color: var(--charcoal);
            opacity: 0.8;
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 24px;
        }

        .service-features {
            list-style: none;
            padding: 0;
            margin: 24px 0;
            text-align: left;
        }

        .service-features li {
            padding: 8px 0;
            color: var(--charcoal);
            font-size: 0.95rem;
            position: relative;
            padding-left: 24px;
        }

        .service-features li::before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: var(--sage-green);
            font-weight: 700;
        }

        .service-button {
            width: 100%;
            padding: 18px 32px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 24px;
            font-family: 'Inter', sans-serif;
        }

        .service-button.free-button {
            background: linear-gradient(135deg, var(--sage-green), #5A7A5A);
            color: white;
        }

        .service-button.free-button:hover {
            background: linear-gradient(135deg, #5A7A5A, var(--sage-green));
            transform: translateY(-2px);
        }

        .service-button.premium-button {
            background: linear-gradient(135deg, var(--deep-teal), #1E3D47);
            color: white;
        }

        .service-button.premium-button:hover {
            background: linear-gradient(135deg, #1E3D47, var(--deep-teal));
            transform: translateY(-2px);
        }

        /* Social Proof Section */
        .social-proof-section {
            background: linear-gradient(135deg, var(--teal-alpha), rgba(45, 91, 105, 0.08));
            padding: 80px 20px;
            margin: 50px 0;
            border-radius: 24px;
        }

        .social-proof-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.8rem;
            color: var(--charcoal);
            margin-bottom: 20px;
            font-weight: 600;
            text-align: center;
        }

        .user-counter {
            background: linear-gradient(135deg, var(--sage-green), var(--deep-teal));
            color: white;
            padding: 18px 36px;
            border-radius: 40px;
            font-size: 1.3rem;
            font-weight: 700;
            display: inline-block;
            margin: 24px 0;
            animation: pulse 3s infinite;
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .container {
                padding: 0 16px;
            }
            
            .header h1 {
                font-size: 2.2rem;
            }
            
            .header .subtitle {
                font-size: 1.1rem;
            }
            
            .content {
                padding: 30px 20px;
            }
            
            .form-section {
                padding: 24px;
            }
            
            .progress-bar {
                grid-template-columns: repeat(4, 1fr);
                gap: 8px;
            }

            .progress-step {
                padding: 12px 8px;
            }

            .step-text {
                font-size: 0.7rem;
            }

            .language-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .language-btn {
                min-width: 280px;
            }

            .welcome-content {
                padding: 40px 30px;
            }

            .welcome-buttons {
                flex-direction: column;
            }

            .form-control {
                font-size: 16px;
                padding: 18px;
            }

            .auth-content {
                padding: 30px 20px;
            }

            .user-info {
                flex-direction: column;
                gap: 12px;
            }

            .path-options {
                grid-template-columns: 1fr;
            }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Authentication Modal -->
    <div id="authModal" class="auth-modal">
        <div class="auth-content">
            <button class="auth-close" onclick="closeAuthModal()">&times;</button>
            <h2 class="auth-title" id="authTitle">Create Your Account</h2>
            
            <div id="authError" class="auth-error hidden"></div>
            <div id="authSuccess" class="auth-success hidden"></div>
            
            <form class="auth-form" id="authForm">
                <input type="text" id="authName" class="auth-input" placeholder="Your Name" style="display: none;">
                <input type="email" id="authEmail" class="auth-input" placeholder="Email Address" required>
                <input type="password" id="authPassword" class="auth-input" placeholder="Password" required>
                <input type="password" id="authConfirmPassword" class="auth-input" placeholder="Confirm Password" style="display: none;">
                
                <button type="submit" class="auth-button" id="authSubmitBtn">Create Account</button>
                <button type="button" class="auth-button google-auth-button" onclick="signInWithGoogle()">
                    <svg width="18" height="18" viewBox="0 0 18 18">
                        <path fill="#4285F4" d="M16.51 8H8.98v3h4.3c-.18 1-.74 1.48-1.6 2.04v2.01h2.6a7.8 7.8 0 0 0 2.38-5.88c0-.57-.05-.66-.15-1.18z"/>
                        <path fill="#34A853" d="M8.98 17c2.16 0 3.97-.72 5.3-1.94l-2.6-2.04a-4.8 4.8 0 0 1-7.18-2.53H1.83v2.07A8 8 0 0 0 8.98 17z"/>
                        <path fill="#FBBC05" d="M4.5 10.49a4.8 4.8 0 0 1 0-3.07V5.35H1.83a8 8 0 0 0 0 7.28l2.67-2.14z"/>
                        <path fill="#EA4335" d="M8.98 4.72c1.16 0 2.23.4 3.06 1.2l2.3-2.3A8 8 0 0 0 1.83 5.35L4.5 7.42a4.8 4.8 0 0 1 4.48-2.7z"/>
                    </svg>
                    Sign in with Google
                </button>
            </form>
            
            <div class="auth-switch">
                <span id="authSwitchText">Already have an account?</span>
                <span class="auth-link" id="authSwitchLink" onclick="toggleAuthMode()">Sign In</span>
            </div>
        </div>
    </div>

    <!-- User Status Bar -->
    <div id="userStatusBar" class="user-status-bar hidden">
        <div class="user-info">
            <span class="user-welcome" id="userWelcome"></span>
            <button class="logout-btn" onclick="signOut()">Sign Out</button>
        </div>
    </div>

    <!-- Welcome Modal -->
    <div id="welcomeModal" class="welcome-modal">
        <div class="welcome-content">
            <h2>Welcome to Smart Mom Method!</h2>
            <p>Create your personalized life organization or business plan in 7 simple steps. This brain-friendly process takes approximately 20-25 minutes and generates a comprehensive plan tailored specifically for busy moms like you.</p>
            <div class="welcome-buttons">
                <button class="welcome-btn primary" onclick="startOnboarding()">
                    üöÄ Get Started
                </button>
                <button class="welcome-btn auth" onclick="showAuthModal('signup')">
                    üíæ Create Account & Save Progress
                </button>
                <button class="welcome-btn secondary" onclick="checkReturningUser()">
                    I'm a returning user
                </button>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Language Selection -->
        <div class="language-selector">
            <h2>Choose Your Language / Elige Tu Idioma</h2>
            <div class="language-buttons">
                <button class="language-btn active" onclick="changeLanguage('en')" id="lang-en">
                    <span class="flag">üá∫üá∏</span>
                    <span>English</span>
                    <small>Read and answer everything in English</small>
                </button>
                <button class="language-btn" onclick="changeLanguage('es')" id="lang-es">
                    <span class="flag">üá™üá∏</span>
                    <span>Espa√±ol</span>
                    <small>Lee y responde todo en espa√±ol</small>
                </button>
            </div>
        </div>

        <!-- Social Proof Section -->
        <div class="social-proof-section">
            <div class="social-proof-header">
                <h2 class="social-proof-title">Join 2,847+ Successful Mom Entrepreneurs!</h2>
                <div class="user-counter">
                    <span>üéâ 2,847+ moms have transformed their lives!</span>
                </div>
            </div>
        </div>

        <!-- Progress Container -->
        <div class="progress-container">
            <div class="progress-header">
                <div class="step-counter">Step 1 of 7</div>
                <div class="time-estimate">‚è±Ô∏è Estimated: 5 min</div>
            </div>
            <div class="overall-progress">
                <div class="progress-fill"></div>
            </div>
            <div class="progress-bar">
                <div class="progress-step active">
                    <span class="step-number">1</span>
                    <span class="step-text">Basic Info</span>
                </div>
                <div class="progress-step next">
                    <span class="step-number">2</span>
                    <span class="step-text">ChatGPT</span>
                </div>
                <div class="progress-step">
                    <span class="step-number">3</span>
                    <span class="step-text">Gemini</span>
                </div>
                <div class="progress-step">
                    <span class="step-number">3.5</span>
                    <span class="step-text">Pricing Research</span>
                </div>
                <div class="progress-step">
                    <span class="step-number">4</span>
                    <span class="step-text">Claude</span>
                </div>
                <div class="progress-step">
                    <span class="step-number">5</span>
                    <span class="step-text">Optimize</span>
                </div>
                <div class="progress-step">
                    <span class="step-number">6</span>
                    <span class="step-text">Complete</span>
                </div>
            </div>
        </div>

        <div class="main-card">
            <div class="header">
                <h1>Smart Mom Method</h1>
                <p class="subtitle">AI-Powered Life & Business Planning for Busy Moms</p>
                <span class="badge">100% Free</span>
                
                <div class="cta-section">
                    <button class="btn-current" onclick="scrollToForm()">
                        üöÄ Start Your Free Plan Now
                    </button>
                    <p style="margin-top: 16px; font-size: 0.95rem; opacity: 0.9;">No email required to browse ‚Ä¢ Full process takes 20-25 minutes</p>
                </div>
            </div>

            <div class="content">
                <div class="step-description">
                    <h2>üìã Step 1: Tell Us About Yourself</h2>
                    <p>The more specific you are, the better your personalized AI prompts will be. This information helps create plans that actually fit your real life.</p>
                </div>

                <div class="empowerment-message">
                    <div class="empowerment-title">You're Already Successful! üåü</div>
                    <p class="empowerment-text">Managing a family is running a complex organization. You have negotiation skills, time management expertise, and crisis resolution abilities that most CEOs would envy. Now let's channel that into YOUR success!</p>
                </div>

                <!-- Basic Info Collection -->
                <div class="form-section">
                    <h3>üëã Let's Get Started</h3>
                    
                    <div class="form-group">
                        <label>Your Name: <span class="required">*</span></label>
                        <input type="text" id="user-name" class="form-control" placeholder="Enter your name" onchange="validateField(this)" />
                        <div class="validation-message" id="user-name-validation"></div>
                    </div>

                    <div class="form-group">
                        <label>Your Email: <span class="required">*</span></label>
                        <input type="email" id="user-email" class="form-control" placeholder="your.email@example.com" onchange="validateField(this)" />
                        <div class="validation-message" id="user-email-validation"></div>
                    </div>
                </div>

                <!-- Path Selection -->
                <div id="pathSelection" class="path-selector hidden">
                    <h3>What brings you here today? Choose your main focus:</h3>
                    
                    <div class="path-options">
                        <div class="path-option" onclick="selectPath('life')">
                            <div class="path-icon">üè†</div>
                            <div class="path-title">Life Organization</div>
                            <div class="path-description">I need help organizing my daily life, family schedules, and home systems</div>
                        </div>
                        
                        <div class="path-option" onclick="selectPath('business')">
                            <div class="path-icon">üíº</div>
                            <div class="path-title">Business Launch</div>
                            <div class="path-description">I want to start a business or create passive income streams</div>
                        </div>
                        
                        <div class="path-option" onclick="selectPath('integrated')">
                            <div class="path-icon">üåü</div>
                            <div class="path-title">Both Life & Business</div>
                            <div class="path-description">I need life organization AND want to start a business</div>
                        </div>
                    </div>
                    
                    <button type="button" class="btn-primary" onclick="proceedWithPath()" style="margin-top: 32px;">
                        Continue With Selected Path
                    </button>
                </div>

                <!-- Life Organization Questions -->
                <div id="lifeQuestions" class="hidden">
                    <div class="form-section">
                        <h3>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family & Daily Life</h3>
                        
                        <div class="form-group">
                            <label>Family Structure & Ages: <span class="required">*</span></label>
                            <textarea id="family-structure" class="form-control" rows="3" placeholder="e.g., 'Married with 5-year-old in kindergarten and 2-year-old at home. Husband works full-time. I handle most childcare and household duties.'" onchange="validateField(this)" oninput="updateCharCount(this, 500)"></textarea>
                            <div class="char-counter">0/500</div>
                            <div class="validation-message" id="family-structure-validation"></div>
                        </div>
                        
                        <div class="form-group">
                            <label>Current Overwhelm Areas: <span class="required">*</span></label>
                            <textarea id="overwhelm-areas" class="form-control" rows="3" placeholder="e.g., 'Morning routines are chaotic, meal planning is nonexistent, can't keep up with laundry, never have time for myself'" onchange="validateField(this)" oninput="updateCharCount(this, 500)"></textarea>
                            <div class="char-counter">0/500</div>
                            <div class="validation-message" id="overwhelm-areas-validation"></div>
                        </div>
                        
                        <div class="form-group">
                            <label>Work-From-Home Needs: <span class="required">*</span></label>
                            <textarea id="wfh-needs" class="form-control" rows="2" placeholder="e.g., 'Need quiet time for calls, dedicated workspace, balance work with kids at home'" onchange="validateField(this)" oninput="updateCharCount(this, 300)"></textarea>
                            <div class="char-counter">0/300</div>
                            <div class="validation-message" id="wfh-needs-validation"></div>
                        </div>
                    </div>
                </div>

                <!-- Business Questions -->
                <div id="businessQuestions" class="hidden">
                    <div class="form-section">
                        <h3>üíº Business Goals & Skills</h3>
                        
                        <div class="form-group">
                            <label>Daily Schedule & Availability: <span class="required">*</span></label>
                            <textarea id="daily-schedule" class="form-control" rows="3" placeholder="e.g., 'Free from 9-11am when youngest naps. Kids in bed by 8pm, so I have 8-10pm available. Weekends are family time except Sunday mornings.'" onchange="validateField(this)" oninput="updateCharCount(this, 500)"></textarea>
                            <div class="char-counter">0/500</div>
                            <div class="validation-message" id="daily-schedule-validation"></div>
                        </div>
                        
                        <div class="form-group">
                            <label>Professional Background: <span class="required">*</span></label>
                            <textarea id="skills" class="form-control" rows="3" placeholder="e.g., '10 years in marketing, project management experience, good with Excel and presentations, former teacher, always been the organized one who plans family events.'" onchange="validateField(this)" oninput="updateCharCount(this, 750)"></textarea>
                            <div class="char-counter">0/750</div>
                            <div class="validation-message" id="skills-validation"></div>
                        </div>
                        
                        <div class="form-group">
                            <label>Monthly Income Goal: <span class="required">*</span></label>
                            <textarea id="income-goal" class="form-control" rows="2" placeholder="e.g., '$1,500/month to cover grocery budget, $3,000/month to replace part-time job, $5,000/month for family financial freedom.'" onchange="validateField(this)" oninput="updateCharCount(this, 300)"></textarea>
                            <div class="char-counter">0/300</div>
                            <div class="validation-message" id="income-goal-validation"></div>
                        </div>

                        <div class="form-group">
                            <label>Learning Willingness: <span class="required">*</span></label>
                            <select id="learning-willingness" class="form-control" onchange="validateField(this)">
                                <option value="">Select your approach...</option>
                                <option value="eager">Eager to learn new skills quickly</option>
                                <option value="moderate">Willing to learn gradually</option>
                                <option value="prefer-existing">Prefer using skills I already have</option>
                                <option value="minimal">Minimal learning, maximum results</option>
                            </select>
                            <div class="validation-message" id="learning-willingness-validation"></div>
                        </div>

                        <div class="form-group">
                            <label>Investment Level: <span class="required">*</span></label>
                            <select id="investment-level" class="form-control" onchange="validateField(this)">
                                <option value="">Select investment comfort...</option>
                                <option value="free-only">Free only - no money to invest</option>
                                <option value="minimal">Up to $50 if absolutely necessary</option>
                                <option value="moderate">$50-200 for the right opportunity</option>
                                <option value="invest">$200-500 if it's promising</option>
                                <option value="serious">$500+ ready to invest in my future</option>
                            </select>
                            <div class="validation-message" id="investment-level-validation"></div>
                        </div>

                        <div class="form-group">
                            <label>Preferred Work Location: <span class="required">*</span></label>
                            <select id="work-location" class="form-control" onchange="validateField(this)">
                                <option value="">Select work location...</option>
                                <option value="home-only">Home only - need to be with kids</option>
                                <option value="home-flexible">Mostly home, occasional outings</option>
                                <option value="local-community">Local community/neighborhood</option>
                                <option value="hybrid">Mix of home and outside work</option>
                                <option value="travel-okay">Comfortable traveling for business</option>
                            </select>
                            <div class="validation-message" id="work-location-validation"></div>
                        </div>

                        <div class="form-group">
                            <label>Work Style Preference: <span class="required">*</span></label>
                            <select id="work-style" class="form-control" onchange="validateField(this)">
                                <option value="">Select work style...</option>
                                <option value="independent">Independent work - minimal client interaction</option>
                                <option value="some-interaction">Some client calls/meetings</option>
                                <option value="collaborative">Collaborative - enjoy working with people</option>
                                <option value="teaching-mentoring">Teaching/mentoring others</option>
                                <option value="creative-expressive">Creative and expressive work</option>
                            </select>
                            <div class="validation-message" id="work-style-validation"></div>
                        </div>

                        <div class="form-group">
                            <label>Are you comfortable being on camera/social media? <span class="required">*</span></label>
                            <select id="camera-comfort" class="form-control" onchange="validateField(this)">
                                <option value="">Select your comfort level...</option>
                                <option value="love-it">Love it! I'm comfortable on camera</option>
                                <option value="okay-with-it">Okay with it, can learn</option>
                                <option value="prefer-behind-scenes">Prefer behind-the-scenes work</option>
                                <option value="absolutely-not">Absolutely not comfortable</option>
                            </select>
                            <div class="validation-message" id="camera-comfort-validation"></div>
                        </div>

                        <div class="form-group">
                            <label>Timeline to first income: <span class="required">*</span></label>
                            <select id="income-timeline" class="form-control" onchange="validateField(this)">
                                <option value="">Select timeline...</option>
                                <option value="immediate">Immediate need (within 1-2 months)</option>
                                <option value="moderate">3-6 months is fine</option>
                                <option value="patient">Can wait 6-12 months for good business</option>
                                <option value="long-term">Building for long-term (1+ years)</option>
                            </select>
                            <div class="validation-message" id="income-timeline-validation"></div>
                        </div>

                        <div class="form-group">
                            <label>Maximum startup budget (total): <span class="required">*</span></label>
                            <select id="total-budget" class="form-control" onchange="validateField(this)">
                                <option value="">Select budget...</option>
                                <option value="zero">$0 - Must be completely free</option>
                                <option value="minimal">Under $50 total</option>
                                <option value="moderate">$50-200 if necessary</option>
                                <option value="invest">$200-500 for right opportunity</option>
                                <option value="serious">$500+ ready to invest</option>
                            </select>
                            <div class="validation-message" id="total-budget-validation"></div>
                        </div>
                    </div>
                </div>

                <!-- Continue button based on path -->
                <button type="button" id="continueButton" class="btn-primary hidden" onclick="proceedToStepTwo()">
                    üöÄ Create My Personalized Plan
                </button>

                <!-- Step 2: AI Platform Integration -->
                <div id="step2Content" class="hidden">
                    <div class="step-description">
                        <h2>ü§ñ Step 2: Generate with ChatGPT</h2>
                        <p>We've created a personalized prompt based on your information. Copy this prompt and paste it into ChatGPT to generate your first set of ideas.</p>
                    </div>

                    <div class="auto-populated-prompt">
                        <div class="auto-populate-status ready">‚ú® Prompt Ready</div>
                        <h4>Your Personalized ChatGPT Prompt:</h4>
                        <textarea id="chatgptPrompt" class="form-control" rows="8" readonly></textarea>
                        <button class="btn-primary" onclick="copyToClipboard('chatgptPrompt')">üìã Copy Prompt</button>
                        <a href="https://chat.openai.com" target="_blank" class="platform-button chatgpt-button">Open ChatGPT</a>
                    </div>

                    <div class="form-group">
                        <label>Paste ChatGPT Response Here: <span class="required">*</span></label>
                        <textarea id="chatgpt-response" class="form-control" rows="6" placeholder="Paste the complete response from ChatGPT here..." onchange="parseChatGPTResponse()"></textarea>
                        <div class="validation-message" id="chatgpt-response-validation"></div>
                    </div>

                    <button type="button" class="btn-primary" onclick="proceedToGemini()">
                        üöÄ Continue to Gemini
                    </button>
                </div>

                <!-- Step 3: Gemini Integration -->
                <div id="step3Content" class="hidden">
                    <div class="step-description">
                        <h2>üîç Step 3: Refine with Gemini</h2>
                        <p>Now we'll use Gemini to refine and expand on your ideas with research and validation.</p>
                    </div>

                    <div class="auto-populated-prompt">
                        <div class="auto-populate-status ready">‚ú® Prompt Ready</div>
                        <h4>Your Personalized Gemini Prompt:</h4>
                        <textarea id="geminiPrompt" class="form-control" rows="8" readonly></textarea>
                        <button class="btn-primary" onclick="copyToClipboard('geminiPrompt')">üìã Copy Prompt</button>
                        <a href="https://gemini.google.com" target="_blank" class="platform-button gemini-button">Open Gemini</a>
                    </div>

                    <div class="form-group">
                        <label>Paste Gemini Response Here: <span class="required">*</span></label>
                        <textarea id="gemini-response" class="form-control" rows="6" placeholder="Paste the complete response from Gemini here..." onchange="parseGeminiResponse()"></textarea>
                        <div class="validation-message" id="gemini-response-validation"></div>
                    </div>

                    <button type="button" class="btn-primary" onclick="proceedToPricingResearch()">
                        üöÄ Continue to Pricing Research
                    </button>
                </div>

                <!-- Step 3.5: Realistic Pricing Research -->
                <div id="step3_5Content" class="hidden">
                    <div class="step-description">
                        <h2>üí∞ Step 3.5: Realistic Pricing Research</h2>
                        <p>Before finalizing your plan, let's research realistic pricing for your selected idea. This crucial step ensures you set competitive rates that actually work.</p>
                    </div>

                    <div class="business-idea-selector" id="businessIdeaSelection">
                        <h4>üìù Your Selected Idea:</h4>
                        <div id="selectedBusinessIdea" style="background: var(--light-sage); padding: 20px; border-radius: 12px; margin: 16px 0; font-weight: 600; color: var(--charcoal);">
                            Your idea will appear here after ChatGPT analysis...
                        </div>
                    </div>

                    <div class="auto-populated-prompt">
                        <div class="auto-populate-status ready">‚ú® Pricing Research Prompt Ready</div>
                        <h4>Your Personalized Gemini Deep Research Prompt:</h4>
                        <textarea id="pricingResearchPrompt" class="form-control" rows="10" readonly></textarea>
                        <button class="btn-primary" onclick="copyToClipboard('pricingResearchPrompt')">üìã Copy Pricing Research Prompt</button>
                        <a href="https://gemini.google.com" target="_blank" class="platform-button gemini-button">Open Gemini for Pricing Research</a>
                    </div>

                    <div class="form-group">
                        <label>Paste Pricing Research Response Here: <span class="required">*</span></label>
                        <textarea id="pricing-research-response" class="form-control" rows="6" placeholder="Paste the complete pricing research response from Gemini here..." onchange="validateField(this)"></textarea>
                        <div class="validation-message" id="pricing-research-response-validation"></div>
                    </div>

                    <button type="button" class="btn-primary" onclick="proceedToClaude()">
                        üöÄ Continue to Claude
                    </button>
                </div>

                <!-- Step 4: Claude Integration -->
                <div id="step4Content" class="hidden">
                    <div class="step-description">
                        <h2>üéØ Step 4: Create Your Interactive Calendar</h2>
                        <p>Finally, we'll use Claude to create your comprehensive brain-friendly plan with actionable steps and realistic timelines.</p>
                    </div>

                    <div class="auto-populated-prompt">
                        <div class="auto-populate-status ready">‚ú® Brain-Friendly Plan Prompt Ready</div>
                        <h4>Your Personalized Claude Prompt (Optimized for Focus & Clarity):</h4>
                        <textarea id="claudePrompt" class="form-control" rows="12" readonly></textarea>
                        <button class="btn-primary" onclick="copyToClipboard('claudePrompt')">üìã Copy Prompt</button>
                        <a href="https://claude.ai" target="_blank" class="platform-button claude-button">Open Claude</a>
                    </div>

                    <div class="form-group">
                        <label>Paste Claude Response Here: <span class="required">*</span></label>
                        <textarea id="claude-response" class="form-control" rows="6" placeholder="Paste the complete response from Claude here..." onchange="generateFinalPlan()"></textarea>
                        <div class="validation-message" id="claude-response-validation"></div>
                    </div>

                    <button type="button" class="btn-primary" onclick="completePlan()">
                        üéâ Generate My Interactive Calendar
                    </button>
                </div>

                <!-- Final Plan -->
                <div id="finalPlanContent" class="hidden">
                    <div class="celebration-section">
                        <h2>üéâ Congratulations! Your Plan is Ready!</h2>
                        <p>You've successfully created a comprehensive, brain-friendly plan tailored specifically for your life as a busy mom!</p>
                    </div>

                    <div class="calendar-integration">
                        <h3>üìÖ Activate Your Interactive Calendar</h3>
                        <div class="calendar-instructions">
                            <p><strong>Follow these simple steps to see your interactive calendar:</strong></p>
                            <ol>
                                <li>Copy the code that Claude generated for you</li>
                                <li>Paste it in the box below</li>
                                <li>Click "Generate Interactive Calendar"</li>
                                <li>Your personalized calendar will appear with:
                                    <ul style="margin-top: 8px; padding-left: 20px;">
                                        <li>‚úÖ Daily tasks (max 4 per day)</li>
                                        <li>‚úÖ Step-by-step checkboxes</li>
                                        <li>‚úÖ Progress tracking</li>
                                        <li>‚úÖ Energy level management</li>
                                    </ul>
                                </li>
                            </ol>
                        </div>
                        
                        <div class="calendar-paste-area">
                            <label><strong>Paste Claude's Calendar Code Here:</strong></label>
                            <textarea id="calendar-code" class="form-control" placeholder="Paste the entire code from Claude here..."></textarea>
                            <button class="btn-primary" onclick="generateInteractiveCalendar()" style="margin-top: 16px;">
                                üóìÔ∏è Generate Interactive Calendar
                            </button>
                        </div>
                    </div>

                    <div id="interactiveCalendarContainer" class="hidden">
                        <!-- Interactive calendar will be inserted here -->
                    </div>

                    <button class="btn-primary" onclick="downloadCompletePlan()" style="margin: 32px auto; display: block;">
                        üì• Download Complete Plan & Calendar
                    </button>

                    <div class="form-group">
                        <label>Share Your Success Story (Optional):</label>
                        <textarea id="testimonial" class="form-control" rows="4" placeholder="How was your experience creating your plan? Your story could inspire other moms!"></textarea>
                        <button type="button" class="btn-primary" onclick="submitTestimonial()">
                            üí¨ Share Your Story
                        </button>
                    </div>
                </div>

                <!-- Services Section -->
                <section class="services-section" id="servicesSection">
                    <div class="services-container">
                        <h2 class="services-title">Choose Your Smart Mom Support Level</h2>
                        <p class="services-subtitle">Two specialized tracks designed for your specific needs:</p>
                        
                        <!-- Life Organization Track -->
                        <div class="track-section">
                            <h3 class="track-title">Life Organization Track</h3>
                            <p class="track-subtitle">Perfect for busy moms who want to organize daily life, family schedules, and household management</p>
                            
                            <div class="service-blocks">
                                <!-- Free Support -->
                                <div class="service-block">
                                    <div class="service-icon">FREE</div>
                                    <h3>Life Organization Support</h3>
                                    <p class="service-price">$0</p>
                                    <p class="service-description">Struggling with daily chaos? Let's troubleshoot your family organization challenges together!</p>
                                    <ul class="service-features">
                                        <li>30-minute support call</li>
                                        <li>Family schedule troubleshooting</li>
                                        <li>Organization quick wins</li>
                                        <li>Executive function strategies</li>
                                    </ul>
                                    <button class="service-button free-button" onclick="openCalendly('https://calendly.com/momsurvivaltoolkit/free-smart-mom-call-30-min')">
                                        Book Free Support Call
                                    </button>
                                </div>
                                
                                <!-- Done-For-You Life Calendar -->
                                <div class="service-block popular-service">
                                    <div class="popular-badge">Most Popular</div>
                                    <div class="service-icon">DONE FOR YOU</div>
                                    <h3>Life Organization Calendar</h3>
                                    <p class="service-price">$39</p>
                                    <p class="service-description">I'll create your personalized family organization calendar - meal planning, pickup schedules, household routines!</p>
                                    <ul class="service-features">
                                        <li>Custom family calendar creation</li>
                                        <li>Daily routines & schedules</li>
                                        <li>Meal planning integration</li>
                                        <li>School/activity coordination</li>
                                        <li>Ready-to-download file</li>
                                    </ul>
                                    <button class="service-button premium-button" onclick="handleStripePayment('life-calendar')">
                                        Get My Life Calendar $39
                                    </button>
                                </div>
                                
                                <!-- Life Organization Training -->
                                <div class="service-block">
                                    <div class="service-icon">AI TRAINING</div>
                                    <h3>Life Organization AI Training</h3>
                                    <p class="service-price">$89</p>
                                    <p class="service-description">Get your calendar created PLUS learn executive function strategies and organization systems!</p>
                                    <ul class="service-features">
                                        <li>60-minute training session</li>
                                        <li>Custom calendar creation</li>
                                        <li>Brain-friendly organization tips</li>
                                        <li>Future update training</li>
                                        <li>Family routine optimization</li>
                                    </ul>
                                    <button class="service-button premium-button" onclick="handleStripePayment('life-training')">
                                        Book AI Training $89
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Business Growth Track -->
                        <div class="track-section">
                            <h3 class="track-title">Business Growth Track</h3>
                            <p class="track-subtitle">For mom entrepreneurs who want to build and scale their business while managing family life</p>
                            
                            <div class="service-blocks">
                                <!-- Free Business Support -->
                                <div class="service-block">
                                    <div class="service-icon">FREE</div>
                                    <h3>Business Planning Support</h3>
                                    <p class="service-price">$0</p>
                                    <p class="service-description">Stuck with your business calendar? Let's troubleshoot your entrepreneurial challenges together!</p>
                                    <ul class="service-features">
                                        <li>30-minute strategy call</li>
                                        <li>Business calendar troubleshooting</li>
                                        <li>Revenue planning advice</li>
                                        <li>Mom entrepreneur tips</li>
                                    </ul>
                                    <button class="service-button free-button" onclick="openCalendly('https://calendly.com/momsurvivaltoolkit/30min')">
                                        Book Free Strategy Call
                                    </button>
                                </div>
                                
                                <!-- Done-For-You Business Calendar -->
                                <div class="service-block popular-service">
                                    <div class="popular-badge">Most Popular</div>
                                    <div class="service-icon">BUSINESS</div>
                                    <h3>Business Growth Calendar</h3>
                                    <p class="service-price">$49</p>
                                    <p class="service-description">I'll create your personalized business planning calendar with revenue goals, marketing tasks, and growth strategies!</p>
                                    <ul class="service-features">
                                        <li>Custom business calendar creation</li>
                                        <li>Revenue goal planning</li>
                                        <li>Marketing task scheduling</li>
                                        <li>Client management system</li>
                                        <li>SEO content suggestions</li>
                                    </ul>
                                    <button class="service-button premium-button" onclick="handleStripePayment('business-calendar')">
                                        Get My Business Calendar $49
                                    </button>
                                </div>
                                
                                <!-- Business Training -->
                                <div class="service-block">
                                    <div class="service-icon">AI TRAINING</div>
                                    <h3>Business Growth AI Training</h3>
                                    <p class="service-price">$100</p>
                                    <p class="service-description">Complete business planning system + personal training to scale your mom business successfully!</p>
                                    <ul class="service-features">
                                        <li>90-minute strategy session</li>
                                        <li>Custom business calendar</li>
                                        <li>Revenue optimization training</li>
                                        <li>Marketing automation setup</li>
                                        <li>Ongoing update training</li>
                                    </ul>
                                    <button class="service-button premium-button" onclick="handleStripePayment('business-training')">
                                        Book AI Training $100
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <script>
        // Global Variables
        let currentLanguage = 'en';
        let currentUser = null;
        let formData = {};
        let currentStep = 1;
        let authMode = 'signup';
        let selectedBusinessIdea = '';
        let selectedPath = '';

        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDdnTzAePUyhp_ZCBy-kV6ApwUUbfKSMYg",
            authDomain: "smart-mom-method-4a804.firebaseapp.com",
            projectId: "smart-mom-method-4a804",
            storageBucket: "smart-mom-method-4a804.firebasestorage.app",
            messagingSenderId: "847553438888",
            appId: "1:847553438888:web:3275de458a4e4c0235ce9d",
            measurementId: "G-SKRCMSVH72"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Path Selection Functions
        function selectPath(path) {
            selectedPath = path;
            
            // Update UI
            document.querySelectorAll('.path-option').forEach(option => {
                option.classList.remove('selected');
            });
            event.target.closest('.path-option').classList.add('selected');
        }

        function proceedWithPath() {
            if (!selectedPath) {
                alert('Please select a path before continuing.');
                return;
            }
            
            // Hide path selection
            document.getElementById('pathSelection').classList.add('hidden');
            
            // Show appropriate questions
            if (selectedPath === 'life') {
                document.getElementById('lifeQuestions').classList.remove('hidden');
                document.getElementById('businessQuestions').classList.add('hidden');
            } else if (selectedPath === 'business') {
                document.getElementById('lifeQuestions').classList.add('hidden');
                document.getElementById('businessQuestions').classList.remove('hidden');
            } else if (selectedPath === 'integrated') {
                document.getElementById('lifeQuestions').classList.remove('hidden');
                document.getElementById('businessQuestions').classList.remove('hidden');
            }
            
            // Show continue button
            document.getElementById('continueButton').classList.remove('hidden');
            
            // Save progress
            saveFormProgress();
        }

        // Updated required fields validation for paths
        function getRequiredFieldsByPath() {
            const baseFields = ['user-name', 'user-email'];
            
            if (selectedPath === 'life') {
                return {
                    0: [...baseFields, 'family-structure', 'overwhelm-areas', 'wfh-needs'],
                    1: ['chatgpt-response'],
                    2: ['gemini-response'],
                    3: ['pricing-research-response'],
                    4: ['claude-response'],
                    5: [],
                    6: []
                };
            } else if (selectedPath === 'business') {
                return {
                    0: [...baseFields, 'daily-schedule', 'skills', 'income-goal', 'learning-willingness', 'investment-level', 'work-location', 'work-style', 'camera-comfort', 'income-timeline', 'total-budget'],
                    1: ['chatgpt-response'],
                    2: ['gemini-response'],
                    3: ['pricing-research-response'],
                    4: ['claude-response'],
                    5: [],
                    6: []
                };
            } else {
                return {
                    0: [...baseFields, 'family-structure', 'overwhelm-areas', 'wfh-needs', 'daily-schedule', 'skills', 'income-goal', 'learning-willingness', 'investment-level', 'work-location', 'work-style', 'camera-comfort', 'income-timeline', 'total-budget'],
                    1: ['chatgpt-response'],
                    2: ['gemini-response'],
                    3: ['pricing-research-response'],
                    4: ['claude-response'],
                    5: [],
                    6: []
                };
            }
        }

        // Authentication Functions
        function showAuthModal(mode = 'signup') {
            authMode = mode;
            const modal = document.getElementById('authModal');
            const title = document.getElementById('authTitle');
            const nameField = document.getElementById('authName');
            const confirmPasswordField = document.getElementById('authConfirmPassword');
            const submitBtn = document.getElementById('authSubmitBtn');
            const switchText = document.getElementById('authSwitchText');
            const switchLink = document.getElementById('authSwitchLink');
            
            if (mode === 'signup') {
                title.textContent = 'Create Your Account';
                nameField.style.display = 'block';
                confirmPasswordField.style.display = 'block';
                submitBtn.textContent = 'Create Account';
                switchText.textContent = 'Already have an account?';
                switchLink.textContent = 'Sign In';
            } else {
                title.textContent = 'Welcome Back!';
                nameField.style.display = 'none';
                confirmPasswordField.style.display = 'none';
                submitBtn.textContent = 'Sign In';
                switchText.textContent = "Don't have an account?";
                switchLink.textContent = 'Create Account';
            }
            
            modal.classList.add('active');
            clearAuthMessages();
        }

        function closeAuthModal() {
            document.getElementById('authModal').classList.remove('active');
            clearAuthMessages();
        }

        function toggleAuthMode() {
            authMode = authMode === 'signup' ? 'signin' : 'signup';
            showAuthModal(authMode);
        }

        function clearAuthMessages() {
            document.getElementById('authError').classList.add('hidden');
            document.getElementById('authSuccess').classList.add('hidden');
        }

        function showAuthError(message) {
            const errorDiv = document.getElementById('authError');
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
        }

        function showAuthSuccess(message) {
            const successDiv = document.getElementById('authSuccess');
            successDiv.textContent = message;
            successDiv.classList.remove('hidden');
        }

        // Authentication Event Handlers
        document.getElementById('authForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('authEmail').value;
            const password = document.getElementById('authPassword').value;
            const name = document.getElementById('authName').value;
            const confirmPassword = document.getElementById('authConfirmPassword').value;
            
            clearAuthMessages();
            
            try {
                if (authMode === 'signup') {
                    if (password !== confirmPassword) {
                        showAuthError('Passwords do not match');
                        return;
                    }
                    
                    const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                    await userCredential.user.updateProfile({ displayName: name });
                    
                    // Save user data to Firestore
                    await db.collection('users').doc(userCredential.user.uid).set({
                        name: name,
                        email: email,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        language: currentLanguage
                    });
                    
                    showAuthSuccess('Account created successfully!');
                } else {
                    await auth.signInWithEmailAndPassword(email, password);
                    showAuthSuccess('Welcome back!');
                }
                
                setTimeout(() => {
                    closeAuthModal();
                    startOnboarding();
                }, 1500);
                
            } catch (error) {
                showAuthError(error.message);
            }
        });

        async function signInWithGoogle() {
            try {
                const provider = new firebase.auth.GoogleAuthProvider();
                const result = await auth.signInWithPopup(provider);
                
                // Save user data to Firestore if new user
                const userRef = db.collection('users').doc(result.user.uid);
                const userDoc = await userRef.get();
                
                if (!userDoc.exists) {
                    await userRef.set({
                        name: result.user.displayName,
                        email: result.user.email,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        language: currentLanguage,
                        provider: 'google'
                    });
                }
                
                showAuthSuccess('Welcome! Signed in with Google');
                setTimeout(() => {
                    closeAuthModal();
                    startOnboarding();
                }, 1500);
                
            } catch (error) {
                showAuthError(error.message);
            }
        }

        async function signOut() {
            try {
                await auth.signOut();
                document.getElementById('userStatusBar').classList.add('hidden');
                document.getElementById('welcomeModal').classList.remove('hidden');
            } catch (error) {
                console.error('Sign out error:', error);
            }
        }

        // Auth State Observer
        auth.onAuthStateChanged(async (user) => {
            if (user) {
                currentUser = user;
                document.getElementById('userWelcome').textContent = `Welcome back, ${user.displayName || user.email}!`;
                document.getElementById('userStatusBar').classList.remove('hidden');
                
                // Load user's saved progress
                await loadUserProgress();
            } else {
                currentUser = null;
                document.getElementById('userStatusBar').classList.add('hidden');
            }
        });

        // User Progress Management
        async function loadUserProgress() {
            if (!currentUser) return;
            
            try {
                const progressDoc = await db.collection('progress').doc(currentUser.uid).get();
                if (progressDoc.exists) {
                    const progress = progressDoc.data();
                    
                    // Restore form data
                    Object.keys(progress.formData || {}).forEach(key => {
                        const element = document.getElementById(key);
                        if (element) {
                            element.value = progress.formData[key];
                        }
                    });
                    
                    // Restore current step
                    if (progress.currentStep) {
                        currentStep = progress.currentStep;
                        updateProgressDisplay();
                    }
                    
                    // Restore selected path
                    if (progress.selectedPath) {
                        selectedPath = progress.selectedPath;
                    }
                    
                    // Show returning user status
                    showReturningUserStatus(progress.lastSaved);
                }
            } catch (error) {
                console.error('Error loading progress:', error);
            }
        }

        async function saveFormProgress() {
            if (!currentUser) {
                // Save to localStorage for non-authenticated users
                localStorage.setItem('smartMomWorkflowData', JSON.stringify({
                    formData: collectFormData(),
                    currentStep: currentStep,
                    selectedPath: selectedPath,
                    lastSaved: new Date().toISOString()
                }));
                return;
            }
            
            try {
                await db.collection('progress').doc(currentUser.uid).set({
                    formData: collectFormData(),
                    currentStep: currentStep,
                    selectedPath: selectedPath,
                    lastSaved: firebase.firestore.FieldValue.serverTimestamp(),
                    language: currentLanguage
                }, { merge: true });
            } catch (error) {
                console.error('Error saving progress:', error);
            }
        }

        function showReturningUserStatus(lastSaved) {
            const statusDiv = document.createElement('div');
            statusDiv.className = 'returning-user-status';
            statusDiv.innerHTML = `
                <h4>üéâ Welcome Back!</h4>
                <p>Your progress has been restored from ${lastSaved ? new Date(lastSaved.toDate()).toLocaleDateString() : 'your last session'}.</p>
            `;
            
            const formSection = document.querySelector('.form-section');
            formSection.parentNode.insertBefore(statusDiv, formSection);
        }

        // Form Management Functions
        function collectFormData() {
            return {
                'user-name': document.getElementById('user-name')?.value || '',
                'user-email': document.getElementById('user-email')?.value || '',
                'family-structure': document.getElementById('family-structure')?.value || '',
                'daily-schedule': document.getElementById('daily-schedule')?.value || '',
                'work-status': document.getElementById('work-status')?.value || '',
                'skills': document.getElementById('skills')?.value || '',
                'income-goal': document.getElementById('income-goal')?.value || '',
                'learning-willingness': document.getElementById('learning-willingness')?.value || '',
                'investment-level': document.getElementById('investment-level')?.value || '',
                'work-location': document.getElementById('work-location')?.value || '',
                'work-style': document.getElementById('work-style')?.value || '',
                'camera-comfort': document.getElementById('camera-comfort')?.value || '',
                'income-timeline': document.getElementById('income-timeline')?.value || '',
                'total-budget': document.getElementById('total-budget')?.value || '',
                'overwhelm-areas': document.getElementById('overwhelm-areas')?.value || '',
                'wfh-needs': document.getElementById('wfh-needs')?.value || '',
                'chatgpt-response': document.getElementById('chatgpt-response')?.value || '',
                'gemini-response': document.getElementById('gemini-response')?.value || '',
                'pricing-research-response': document.getElementById('pricing-research-response')?.value || '',
                'claude-response': document.getElementById('claude-response')?.value || ''
            };
        }

        function validateField(field) {
            const fieldId = field.id;
            const value = field.value.trim();
            const validationDiv = document.getElementById(`${fieldId}-validation`);
            
            let isValid = true;
            let message = '';
            
            // Required field validation
            if (field.hasAttribute('required') || field.classList.contains('required')) {
                if (!value) {
                    isValid = false;
                    message = 'This field is required';
                }
            }
            
            // Email validation
            if (field.type === 'email' && value) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(value)) {
                    isValid = false;
                    message = 'Please enter a valid email address';
                }
            }
            
            // Update validation message
            if (validationDiv) {
                validationDiv.textContent = message;
                validationDiv.className = isValid ? 'validation-message success' : 'validation-message';
            }
            
            // Auto-save if authenticated
            if (isValid && currentUser) {
                saveFormProgress();
            }
            
            // Check if we need to show path selection
            const userName = document.getElementById('user-name').value.trim();
            const userEmail = document.getElementById('user-email').value.trim();
            
            if (userName && userEmail && !selectedPath) {
                document.getElementById('pathSelection').classList.remove('hidden');
            }
            
            return isValid;
        }

        function validateCurrentStep() {
            const requiredFields = getRequiredFieldsByPath()[currentStep - 1] || [];
            
            let allValid = true;
            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field && !validateField(field)) {
                    allValid = false;
                }
            });
            
            return allValid;
        }

        function updateCharCount(textarea, maxLength) {
            const counter = textarea.parentNode.querySelector('.char-counter');
            if (counter) {
                const currentLength = textarea.value.length;
                counter.textContent = `${currentLength}/${maxLength}`;
                
                if (currentLength > maxLength) {
                    counter.style.color = '#e57373';
                } else {
                    counter.style.color = '';
                }
            }
        }

        // Progress Management - Updated for 7 steps
        function updateProgressDisplay() {
            const progressFill = document.querySelector('.progress-fill');
            const stepCounter = document.querySelector('.step-counter');
            const progressSteps = document.querySelectorAll('.progress-step');
            
            // Update progress bar
            const progressPercentage = (currentStep / 7) * 100;
            progressFill.style.width = `${progressPercentage}%`;
            
            // Update step counter
            stepCounter.textContent = `Step ${currentStep} of 7`;
            
            // Update step indicators
            progressSteps.forEach((step, index) => {
                step.classList.remove('active', 'completed', 'next');
                
                if (index + 1 < currentStep) {
                    step.classList.add('completed');
                } else if (index + 1 === currentStep) {
                    step.classList.add('active');
                } else if (index + 1 === currentStep + 1) {
                    step.classList.add('next');
                }
            });
        }

        // AI Platform Integration with Path-Specific Prompts
        function generateChatGPTPrompt() {
            const data = collectFormData();
            
            const realismInstructions = `
**CRITICAL INSTRUCTIONS - BE EXTREMELY REALISTIC:**
- This person is a BEGINNER, not an expert
- Be brutally honest about challenges and timelines  
- Don't suggest solutions requiring experience they don't have
- Focus on DOWN-TO-EARTH, practical solutions only
- Consider their family constraints and available time
- Respect their budget constraints completely

Focus on what's ACTUALLY doable for their situation.`;
            
            if (selectedPath === 'life') {
                return `${realismInstructions}

Create a comprehensive life organization system for a busy mom:

**Personal Situation:**
- Name: ${data['user-name']}
- Family: ${data['family-structure']}
- Current Overwhelm Areas: ${data['overwhelm-areas']}
- Work-From-Home Needs: ${data['wfh-needs']}

Please provide:
1. Daily routine optimization (morning, afternoon, evening)
2. Weekly household management system
3. Meal planning strategies
4. School/activity coordination
5. Self-care integration
6. Crisis management protocols

Focus on simple, sustainable systems that reduce overwhelm and create calm.`;
            } else if (selectedPath === 'business') {
                return `${realismInstructions}

Create 3 personalized business ideas for a busy mom:

**Personal Situation:**
- Name: ${data['user-name']}
- Daily Schedule: ${data['daily-schedule']}
- Skills: ${data.skills}
- Income Goal: ${data['income-goal']}
- Learning Willingness: ${data['learning-willingness']}
- Investment Level: ${data['investment-level']}
- Work Location: ${data['work-location']}
- Work Style: ${data['work-style']}
- Camera Comfort: ${data['camera-comfort']}
- Income Timeline: ${data['income-timeline']}
- Total Budget: ${data['total-budget']}

Please provide:
1. 3 specific business ideas that fit her schedule and skills
2. Estimated startup costs for each
3. Expected time to profitability
4. Required weekly time commitment
5. Specific first steps for each idea

Focus on businesses that can be started with minimal investment and time.`;
            } else {
                return `${realismInstructions}

Create an integrated life organization AND business launch plan for a busy mom:

**Personal Situation:**
- Name: ${data['user-name']}
- Family: ${data['family-structure']}
- Overwhelm Areas: ${data['overwhelm-areas']}
- Skills: ${data.skills}
- Income Goal: ${data['income-goal']}

Please provide:
PHASE 1 - Life Foundation (Weeks 1-4):
1. Daily routine optimization
2. Household management systems
3. Family schedule coordination

PHASE 2 - Business Preparation (Weeks 5-8):
1. 3 business ideas that fit around family life
2. Time carving strategies
3. Family integration planning

Focus on stabilizing life FIRST, then building business on solid foundation.`;
            }
        }

        function autoPopulateGeminiPrompt() {
            const data = collectFormData();
            const chatgptIdeas = data['chatgpt-response'];
            
            const realismInstructions = `
**CRITICAL INSTRUCTIONS - BE EXTREMELY REALISTIC:**
- This person is a BEGINNER, not an expert
- Be brutally honest about challenges and timelines  
- Focus on DOWN-TO-EARTH, practical solutions only`;
            
            if (selectedPath === 'life') {
                return `${realismInstructions}

Based on this life organization plan for a busy mom: 

${chatgptIdeas}

Please provide:
1. Potential obstacles and realistic solutions
2. Energy management strategies
3. Family buy-in techniques
4. Simplified versions for overwhelming days
5. Progress tracking methods
6. Maintenance strategies

Focus on making the systems sustainable and flexible for real mom life.`;
            } else {
                return `${realismInstructions}

Based on these business ideas generated for a busy mom: 

${chatgptIdeas}

Please provide:
1. Market research and validation
2. Target audience analysis
3. Competition assessment
4. Marketing strategies for busy moms
5. Potential challenges and solutions
6. Revenue projections (conservative)

Focus on practical insights that a mom can implement while managing family.`;
            }
        }

        function generatePricingResearchPrompt() {
            const data = collectFormData();
            const selectedIdea = selectedBusinessIdea || 'the selected idea';
            const userLocation = 'Lincoln, Nebraska';
            
            if (selectedPath === 'life') {
                return `Research realistic pricing for life organization services/products:

**Service Context:**
- Type: Life organization support for busy moms
- Location: ${userLocation}

**PRICING RESEARCH NEEDED:**

1. **Life Coaching/Organization Services:**
   - Beginner rates for new organizers
   - Experienced professional rates
   - Package vs hourly pricing

2. **Digital Products (Planners, Systems):**
   - Single product pricing
   - Bundle pricing strategies
   - Subscription models

3. **Local Market Analysis:**
   - What do moms actually pay for organization help?
   - Competition pricing
   - Value perception

BE REALISTIC about what busy moms will actually pay for help.`;
            } else {
                return `Research realistic pricing for ${selectedIdea} specifically for someone just starting:

**Personal Context:**
- Complete beginner with no business experience
- Daily Schedule: ${data['daily-schedule']}
- Investment Level: ${data['investment-level'] || 'minimal'}
- Income Timeline: ${data['income-timeline'] || 'flexible'}
- Location: ${userLocation}

**PRICING RESEARCH NEEDED:**

1. **Beginner Pricing (Month 1-6):** What should someone with no experience charge?
2. **Developing Skills (Month 6-18):** When to raise prices
3. **Experienced Rates (18+ months):** Expert pricing
4. **Geographic Considerations:** Market rates for ${userLocation}
5. **Common Pricing Mistakes:** What kills new businesses
6. **Competition Analysis:** Real competitor pricing

BE BRUTALLY HONEST about realistic expectations for beginners.`;
            }
        }

        function autoPopulateClaudePrompt() {
            const data = collectFormData();
            const chatgptIdeas = data['chatgpt-response'];
            const geminiAnalysis = data['gemini-response'];
            const pricingResearch = data['pricing-research-response'];
            
            const realismInstructions = `
**CRITICAL INSTRUCTIONS - BE EXTREMELY REALISTIC:**
- This person is dealing with real life challenges
- Be honest about timelines and expectations
- Focus on sustainable, practical solutions
- Consider energy levels and family interruptions`;

            const brainFriendlyInstructions = `
**CRITICAL: Design this calendar for optimal focus and clarity**

DAILY STRUCTURE RULES:
- MAXIMUM 4 tasks per day (never exceed)
- Each task broken into 3-7 specific sub-steps
- Clear, detailed instructions
- Include exact links/resources needed
- Add time estimates with buffer time
- Build in flexibility for life happening

TASK FORMAT EXAMPLE:
‚úÖ Task 1: [Clear Task Name] (Time: 30 minutes)
  ‚ñ° Step 1: [Specific action with details]
  ‚ñ° Step 2: [Next specific action]
  ‚ñ° Step 3: [Final action to complete task]`;
            
            let prompt = `${realismInstructions}

${brainFriendlyInstructions}

Create a comprehensive brain-friendly implementation plan based on:`;

            if (selectedPath === 'life') {
                prompt += `

**Life Organization Plan:**
${chatgptIdeas}

**Challenges & Solutions:**
${geminiAnalysis}

**Service Pricing Research:**
${pricingResearch}

**Mom's Profile:**
- Family: ${data['family-structure']}
- Overwhelm Areas: ${data['overwhelm-areas']}
- Work-From-Home Needs: ${data['wfh-needs']}

Please create a 12-week life organization calendar including:
1. Week-by-week implementation plan
2. Daily routines with specific times
3. System setup tasks (max 4/day)
4. Family integration strategies
5. Progress milestones
6. Maintenance protocols

Format as an interactive calendar with daily tasks and checkboxes.`;
            } else if (selectedPath === 'business') {
                prompt += `

**Business Ideas:**
${chatgptIdeas}

**Market Analysis:**
${geminiAnalysis}

**Pricing Research:**
${pricingResearch}

**Mom's Profile:**
- Schedule: ${data['daily-schedule']}
- Skills: ${data.skills}
- Goal: ${data['income-goal']}

Please create a 12-week business launch calendar including:
1. Week-by-week business building tasks
2. Daily action items (max 4/day)
3. Skill development schedule
4. Marketing implementation
5. Revenue milestones
6. Work-life balance integration

Format as an interactive calendar with checkable tasks.`;
            } else {
                prompt += `

**Integrated Plan:**
${chatgptIdeas}

**Analysis:**
${geminiAnalysis}

**Pricing Research:**
${pricingResearch}

Create a phased 12-week calendar:

WEEKS 1-4: Life Foundation
- Stabilize daily routines
- Create household systems
- Establish family schedules

WEEKS 5-8: Business Preparation
- Market research tasks
- Skill building
- Business setup

WEEKS 9-12: Business Launch
- Marketing implementation
- First client acquisition
- System optimization

Format with daily tasks, clear timelines, and family-friendly scheduling.`;
            }

            return prompt;
        }

        function parseChatGPTResponse() {
            const response = document.getElementById('chatgpt-response').value;
            if (response.trim()) {
                // Auto-generate Gemini prompt
                document.getElementById('geminiPrompt').value = autoPopulateGeminiPrompt();
                
                // Extract business idea for pricing research
                if (selectedPath !== 'life') {
                    extractBusinessIdea(response);
                }
                
                // Save progress
                saveFormProgress();
            }
        }

        function parseGeminiResponse() {
            const response = document.getElementById('gemini-response').value;
            if (response.trim()) {
                // Save progress
                saveFormProgress();
            }
        }

        function extractBusinessIdea(chatgptResponse) {
            // Simple extraction - take first business idea mentioned
            const lines = chatgptResponse.split('\n');
            for (let line of lines) {
                if (line.includes('1.') || line.includes('Business Idea 1') || line.includes('Option 1')) {
                    selectedBusinessIdea = line.replace(/^\d+\.?\s*/, '').trim();
                    break;
                }
            }
            
            // Fallback: take first sentence that looks like a business idea
            if (!selectedBusinessIdea) {
                const sentences = chatgptResponse.split('.');
                for (let sentence of sentences) {
                    if (sentence.length > 20 && sentence.length < 100) {
                        selectedBusinessIdea = sentence.trim();
                        break;
                    }
                }
            }
            
            // Update UI
            const businessIdeaDiv = document.getElementById('selectedBusinessIdea');
            if (businessIdeaDiv) {
                businessIdeaDiv.textContent = selectedBusinessIdea || 'Selected idea from ChatGPT response';
            }
        }

        // Step Navigation - Updated for paths
        function proceedToStepTwo() {
            if (!validateCurrentStep()) {
                alert('Please fill in all required fields before continuing.');
                return;
            }
            
            if (!selectedPath) {
                alert('Please select your path first.');
                return;
            }
            
            currentStep = 2;
            updateProgressDisplay();
            
            // Generate personalized prompt based on path
            document.getElementById('chatgptPrompt').value = generateChatGPTPrompt();
            
            // Show step 2 content
            document.getElementById('step2Content').classList.remove('hidden');
            document.getElementById('step2Content').scrollIntoView({ behavior: 'smooth' });
            
            // Save progress
            saveFormProgress();
        }

        function proceedToGemini() {
            if (!document.getElementById('chatgpt-response').value.trim()) {
                alert('Please paste your ChatGPT response before continuing.');
                return;
            }
            
            currentStep = 3;
            updateProgressDisplay();
            
            // Show step 3 content
            document.getElementById('step3Content').classList.remove('hidden');
            document.getElementById('step3Content').scrollIntoView({ behavior: 'smooth' });
            
            // Save progress
            saveFormProgress();
        }

        function proceedToPricingResearch() {
            if (!document.getElementById('gemini-response').value.trim()) {
                alert('Please paste your Gemini response before continuing.');
                return;
            }
            
            currentStep = 4; // Step 3.5 in display but step 4 in logic
            updateProgressDisplay();
            
            // Generate pricing research prompt
            document.getElementById('pricingResearchPrompt').value = generatePricingResearchPrompt();
            
            // Show step 3.5 content
            document.getElementById('step3_5Content').classList.remove('hidden');
            document.getElementById('step3_5Content').scrollIntoView({ behavior: 'smooth' });
            
            // Save progress
            saveFormProgress();
        }

        function proceedToClaude() {
            if (!document.getElementById('pricing-research-response').value.trim()) {
                alert('Please paste your pricing research response before continuing.');
                return;
            }
            
            currentStep = 5;
            updateProgressDisplay();
            
            // Auto-generate Claude prompt
            document.getElementById('claudePrompt').value = autoPopulateClaudePrompt();
            
            // Show step 4 content
            document.getElementById('step4Content').classList.remove('hidden');
            document.getElementById('step4Content').scrollIntoView({ behavior: 'smooth' });
            
            // Save progress
            saveFormProgress();
        }

        function completePlan() {
            if (!document.getElementById('claude-response').value.trim()) {
                alert('Please paste your Claude response before completing.');
                return;
            }
            
            currentStep = 7;
            updateProgressDisplay();
            
            generateFinalPlan();
            
            // Show final content
            document.getElementById('finalPlanContent').classList.remove('hidden');
            document.getElementById('finalPlanContent').scrollIntoView({ behavior: 'smooth' });
            
            // Save progress
            saveFormProgress();
        }

        function generateFinalPlan() {
            // Combine all AI responses into final plan
            const data = collectFormData();
            formData.finalPlan = {
                chatgpt: data['chatgpt-response'],
                gemini: data['gemini-response'],
                pricingResearch: data['pricing-research-response'],
                claude: data['claude-response'],
                generatedAt: new Date().toISOString()
            };
        }

        // Interactive Calendar Generation
        function generateInteractiveCalendar() {
            const calendarCode = document.getElementById('calendar-code').value.trim();
            
            if (!calendarCode) {
                alert('Please paste the calendar code from Claude first.');
                return;
            }
            
            // Here you would parse the Claude response and generate the interactive calendar
            // For now, show a placeholder message
            const container = document.getElementById('interactiveCalendarContainer');
            container.innerHTML = `
                <div style="background: var(--light-sage); padding: 40px; border-radius: 20px; text-align: center; margin: 32px 0;">
                    <h3 style="color: var(--sage-green); margin-bottom: 16px;">üóìÔ∏è Interactive Calendar Generated!</h3>
                    <p>Your personalized ${selectedPath === 'life' ? 'life organization' : selectedPath === 'business' ? 'business launch' : 'integrated'} calendar is ready.</p>
                    <p style="margin-top: 16px;">The interactive features will be fully activated in the next update.</p>
                </div>
            `;
            
            container.classList.remove('hidden');
            
            // Save calendar data
            formData.interactiveCalendar = calendarCode;
            saveFormProgress();
        }

        // Utility Functions
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            element.select();
            document.execCommand('copy');
            
            // Show feedback
            const button = event.target;
            const originalText = button.textContent;
            button.textContent = '‚úÖ Copied!';
            setTimeout(() => {
                button.textContent = originalText;
            }, 2000);
        }

        function downloadCompletePlan() {
            const data = collectFormData();
            const planType = selectedPath === 'life' ? 'LIFE ORGANIZATION' : 
                           selectedPath === 'business' ? 'BUSINESS LAUNCH' : 
                           'INTEGRATED LIFE & BUSINESS';
            
            const planContent = `
SMART MOM METHOD - ${planType} PLAN
Generated: ${new Date().toLocaleDateString()}

=== PERSONAL PROFILE ===
Name: ${data['user-name']}
Email: ${data['user-email']}
Path Selected: ${selectedPath}
${selectedPath !== 'business' ? `Family Structure: ${data['family-structure']}` : ''}
${selectedPath !== 'business' ? `Overwhelm Areas: ${data['overwhelm-areas']}` : ''}
${selectedPath !== 'life' ? `Skills: ${data.skills}` : ''}
${selectedPath !== 'life' ? `Income Goal: ${data['income-goal']}` : ''}

=== AI-GENERATED CONTENT ===

CHATGPT RESPONSE:
${data['chatgpt-response']}

GEMINI ANALYSIS:
${data['gemini-response']}

PRICING RESEARCH:
${data['pricing-research-response']}

CLAUDE IMPLEMENTATION PLAN:
${data['claude-response']}

=== INTERACTIVE CALENDAR ===
${formData.interactiveCalendar || 'Calendar code not yet generated'}

Generated with Smart Mom Method - smartmommethod.com
            `;
            
            const blob = new Blob([planContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `smart-mom-${selectedPath}-plan-${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        async function submitTestimonial() {
            const testimonial = document.getElementById('testimonial').value.trim();
            if (!testimonial) {
                alert('Please write your testimonial before submitting.');
                return;
            }
            
            try {
                // Submit to webhook
                const formData = new FormData();
                formData.append('testimonial', testimonial);
                formData.append('user_name', currentUser?.displayName || 'Anonymous');
                formData.append('selected_path', selectedPath);
                formData.append('timestamp', new Date().toISOString());
                
                await fetch('https://momsurvivaltoolkit.app.n8n.cloud/webhook-test/smart-mom-form', {
                    method: 'POST',
                    body: formData
                });
                
                if (currentUser) {
                    await db.collection('testimonials').add({
                        userId: currentUser.uid,
                        userName: currentUser.displayName || 'Anonymous',
                        testimonial: testimonial,
                        selectedPath: selectedPath,
                        submittedAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                }
                
                alert('Thank you for sharing your story! Your testimonial has been submitted.');
                document.getElementById('testimonial').value = '';
            } catch (error) {
                console.error('Error submitting testimonial:', error);
                alert('Thank you for your feedback! We appreciate your story.');
            }
        }

        // Service Integration Functions
        function handleStripePayment(service) {
            const stripeUrls = {
                'life-calendar': 'https://buy.stripe.com/cN100gj9M0fo83eUa1a17Vm07',
                'life-training': 'https://buy.stripe.com/5kQ6oHb946RSn22zbz7Vm06',
                'business-calendar': 'https://buy.stripe.com/3cI8wP7NS2BmbLqgc9L7Vm05',
                'business-training': 'https://buy.stripe.com/fZu8wP8RW1x8i18eec97Vm04'
            };
            
            const url = stripeUrls[service];
            if (url) {
                window.open(url, '_blank');
            }
        }

        function openCalendly(url) {
            window.open(url, '_blank');
        }

        // Core Functions
        function startOnboarding() {
            document.getElementById('welcomeModal').classList.add('hidden');
        }

        function checkReturningUser() {
            // Check for saved data
            const savedData = localStorage.getItem('smartMomWorkflowData');
            
            if (savedData || currentUser) {
                if (currentUser) {
                    // User is authenticated, load their progress
                    loadUserProgress();
                    startOnboarding();
                } else if (savedData) {
                    // Load from localStorage
                    const data = JSON.parse(savedData);
                    Object.keys(data.formData || {}).forEach(key => {
                        const element = document.getElementById(key);
                        if (element) {
                            element.value = data.formData[key];
                        }
                    });
                    
                    if (data.currentStep) {
                        currentStep = data.currentStep;
                        updateProgressDisplay();
                    }
                    
                    if (data.selectedPath) {
                        selectedPath = data.selectedPath;
                    }
                    
                    showReturningUserStatus(data.lastSaved);
                    startOnboarding();
                }
            } else {
                showAuthModal('signin');
            }
        }

        function changeLanguage(lang) {
            currentLanguage = lang;
            
            // Update active language button
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`lang-${lang}`).classList.add('active');
            
            // Save language preference
            if (currentUser) {
                db.collection('users').doc(currentUser.uid).update({
                    language: lang
                }).catch(console.error);
            }
        }

        function scrollToForm() {
            const formSection = document.querySelector('.form-section');
            if (formSection) {
                formSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        // Auto-animate user counter
        let userCount = 2847;
        function animateUserCounter() {
            setInterval(() => {
                userCount += Math.floor(Math.random() * 3);
                const counterElement = document.querySelector('.user-counter span');
                if (counterElement) {
                    counterElement.textContent = `üéâ ${userCount.toLocaleString()}+ moms have transformed their lives!`;
                }
            }, 5000);
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', () => {
            animateUserCounter();
            
            // Auto-save form data as user types
            document.addEventListener('input', (e) => {
                if (e.target.classList.contains('form-control') && currentUser) {
                    clearTimeout(window.autoSaveTimer);
                    window.autoSaveTimer = setTimeout(saveFormProgress, 2000);
                }
            });
        });
    </script>
</body>
</html>
