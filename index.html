<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Mom Method - AI Interactive Calendar & Business Wizard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --sage-green: #6B8E6B;
            --warm-cream: #FAF7F0;
            --deep-teal: #2D5B69;
            --charcoal: #2C3E50;
            --soft-gold: #D4A574;
            --light-sage: #E8F5E8;
            --sage-alpha: rgba(107, 142, 107, 0.1);
            --teal-alpha: rgba(45, 91, 105, 0.1);
            --gold-alpha: rgba(212, 165, 116, 0.1);
            --step-current: #3498db;
            --step-completed: #27ae60;
            --step-pending: #95a5a6;
            --button-next: #2ecc71;
            --button-done: #7f8c8d;
            --button-back: #e74c3c;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--charcoal);
            background: var(--warm-cream);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Authentication Modal */
        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(44, 62, 80, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
        }

        .auth-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .auth-content {
            background: white;
            border-radius: 24px;
            padding: 50px;
            max-width: 500px;
            width: 90%;
            position: relative;
            transform: translateY(20px);
            transition: transform 0.4s ease;
        }

        .auth-modal.active .auth-content {
            transform: translateY(0);
        }

        .auth-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--charcoal);
            opacity: 0.7;
        }

        .auth-close:hover {
            opacity: 1;
        }

        .auth-title {
            font-family: 'Playfair Display', serif;
            color: var(--sage-green);
            margin-bottom: 32px;
            font-size: 2rem;
            text-align: center;
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .auth-input {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--light-sage);
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }

        .auth-input:focus {
            outline: none;
            border-color: var(--sage-green);
            box-shadow: 0 0 0 4px var(--sage-alpha);
        }

        .auth-button {
            background: linear-gradient(135deg, var(--sage-green), #5A7A5A);
            color: white;
            padding: 18px 36px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .auth-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(107, 142, 107, 0.35);
        }

        .auth-switch {
            text-align: center;
            margin-top: 24px;
            color: var(--charcoal);
            opacity: 0.8;
        }

        .auth-link {
            color: var(--sage-green);
            cursor: pointer;
            text-decoration: underline;
        }

        .auth-error {
            background: #ffebee;
            border: 1px solid #e57373;
            color: #c62828;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            font-size: 14px;
        }

        .auth-success {
            background: #e8f5e8;
            border: 1px solid var(--sage-green);
            color: var(--sage-green);
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            font-size: 14px;
        }

        /* Welcome Modal */
        .welcome-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(44, 62, 80, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 1;
            visibility: visible;
            transition: all 0.4s ease;
        }

        .welcome-modal.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .welcome-content {
            background: white;
            border-radius: 24px;
            padding: 60px 50px;
            max-width: 600px;
            width: 90%;
            text-align: center;
            transform: translateY(0);
            transition: transform 0.4s ease;
            box-shadow: 0 30px 80px rgba(44, 62, 80, 0.2);
        }

        .welcome-content h2 {
            font-family: 'Playfair Display', serif;
            color: var(--sage-green);
            margin-bottom: 24px;
            font-size: 2.4rem;
            font-weight: 600;
        }

        .welcome-content p {
            color: var(--charcoal);
            margin-bottom: 40px;
            font-size: 1.1rem;
            line-height: 1.7;
            opacity: 0.8;
        }

        .welcome-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .welcome-btn {
            padding: 18px 36px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
            font-family: 'Inter', sans-serif;
        }

        .welcome-btn.primary {
            background: linear-gradient(135deg, var(--sage-green), #5A7A5A);
            color: white;
            box-shadow: 0 8px 24px rgba(107, 142, 107, 0.3);
        }

        .welcome-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(107, 142, 107, 0.4);
        }

        .welcome-btn.secondary {
            background: var(--deep-teal);
            color: white;
        }

        .welcome-btn.secondary:hover {
            background: #1E3D47;
            transform: translateY(-2px);
        }

        .welcome-btn.auth {
            background: var(--soft-gold);
            color: white;
        }

        .welcome-btn.auth:hover {
            background: #C79660;
            transform: translateY(-2px);
        }

        /* Language Selection */
        .language-selector {
            text-align: center;
            margin-bottom: 40px;
            padding: 32px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(44, 62, 80, 0.08);
        }

        .language-selector h2 {
            margin-bottom: 24px;
            color: var(--charcoal);
            font-size: 1.6rem;
            font-weight: 600;
        }

        .language-buttons {
            display: flex;
            gap: 24px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .language-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 40px;
            background: var(--sage-green);
            color: white;
            border: none;
            border-radius: 16px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            min-width: 200px;
            box-shadow: 0 6px 20px rgba(107, 142, 107, 0.25);
        }

        .language-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(107, 142, 107, 0.35);
        }

        .language-btn.active {
            background: var(--soft-gold);
            transform: translateY(-2px);
        }

        .language-btn .flag {
            font-size: 2rem;
            margin-bottom: 12px;
        }

        .language-btn small {
            margin-top: 8px;
            opacity: 0.9;
        }

        /* Progress Container */
        .progress-container {
            background: white;
            border-radius: 20px;
            padding: 32px;
            margin-bottom: 32px;
            box-shadow: 0 8px 32px rgba(44, 62, 80, 0.08);
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .step-counter {
            font-weight: 700;
            color: var(--sage-green);
            font-size: 1.3rem;
        }

        .time-estimate {
            background: var(--soft-gold);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .overall-progress {
            width: 100%;
            height: 12px;
            background: var(--light-sage);
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 32px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--sage-green), var(--deep-teal));
            transition: width 0.5s ease;
            border-radius: 6px;
            width: 16.67%;
        }

        .progress-bar {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 16px;
            margin-bottom: 0;
        }

        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 16px;
            border-radius: 16px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--sage-alpha);
        }
        
        .progress-step:hover {
            background: var(--teal-alpha);
            transform: translateY(-2px);
        }

        .progress-step.active {
            background: var(--step-current);
            color: white;
        }

        .progress-step.completed {
            background: var(--step-completed);
            color: white;
        }

        .progress-step.pending {
            background: var(--step-pending);
            color: white;
        }

        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-bottom: 12px;
            transition: all 0.3s ease;
        }

        .progress-step.active .step-number {
            background: rgba(255, 255, 255, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .step-text {
            font-size: 0.9rem;
            text-align: center;
            font-weight: 600;
        }

        /* Main Card */
        .main-card {
            background: white;
            border-radius: 24px;
            box-shadow: 0 16px 48px rgba(44, 62, 80, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, var(--sage-green), var(--deep-teal));
            color: white;
            padding: 60px 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: shimmer 8s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
        }

        .header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            margin-bottom: 16px;
            position: relative;
            z-index: 1;
            font-weight: 600;
        }

        .header .subtitle {
            font-size: 1.3rem;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            font-weight: 400;
        }

        .badge {
            display: inline-block;
            background: var(--soft-gold);
            color: white;
            padding: 12px 28px;
            border-radius: 30px;
            font-weight: 700;
            margin-top: 24px;
            font-size: 1rem;
            position: relative;
            z-index: 1;
        }

        .header .cta-section {
            margin-top: 40px;
            position: relative;
            z-index: 1;
        }

        .btn-current {
            background: linear-gradient(135deg, var(--soft-gold), #C79660);
            color: white;
            box-shadow: 0 8px 24px rgba(212, 165, 116, 0.3);
            font-size: 1.2rem;
            padding: 20px 40px;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-current:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(212, 165, 116, 0.4);
        }

        .content {
            padding: 50px 40px;
        }

        .step-description {
            background: var(--light-sage);
            padding: 32px;
            border-radius: 16px;
            margin-bottom: 40px;
            border-left: 6px solid var(--sage-green);
        }

        .step-description h2 {
            font-family: 'Playfair Display', serif;
            color: var(--charcoal);
            margin-bottom: 16px;
            font-size: 2rem;
            font-weight: 600;
        }

        .step-description p {
            color: var(--charcoal);
            font-size: 1.1rem;
            opacity: 0.8;
        }

        .empowerment-message {
            background: linear-gradient(135deg, var(--gold-alpha), rgba(212, 165, 116, 0.15));
            border: 2px solid var(--soft-gold);
            border-radius: 20px;
            padding: 32px;
            margin: 32px 0;
            text-align: center;
        }

        .empowerment-title {
            color: var(--charcoal);
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 16px;
            font-family: 'Playfair Display', serif;
        }

        .empowerment-text {
            color: var(--charcoal);
            line-height: 1.7;
            opacity: 0.9;
        }

        /* Form Sections */
        .form-section {
            margin-bottom: 40px;
            padding: 40px;
            background: white;
            border-radius: 20px;
            border: 2px solid var(--light-sage);
            box-shadow: 0 4px 16px rgba(107, 142, 107, 0.08);
        }

        .form-section h2 {
            font-family: 'Playfair Display', serif;
            color: var(--charcoal);
            margin-bottom: 32px;
            font-size: 1.8rem;
            font-weight: 600;
            text-align: center;
        }

        .form-group {
            margin-bottom: 28px;
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            color: var(--charcoal);
            font-size: 1rem;
        }

        .required {
            color: var(--soft-gold);
            margin-left: 4px;
        }

        .form-control {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--light-sage);
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            background: var(--warm-cream);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--sage-green);
            box-shadow: 0 0 0 4px var(--sage-alpha);
            background: white;
        }

        .validation-message {
            margin-top: 8px;
            font-size: 14px;
            color: #e57373;
        }

        .validation-message.success {
            color: var(--sage-green);
        }

        .char-counter {
            text-align: right;
            font-size: 12px;
            color: var(--charcoal);
            opacity: 0.6;
            margin-top: 4px;
        }

        /* Path Selection */
        .path-selection {
            margin: 50px 0;
            text-align: center;
        }

        .path-selection h2 {
            font-family: 'Playfair Display', serif;
            color: var(--charcoal);
            margin-bottom: 40px;
            font-size: 2.2rem;
            font-weight: 600;
        }

        .path-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .path-option {
            background: var(--warm-cream);
            border-radius: 20px;
            padding: 40px 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            position: relative;
            text-align: center;
        }

        .path-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(107, 142, 107, 0.2);
            border-color: var(--sage-green);
        }

        .path-option.selected {
            border-color: var(--soft-gold);
            background: white;
            transform: translateY(-3px);
            box-shadow: 0 12px 36px rgba(212, 165, 116, 0.25);
        }

        .path-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            display: block;
        }

        .path-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--charcoal);
            margin-bottom: 16px;
        }

        .path-description {
            color: var(--charcoal);
            opacity: 0.8;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .continue-btn {
            background: linear-gradient(135deg, var(--sage-green), #5A7A5A);
            color: white;
            padding: 18px 40px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 30px;
            opacity: 0;
            transform: translateY(20px);
            pointer-events: none;
        }

        .continue-btn.visible {
            opacity: 1;
            transform: translateY(0);
            pointer-events: all;
        }

        .continue-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(107, 142, 107, 0.3);
        }

        /* Enhanced Interactive AI Steps */
        .interactive-ai-workflow {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            border: 2px solid var(--light-sage);
        }

        .ai-step-container {
            margin: 40px 0;
            padding: 30px;
            border-radius: 16px;
            border: 3px solid var(--step-pending);
            transition: all 0.3s ease;
        }

        .ai-step-container.current {
            border-color: var(--step-current);
            background: rgba(52, 152, 219, 0.05);
        }

        .ai-step-container.completed {
            border-color: var(--step-completed);
            background: rgba(39, 174, 96, 0.05);
        }

        .ai-step-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .ai-step-title {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--charcoal);
        }

        .ai-step-number {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--step-pending);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .ai-step-container.current .ai-step-number {
            background: var(--step-current);
        }

        .ai-step-container.completed .ai-step-number {
            background: var(--step-completed);
        }

        .ai-step-status {
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            background: var(--step-pending);
            color: white;
        }

        .ai-step-container.current .ai-step-status {
            background: var(--step-current);
        }

        .ai-step-container.completed .ai-step-status {
            background: var(--step-completed);
        }

        .ai-step-content {
            margin: 20px 0;
        }

        .ai-prompt-area {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
        }

        .ai-prompt-label {
            font-weight: 600;
            color: var(--charcoal);
            margin-bottom: 10px;
            display: block;
        }

        .ai-prompt-textarea {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            line-height: 1.5;
            resize: vertical;
            background: white;
        }

        .ai-response-area {
            background: #f0f8ff;
            border: 2px solid #b3d9ff;
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
        }

        .ai-response-textarea {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 1px solid #b3d9ff;
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            line-height: 1.5;
            resize: vertical;
            background: white;
        }

        .ai-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .ai-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            min-width: 140px;
        }

        .ai-btn.next {
            background: var(--button-next);
            color: white;
        }

        .ai-btn.next:hover {
            background: #27ae60;
            transform: translateY(-1px);
        }

        .ai-btn.done {
            background: var(--button-done);
            color: white;
        }

        .ai-btn.done:hover {
            background: #6c7b7d;
            transform: translateY(-1px);
        }

        .ai-btn.back {
            background: var(--button-back);
            color: white;
        }

        .ai-btn.back:hover {
            background: #c0392b;
            transform: translateY(-1px);
        }

        .ai-btn.copy {
            background: var(--sage-green);
            color: white;
        }

        .ai-btn.copy:hover {
            background: #5A7A5A;
            transform: translateY(-1px);
        }

        .ai-btn.open {
            background: var(--soft-gold);
            color: white;
        }

        .ai-btn.open:hover {
            background: #C79660;
            transform: translateY(-1px);
        }

        .ai-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .instructions-box {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border: 2px solid #f39c12;
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
        }

        .instructions-title {
            font-weight: 600;
            color: #d68910;
            margin-bottom: 10px;
        }

        .instructions-list {
            list-style: none;
            padding: 0;
        }

        .instructions-list li {
            margin: 8px 0;
            padding-left: 20px;
            position: relative;
        }

        .instructions-list li:before {
            content: "→";
            position: absolute;
            left: 0;
            color: #d68910;
            font-weight: bold;
        }

        /* Final Dashboard */
        .final-dashboard {
            background: linear-gradient(135deg, var(--sage-green), var(--deep-teal));
            color: white;
            padding: 50px 40px;
            border-radius: 24px;
            margin: 40px 0;
        }

        .dashboard-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .dashboard-header h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .dashboard-section {
            background: white;
            color: var(--charcoal);
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .dashboard-section h3 {
            color: var(--sage-green);
            margin-bottom: 20px;
            font-size: 1.4rem;
            font-weight: 600;
        }

        .infographic-container {
            min-height: 300px;
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            border: 2px dashed #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: #666;
        }

        .calendar-preview {
            min-height: 300px;
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            border: 2px dashed #ddd;
        }

        .business-summary {
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .final-actions {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .final-action-btn {
            background: var(--soft-gold);
            color: white;
            padding: 18px 36px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
        }

        .final-action-btn:hover {
            background: #C79660;
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(212, 165, 116, 0.3);
        }

        .final-action-btn.primary {
            background: var(--button-next);
        }

        .final-action-btn.primary:hover {
            background: #27ae60;
        }

        /* Payment Options */
        .payment-options {
            background: linear-gradient(135deg, var(--sage-green), var(--deep-teal));
            color: white;
            padding: 50px 40px;
            border-radius: 24px;
            margin: 40px 0;
            text-align: center;
        }

        .payment-options h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        .payment-options p {
            font-size: 1.2rem;
            margin-bottom: 40px;
            opacity: 0.9;
        }

        .payment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .payment-card {
            background: white;
            color: var(--charcoal);
            padding: 40px 30px;
            border-radius: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .payment-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 50px rgba(0,0,0,0.1);
        }

        .payment-card.featured {
            border: 3px solid var(--soft-gold);
            transform: scale(1.05);
        }

        .payment-card .price {
            font-size: 3rem;
            font-weight: 700;
            color: var(--sage-green);
            margin-bottom: 10px;
        }

        .payment-card .title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--charcoal);
        }

        .payment-card .features {
            list-style: none;
            margin-bottom: 30px;
            text-align: left;
        }

        .payment-card .features li {
            padding: 8px 0;
            position: relative;
            padding-left: 25px;
        }

        .payment-card .features li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: var(--sage-green);
            font-weight: bold;
        }

        .payment-btn {
            width: 100%;
            padding: 15px;
            background: var(--sage-green);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .payment-btn:hover {
            background: #5A7A5A;
            transform: translateY(-2px);
        }

        .payment-btn.featured {
            background: var(--soft-gold);
        }

        .payment-btn.featured:hover {
            background: #C79660;
        }

        /* Booking Section */
        .booking-section {
            background: var(--light-sage);
            padding: 50px 40px;
            border-radius: 24px;
            margin: 40px 0;
            text-align: center;
        }

        .booking-section h2 {
            font-family: 'Playfair Display', serif;
            color: var(--charcoal);
            font-size: 2.2rem;
            margin-bottom: 20px;
        }

        .booking-section p {
            color: var(--charcoal);
            font-size: 1.1rem;
            margin-bottom: 40px;
            opacity: 0.8;
        }

        .booking-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .booking-card {
            background: white;
            padding: 40px 30px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(44, 62, 80, 0.08);
            transition: all 0.3s ease;
        }

        .booking-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(44, 62, 80, 0.15);
        }

        .booking-card .icon {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        .booking-card h3 {
            color: var(--charcoal);
            margin-bottom: 15px;
            font-size: 1.4rem;
        }

        .booking-card p {
            color: var(--charcoal);
            opacity: 0.8;
            margin-bottom: 25px;
        }

        .booking-btn {
            background: var(--deep-teal);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .booking-btn:hover {
            background: #1E3D47;
            transform: translateY(-2px);
        }

        .hidden {
            display: none !important;
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .container {
                padding: 0 16px;
            }
            
            .header h1 {
                font-size: 2.2rem;
            }
            
            .header .subtitle {
                font-size: 1.1rem;
            }
            
            .content {
                padding: 30px 20px;
            }
            
            .progress-bar {
                grid-template-columns: repeat(3, 1fr);
                gap: 8px;
            }

            .progress-step {
                padding: 12px 8px;
            }

            .step-text {
                font-size: 0.7rem;
            }

            .language-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .language-btn {
                min-width: 280px;
            }

            .welcome-content {
                padding: 40px 30px;
            }

            .welcome-buttons {
                flex-direction: column;
            }

            .form-control {
                font-size: 16px;
                padding: 18px;
            }

            .auth-content {
                padding: 30px 20px;
            }

            .path-options {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .path-option {
                padding: 30px 20px;
            }

            .payment-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .booking-options {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .form-section {
                padding: 30px 20px;
            }

            .ai-step-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .ai-buttons {
                flex-direction: column;
            }

            .ai-btn {
                min-width: 100%;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .final-actions {
                flex-direction: column;
                align-items: center;
            }

            .final-action-btn {
                min-width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
    <!-- Authentication Modal -->
    <div id="authModal" class="auth-modal">
        <div class="auth-content">
            <button class="auth-close" onclick="closeAuthModal()">&times;</button>
            <h2 class="auth-title" id="authTitle">Create Your Account</h2>
            
            <div id="authError" class="auth-error hidden"></div>
            <div id="authSuccess" class="auth-success hidden"></div>
            
            <form class="auth-form" id="authForm">
                <input type="text" id="authName" class="auth-input" placeholder="Your Name" style="display: none;">
                <input type="email" id="authEmail" class="auth-input" placeholder="Email Address" required>
                <input type="password" id="authPassword" class="auth-input" placeholder="Password" required>
                <input type="password" id="authConfirmPassword" class="auth-input" placeholder="Confirm Password" style="display: none;">
                
                <button type="submit" class="auth-button" id="authSubmitBtn">Create Account</button>
            </form>
            
            <div class="auth-switch">
                <span id="authSwitchText">Already have an account?</span>
                <span class="auth-link" id="authSwitchLink" onclick="toggleAuthMode()">Sign In</span>
            </div>
        </div>
    </div>

    <!-- Welcome Modal -->
    <div id="welcomeModal" class="welcome-modal">
        <div class="welcome-content">
            <h2 id="welcomeTitle">Welcome to Smart Mom Method!</h2>
            <p id="welcomeDescription">Create your personalized interactive calendar and business plan in 6 simple steps. This process will take approximately 25-30 minutes and will generate a comprehensive interactive calendar and plan tailored specifically for busy moms like you.</p>
            <div class="welcome-buttons">
                <button class="welcome-btn primary" onclick="startOnboarding()">
                    <span id="welcomeStart">Get Started</span>
                </button>
                <button class="welcome-btn auth" onclick="showAuthModal('signup')">
                    <span id="welcomeCreate">Create Account & Save Progress</span>
                </button>
                <button class="welcome-btn secondary" onclick="handleReturningUser()">
                    <span id="welcomeReturning">I'm a returning user</span>
                </button>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Language Selection -->
        <div class="language-selector">
            <h2 id="languageTitle">Choose Your Language / Elige Tu Idioma</h2>
            <div class="language-buttons">
                <button class="language-btn" onclick="changeLanguage('en')" id="lang-en">
                    <span class="flag">🇺🇸</span>
                    <span>English</span>
                    <small>Read and answer everything in English</small>
                </button>
                <button class="language-btn active" onclick="changeLanguage('es')" id="lang-es">
                    <span class="flag">🇪🇸</span>
                    <span>Español</span>
                    <small>Lee y responde todo en español</small>
                </button>
            </div>
        </div>

        <!-- Skip to Payment Button -->
        <div style="text-align: center; margin: 30px 0; padding: 20px; background: white; border-radius: 16px; box-shadow: 0 4px 16px rgba(107, 142, 107, 0.08);">
            <p style="color: var(--charcoal); margin-bottom: 15px; font-size: 1.1rem;">Want to skip the planning process and go directly to our solutions?</p>
            <button onclick="skipToPaymentOptions()" style="background: linear-gradient(135deg, var(--soft-gold), #C79660); color: white; padding: 15px 30px; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                View Payment Options
            </button>
        </div>

        <!-- Progress Container -->
        <div class="progress-container">
            <div class="progress-header">
                <div class="step-counter" id="stepCounter">Step 1 of 6</div>
            </div>
            <div class="overall-progress">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-bar">
                <div class="progress-step active" id="step-1">
                    <span class="step-number">1</span>
                    <span class="step-text" id="stepText1">ChatGPT Ideas</span>
                </div>
                <div class="progress-step pending" id="step-2">
                    <span class="step-number">2</span>
                    <span class="step-text" id="stepText2">Gemini MVP</span>
                </div>
                <div class="progress-step pending" id="step-3">
                    <span class="step-number">3</span>
                    <span class="step-text" id="stepText3">Gemini Pricing</span>
                </div>
                <div class="progress-step pending" id="step-4">
                    <span class="step-number">4</span>
                    <span class="step-text" id="stepText4">Gemini Infographic</span>
                </div>
                <div class="progress-step pending" id="step-5">
                    <span class="step-number">5</span>
                    <span class="step-text" id="stepText5">Claude Calendar</span>
                </div>
                <div class="progress-step pending" id="step-6">
                    <span class="step-number">6</span>
                    <span class="step-text" id="stepText6">Final Dashboard</span>
                </div>
            </div>
        </div>

        <div class="main-card">
            <div class="header">
                <h1 id="mainTitle">Smart Mom Method</h1>
                <p class="subtitle" id="mainSubtitle">AI-Powered Interactive Calendar & Business Planning for Busy Moms</p>
                <span class="badge" id="freeBadge">100% Free</span>
                
                <div class="cta-section">
                    <button class="btn-current" onclick="scrollToForm()">
                        <span id="ctaButton">Start Your Free Interactive Calendar & Business Plan Now</span>
                    </button>
                    <p style="margin-top: 16px; font-size: 0.95rem; opacity: 0.9;" id="ctaSubtext">No email required to browse • Full process takes 25-30 minutes</p>
                </div>
            </div>

            <div class="content">
                <!-- Basic Information Section - Moved to top for visibility -->
                <div class="form-section" id="basicInfoSection">
                    <h2 id="basicInfoTitle">Basic Information</h2>
                    
                    <div class="form-group">
                        <label id="nameLabel">Your Name: <span class="required">*</span></label>
                        <input type="text" id="user-name" class="form-control" placeholder="Enter your name" onchange="validateField(this)" />
                        <div class="validation-message" id="user-name-validation"></div>
                    </div>

                    <div class="form-group">
                        <label id="emailLabel">Your Email: <span class="required">*</span></label>
                        <input type="email" id="user-email" class="form-control" placeholder="your.email@example.com" onchange="validateField(this)" />
                        <div class="validation-message" id="user-email-validation"></div>
                    </div>
                </div>

                <div class="step-description">
                    <h2 id="stepDescTitle">Let's Get Started</h2>
                    <p id="stepDescText">First, let's get to know you better so we can create the perfect interactive calendar and business plan for your unique situation.</p>
                </div>

                <div class="empowerment-message">
                    <div class="empowerment-title" id="empowermentTitle">You're Already Successful!</div>
                    <p class="empowerment-text" id="empowermentText">Managing a family is running a complex organization. You have negotiation skills, time management expertise, and crisis resolution abilities that most CEOs would envy. Now let's channel that into YOUR organized life and successful business!</p>
                </div>

                <!-- Path Selection -->
                <div class="path-selection hidden" id="pathSelection">
                    <h2 id="pathSelectionTitle">What brings you here today? Choose your main focus:</h2>
                    
                    <div class="path-options">
                        <div class="path-option" data-path="life-organization" onclick="selectPath('life-organization')">
                            <span class="path-icon">🏠</span>
                            <h3 class="path-title" id="pathTitle1">Life Organization</h3>
                            <p class="path-description" id="pathDesc1">I need help organizing my daily life, family schedules, and home systems</p>
                        </div>
                        
                        <div class="path-option" data-path="business-launch" onclick="selectPath('business-launch')">
                            <span class="path-icon">💼</span>
                            <h3 class="path-title" id="pathTitle2">Business Launch</h3>
                            <p class="path-description" id="pathDesc2">I want to start a business or create passive income streams</p>
                        </div>
                        
                        <div class="path-option" data-path="both" onclick="selectPath('both')">
                            <span class="path-icon">☀️</span>
                            <h3 class="path-title" id="pathTitle3">Both Life & Business</h3>
                            <p class="path-description" id="pathDesc3">I need life organization AND want to start a business</p>
                        </div>
                    </div>
                    
                    <button class="continue-btn" id="continueBtn" onclick="showBusinessQuestionnaire()">
                        <span id="continueBtnText">Continue With Selected Path</span>
                    </button>
                </div>

                <!-- Business Questionnaire -->
                <div class="form-section hidden" id="businessQuestionnaire">
                    <h2 id="businessQuestionnaireTitle">Business Preferences</h2>
                    
                    <div class="form-group">
                        <label id="investmentLabel">Investment level for business: <span class="required">*</span></label>
                        <select id="investment-level" class="form-control" onchange="validateField(this)">
                            <option value="">Select investment level...</option>
                            <option value="no-money">$0 - I need free options only</option>
                            <option value="minimal">Under $100 - Very limited budget</option>
                            <option value="moderate">$100-500 - Can invest if necessary</option>
                            <option value="flexible">$500+ - Flexible for right opportunity</option>
                        </select>
                        <div class="validation-message" id="investment-level-validation"></div>
                    </div>

                    <div class="form-group">
                        <label id="workLocationLabel">Preferred Work Location: <span class="required">*</span></label>
                        <select id="work-location" class="form-control" onchange="validateField(this)">
                            <option value="">Select work location...</option>
                            <option value="home-only">Home only - need to be with kids</option>
                            <option value="home-flexible">Mostly home, occasional outings</option>
                            <option value="local-community">Local community/neighborhood</option>
                            <option value="hybrid">Mix of home and outside work</option>
                            <option value="travel-okay">Comfortable traveling for business</option>
                        </select>
                        <div class="validation-message" id="work-location-validation"></div>
                    </div>

                    <div class="form-group">
                        <label id="workStyleLabel">Work Style Preference: <span class="required">*</span></label>
                        <select id="work-style" class="form-control" onchange="validateField(this)">
                            <option value="">Select work style...</option>
                            <option value="independent">Independent work - minimal client interaction</option>
                            <option value="some-interaction">Some client calls/meetings</option>
                            <option value="collaborative">Collaborative - enjoy working with people</option>
                            <option value="teaching-mentoring">Teaching/mentoring others</option>
                            <option value="creative-expressive">Creative and expressive work</option>
                        </select>
                        <div class="validation-message" id="work-style-validation"></div>
                    </div>

                    <div class="form-group">
                        <label id="cameraComfortLabel">Are you comfortable being on camera/social media? <span class="required">*</span></label>
                        <select id="camera-comfort" class="form-control" onchange="validateField(this)">
                            <option value="">Select your comfort level...</option>
                            <option value="love-it">Love it! I'm comfortable on camera</option>
                            <option value="okay-with-it">Okay with it, can learn</option>
                            <option value="prefer-behind-scenes">Prefer behind-the-scenes work</option>
                            <option value="absolutely-not">Absolutely not comfortable</option>
                        </select>
                        <div class="validation-message" id="camera-comfort-validation"></div>
                    </div>

                    <div class="form-group">
                        <label id="incomeTimelineLabel">Timeline to first income: <span class="required">*</span></label>
                        <select id="income-timeline" class="form-control" onchange="validateField(this)">
                            <option value="">Select timeline...</option>
                            <option value="immediate">Immediate need (within 1-2 months)</option>
                            <option value="moderate">3-6 months is fine</option>
                            <option value="patient">Can wait 6-12 months for good business</option>
                            <option value="long-term">Building for long-term (1+ years)</option>
                        </select>
                        <div class="validation-message" id="income-timeline-validation"></div>
                    </div>

                    <div class="form-group">
                        <label id="totalBudgetLabel">Maximum startup budget (total): <span class="required">*</span></label>
                        <select id="total-budget" class="form-control" onchange="validateField(this)">
                            <option value="">Select budget...</option>
                            <option value="zero">$0 - Must be completely free</option>
                            <option value="minimal">Under $50 total</option>
                            <option value="moderate">$50-200 if necessary</option>
                            <option value="invest">$200-500 for right opportunity</option>
                            <option value="serious">$500+ ready to invest</option>
                        </select>
                        <div class="validation-message" id="total-budget-validation"></div>
                    </div>

                    <div class="form-group">
                        <label id="familyStructureLabel">Family structure & ages: <span class="required">*</span></label>
                        <textarea id="family-structure" class="form-control" rows="4" placeholder="Tell us about your family: How many kids? What ages? Any special needs or considerations?" oninput="updateCharCount(this, 1000)"></textarea>
                        <div class="char-counter" id="family-structure-counter">0/1000</div>
                        <div class="validation-message" id="family-structure-validation"></div>
                    </div>

                    <div class="form-group">
                        <label id="dailyScheduleLabel">Describe your typical daily schedule: <span class="required">*</span></label>
                        <textarea id="daily-schedule" class="form-control" rows="4" placeholder="Walk us through a typical day: When do you wake up? Kids' schedules? When do you have free time?" oninput="updateCharCount(this, 1000)"></textarea>
                        <div class="char-counter" id="daily-schedule-counter">0/1000</div>
                        <div class="validation-message" id="daily-schedule-validation"></div>
                    </div>

                    <div class="form-group">
                        <label id="learningStyleLabel">Learning Style: <span class="required">*</span></label>
                        <select id="learning-style" class="form-control" onchange="validateField(this)">
                            <option value="">Select your learning style...</option>
                            <option value="visual">Visual (I learn by seeing)</option>
                            <option value="auditory">Auditory (I learn by hearing)</option>
                            <option value="kinesthetic">Kinesthetic (I learn by doing)</option>
                            <option value="mixed">Mixed (I use all styles)</option>
                        </select>
                        <div class="validation-message" id="learning-style-validation"></div>
                    </div>

                    <div class="form-group">
                        <label id="workPaceLabel">Work Pace: <span class="required">*</span></label>
                        <select id="work-pace" class="form-control" onchange="validateField(this)">
                            <option value="">Select your work pace...</option>
                            <option value="fast-paced">Fast-paced (I like quick decisions)</option>
                            <option value="steady">Steady (I prefer consistent progress)</option>
                            <option value="relaxed">Relaxed (I need time to process)</option>
                            <option value="flexible">Flexible (It depends on the task)</option>
                        </select>
                        <div class="validation-message" id="work-pace-validation"></div>
                    </div>

                    <div class="form-group">
                        <label id="workFrequencyLabel">Work Frequency: <span class="required">*</span></label>
                        <select id="work-frequency" class="form-control" onchange="validateField(this)">
                            <option value="">Select your work frequency...</option>
                            <option value="daily">Daily (I can work every day)</option>
                            <option value="few-times-week">Few times per week (2-4 days)</option>
                            <option value="weekly">Weekly (1-2 days per week)</option>
                            <option value="flexible-schedule">Flexible schedule</option>
                        </select>
                        <div class="validation-message" id="work-frequency-validation"></div>
                    </div>

                    <div class="form-group">
                        <label id="techComfortLabel">Tech Comfort Level: <span class="required">*</span></label>
                        <select id="tech-comfort" class="form-control" onchange="validateField(this)">
                            <option value="">Select your tech comfort level...</option>
                            <option value="beginner">Beginner (I need step-by-step guidance)</option>
                            <option value="intermediate">Intermediate (I can figure things out)</option>
                            <option value="advanced">Advanced (I'm comfortable with most tech)</option>
                            <option value="expert">Expert (I troubleshoot for others)</option>
                        </select>
                        <div class="validation-message" id="tech-comfort-validation"></div>
                    </div>

                    <div class="form-group">
                        <label id="currentTechToolsLabel">Current Tech Tools:</label>
                        <input type="text" id="current-tech-tools" class="form-control" placeholder="List any tools/platforms you already use (Google, Facebook, Zoom, etc.)" oninput="updateCharCount(this, 500)" />
                        <div class="char-counter" id="current-tech-tools-counter">0/500</div>
                        <div class="validation-message" id="current-tech-tools-validation"></div>
                    </div>

                    <button class="continue-btn visible" onclick="proceedWithQuestionnaire()">
                        <span id="proceedBtnText">Start AI-Powered Analysis</span>
                    </button>
                </div>

                <!-- Enhanced Interactive AI Workflow -->
                <div id="interactiveAIWorkflow" class="hidden">
                    <div class="step-description">
                        <h2>AI-Powered Business Plan Creation</h2>
                        <p>Follow the 6-step process below. Each step builds on the previous one to create your comprehensive business plan and interactive calendar.</p>
                    </div>

                    <div class="interactive-ai-workflow">
                        <!-- Step 1: ChatGPT Business Ideas -->
                        <div class="ai-step-container current" id="ai-step-1-container">
                            <div class="ai-step-header">
                                <div class="ai-step-title">
                                    <div class="ai-step-number">1</div>
                                    <span>ChatGPT Business Ideas</span>
                                </div>
                                <div class="ai-step-status">Current Step</div>
                            </div>
                            
                            <div class="ai-step-content">
                                <div class="instructions-box">
                                    <div class="instructions-title">Instructions:</div>
                                    <ul class="instructions-list">
                                        <li>Copy the prompt below</li>
                                        <li>Open ChatGPT in a new tab</li>
                                        <li>Paste the prompt and submit</li>
                                        <li>Copy ChatGPT's complete response</li>
                                        <li>Paste the response in the box below</li>
                                        <li>Click "Generate Next Prompt" to continue</li>
                                    </ul>
                                </div>

                                <div class="ai-prompt-area">
                                    <label class="ai-prompt-label">Generated Prompt for ChatGPT:</label>
                                    <textarea id="chatgpt-prompt" class="ai-prompt-textarea" readonly placeholder="Your ChatGPT prompt will be generated here..."></textarea>
                                </div>

                                <div class="ai-buttons">
                                    <button class="ai-btn copy" onclick="copyToClipboard('chatgpt-prompt')">Copy Prompt</button>
                                    <button class="ai-btn open" onclick="openChatGPT()">Open ChatGPT</button>
                                </div>

                                <div class="ai-response-area">
                                    <label class="ai-prompt-label">Paste ChatGPT's Response Here:</label>
                                    <textarea id="chatgpt-response" class="ai-response-textarea" placeholder="Paste the complete response from ChatGPT here..." oninput="checkResponseAndEnableNext(1)"></textarea>
                                </div>

                                <div class="ai-buttons">
                                    <button class="ai-btn next" id="next-btn-1" onclick="generateNextPrompt(2)" disabled>Generate Next Prompt</button>
                                </div>
                            </div>
                        </div>

                        <!-- Step 2: Gemini MVP Deep Search -->
                        <div class="ai-step-container pending" id="ai-step-2-container">
                            <div class="ai-step-header">
                                <div class="ai-step-title">
                                    <div class="ai-step-number">2</div>
                                    <span>Gemini MVP Deep Search</span>
                                </div>
                                <div class="ai-step-status">Waiting</div>
                            </div>
                            
                            <div class="ai-step-content">
                                <div class="instructions-box">
                                    <div class="instructions-title">Instructions:</div>
                                    <ul class="instructions-list">
                                        <li>Copy the prompt below (generated from your ChatGPT response)</li>
                                        <li>Open Gemini in a new tab</li>
                                        <li>Paste the prompt and submit</li>
                                        <li>IMPORTANT: Choose "Deep Search" option when prompted</li>
                                        <li>Wait for complete Deep Search results</li>
                                        <li>Copy Gemini's complete response</li>
                                        <li>Paste the response in the box below</li>
                                    </ul>
                                </div>

                                <div class="ai-prompt-area">
                                    <label class="ai-prompt-label">Generated Prompt for Gemini (MVP Research):</label>
                                    <textarea id="gemini-mvp-prompt" class="ai-prompt-textarea" readonly placeholder="This prompt will be generated after you complete Step 1..."></textarea>
                                </div>

                                <div class="ai-buttons">
                                    <button class="ai-btn copy" onclick="copyToClipboard('gemini-mvp-prompt')" disabled id="copy-mvp-btn">Copy Prompt</button>
                                    <button class="ai-btn open" onclick="openGemini()" disabled id="open-gemini-mvp-btn">Open Gemini</button>
                                    <button class="ai-btn back" onclick="goBackToStep(1)">Go Back</button>
                                </div>

                                <div class="ai-response-area">
                                    <label class="ai-prompt-label">Paste Gemini's MVP Deep Search Response Here:</label>
                                    <textarea id="gemini-mvp-response" class="ai-response-textarea" placeholder="Paste the complete Deep Search response from Gemini here..." oninput="checkResponseAndEnableNext(2)"></textarea>
                                </div>

                                <div class="ai-buttons">
                                    <button class="ai-btn next" id="next-btn-2" onclick="generateNextPrompt(3)" disabled>Generate Next Prompt</button>
                                </div>
                            </div>
                        </div>

                        <!-- Step 3: Gemini Pricing Deep Search -->
                        <div class="ai-step-container pending" id="ai-step-3-container">
                            <div class="ai-step-header">
                                <div class="ai-step-title">
                                    <div class="ai-step-number">3</div>
                                    <span>Gemini Pricing Deep Search</span>
                                </div>
                                <div class="ai-step-status">Waiting</div>
                            </div>
                            
                            <div class="ai-step-content">
                                <div class="instructions-box">
                                    <div class="instructions-title">Instructions:</div>
                                    <ul class="instructions-list">
                                        <li>Copy the pricing research prompt below</li>
                                        <li>Open Gemini in a new tab</li>
                                        <li>Paste the prompt and submit</li>
                                        <li>IMPORTANT: Choose "Deep Search" option when prompted</li>
                                        <li>Wait for complete Deep Search results</li>
                                        <li>Copy Gemini's complete pricing response</li>
                                        <li>Paste the response in the box below</li>
                                    </ul>
                                </div>

                                <div class="ai-prompt-area">
                                    <label class="ai-prompt-label">Generated Prompt for Gemini (Pricing Research):</label>
                                    <textarea id="gemini-pricing-prompt" class="ai-prompt-textarea" readonly placeholder="This prompt will be generated after you complete Step 2..."></textarea>
                                </div>

                                <div class="ai-buttons">
                                    <button class="ai-btn copy" onclick="copyToClipboard('gemini-pricing-prompt')" disabled id="copy-pricing-btn">Copy Prompt</button>
                                    <button class="ai-btn open" onclick="openGemini()" disabled id="open-gemini-pricing-btn">Open Gemini</button>
                                    <button class="ai-btn back" onclick="goBackToStep(2)">Go Back</button>
                                </div>

                                <div class="ai-response-area">
                                    <label class="ai-prompt-label">Paste Gemini's Pricing Deep Search Response Here:</label>
                                    <textarea id="gemini-pricing-response" class="ai-response-textarea" placeholder="Paste the complete pricing research response from Gemini here..." oninput="checkResponseAndEnableNext(3)"></textarea>
                                </div>

                                <div class="ai-buttons">
                                    <button class="ai-btn next" id="next-btn-3" onclick="generateNextPrompt(4)" disabled>Generate Next Prompt</button>
                                </div>
                            </div>
                        </div>

                        <!-- Step 4: Gemini Infographic Generation -->
                        <div class="ai-step-container pending" id="ai-step-4-container">
                            <div class="ai-step-header">
                                <div class="ai-step-title">
                                    <div class="ai-step-number">4</div>
                                    <span>Gemini Infographic Generation</span>
                                </div>
                                <div class="ai-step-status">Waiting</div>
                            </div>
                            
                            <div class="ai-step-content">
                                <div class="instructions-box">
                                    <div class="instructions-title">Instructions:</div>
                                    <ul class="instructions-list">
                                        <li>Copy the infographic generation prompt below</li>
                                        <li>Open Gemini in a new tab</li>
                                        <li>Paste the prompt and submit</li>
                                        <li>Ask Gemini to create a visual pricing infographic</li>
                                        <li>Copy the HTML/CSS CODE that Gemini provides</li>
                                        <li>Paste ONLY the code in the box below</li>
                                    </ul>
                                </div>

                                <div class="ai-prompt-area">
                                    <label class="ai-prompt-label">Generated Prompt for Gemini (Infographic):</label>
                                    <textarea id="gemini-infographic-prompt" class="ai-prompt-textarea" readonly placeholder="This prompt will be generated after you complete Step 3..."></textarea>
                                </div>

                                <div class="ai-buttons">
                                    <button class="ai-btn copy" onclick="copyToClipboard('gemini-infographic-prompt')" disabled id="copy-infographic-btn">Copy Prompt</button>
                                    <button class="ai-btn open" onclick="openGemini()" disabled id="open-gemini-infographic-btn">Open Gemini</button>
                                    <button class="ai-btn back" onclick="goBackToStep(3)">Go Back</button>
                                </div>

                                <div class="ai-response-area">
                                    <label class="ai-prompt-label">Paste Infographic CODE Here (HTML/CSS only):</label>
                                    <textarea id="gemini-infographic-code" class="ai-response-textarea" placeholder="Paste ONLY the HTML/CSS code for the infographic here..." oninput="checkInfographicCode(4)"></textarea>
                                </div>

                                <div class="ai-buttons">
                                    <button class="ai-btn next" id="next-btn-4" onclick="generateNextPrompt(5)" disabled>Generate Next Prompt</button>
                                    <button class="ai-btn" onclick="previewInfographic()">Preview Infographic</button>
                                </div>
                            </div>
                        </div>

                        <!-- Step 5: Claude Interactive Calendar -->
                        <div class="ai-step-container pending" id="ai-step-5-container">
                            <div class="ai-step-header">
                                <div class="ai-step-title">
                                    <div class="ai-step-number">5</div>
                                    <span>Claude Interactive Calendar</span>
                                </div>
                                <div class="ai-step-status">Waiting</div>
                            </div>
                            
                            <div class="ai-step-content">
                                <div class="instructions-box">
                                    <div class="instructions-title">Instructions:</div>
                                    <ul class="instructions-list">
                                        <li>Copy the comprehensive prompt below</li>
                                        <li>Open Claude in a new tab</li>
                                        <li>Paste the prompt and submit</li>
                                        <li>Wait for Claude to create your interactive calendar</li>
                                        <li>Download the calendar artifact from Claude</li>
                                        <li>Come back and confirm completion</li>
                                    </ul>
                                </div>

                                <div class="ai-prompt-area">
                                    <label class="ai-prompt-label">Generated Prompt for Claude (Interactive Calendar):</label>
                                    <textarea id="claude-calendar-prompt" class="ai-prompt-textarea" readonly placeholder="This prompt will be generated after you complete Step 4..."></textarea>
                                </div>

                                <div class="ai-buttons">
                                    <button class="ai-btn copy" onclick="copyToClipboard('claude-calendar-prompt')" disabled id="copy-claude-btn">Copy Prompt</button>
                                    <button class="ai-btn open" onclick="openClaude()" disabled id="open-claude-btn">Open Claude</button>
                                    <button class="ai-btn back" onclick="goBackToStep(4)">Go Back</button>
                                </div>

                                <div class="ai-response-area">
                                    <label class="ai-prompt-label">Confirm Calendar Creation:</label>
                                    <div style="padding: 20px; text-align: center;">
                                        <p>Did Claude create your interactive calendar successfully?</p>
                                        <button class="ai-btn next" id="confirm-calendar-btn" onclick="confirmCalendarCreation()">Yes, I have my calendar</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Step 6: Final Integration Dashboard -->
                        <div class="ai-step-container pending" id="ai-step-6-container">
                            <div class="ai-step-header">
                                <div class="ai-step-title">
                                    <div class="ai-step-number">6</div>
                                    <span>Final Integration Dashboard</span>
                                </div>
                                <div class="ai-step-status">Waiting</div>
                            </div>
                            
                            <div class="ai-step-content">
                                <p>Your complete Smart Mom Method plan will be displayed here once all steps are completed.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Final Dashboard -->
                <div id="finalDashboard" class="hidden">
                    <div class="final-dashboard">
                        <div class="dashboard-header">
                            <h2>Your Complete Smart Mom Method Plan</h2>
                            <p>Here's your comprehensive business plan with integrated pricing strategy and interactive calendar.</p>
                        </div>
                        
                        <div class="dashboard-grid">
                            <div class="dashboard-section">
                                <h3>Business Plan Summary</h3>
                                <div id="business-summary-content" class="business-summary">
                                    <p>Your business plan summary will appear here based on all AI responses.</p>
                                </div>
                            </div>
                            
                            <div class="dashboard-section">
                                <h3>Pricing Strategy Infographic</h3>
                                <div id="infographic-container" class="infographic-container">
                                    <p>Your pricing infographic will render here once you complete Step 4.</p>
                                </div>
                            </div>
                            
                            <div class="dashboard-section">
                                <h3>Interactive Calendar</h3>
                                <div id="calendar-display" class="calendar-preview">
                                    <p>Your interactive calendar is available for download from Claude.</p>
                                    <button class="ai-btn open" onclick="openClaude()" style="margin-top: 15px;">Open Claude to Download Calendar</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="final-actions">
                            <button class="final-action-btn primary" onclick="downloadCompletePackage()">
                                Download Complete Package
                            </button>
                            <button class="final-action-btn" onclick="showPaymentOptions()">
                                Get Professional Implementation
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Booking Section -->
                <div id="bookingSection" class="hidden">
                    <div class="booking-section">
                        <h2>Need Personal Guidance?</h2>
                        <p>Sometimes you need a real person to talk through your specific situation. Book a call with our Smart Mom Method experts.</p>
                        
                        <!-- Back to Planning Button -->
                        <div style="text-align: center; margin-bottom: 30px;">
                            <button onclick="returnToPlanningProcess()" onmouseover="this.style.background='#1E3D47'; this.style.transform='translateY(-2px)'" onmouseout="this.style.background='var(--deep-teal)'; this.style.transform='translateY(0)'" style="background: var(--deep-teal); color: white; padding: 12px 24px; border: none; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                                ← Return to Free Planning Process
                            </button>
                        </div>
                        
                        <div class="booking-options">
                            <div class="booking-card">
                                <div class="icon">💬</div>
                                <h3>Free Smart Mom Call</h3>
                                <p>30-minute free consultation to discuss your goals and get personalized advice on your next steps.</p>
                                <button class="booking-btn" onclick="window.open('https://calendly.com/momsurvivaltoolkit/free-smart-mom-call-30-min', '_blank')">
                                    Book Free Call
                                </button>
                            </div>

                            <div class="booking-card">
                                <div class="icon">🎯</div>
                                <h3>Strategy Session</h3>
                                <p>30-minute focused strategy session to create a detailed action plan for your business or life organization goals.</p>
                                <button class="booking-btn" onclick="window.open('https://calendly.com/momsurvivaltoolkit/30min', '_blank')">
                                    Book Free Strategy Session
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Payment Options -->
                <div id="paymentOptions" class="hidden">
                    <div class="payment-options">
                        <h2>Transform Your Plan Into Action</h2>
                        <p>You've got the ideas - now let's make them happen! Get your personalized interactive calendar and expert guidance to succeed.</p>
                        
                        <!-- Back to Planning Button -->
                        <div style="text-align: center; margin-bottom: 30px;">
                            <button onclick="returnToPlanningProcess()" onmouseover="this.style.background='#1E3D47'; this.style.transform='translateY(-2px)'" onmouseout="this.style.background='var(--deep-teal)'; this.style.transform='translateY(0)'" style="background: var(--deep-teal); color: white; padding: 12px 24px; border: none; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                                ← Return to Free Planning Process
                            </button>
                        </div>
                        
                        <div class="payment-grid">
                            <div class="payment-card">
                                <div class="price">$39</div>
                                <div class="title">Life Organization Calendar</div>
                                <ul class="features">
                                    <li>Personalized interactive calendar</li>
                                    <li>Daily routines & time blocks</li>
                                    <li>Family schedule optimization</li>
                                    <li>Goal tracking templates</li>
                                    <li>Printable planning sheets</li>
                                </ul>
                                <button class="payment-btn" onclick="window.open('https://buy.stripe.com/cN100gj9M0fo83eUa1a17Vm07', '_blank')">
                                    Get Life Calendar
                                </button>
                            </div>

                            <div class="payment-card featured">
                                <div class="price">$89</div>
                                <div class="title">Life + Training Package</div>
                                <ul class="features">
                                    <li>Everything in Life Calendar</li>
                                    <li>90-minute video training course</li>
                                    <li>Step-by-step implementation guide</li>
                                    <li>Time management strategies</li>
                                    <li>Bonus productivity tools</li>
                                </ul>
                                <button class="payment-btn featured" onclick="window.open('https://buy.stripe.com/5kQ6oHb946RSn22zbz7Vm06', '_blank')">
                                    Get Life + Training
                                </button>
                            </div>

                            <div class="payment-card">
                                <div class="price">$49</div>
                                <div class="title">Business Launch Calendar</div>
                                <ul class="features">
                                    <li>Business planning calendar</li>
                                    <li>Revenue milestone tracking</li>
                                    <li>Marketing action plans</li>
                                    <li>Client management system</li>
                                    <li>Financial tracking tools</li>
                                </ul>
                                <button class="payment-btn" onclick="window.open('https://buy.stripe.com/3cI8wP7NS2BmbLqgc9L7Vm05', '_blank')">
                                    Get Business Calendar
                                </button>
                            </div>

                            <div class="payment-card featured">
                                <div class="price">$100</div>
                                <div class="title">Complete Business Package</div>
                                <ul class="features">
                                    <li>Everything in Business Calendar</li>
                                    <li>2-hour business training course</li>
                                    <li>Market research templates</li>
                                    <li>Pricing & sales strategies</li>
                                    <li>Launch timeline with milestones</li>
                                </ul>
                                <button class="payment-btn featured" onclick="window.open('https://buy.stripe.com/fZu8wP8RW1x8i18eec97Vm04', '_blank')">
                                    Get Complete Package
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Final Completion -->
                <div id="completionSection" class="hidden">
                    <div style="background: linear-gradient(135deg, var(--sage-green), var(--deep-teal)); color: white; padding: 60px 40px; text-align: center; border-radius: 24px; margin: 40px 0; position: relative; overflow: hidden;">
                        <h2 style="font-family: 'Playfair Display', serif; font-size: 2.5rem; margin-bottom: 20px;">Congratulations!</h2>
                        <p style="font-size: 1.2rem; margin-bottom: 30px; opacity: 0.9;">Your personalized Smart Mom Method analysis is complete!</p>
                        
                        <div style="background: rgba(255,255,255,0.15); padding: 30px; border-radius: 16px; margin: 30px 0;">
                            <h3 style="margin-bottom: 15px;">What You've Accomplished:</h3>
                            <ul style="list-style: none; padding: 0;">
                                <li style="margin: 10px 0;">✅ Identified your unique mom-entrepreneur profile</li>
                                <li style="margin: 10px 0;">✅ Generated AI-powered business recommendations</li>
                                <li style="margin: 10px 0;">✅ Created your personalized calendar framework</li>
                                <li style="margin: 10px 0;">✅ Established clear next steps for success</li>
                                <li style="margin: 10px 0;">✅ Joined a community of successful Smart Moms</li>
                            </ul>
                        </div>

                        <button onclick="downloadCalendar()" style="background: var(--soft-gold); color: white; padding: 20px 40px; border: none; border-radius: 12px; font-size: 1.2rem; font-weight: 600; cursor: pointer; margin: 10px;">
                            Download Your Basic Calendar
                        </button>
                        
                        <button onclick="startOver()" style="background: white; color: var(--sage-green); padding: 20px 40px; border: none; border-radius: 12px; font-size: 1.2rem; font-weight: 600; cursor: pointer; margin: 10px;">
                            Create Another Plan
                        </button>
                    </div>

                    <div style="background: var(--light-sage); padding: 30px; border-radius: 20px; text-align: center;">
                        <h3>Thank you for using Smart Mom Method!</h3>
                        <p>Your journey to an organized life and successful business starts now. You have everything you need to succeed - you just need to take action!</p>
                        
                        <div style="margin-top: 20px;">
                            <button onclick="provideFeedback()" style="background: var(--sage-green); color: white; padding: 15px 30px; border: none; border-radius: 8px; margin: 5px; cursor: pointer;">
                                Share Your Experience
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Airtable Configuration
        const AIRTABLE_BASE_ID = 'appQUFJzVLlHbB4Fp';
        const AIRTABLE_TOKEN = 'patje3I65ajVyNTSN.3963cc18c6dc227b6e290d5da83da3bde2f4d089d60d4a0e49787fecdb676f65';
        const AIRTABLE_TABLE_NAME = 'Users';

        // Global Variables
        let currentLanguage = 'en';
        let currentStep = 1;
        let selectedPath = '';
        let authMode = 'signup';
        let currentAIStep = 1;
        let aiResponses = {};

        // AI Realism Instructions
        const realismInstructions = `
**CRITICAL INSTRUCTIONS - BE EXTREMELY REALISTIC:**
- This person is a BEGINNER, not an expert
- Be brutally honest about challenges and timelines  
- Don't suggest businesses requiring experience they don't have
- Focus on DOWN-TO-EARTH, practical solutions only
- Consider their family constraints and available time
- If they said "free only," respect that completely
- Suggest pricing that will actually get clients, not scare them away

**REMEMBER:** A mom with 2 hours/day and no business experience should NOT be suggested:
- Businesses requiring 40+ hours/week
- High-skill services they've never done
- Anything requiring significant upfront investment (if they said free)
- Complex businesses with steep learning curves

Focus on what's ACTUALLY doable for their situation.
`;

        // Translation data
        const translations = {
            en: {
                welcomeTitle: "Welcome to Smart Mom Method!",
                welcomeDescription: "Create your personalized interactive calendar and business plan in 6 simple steps. This process will take approximately 25-30 minutes and will generate a comprehensive interactive calendar and plan tailored specifically for busy moms like you.",
                welcomeStart: "Get Started",
                welcomeCreate: "Create Account & Save Progress",
                welcomeReturning: "I'm a returning user",
                languageTitle: "Choose Your Language / Elige Tu Idioma",
                stepCounter: "Step 1 of 6",
                mainTitle: "Smart Mom Method",
                mainSubtitle: "AI-Powered Interactive Calendar & Business Planning for Busy Moms",
                freeBadge: "100% Free",
                ctaButton: "Start Your Free Interactive Calendar & Business Plan Now",
                ctaSubtext: "No email required to browse • Full process takes 25-30 minutes",
                stepDescTitle: "Let's Get Started",
                stepDescText: "First, let's get to know you better so we can create the perfect interactive calendar and business plan for your unique situation.",
                empowermentTitle: "You're Already Successful!",
                empowermentText: "Managing a family is running a complex organization. You have negotiation skills, time management expertise, and crisis resolution abilities that most CEOs would envy. Now let's channel that into YOUR organized life and successful business!",
                basicInfoTitle: "Basic Information",
                nameLabel: "Your Name:",
                emailLabel: "Your Email:",
                pathSelectionTitle: "What brings you here today? Choose your main focus:",
                pathTitle1: "Life Organization",
                pathDesc1: "I need help organizing my daily life, family schedules, and home systems",
                pathTitle2: "Business Launch", 
                pathDesc2: "I want to start a business or create passive income streams",
                pathTitle3: "Both Life & Business",
                pathDesc3: "I need life organization AND want to start a business",
                continueBtnText: "Continue With Selected Path",
                businessQuestionnaireTitle: "Business Preferences",
                investmentLabel: "Investment level for business:",
                workLocationLabel: "Preferred Work Location:",
                workStyleLabel: "Work Style Preference:",
                cameraComfortLabel: "Are you comfortable being on camera/social media?",
                incomeTimelineLabel: "Timeline to first income:",
                totalBudgetLabel: "Maximum startup budget (total):",
                familyStructureLabel: "Family structure & ages:",
                dailyScheduleLabel: "Describe your typical daily schedule:",
                learningStyleLabel: "Learning Style:",
                workPaceLabel: "Work Pace:",
                workFrequencyLabel: "Work Frequency:",
                techComfortLabel: "Tech Comfort Level:",
                currentTechToolsLabel: "Current Tech Tools:",
                proceedBtnText: "Start AI-Powered Analysis"
            },
            es: {
                welcomeTitle: "¡Bienvenida al Método Smart Mom!",
                welcomeDescription: "Crea tu calendario interactivo personalizado y plan de negocio en 6 pasos simples. Este proceso tomará aproximadamente 25-30 minutos y generará un calendario interactivo y plan integral diseñado específicamente para mamás ocupadas como tú.",
                welcomeStart: "Comenzar",
                welcomeCreate: "Crear Cuenta y Guardar Progreso",
                welcomeReturning: "Soy usuaria recurrente",
                languageTitle: "Elige Tu Idioma / Choose Your Language",
                stepCounter: "Paso 1 de 6",
                mainTitle: "Método Smart Mom",
                mainSubtitle: "Calendario Interactivo y Planificación de Negocios con IA para Mamás Ocupadas",
                freeBadge: "100% Gratis",
                ctaButton: "Inicia Tu Calendario Interactivo y Plan de Negocio Gratis Ahora",
                ctaSubtext: "No se requiere email para navegar • El proceso completo toma 25-30 minutos",
                stepDescTitle: "¡Comencemos!",
                stepDescText: "Primero, conozcámonos mejor para poder crear el calendario interactivo y plan de negocio perfecto para tu situación única.",
                empowermentTitle: "¡Ya Eres Exitosa!",
                empowermentText: "Manejar una familia es dirigir una organización compleja. Tienes habilidades de negociación, experiencia en gestión del tiempo y capacidades de resolución de crisis que la mayoría de los CEOs envidiarían. ¡Ahora canalizemos eso hacia TU vida organizada y negocio exitoso!",
                basicInfoTitle: "Información Básica",
                nameLabel: "Tu Nombre:",
                emailLabel: "Tu Correo Electrónico:",
                pathSelectionTitle: "¿Qué te trae aquí hoy? Elige tu enfoque principal:",
                pathTitle1: "Organización de Vida",
                pathDesc1: "Necesito ayuda organizando mi vida diaria, horarios familiares y sistemas del hogar",
                pathTitle2: "Lanzamiento de Negocio",
                pathDesc2: "Quiero iniciar un negocio o crear fuentes de ingresos pasivos",
                pathTitle3: "Ambos: Vida y Negocio",
                pathDesc3: "Necesito organización de vida Y quiero iniciar un negocio",
                continueBtnText: "Continuar con el Camino Seleccionado",
                businessQuestionnaireTitle: "Preferencias de Negocio",
                investmentLabel: "Nivel de inversión para el negocio:",
                workLocationLabel: "Ubicación de Trabajo Preferida:",
                workStyleLabel: "Estilo de Trabajo Preferido:",
                cameraComfortLabel: "¿Te sientes cómoda frente a la cámara/redes sociales?",
                incomeTimelineLabel: "Cronograma para primeros ingresos:",
                totalBudgetLabel: "Presupuesto máximo de inicio (total):",
                familyStructureLabel: "Estructura familiar y edades:",
                dailyScheduleLabel: "Describe tu horario diario típico:",
                learningStyleLabel: "Estilo de Aprendizaje:",
                workPaceLabel: "Ritmo de Trabajo:",
                workFrequencyLabel: "Frecuencia de Trabajo:",
                techComfortLabel: "Nivel de Comodidad Tecnológica:",
                currentTechToolsLabel: "Herramientas Tecnológicas Actuales:",
                proceedBtnText: "Iniciar Análisis con IA"
            }
        };

        // Initialize the application
        function initializeApp() {
            updateUIText();
            checkInitialFields();
            
            // Add auth form submission handler
            document.getElementById('authForm').addEventListener('submit', handleAuthSubmit);
            
            // Show setup message in console
            console.log('🚀 SMART MOM METHOD - ENHANCED 6-STEP VERSION LOADED');
            console.log('✅ Interactive AI workflow active');
            console.log('✅ Progressive step revelation');
            console.log('✅ ADHD/autism-friendly visual design');
            console.log('✅ Response collection and prompt generation');
            console.log('✅ Final dashboard integration');
            console.log('✅ 5 NEW FORM FIELDS ADDED: Learning Style, Work Pace, Work Frequency, Tech Comfort, Current Tech Tools');
            console.log(`📊 Total form fields: 19 (12 required + 7 optional)`);
        }

        // Utility function for safe webhook calls
        async function safeWebhookCall(url, data, description = 'webhook') {
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
                
                if (response.ok) {
                    console.log(`✅ ${description} sent successfully`);
                } else {
                    console.log(`⚠️ ${description} responded with status ${response.status} - continuing anyway`);
                }
            } catch (error) {
                console.log(`⚠️ ${description} failed (likely CORS) - continuing anyway:`, error.message);
                // Don't throw - let the user experience continue
            }
        }

        // Authentication Functions
        async function handleAuthSubmit(e) {
            e.preventDefault();
            
            const email = document.getElementById('authEmail').value.trim();
            const password = document.getElementById('authPassword').value;
            const name = document.getElementById('authName').value.trim();
            const confirmPassword = document.getElementById('authConfirmPassword').value;
            
            const errorDiv = document.getElementById('authError');
            const successDiv = document.getElementById('authSuccess');
            const submitBtn = document.getElementById('authSubmitBtn');
            
            // Clear previous messages
            errorDiv.classList.add('hidden');
            successDiv.classList.add('hidden');
            
            // Validation
            if (!email || !password) {
                showAuthError('Please fill in all required fields.');
                return;
            }
            
            const emailValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
            if (!emailValid) {
                showAuthError('Please enter a valid email address.');
                return;
            }
            
            if (authMode === 'signup') {
                if (!name) {
                    showAuthError('Please enter your name.');
                    return;
                }
                
                if (password !== confirmPassword) {
                    showAuthError('Passwords do not match.');
                    return;
                }
                
                if (password.length < 6) {
                    showAuthError('Password must be at least 6 characters long.');
                    return;
                }
            }
            
            // Show loading state
            submitBtn.textContent = authMode === 'signup' ? 'Creating Account...' : 'Signing In...';
            submitBtn.disabled = true;
            
            try {
                if (authMode === 'signup') {
                    await handleSignup(email, password, name);
                } else {
                    await handleSignin(email, password);
                }
            } catch (error) {
                console.error('Auth error:', error);
                showAuthError('An error occurred. Please try again.');
            }
            
            // Reset button
            submitBtn.textContent = authMode === 'signup' ? 'Create Account' : 'Sign In';
            submitBtn.disabled = false;
        }

        async function handleSignup(email, password, name) {
            // Create simple password hash (in production, use proper hashing)
            const passwordHash = btoa(password); // Basic encoding - use proper hashing in production
            
            const userData = {
                email: email,
                name: name,
                selectedPath: '',
                currentStep: 1,
                language: currentLanguage,
                formData: {},
                passwordHash: passwordHash,
                createdAt: new Date().toISOString()
            };
            
            // Check localStorage for existing users
            const localUsers = JSON.parse(localStorage.getItem('smartMomUsers') || '{}');
            if (localUsers[email]) {
                showAuthError('An account with this email already exists. Please sign in instead.');
                return;
            }
            
            // Save to localStorage (guaranteed to work)
            localUsers[email] = userData;
            localStorage.setItem('smartMomUsers', JSON.stringify(localUsers));
            
            showAuthSuccess('Account created successfully! Your progress will be saved locally.');
            
            // Send welcome email webhook (non-blocking)
            safeWebhookCall('https://momsurvivaltoolkit.app.n8n.cloud/webhook-test/smart-mom-welcome', {
                email: userData.email,
                name: userData.name,
                trigger_welcome_email: 'true',
                account_created: 'true',
                language: userData.language,
                timestamp: new Date().toISOString()
            }, 'Welcome email');
            
            // Auto-fill the main form
            document.getElementById('user-name').value = name;
            document.getElementById('user-email').value = email;
            
            // Close modal after delay
            setTimeout(() => {
                closeAuthModal();
                checkInitialFields();
            }, 2000);
        }

        async function handleSignin(email, password) {
            const localUsers = JSON.parse(localStorage.getItem('smartMomUsers') || '{}');
            const userData = localUsers[email];
            
            if (!userData) {
                showAuthError('No account found with this email address.');
                return;
            }
            
            // Check password (basic comparison - use proper verification in production)
            const storedHash = userData.passwordHash || '';
            const passwordHash = btoa(password);
            
            if (storedHash !== passwordHash) {
                showAuthError('Incorrect password.');
                return;
            }
            
            showAuthSuccess(`Welcome back, ${userData.name}!`);
            
            // Load user progress
            setTimeout(() => {
                loadUserProgress(userData);
                closeAuthModal();
            }, 1500);
        }

        function showAuthError(message) {
            const errorDiv = document.getElementById('authError');
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
        }

        function showAuthSuccess(message) {
            const successDiv = document.getElementById('authSuccess');
            successDiv.textContent = message;
            successDiv.classList.remove('hidden');
        }

        // Language Functions
        function changeLanguage(lang) {
            currentLanguage = lang;
            
            // Update active language button
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`lang-${lang}`).classList.add('active');
            
            updateUIText();
        }

        function updateUIText() {
            const t = translations[currentLanguage];
            
            // Update all text elements
            Object.keys(t).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    element.textContent = t[key];
                }
            });
            
            // Update placeholders
            const placeholders = {
                'user-name': currentLanguage === 'es' ? 'Ingresa tu nombre' : 'Enter your name',
                'user-email': currentLanguage === 'es' ? 'tu.correo@ejemplo.com' : 'your.email@example.com',
                'family-structure': currentLanguage === 'es' ? 'Cuéntanos sobre tu familia: ¿Cuántos hijos? ¿Qué edades? ¿Alguna necesidad especial o consideración?' : 'Tell us about your family: How many kids? What ages? Any special needs or considerations?',
                'daily-schedule': currentLanguage === 'es' ? 'Cuéntanos sobre un día típico: ¿A qué hora despiertas? ¿Horarios de los niños? ¿Cuándo tienes tiempo libre?' : 'Walk us through a typical day: When do you wake up? Kids\' schedules? When do you have free time?',
                'current-tech-tools': currentLanguage === 'es' ? 'Lista las herramientas/plataformas que ya usas (Google, Facebook, Zoom, etc.)' : 'List any tools/platforms you already use (Google, Facebook, Zoom, etc.)'
            };
            
            Object.entries(placeholders).forEach(([id, text]) => {
                const element = document.getElementById(id);
                if (element) element.placeholder = text;
            });
        }

        // Modal Functions
        function startOnboarding() {
            document.getElementById('welcomeModal').classList.add('hidden');
        }

        function showAuthModal(mode) {
            authMode = mode;
            const modal = document.getElementById('authModal');
            const title = document.getElementById('authTitle');
            const submitBtn = document.getElementById('authSubmitBtn');
            const switchText = document.getElementById('authSwitchText');
            const switchLink = document.getElementById('authSwitchLink');
            const nameField = document.getElementById('authName');
            const confirmField = document.getElementById('authConfirmPassword');

            if (mode === 'signup') {
                title.textContent = 'Create Your Account';
                submitBtn.textContent = 'Create Account';
                switchText.textContent = 'Already have an account?';
                switchLink.textContent = 'Sign In';
                nameField.style.display = 'block';
                confirmField.style.display = 'block';
            } else {
                title.textContent = 'Sign In';
                submitBtn.textContent = 'Sign In';
                switchText.textContent = "Don't have an account?";
                switchLink.textContent = 'Create Account';
                nameField.style.display = 'none';
                confirmField.style.display = 'none';
            }

            modal.classList.add('active');
        }

        function closeAuthModal() {
            document.getElementById('authModal').classList.remove('active');
        }

        function toggleAuthMode() {
            showAuthModal(authMode === 'signup' ? 'signin' : 'signup');
        }

        async function handleReturningUser() {
            document.getElementById('welcomeModal').classList.add('hidden');
            
            // Create a better input modal instead of using prompt
            const modal = document.createElement('div');
            modal.className = 'auth-modal active';
            modal.id = 'returningUserModal';
            
            modal.innerHTML = `
                <div class="auth-content">
                    <button class="auth-close" onclick="closeReturningUserModal()">&times;</button>
                    <h2 class="auth-title">${currentLanguage === 'es' ? 'Bienvenida de Nuevo' : 'Welcome Back'}</h2>
                    
                    <div id="returningUserError" class="auth-error hidden"></div>
                    <div id="returningUserSuccess" class="auth-success hidden"></div>
                    
                    <div class="auth-form">
                        <input type="email" id="returningUserEmail" class="auth-input" placeholder="${currentLanguage === 'es' ? 'Tu correo electrónico' : 'Your email address'}" required>
                        <button type="button" class="auth-button" onclick="lookupReturningUser()" id="lookupBtn">
                            ${currentLanguage === 'es' ? 'Buscar Mi Progreso' : 'Find My Progress'}
                        </button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
        }

        function closeReturningUserModal() {
            const modal = document.getElementById('returningUserModal');
            if (modal) {
                modal.remove();
                document.getElementById('welcomeModal').classList.remove('hidden');
            }
        }

        async function lookupReturningUser() {
            const email = document.getElementById('returningUserEmail').value.trim();
            const errorDiv = document.getElementById('returningUserError');
            const successDiv = document.getElementById('returningUserSuccess');
            const lookupBtn = document.getElementById('lookupBtn');
            
            // Clear previous messages
            errorDiv.classList.add('hidden');
            successDiv.classList.add('hidden');
            
            if (!email) {
                errorDiv.textContent = currentLanguage === 'es' ? 
                    'Por favor ingresa tu correo electrónico.' : 
                    'Please enter your email address.';
                errorDiv.classList.remove('hidden');
                return;
            }

            // Validate email format
            const emailValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
            if (!emailValid) {
                errorDiv.textContent = currentLanguage === 'es' ? 
                    'Por favor ingresa un correo electrónico válido.' : 
                    'Please enter a valid email address.';
                errorDiv.classList.remove('hidden');
                return;
            }

            // Show loading state
            lookupBtn.textContent = currentLanguage === 'es' ? 'Buscando...' : 'Looking up...';
            lookupBtn.disabled = true;

            // Use localStorage for user lookup
            const localUsers = JSON.parse(localStorage.getItem('smartMomUsers') || '{}');
            const userData = localUsers[email];
            
            if (userData) {
                // Success! Load user data
                successDiv.textContent = currentLanguage === 'es' ? 
                    `¡Encontrado! Bienvenida de nuevo, ${userData.name || 'Smart Mom'}!` : 
                    `Found! Welcome back, ${userData.name || 'Smart Mom'}!`;
                successDiv.classList.remove('hidden');
                
                // Load user progress
                setTimeout(() => {
                    loadUserProgress(userData);
                    closeReturningUserModal();
                }, 1500);
                
            } else {
                // User not found
                errorDiv.textContent = currentLanguage === 'es' ? 
                    'Correo no encontrado en el almacenamiento local. ¿Te gustaría empezar un nuevo viaje?' : 
                    'Email not found in local storage. Would you like to start a new journey?';
                errorDiv.classList.remove('hidden');
                
                // Offer to start new journey
                setTimeout(() => {
                    if (confirm(currentLanguage === 'es' ? 
                        '¿Quieres empezar desde el principio?' : 
                        'Would you like to start from the beginning?')) {
                        closeReturningUserModal();
                    }
                }, 2000);
            }

            // Reset button
            lookupBtn.textContent = currentLanguage === 'es' ? 'Buscar Mi Progreso' : 'Find My Progress';
            lookupBtn.disabled = false;
        }

        function loadUserProgress(userData) {
            // Set global variables
            selectedPath = userData.selectedPath || '';
            currentLanguage = userData.language || 'en';
            
            // Update language UI
            changeLanguage(currentLanguage);
            
            // Fill form fields if they exist
            if (userData.name) {
                const nameField = document.getElementById('user-name');
                if (nameField) nameField.value = userData.name;
            }
            
            if (userData.email) {
                const emailField = document.getElementById('user-email');
                if (emailField) emailField.value = userData.email;
            }
            
            // Fill other form data
            Object.keys(userData.formData || {}).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    element.value = userData.formData[key];
                }
            });
            
            // Show appropriate step based on progress
            if (userData.selectedPath) {
                // User has selected a path, show questionnaire or continue to next steps
                if (userData.currentStep >= 3) {
                    // Show AI results or later steps
                    showBusinessQuestionnaire();
                } else {
                    // Show path selection with pre-selected path
                    document.getElementById('pathSelection').classList.remove('hidden');
                    const pathOption = document.querySelector(`[data-path="${userData.selectedPath}"]`);
                    if (pathOption) {
                        pathOption.classList.add('selected');
                        document.getElementById('continueBtn').classList.add('visible');
                    }
                }
            } else {
                // User hasn't selected a path yet, show path selection
                const nameField = document.getElementById('user-name');
                const emailField = document.getElementById('user-email');
                if (nameField && emailField && nameField.value && emailField.value) {
                    document.getElementById('pathSelection').classList.remove('hidden');
                }
            }
        }

        // Form Functions
        function validateField(field) {
            const value = field.value.trim();
            const validation = document.getElementById(field.id + '-validation');
            
            if (field.type === 'email') {
                const emailValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value);
                if (value && emailValid) {
                    validation.textContent = '✓ Valid email';
                    validation.className = 'validation-message success';
                    field.style.borderColor = 'var(--sage-green)';
                } else if (value) {
                    validation.textContent = 'Please enter a valid email address';
                    validation.className = 'validation-message';
                    field.style.borderColor = '#e57373';
                } else {
                    validation.textContent = '';
                    field.style.borderColor = 'var(--light-sage)';
                }
            } else if (field.tagName === 'SELECT') {
                if (value) {
                    validation.textContent = '✓ Selected';
                    validation.className = 'validation-message success';
                    field.style.borderColor = 'var(--sage-green)';
                } else {
                    validation.textContent = 'Please make a selection';
                    validation.className = 'validation-message';
                    field.style.borderColor = '#e57373';
                }
            } else if (field.tagName === 'TEXTAREA') {
                if (value.length >= 10) {
                    validation.textContent = '✓ Looks good';
                    validation.className = 'validation-message success';
                    field.style.borderColor = 'var(--sage-green)';
                } else if (value.length > 0) {
                    validation.textContent = 'Please provide more detail (at least 10 characters)';
                    validation.className = 'validation-message';
                    field.style.borderColor = '#e57373';
                } else {
                    validation.textContent = '';
                    field.style.borderColor = 'var(--light-sage)';
                }
            } else if (field.type === 'text' && field.id === 'current-tech-tools') {
                // Optional field - no validation error for empty
                if (value.length > 0) {
                    validation.textContent = '✓ Looks good';
                    validation.className = 'validation-message success';
                    field.style.borderColor = 'var(--sage-green)';
                } else {
                    validation.textContent = '';
                    field.style.borderColor = 'var(--light-sage)';
                }
            } else {
                if (value.length >= 2) {
                    validation.textContent = '✓ Looks good';
                    validation.className = 'validation-message success';
                    field.style.borderColor = 'var(--sage-green)';
                } else if (value.length > 0) {
                    validation.textContent = 'Please enter at least 2 characters';
                    validation.className = 'validation-message';
                    field.style.borderColor = '#e57373';
                } else {
                    validation.textContent = '';
                    field.style.borderColor = 'var(--light-sage)';
                }
            }
        }

        function updateCharCount(field, maxChars) {
            const counter = document.getElementById(field.id + '-counter');
            const currentLength = field.value.length;
            counter.textContent = `${currentLength}/${maxChars}`;
            
            if (currentLength > maxChars) {
                counter.style.color = '#e57373';
                field.value = field.value.substring(0, maxChars);
                counter.textContent = `${maxChars}/${maxChars}`;
            } else if (currentLength > maxChars * 0.9) {
                counter.style.color = '#f39c12';
            } else {
                counter.style.color = 'var(--charcoal)';
            }
        }

        function checkInitialFields() {
            const nameField = document.getElementById('user-name');
            const emailField = document.getElementById('user-email');
            
            function validate() {
                const name = nameField?.value.trim() || '';
                const email = emailField?.value.trim() || '';
                const emailValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
                
                if (name.length >= 2 && email && emailValid) {
                    document.getElementById('pathSelection').classList.remove('hidden');
                    document.getElementById('pathSelection').scrollIntoView({ behavior: 'smooth' });
                } else {
                    document.getElementById('pathSelection').classList.add('hidden');
                }
            }
            
            if (nameField) nameField.addEventListener('input', validate);
            if (emailField) emailField.addEventListener('input', validate);
        }

        function scrollToForm() {
            document.getElementById('basicInfoSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Path Selection Functions
        function selectPath(path) {
            selectedPath = path;
            
            // Update visual selection
            document.querySelectorAll('.path-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelector(`[data-path="${path}"]`).classList.add('selected');
            
            // Show continue button
            const continueBtn = document.getElementById('continueBtn');
            continueBtn.classList.add('visible');
        }

        function showBusinessQuestionnaire() {
            if (!selectedPath) {
                alert(currentLanguage === 'es' ? 
                    'Por favor selecciona un camino antes de continuar.' :
                    'Please select a path before continuing.');
                return;
            }

            // Hide path selection
            document.getElementById('pathSelection').classList.add('hidden');
            
            // Show business questionnaire
            document.getElementById('businessQuestionnaire').classList.remove('hidden');
            document.getElementById('businessQuestionnaire').scrollIntoView({ behavior: 'smooth' });
        }

        async function proceedWithQuestionnaire() {
            // Validate all required fields
            const requiredFields = [
                'investment-level', 'work-location', 'work-style', 
                'camera-comfort', 'income-timeline', 'total-budget', 
                'family-structure', 'daily-schedule', 'learning-style',
                'work-pace', 'work-frequency', 'tech-comfort'
            ];

            let allValid = true;
            for (const fieldId of requiredFields) {
                const field = document.getElementById(fieldId);
                if (field) {
                    validateField(field);
                    if (!field.value.trim()) {
                        allValid = false;
                    }
                }
            }

            if (!allValid) {
                alert(currentLanguage === 'es' ? 
                    'Por favor completa todos los campos requeridos antes de continuar.' :
                    'Please complete all required fields before continuing.');
                return;
            }

            // Get user data
            const userData = collectFormData();

            // Save to localStorage 
            const localUsers = JSON.parse(localStorage.getItem('smartMomUsers') || '{}');
            if (localUsers[userData.email]) {
                // Update existing user
                localUsers[userData.email] = { ...localUsers[userData.email], ...userData };
            } else {
                // Create new entry
                localUsers[userData.email] = userData;
            }
            localStorage.setItem('smartMomUsers', JSON.stringify(localUsers));
            console.log('✅ User questionnaire data (19 fields) saved locally:', userData);
            
            // Hide questionnaire
            document.getElementById('businessQuestionnaire').classList.add('hidden');
            
            // Show Interactive AI Workflow
            document.getElementById('interactiveAIWorkflow').classList.remove('hidden');
            document.getElementById('interactiveAIWorkflow').scrollIntoView({ behavior: 'smooth' });
            
            // Send webhook notification (non-blocking)
            safeWebhookCall('https://momsurvivaltoolkit.app.n8n.cloud/webhook-test/smart-mom-form', {
                ...userData,
                trigger_questionnaire_complete: 'true',
                lead_stage: 'Questionnaire Complete',
                timestamp: new Date().toISOString()
            }, 'Questionnaire completion notification');
            
            // Generate first prompt
            generateChatGPTPrompt();
        }

        function collectFormData() {
            return {
                email: document.getElementById('user-email')?.value.trim() || '',
                name: document.getElementById('user-name')?.value.trim() || '',
                selectedPath: selectedPath,
                currentStep: 3,
                language: currentLanguage,
                'investment-level': document.getElementById('investment-level')?.value || '',
                'work-location': document.getElementById('work-location')?.value || '',
                'work-style': document.getElementById('work-style')?.value || '',
                'camera-comfort': document.getElementById('camera-comfort')?.value || '',
                'income-timeline': document.getElementById('income-timeline')?.value || '',
                'total-budget': document.getElementById('total-budget')?.value || '',
                'family-structure': document.getElementById('family-structure')?.value || '',
                'daily-schedule': document.getElementById('daily-schedule')?.value || '',
                'learning-style': document.getElementById('learning-style')?.value || '',
                'work-pace': document.getElementById('work-pace')?.value || '',
                'work-frequency': document.getElementById('work-frequency')?.value || '',
                'tech-comfort': document.getElementById('tech-comfort')?.value || '',
                'current-tech-tools': document.getElementById('current-tech-tools')?.value || '',
                formData: {
                    'user-name': document.getElementById('user-name')?.value.trim() || '',
                    'user-email': document.getElementById('user-email')?.value.trim() || '',
                    'investment-level': document.getElementById('investment-level')?.value || '',
                    'work-location': document.getElementById('work-location')?.value || '',
                    'work-style': document.getElementById('work-style')?.value || '',
                    'camera-comfort': document.getElementById('camera-comfort')?.value || '',
                    'income-timeline': document.getElementById('income-timeline')?.value || '',
                    'total-budget': document.getElementById('total-budget')?.value || '',
                    'family-structure': document.getElementById('family-structure')?.value || '',
                    'daily-schedule': document.getElementById('daily-schedule')?.value || '',
                    'learning-style': document.getElementById('learning-style')?.value || '',
                    'work-pace': document.getElementById('work-pace')?.value || '',
                    'work-frequency': document.getElementById('work-frequency')?.value || '',
                    'tech-comfort': document.getElementById('tech-comfort')?.value || '',
                    'current-tech-tools': document.getElementById('current-tech-tools')?.value || ''
                }
            };
        }

        // Enhanced AI Workflow Functions
        function generateChatGPTPrompt() {
            const data = collectFormData();
            
            const chatgptPrompt = `${realismInstructions}

Create 3 personalized business ideas for a busy mom with this profile:

**Personal Details:**
- Name: ${data.name}
- Selected Path: ${data.selectedPath}
- Investment Level: ${data['investment-level']}
- Work Location: ${data['work-location']}
- Work Style: ${data['work-style']}
- Camera Comfort: ${data['camera-comfort']}
- Income Timeline: ${data['income-timeline']}
- Total Budget: ${data['total-budget']}
- Learning Style: ${data['learning-style']}
- Work Pace: ${data['work-pace']}
- Work Frequency: ${data['work-frequency']}
- Tech Comfort: ${data['tech-comfort']}
- Current Tech Tools: ${data['current-tech-tools']}

**Family & Schedule:**
- Family Structure: ${data['family-structure']}
- Daily Schedule: ${data['daily-schedule']}

Based on this information, suggest 3 realistic business ideas that:
1. Match her work location and style preferences
2. Fit within her budget and timeline constraints
3. Work with her family schedule and commitments
4. Respect her camera/social media comfort level
5. Align with her learning style and work pace preferences
6. Match her tech comfort level and available tools
7. Are actually doable for a mom with limited time

For each business idea, include:
- Business concept (be specific)
- Why it fits her situation
- Realistic income potential in first 6 months
- Time commitment required per week
- Initial steps to get started
- Potential challenges and how to overcome them

Remember: Be brutally honest about what's realistic vs. what sounds good on paper.`;

            document.getElementById('chatgpt-prompt').value = chatgptPrompt;
            updateProgressStep(1);
        }

        function checkResponseAndEnableNext(step) {
            const responseField = document.getElementById(getResponseFieldId(step));
            const nextBtn = document.getElementById(`next-btn-${step}`);
            
            if (responseField.value.trim().length > 50) {
                nextBtn.disabled = false;
                nextBtn.style.opacity = '1';
                // Store the response
                aiResponses[step] = responseField.value.trim();
            } else {
                nextBtn.disabled = true;
                nextBtn.style.opacity = '0.5';
            }
        }

        function checkInfographicCode(step) {
            const codeField = document.getElementById('gemini-infographic-code');
            const nextBtn = document.getElementById(`next-btn-${step}`);
            
            const code = codeField.value.trim();
            if (code.length > 20 && (code.includes('<') || code.includes('css') || code.includes('style'))) {
                nextBtn.disabled = false;
                nextBtn.style.opacity = '1';
                aiResponses[step] = code;
            } else {
                nextBtn.disabled = true;
                nextBtn.style.opacity = '0.5';
            }
        }

        function getResponseFieldId(step) {
            const fieldIds = {
                1: 'chatgpt-response',
                2: 'gemini-mvp-response',
                3: 'gemini-pricing-response',
                4: 'gemini-infographic-code',
                5: 'claude-calendar-response'
            };
            return fieldIds[step];
        }

        function generateNextPrompt(nextStep) {
            // Mark current step as completed
            markStepCompleted(nextStep - 1);
            
            // Update current step
            currentAIStep = nextStep;
            updateProgressStep(nextStep);
            
            // Generate appropriate prompt based on step
            switch(nextStep) {
                case 2:
                    generateGeminiMVPPrompt();
                    break;
                case 3:
                    generateGeminiPricingPrompt();
                    break;
                case 4:
                    generateGeminiInfographicPrompt();
                    break;
                case 5:
                    generateClaudeCalendarPrompt();
                    break;
                case 6:
                    showFinalDashboard();
                    break;
            }
        }

        function generateGeminiMVPPrompt() {
            const chatgptResponse = aiResponses[1] || '';
            const data = collectFormData();
            
            const geminiMVPPrompt = `${realismInstructions}

Based on these business ideas from ChatGPT and the mom's profile, conduct deep market research:

**ChatGPT Business Ideas:**
${chatgptResponse}

**Mom's Profile:**
- Investment Level: ${data['investment-level']}
- Work Location: ${data['work-location']}  
- Work Style: ${data['work-style']}
- Camera Comfort: ${data['camera-comfort']}
- Income Timeline: ${data['income-timeline']}
- Total Budget: ${data['total-budget']}
- Learning Style: ${data['learning-style']}
- Work Pace: ${data['work-pace']}
- Work Frequency: ${data['work-frequency']}
- Tech Comfort: ${data['tech-comfort']}
- Current Tech Tools: ${data['current-tech-tools']}
- Family: ${data['family-structure']}
- Schedule: ${data['daily-schedule']}

**IMPORTANT: Use Gemini's "Deep Search" feature for comprehensive research.**

Please research and provide:

1. **Market Validation** - Which of these business ideas have the best market demand?
2. **Competition Analysis** - Who's already doing this? How saturated are these markets?
3. **MVP Development** - What's the minimum viable product for each idea?
4. **Target Audience** - Who would buy from a mom in her situation?
5. **Success Stories** - Find real examples of moms who've succeeded in similar circumstances
6. **Failure Points** - What are the common reasons these businesses fail?
7. **Implementation Roadmap** - Step-by-step MVP development for the most viable option

Focus on: 
- Current market trends (2024/2025)
- What's oversaturated vs. underserved
- Realistic timeline expectations
- Budget-conscious strategies
- Specific to her constraints and situation
- Consider her learning style and tech comfort level

Recommend the ONE best business idea with detailed MVP plan.`;

            document.getElementById('gemini-mvp-prompt').value = geminiMVPPrompt;
            
            // Enable buttons for step 2
            document.getElementById('copy-mvp-btn').disabled = false;
            document.getElementById('open-gemini-mvp-btn').disabled = false;
            
            // Scroll to step 2
            document.getElementById('ai-step-2-container').scrollIntoView({ behavior: 'smooth' });
        }

        function generateGeminiPricingPrompt() {
            const mvpResponse = aiResponses[2] || '';
            const data = collectFormData();
            
            const geminiPricingPrompt = `${realismInstructions}

Based on the MVP research and recommended business idea, conduct deep pricing research:

**Recommended Business & MVP Plan:**
${mvpResponse}

**Mom's Constraints:**
- Investment Level: ${data['investment-level']}
- Total Budget: ${data['total-budget']}
- Income Timeline: ${data['income-timeline']}
- Work Location: ${data['work-location']}
- Learning Style: ${data['learning-style']}
- Work Pace: ${data['work-pace']}
- Work Frequency: ${data['work-frequency']}
- Tech Comfort: ${data['tech-comfort']}
- Current Tech Tools: ${data['current-tech-tools']}

**IMPORTANT: Use Gemini's "Deep Search" feature for comprehensive pricing research.**

Research and provide:

1. **Competitor Pricing Analysis** - What do similar services/products cost?
2. **Market Price Points** - What do customers actually pay vs. what's advertised?
3. **Pricing Strategy Recommendations** - Start low, premium, or mid-range?
4. **Revenue Projections** - Realistic income potential at different price points
5. **Pricing Psychology** - What price points convert best for her target audience?
6. **Package Options** - How to structure pricing tiers
7. **Geographic Pricing** - Price differences by location/market
8. **Beginner-Friendly Pricing** - How to price as a newcomer vs. established competitor

**Specific Requirements:**
- Give exact dollar amounts, not ranges
- Consider her beginner status
- Factor in her time constraints and work frequency
- Consider her tech comfort level for implementation
- Provide 3 pricing tiers (basic, standard, premium)
- Include launch pricing vs. established pricing
- Consider local market conditions

Make specific recommendations for her exact situation.`;

            document.getElementById('gemini-pricing-prompt').value = geminiPricingPrompt;
            
            // Enable buttons for step 3
            document.getElementById('copy-pricing-btn').disabled = false;
            document.getElementById('open-gemini-pricing-btn').disabled = false;
            
            // Scroll to step 3
            document.getElementById('ai-step-3-container').scrollIntoView({ behavior: 'smooth' });
        }

        function generateGeminiInfographicPrompt() {
            const pricingResponse = aiResponses[3] || '';
            const data = collectFormData();
            
            const geminiInfographicPrompt = `Create a visual pricing infographic based on this pricing research:

**Pricing Research Results:**
${pricingResponse}

**Requirements:**
Create an HTML/CSS infographic that shows:

1. **3 Pricing Tiers** - Clear visual comparison
2. **Value Propositions** - What customers get at each level
3. **Professional Design** - Clean, modern, easy to understand
4. **ADHD/Autism Friendly** - Clear visual hierarchy, not overwhelming
5. **Color Coded** - Different colors for each tier
6. **Mobile Responsive** - Works on all devices

**Design Guidelines:**
- Use professional colors (blues, greens, soft golds)
- Clear typography, easy to read
- Visual icons for features
- Comparison layout (3 columns)
- Call-to-action buttons
- Simple, clean design
- No animation or distracting elements

**Content to Include:**
- Tier names and prices
- Key features for each tier
- "Most Popular" badge for middle tier
- Clear value proposition
- Easy comparison format

Please provide ONLY the complete HTML/CSS code that I can copy and paste to render the infographic. Make it self-contained with inline CSS.`;

            document.getElementById('gemini-infographic-prompt').value = geminiInfographicPrompt;
            
            // Enable buttons for step 4
            document.getElementById('copy-infographic-btn').disabled = false;
            document.getElementById('open-gemini-infographic-btn').disabled = false;
            
            // Scroll to step 4
            document.getElementById('ai-step-4-container').scrollIntoView({ behavior: 'smooth' });
        }

        function generateClaudeCalendarPrompt() {
            const chatgptResponse = aiResponses[1] || '';
            const mvpResponse = aiResponses[2] || '';
            const pricingResponse = aiResponses[3] || '';
            const infographicCode = aiResponses[4] || '';
            const data = collectFormData();
            
            const claudeCalendarPrompt = `${realismInstructions}

Create a comprehensive interactive calendar and business plan based on all previous AI research:

**ChatGPT Business Ideas:**
${chatgptResponse}

**Gemini MVP Research:**
${mvpResponse}

**Gemini Pricing Research:**
${pricingResponse}

**Mom's Complete Profile:**
- Name: ${data.name}
- Path: ${data.selectedPath}
- Investment: ${data['investment-level']}
- Location: ${data['work-location']}
- Style: ${data['work-style']}
- Camera: ${data['camera-comfort']}
- Timeline: ${data['income-timeline']}
- Budget: ${data['total-budget']}
- Learning Style: ${data['learning-style']}
- Work Pace: ${data['work-pace']}
- Work Frequency: ${data['work-frequency']}
- Tech Comfort: ${data['tech-comfort']}
- Current Tech Tools: ${data['current-tech-tools']}
- Family: ${data['family-structure']}
- Schedule: ${data['daily-schedule']}

**TASK: Create an interactive HTML calendar artifact that includes:**

1. **Interactive Monthly Calendar**
   - Clickable dates with business tasks
   - Family schedule integration
   - Color-coded activities (business, family, personal)
   - Goal tracking milestones
   - Revenue targets

2. **Business Plan Summary**
   - Chosen business idea with rationale
   - Step-by-step implementation timeline
   - Weekly task breakdown
   - Revenue projections
   - Marketing plan

3. **Daily Schedule Template**
   - Time blocking for business work
   - Family commitments
   - Personal time
   - Flexibility for her constraints

4. **Progress Tracking**
   - Business milestone tracking
   - Financial goals
   - Personal development
   - Family organization

5. **Resource Links**
   - Tools and platforms needed
   - Learning resources
   - Support communities

**Design Requirements:**
- ADHD/Autism friendly (clear, organized, not overwhelming)
- Mobile responsive
- Professional appearance
- Easy to navigate
- Printable sections
- Interactive elements

**Content Requirements:**
- Specific to her exact situation
- Realistic timelines
- Actionable tasks
- Measurable goals
- Emergency flexibility
- Adapted to her learning style and work pace
- Appropriate for her tech comfort level

Create this as a complete, downloadable HTML file that she can use as her business and life organization tool. Include everything she needs to succeed based on all the AI research.`;

            document.getElementById('claude-calendar-prompt').value = claudeCalendarPrompt;
            
            // Enable buttons for step 5
            document.getElementById('copy-claude-btn').disabled = false;
            document.getElementById('open-claude-btn').disabled = false;
            
            // Scroll to step 5
            document.getElementById('ai-step-5-container').scrollIntoView({ behavior: 'smooth' });
        }

        function confirmCalendarCreation() {
            // Mark step 5 as completed
            markStepCompleted(5);
            
            // Move to final dashboard
            currentAIStep = 6;
            updateProgressStep(6);
            showFinalDashboard();
        }

        function showFinalDashboard() {
            // Mark step 6 as current
            markStepCompleted(6);
            
            // Hide the interactive workflow
            document.getElementById('interactiveAIWorkflow').classList.add('hidden');
            
            // Show final dashboard
            document.getElementById('finalDashboard').classList.remove('hidden');
            document.getElementById('finalDashboard').scrollIntoView({ behavior: 'smooth' });
            
            // Populate dashboard content
            populateFinalDashboard();
            
            // Automatically show payment options and other sections in correct order
            document.getElementById('bookingSection').classList.remove('hidden');
            document.getElementById('paymentOptions').classList.remove('hidden');
            document.getElementById('completionSection').classList.remove('hidden');
        }

        function populateFinalDashboard() {
            // Populate business summary
            const businessSummary = document.getElementById('business-summary-content');
            const summaryContent = generateBusinessSummary();
            businessSummary.innerHTML = summaryContent;
            
            // Render infographic if available
            if (aiResponses[4]) {
                renderInfographic(aiResponses[4]);
            }
            
            // Update calendar display
            const calendarDisplay = document.getElementById('calendar-display');
            calendarDisplay.innerHTML = `
                <div style="text-align: center; padding: 20px;">
                    <h4>Your Interactive Calendar</h4>
                    <p>Your personalized calendar has been created by Claude and is ready for download.</p>
                    <button class="ai-btn open" onclick="openClaude()" style="margin: 10px;">
                        Download Calendar from Claude
                    </button>
                    <p style="font-size: 0.9rem; opacity: 0.8; margin-top: 15px;">
                        The calendar includes your business plan, daily schedules, goal tracking, and family integration.
                    </p>
                </div>
            `;
        }

        function generateBusinessSummary() {
            const data = collectFormData();
            return `
                <div style="line-height: 1.6;">
                    <h4 style="color: var(--sage-green); margin-bottom: 15px;">Your Smart Mom Business Plan</h4>
                    
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <strong>Selected Path:</strong> ${data.selectedPath}<br>
                        <strong>Investment Level:</strong> ${data['investment-level']}<br>
                        <strong>Timeline:</strong> ${data['income-timeline']}<br>
                        <strong>Work Style:</strong> ${data['work-style']}<br>
                        <strong>Learning Style:</strong> ${data['learning-style']}<br>
                        <strong>Work Pace:</strong> ${data['work-pace']}<br>
                        <strong>Work Frequency:</strong> ${data['work-frequency']}<br>
                        <strong>Tech Comfort:</strong> ${data['tech-comfort']}
                    </div>
                    
                    <h5 style="margin: 20px 0 10px 0;">Key Recommendations:</h5>
                    <ul style="margin-left: 20px;">
                        <li>Business ideas tailored to your schedule and budget</li>
                        <li>Market-validated MVP approach</li>
                        <li>Realistic pricing strategy</li>
                        <li>Family-integrated implementation plan</li>
                        <li>Step-by-step action items</li>
                    </ul>
                    
                    <div style="background: var(--light-sage); padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <strong>Next Steps:</strong><br>
                        1. Download your interactive calendar from Claude<br>
                        2. Review the complete business plan<br>
                        3. Start with Week 1 action items<br>
                        4. Track progress using built-in tools<br>
                        5. Adjust schedule as needed for family needs
                    </div>
                </div>
            `;
        }

        function renderInfographic(code) {
            const infographicContainer = document.getElementById('infographic-container');
            
            try {
                // Sanitize and render the code safely
                const sanitizedCode = sanitizeHTML(code);
                infographicContainer.innerHTML = sanitizedCode;
                infographicContainer.style.border = 'none';
            } catch (error) {
                console.error('Error rendering infographic:', error);
                infographicContainer.innerHTML = `
                    <div style="text-align: center; padding: 20px;">
                        <h4>Pricing Strategy</h4>
                        <p>Your pricing infographic was generated but couldn't be rendered automatically.</p>
                        <button class="ai-btn" onclick="showRawInfographicCode()" style="margin: 10px;">
                            View Infographic Code
                        </button>
                    </div>
                `;
            }
        }

        function sanitizeHTML(html) {
            // Basic HTML sanitization - remove potentially dangerous elements
            const temp = document.createElement('div');
            temp.innerHTML = html;
            
            // Remove script tags and event handlers
            const scripts = temp.querySelectorAll('script');
            scripts.forEach(script => script.remove());
            
            // Remove event handlers
            const elements = temp.querySelectorAll('*');
            elements.forEach(el => {
                const attributes = [...el.attributes];
                attributes.forEach(attr => {
                    if (attr.name.startsWith('on')) {
                        el.removeAttribute(attr.name);
                    }
                });
            });
            
            return temp.innerHTML;
        }

        function previewInfographic() {
            const code = document.getElementById('gemini-infographic-code').value.trim();
            if (!code) {
                alert('Please paste the infographic code first.');
                return;
            }
            
            // Open preview in new window
            const previewWindow = window.open('', '_blank', 'width=800,height=600');
            previewWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Infographic Preview</title>
                    <style>body { margin: 20px; font-family: Arial, sans-serif; }</style>
                </head>
                <body>
                    <h2>Pricing Infographic Preview</h2>
                    ${sanitizeHTML(code)}
                </body>
                </html>
            `);
            previewWindow.document.close();
        }

        function showRawInfographicCode() {
            const code = aiResponses[4] || '';
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.8); z-index: 10000; display: flex; 
                align-items: center; justify-content: center;
            `;
            
            modal.innerHTML = `
                <div style="background: white; padding: 30px; border-radius: 12px; max-width: 80%; max-height: 80%; overflow: auto;">
                    <h3>Infographic Code</h3>
                    <textarea style="width: 100%; height: 400px; font-family: monospace;" readonly>${code}</textarea>
                    <div style="margin-top: 15px;">
                        <button onclick="copyToClipboard('infographicCodeText')" style="padding: 10px 20px; margin: 5px;">Copy Code</button>
                        <button onclick="this.closest('.modal').remove()" style="padding: 10px 20px; margin: 5px;">Close</button>
                    </div>
                </div>
            `;
            modal.className = 'modal';
            document.body.appendChild(modal);
        }

        function updateProgressStep(step) {
            // Update step counter
            document.getElementById('stepCounter').textContent = `Step ${step} of 6`;
            
            // Update progress bar
            const progressFill = document.getElementById('progressFill');
            const percentage = (step / 6) * 100;
            progressFill.style.width = `${percentage}%`;
            
            // Update step visual states
            for (let i = 1; i <= 6; i++) {
                const stepElement = document.getElementById(`step-${i}`);
                if (stepElement) {
                    stepElement.classList.remove('active', 'completed', 'pending');
                    
                    if (i < step) {
                        stepElement.classList.add('completed');
                    } else if (i === step) {
                        stepElement.classList.add('active');
                    } else {
                        stepElement.classList.add('pending');
                    }
                }
            }
            
            // Update AI step containers
            for (let i = 1; i <= 6; i++) {
                const container = document.getElementById(`ai-step-${i}-container`);
                if (container) {
                    container.classList.remove('current', 'completed', 'pending');
                    
                    if (i < step) {
                        container.classList.add('completed');
                        container.querySelector('.ai-step-status').textContent = 'Completed';
                    } else if (i === step) {
                        container.classList.add('current');
                        container.querySelector('.ai-step-status').textContent = 'Current Step';
                    } else {
                        container.classList.add('pending');
                        container.querySelector('.ai-step-status').textContent = 'Waiting';
                    }
                }
            }
        }

        function markStepCompleted(step) {
            const container = document.getElementById(`ai-step-${step}-container`);
            if (container) {
                container.classList.remove('current', 'pending');
                container.classList.add('completed');
                container.querySelector('.ai-step-status').textContent = 'Completed';
            }
            
            const progressStep = document.getElementById(`step-${step}`);
            if (progressStep) {
                progressStep.classList.remove('active', 'pending');
                progressStep.classList.add('completed');
            }
        }

        function goBackToStep(step) {
            currentAIStep = step;
            updateProgressStep(step);
            
            // Scroll to the specified step
            const container = document.getElementById(`ai-step-${step}-container`);
            if (container) {
                container.scrollIntoView({ behavior: 'smooth' });
            }
        }

        function downloadCompletePackage() {
            // Create a comprehensive package with all collected data
            const packageData = {
                userProfile: collectFormData(),
                aiResponses: aiResponses,
                businessPlan: generateBusinessSummary(),
                infographicCode: aiResponses[4] || '',
                timestamp: new Date().toISOString()
            };
            
            // Create downloadable content
            const packageContent = `
SMART MOM METHOD - COMPLETE PACKAGE
Generated: ${new Date().toLocaleDateString()}

=== USER PROFILE ===
Name: ${packageData.userProfile.name}
Email: ${packageData.userProfile.email}
Selected Path: ${packageData.userProfile.selectedPath}
Investment Level: ${packageData.userProfile['investment-level']}
Work Location: ${packageData.userProfile['work-location']}
Work Style: ${packageData.userProfile['work-style']}
Camera Comfort: ${packageData.userProfile['camera-comfort']}
Income Timeline: ${packageData.userProfile['income-timeline']}
Total Budget: ${packageData.userProfile['total-budget']}
Learning Style: ${packageData.userProfile['learning-style']}
Work Pace: ${packageData.userProfile['work-pace']}
Work Frequency: ${packageData.userProfile['work-frequency']}
Tech Comfort: ${packageData.userProfile['tech-comfort']}
Current Tech Tools: ${packageData.userProfile['current-tech-tools']}

Family Structure: ${packageData.userProfile['family-structure']}

Daily Schedule: ${packageData.userProfile['daily-schedule']}

=== AI RESPONSES ===

1. CHATGPT BUSINESS IDEAS:
${aiResponses[1] || 'Not completed'}

2. GEMINI MVP RESEARCH:
${aiResponses[2] || 'Not completed'}

3. GEMINI PRICING RESEARCH:
${aiResponses[3] || 'Not completed'}

4. GEMINI INFOGRAPHIC CODE:
${aiResponses[4] || 'Not completed'}

=== NEXT STEPS ===
1. Download your interactive calendar from Claude
2. Review all AI responses for detailed business guidance
3. Start implementing the recommended business plan
4. Use the pricing strategy for your target market
5. Track progress using the provided tools

=== SUPPORT ===
For additional support and implementation guidance, 
visit our payment options or book a consultation call.

This package contains your complete Smart Mom Method analysis.
Keep this file for reference throughout your business journey.
            `;
            
            // Create and download the file
            const blob = new Blob([packageContent], { type: 'text/plain;charset=utf-8' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `smart-mom-complete-package-${Date.now()}.txt`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // Track download
            safeWebhookCall('https://momsurvivaltoolkit.app.n8n.cloud/webhook-test/smart-mom-download', {
                email: packageData.userProfile.email,
                name: packageData.userProfile.name,
                package_type: 'complete',
                timestamp: new Date().toISOString()
            }, 'Package download tracking');
        }

        function showPaymentOptions() {
            document.getElementById('paymentOptions').classList.remove('hidden');
            document.getElementById('bookingSection').classList.remove('hidden');
            document.getElementById('completionSection').classList.remove('hidden');
            
            document.getElementById('paymentOptions').scrollIntoView({ behavior: 'smooth' });
        }

        function skipToPaymentOptions() {
            // Hide workflow sections but keep basic info visible
            document.getElementById('pathSelection').classList.add('hidden');
            document.getElementById('businessQuestionnaire').classList.add('hidden');
            document.getElementById('interactiveAIWorkflow').classList.add('hidden');
            document.getElementById('finalDashboard').classList.add('hidden');
            
            // Show payment options
            document.getElementById('paymentOptions').classList.remove('hidden');
            document.getElementById('bookingSection').classList.remove('hidden');
            document.getElementById('completionSection').classList.remove('hidden');
            
            // Scroll to payment options
            document.getElementById('paymentOptions').scrollIntoView({ behavior: 'smooth' });
        }

        function returnToPlanningProcess() {
            // Hide payment sections
            document.getElementById('paymentOptions').classList.add('hidden');
            document.getElementById('bookingSection').classList.add('hidden');
            document.getElementById('completionSection').classList.add('hidden');
            
            // Check if user has filled basic info to show appropriate next step
            const nameField = document.getElementById('user-name');
            const emailField = document.getElementById('user-email');
            const name = nameField?.value.trim() || '';
            const email = emailField?.value.trim() || '';
            const emailValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
            
            if (name.length >= 2 && email && emailValid) {
                // Show path selection if basic info is complete
                document.getElementById('pathSelection').classList.remove('hidden');
                document.getElementById('pathSelection').scrollIntoView({ behavior: 'smooth' });
            } else {
                // Scroll back to basic info if not complete
                document.getElementById('basicInfoSection').scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Utility Functions
        function copyToClipboard(textareaId) {
            const textarea = document.getElementById(textareaId);
            if (!textarea) return;
            
            textarea.select();
            textarea.setSelectionRange(0, 99999); // For mobile devices
            
            try {
                document.execCommand('copy');
                // Show success feedback
                const originalText = textarea.nextElementSibling?.textContent || '';
                if (textarea.nextElementSibling && textarea.nextElementSibling.classList.contains('ai-btn')) {
                    const btn = textarea.nextElementSibling;
                    const originalText = btn.textContent;
                    btn.textContent = 'Copied!';
                    setTimeout(() => {
                        btn.textContent = originalText;
                    }, 2000);
                } else {
                    alert(currentLanguage === 'es' ? 
                        '¡Copiado al portapapeles!' : 
                        'Copied to clipboard!');
                }
            } catch (err) {
                console.error('Failed to copy: ', err);
                alert(currentLanguage === 'es' ? 
                    'Error al copiar. Por favor selecciona y copia manualmente.' : 
                    'Failed to copy. Please select and copy manually.');
            }
        }

        function openChatGPT() {
            window.open('https://chat.openai.com', '_blank');
        }

        function openGemini() {
            window.open('https://gemini.google.com', '_blank');
        }

        function openClaude() {
            window.open('https://claude.ai', '_blank');
        }

        function downloadCalendar() {
            // Generate calendar content based on selected path
            const calendarContent = generateCalendarContent();
            
            // Create downloadable file
            const blob = new Blob([calendarContent], { type: 'text/calendar;charset=utf-8' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `smart-mom-${selectedPath}-calendar.ics`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // Track download
            console.log('Calendar downloaded for path:', selectedPath);
        }

        function generateCalendarContent() {
            const now = new Date();
            const pathTitles = {
                'life-organization': 'Smart Mom Life Organization Calendar',
                'business-launch': 'Smart Mom Business Launch Calendar',
                'both': 'Smart Mom Complete Life & Business Calendar'
            };
            
            // Enhanced ICS calendar format
            return `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Smart Mom Method Calendar//EN
CALSCALE:GREGORIAN
METHOD:PUBLISH
X-WR-CALNAME:${pathTitles[selectedPath] || 'Smart Mom Calendar'}
X-WR-CALDESC:Your personalized Smart Mom Method calendar with AI-generated business plan and life organization system.
BEGIN:VEVENT
UID:smartmom-welcome-${Date.now()}@smartmommethod.com
DTSTAMP:${now.toISOString().replace(/[-:]/g, '').split('.')[0]}Z
DTSTART:${now.toISOString().replace(/[-:]/g, '').split('.')[0]}Z
SUMMARY:Welcome to Your Smart Mom Method Journey!
DESCRIPTION:Congratulations! Your personalized Smart Mom Method plan is ready. This calendar includes your AI-generated business recommendations\\, daily routines\\, and goal-oriented tasks designed specifically for busy moms like you. Start implementing your new organized life and business today!
CATEGORIES:Smart Mom Method\\,Life Organization\\,Business Planning
END:VEVENT
END:VCALENDAR`;
        }

        function provideFeedback() {
            const feedback = prompt(currentLanguage === 'es' ? 
                'Comparte tu experiencia con Smart Mom Method:' :
                'Share your experience with Smart Mom Method:');
                
            if (feedback) {
                // Send feedback webhook (non-blocking)
                safeWebhookCall('https://momsurvivaltoolkit.app.n8n.cloud/webhook-test/smart-mom-feedback', {
                    email: document.getElementById('user-email').value.trim(),
                    name: document.getElementById('user-name').value.trim(),
                    feedback: feedback,
                    selectedPath: selectedPath,
                    language: currentLanguage,
                    timestamp: new Date().toISOString()
                }, 'Feedback submission');
                
                alert(currentLanguage === 'es' ? 
                    '¡Gracias por tu feedback!' :
                    'Thank you for your feedback!');
            }
        }

        function startOver() {
            selectedPath = '';
            currentAIStep = 1;
            aiResponses = {};
            
            // Reset all forms
            document.getElementById('user-name').value = '';
            document.getElementById('user-email').value = '';
            
            // Reset business questionnaire
            const formFields = [
                'investment-level', 'work-location', 'work-style', 
                'camera-comfort', 'income-timeline', 'total-budget', 
                'family-structure', 'daily-schedule', 'learning-style',
                'work-pace', 'work-frequency', 'tech-comfort', 'current-tech-tools'
            ];
            
            formFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) {
                    field.value = '';
                    field.style.borderColor = 'var(--light-sage)';
                }
            });
            
            // Reset AI response fields
            const aiFields = [
                'chatgpt-prompt', 'chatgpt-response',
                'gemini-mvp-prompt', 'gemini-mvp-response',
                'gemini-pricing-prompt', 'gemini-pricing-response',
                'gemini-infographic-prompt', 'gemini-infographic-code',
                'claude-calendar-prompt'
            ];
            
            aiFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) field.value = '';
            });
            
            // Reset validations
            document.querySelectorAll('.validation-message').forEach(msg => {
                msg.textContent = '';
            });
            
            // Reset character counters
            document.querySelectorAll('.char-counter').forEach(counter => {
                counter.textContent = '0/1000';
            });
            
            // Reset path selection
            document.querySelectorAll('.path-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            document.getElementById('continueBtn').classList.remove('visible');
            
            // Reset progress
            updateProgressStep(1);
            
            // Show initial sections, keep basic info visible
            document.getElementById('pathSelection').classList.add('hidden');
            document.getElementById('businessQuestionnaire').classList.add('hidden');
            document.getElementById('interactiveAIWorkflow').classList.add('hidden');
            document.getElementById('finalDashboard').classList.add('hidden');
            document.getElementById('bookingSection').classList.add('hidden');
            document.getElementById('paymentOptions').classList.add('hidden');
            document.getElementById('completionSection').classList.add('hidden');
            
            // Scroll to top
            document.getElementById('basicInfoSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });
    </script>
</body>
</html>
