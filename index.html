<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Mom Method - AI Business Launch Wizard</title>
    <style>
        :root {
            --primary-blue: #2563EB;
            --success-green: #10B981;
            --warm-orange: #F59E0B;
            --purple-accent: #8B5CF6;
            --text-dark: #1F2937;
            --text-light: #6B7280;
            --bg-light: #F9FAFB;
            --border-color: #E5E7EB;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        /* PHASE 2: Welcome Modal */
        .welcome-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .welcome-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .welcome-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            text-align: center;
            transform: translateY(-50px);
            transition: transform 0.3s ease;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .welcome-modal.show .welcome-content {
            transform: translateY(0);
        }

        .welcome-content h2 {
            color: var(--primary-blue);
            margin-bottom: 20px;
            font-size: 2.2em;
        }

        .welcome-content p {
            color: var(--text-light);
            margin-bottom: 30px;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .welcome-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .welcome-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
        }

        .welcome-btn.primary {
            background: linear-gradient(135deg, var(--primary-blue), #1e40af);
            color: white;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
        }

        .welcome-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.4);
        }

        .welcome-btn.secondary {
            background: #6b7280;
            color: white;
        }

        .welcome-btn.secondary:hover {
            background: #4b5563;
            transform: translateY(-2px);
        }

        /* PHASE 2: Auto-save Indicator */
        .auto-save-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: bold;
            opacity: 0;
            transform: translateX(100px);
            transition: all 0.3s ease;
            z-index: 9999;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .auto-save-indicator.show {
            opacity: 1;
            transform: translateX(0);
        }

        .auto-save-indicator.saving {
            background: #f59e0b;
            color: white;
        }

        .auto-save-indicator.saved {
            background: #10b981;
            color: white;
        }

        .auto-save-indicator.error {
            background: #ef4444;
            color: white;
        }

        /* PHASE 2: Enhanced Progress Bar with Time Estimates */
        .progress-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .step-counter {
            font-weight: bold;
            color: var(--primary-blue);
            font-size: 1.2em;
        }

        .time-estimate {
            background: var(--warm-orange);
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.9em;
            font-weight: bold;
        }

        .overall-progress {
            width: 100%;
            height: 10px;
            background: #e5e7eb;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-blue), var(--success-green));
            transition: width 0.5s ease;
            border-radius: 5px;
        }

        .language-selector {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .language-selector h2 {
            margin-bottom: 15px;
            color: var(--text-dark);
            font-size: 1.5em;
        }

        .language-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .language-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px 30px;
            background: linear-gradient(135deg, var(--primary-blue), #1e40af);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            min-width: 200px;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
        }

        .language-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.4);
        }

        .language-btn.active {
            background: linear-gradient(135deg, var(--success-green), #047857);
        }

        .language-btn .flag {
            font-size: 2em;
            margin-bottom: 8px;
        }

        .main-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .header {
            background: linear-gradient(135deg, var(--primary-blue), #1e40af);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: shimmer 6s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .badge {
            display: inline-block;
            background: var(--success-green);
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            font-weight: bold;
            margin-top: 15px;
            font-size: 0.9em;
            position: relative;
            z-index: 1;
        }

        .workflow-selection {
            padding: 40px 30px;
            text-align: center;
            border-bottom: 2px solid var(--border-color);
        }

        .workflow-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .workflow-option {
            padding: 30px;
            border: 2px solid var(--border-color);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }

        .workflow-option:hover {
            border-color: var(--primary-blue);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .workflow-option.selected {
            border-color: var(--primary-blue);
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
        }

        .content {
            padding: 40px 30px;
        }

        .progress-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            padding: 0 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            border-radius: 8px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .progress-step:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        /* PHASE 2: Color-Coded Progress Steps */
        .progress-step.active {
            color: var(--primary-blue);
            background: rgba(37, 99, 235, 0.1);
        }

        .progress-step.completed {
            color: var(--success-green);
            background: rgba(16, 185, 129, 0.1);
        }

        .progress-step.next {
            color: var(--warm-orange);
            background: rgba(245, 158, 11, 0.1);
        }

        .step-number {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .progress-step.active .step-number {
            background: var(--primary-blue);
            color: white;
            animation: pulse 2s infinite;
        }

        .progress-step.completed .step-number {
            background: var(--success-green);
            color: white;
        }

        .progress-step.next .step-number {
            background: var(--warm-orange);
            color: white;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .step-text {
            font-size: 0.9em;
            text-align: center;
            font-weight: 500;
        }

        .step-content {
            display: none;
        }

        .step-content.active {
            display: block;
        }

        .step-description {
            background: var(--bg-light);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 4px solid var(--primary-blue);
        }

        .form-section {
            margin-bottom: 30px;
            padding: 25px;
            background: var(--bg-light);
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }

        .form-section h3 {
            color: var(--text-dark);
            margin-bottom: 20px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 20px;
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-dark);
        }

        /* PHASE 2: Required field indicators */
        .required {
            color: #ef4444;
            margin-left: 4px;
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        /* PHASE 2: Real-time validation styles */
        .form-control.valid {
            border-color: var(--success-green);
            background-color: rgba(16, 185, 129, 0.05);
        }

        .form-control.invalid {
            border-color: #ef4444;
            background-color: rgba(239, 68, 68, 0.05);
        }

        .field-error {
            color: #ef4444;
            font-size: 0.9em;
            margin-top: 5px;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }

        .field-error.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* PHASE 2: Character counters */
        .char-counter {
            text-align: right;
            font-size: 0.85em;
            color: var(--text-light);
            margin-top: 5px;
            transition: color 0.3s ease;
        }

        .char-counter.warning {
            color: var(--warm-orange);
            font-weight: bold;
        }

        .char-counter.error {
            color: #ef4444;
            font-weight: bold;
        }

        /* PHASE 2: Enhanced Button System with Color Coding */
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-blue), #1e40af);
            color: white;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.4);
        }

        /* PHASE 2: Color-coded button states */
        .btn-next {
            background: linear-gradient(135deg, var(--success-green), #047857);
            color: white;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }

        .btn-next:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
        }

        .btn-current {
            background: linear-gradient(135deg, var(--primary-blue), #1e40af);
            color: white;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
            animation: glow 2s infinite;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3); }
            50% { box-shadow: 0 8px 25px rgba(37, 99, 235, 0.6); }
        }

        .btn-completed {
            background: linear-gradient(135deg, #6b7280, #4b5563);
            color: white;
        }

        .btn-secondary {
            background: #6b7280;
            color: white;
        }

        .btn-secondary:hover {
            background: #4b5563;
            transform: translateY(-2px);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success-green), #047857);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
        }

        .prompt-container {
            background: #f8fafc;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }

        .prompt-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .prompt-text {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
        }

        .copy-btn {
            padding: 8px 16px;
            background: var(--primary-blue);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            background: #1e40af;
            transform: translateY(-1px);
        }

        .ai-platform-link {
            margin: 20px 0;
            padding: 15px;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 10px;
            border: 2px solid #e2e8f0;
        }
        
        .platform-button {
            display: inline-block;
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            color: white;
            margin-bottom: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .platform-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            text-decoration: none;
            color: white;
        }
        
        .chatgpt-button {
            background: linear-gradient(135deg, #10a37f 0%, #0d8f6e 100%);
        }
        
        .gemini-button {
            background: linear-gradient(135deg, #4285f4 0%, #1557b7 100%);
        }
        
        .claude-button {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
        }
        
        .platform-instruction {
            font-size: 14px;
            color: #64748b;
            margin: 5px 0;
        }
        
        .platform-instruction strong {
            color: #dc2626;
        }

        .calendar-instructions {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid #f59e0b;
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
            border-left: 6px solid #d97706;
        }

        .calendar-instructions h3 {
            color: #92400e;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.2em;
        }

        .instruction-steps {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .step-instruction {
            display: flex;
            gap: 15px;
            align-items: flex-start;
            background: rgba(255, 255, 255, 0.7);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #d97706;
        }

        .step-instruction .step-number {
            background: #d97706;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            flex-shrink: 0;
        }

        .step-instruction .step-content {
            flex: 1;
        }

        .step-instruction .step-content strong {
            display: block;
            margin-bottom: 8px;
            color: #92400e;
        }

        .step-instruction .step-content ul {
            margin: 10px 0;
            padding-left: 20px;
        }

        .step-instruction .step-content li {
            margin: 5px 0;
            color: #78350f;
        }

        .issue-selection {
            background: #fef2f2;
            border: 2px solid #fecaca;
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }

        .issue-selection h3 {
            color: #dc2626;
            margin-bottom: 20px;
            text-align: center;
        }

        .issue-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .issue-category {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #dc2626;
        }

        .issue-category h4 {
            color: #991b1b;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .issue-checkbox {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
            cursor: pointer;
        }

        .issue-checkbox input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .issue-checkbox label {
            cursor: pointer;
            font-size: 14px;
            line-height: 1.4;
        }

        .issue-notes {
            margin-top: 20px;
        }

        .issue-notes label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: #991b1b;
        }

        .issue-notes textarea {
            width: 100%;
            min-height: 100px;
            padding: 12px;
            border: 2px solid #fecaca;
            border-radius: 8px;
            font-family: inherit;
            resize: vertical;
        }

        .issue-notes textarea:focus {
            outline: none;
            border-color: #dc2626;
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
        }

        .update-prompt-btn {
            background: linear-gradient(135deg, #dc2626, #991b1b);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.3s ease;
        }

        .update-prompt-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
        }

        .import-help-section {
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 2px solid #0ea5e9;
            border-radius: 12px;
            border-left: 6px solid #0284c7;
        }

        .help-content h4 {
            color: #0c4a6e;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.2em;
        }

        .help-section {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
            border-left: 4px solid #0284c7;
        }

        .help-section h5 {
            color: #0c4a6e;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .help-section ul {
            margin: 10px 0;
            padding-left: 20px;
        }

        .help-section li {
            margin: 8px 0;
            color: #075985;
            line-height: 1.5;
        }

        .help-section code {
            background: #e0f2fe;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #0c4a6e;
            font-size: 0.9em;
        }

        .process-step {
            margin: 15px 0;
            padding: 15px;
            background: rgba(240, 249, 255, 0.8);
            border-radius: 8px;
        }

        .process-step strong {
            display: block;
            margin-bottom: 10px;
            color: #0c4a6e;
            font-size: 1.05em;
        }

        .process-step ol {
            margin: 10px 0;
            padding-left: 20px;
        }

        .process-step li {
            margin: 8px 0;
            line-height: 1.5;
        }

        .help-btn {
            transition: all 0.3s ease;
        }

        .help-btn:hover {
            background: #1e40af !important;
            transform: scale(1.1);
        }

        .workflow-status {
            margin: 20px 0;
            padding: 15px;
            background: #f8fafc;
            border-radius: 8px;
            border-left: 4px solid #3b82f6;
        }
        
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .status-icon {
            font-size: 18px;
        }
        
        .status-text {
            font-weight: 500;
            color: #374151;
        }
        
        .status-success {
            border-left-color: #10b981;
        }
        
        .status-success .status-icon {
            color: #10b981;
        }
        
        .status-processing {
            border-left-color: #f59e0b;
            animation: pulse 2s infinite;
        }
        
        .status-processing .status-icon {
            color: #f59e0b;
        }

        /* Webhook Status Messages */
        .webhook-status {
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }

        .webhook-status.show {
            opacity: 1;
            transform: translateY(0);
        }

        .webhook-status.success {
            background: #f0fdf4;
            border-left-color: #10b981;
            color: #065f46;
        }

        .webhook-status.error {
            background: #fef2f2;
            border-left-color: #ef4444;
            color: #991b1b;
        }

        .webhook-status.processing {
            background: #fef3c7;
            border-left-color: #f59e0b;
            color: #92400e;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .collapsible {
            background: #f1f5f9;
            border: none;
            padding: 15px;
            width: 100%;
            text-align: left;
            cursor: pointer;
            border-radius: 8px;
            margin-bottom: 10px;
            font-weight: 600;
            transition: background-color 0.3s ease;
        }

        .collapsible:hover {
            background: #e2e8f0;
        }

        .collapsible.active {
            background: var(--primary-blue);
            color: white;
        }

        .collapsible-content {
            display: none;
            padding: 20px;
            background: white;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .collapsible-content.active {
            display: block;
        }

        .import-section {
            background: #fef3c7;
            border: 2px dashed #fbbf24;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
        }

        .file-input {
            margin: 15px 0;
        }

        .completion-section {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border-radius: 15px;
            border: 2px solid var(--success-green);
        }

        .completion-section h2 {
            color: var(--success-green);
            margin-bottom: 20px;
            font-size: 2em;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .language-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .language-btn {
                min-width: 250px;
            }
            
            .workflow-options {
                grid-template-columns: 1fr;
            }
            
            .progress-bar {
                flex-direction: column;
                align-items: center;
            }
            
            .progress-step {
                margin-bottom: 15px;
            }

            .welcome-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- PHASE 2: Auto-save Indicator -->
    <div id="autoSaveIndicator" class="auto-save-indicator">
        <span id="saveStatus">Draft saved</span>
    </div>

    <!-- PHASE 2: Welcome Modal -->
    <div id="welcomeModal" class="welcome-modal">
        <div class="welcome-content">
            <h2 id="welcomeTitle">Welcome to Smart Mom Method!</h2>
            <p id="welcomeDesc">Create your personalized business plan in 5 simple steps. This process will take approximately 15-20 minutes and will generate a comprehensive business plan tailored specifically for busy moms like you.</p>
            <div class="welcome-buttons">
                <button class="welcome-btn primary" onclick="startOnboarding()">
                    <span id="getStartedText">🚀 Get Started</span>
                </button>
                <button class="welcome-btn secondary" onclick="skipOnboarding()">
                    <span id="returningUserText">I'm a returning user</span>
                </button>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Language Selection -->
        <div class="language-selector">
            <h2 data-en="Choose Your Language / Elige Tu Idioma" data-es="Choose Your Language / Elige Tu Idioma">Choose Your Language / Elige Tu Idioma</h2>
            <div class="language-buttons">
                <button class="language-btn active" onclick="changeLanguage('en')" id="lang-en">
                    <span class="flag">🇺🇸</span>
                    <span data-en="English" data-es="English">English</span>
                    <small data-en="Read and answer everything in English" data-es="Read and answer everything in English">Read and answer everything in English</small>
                </button>
                <button class="language-btn" onclick="changeLanguage('es')" id="lang-es">
                    <span class="flag">🇪🇸</span>
                    <span data-en="Español" data-es="Español">Español</span>
                    <small data-en="Lee y responde todo en español" data-es="Lee y responde todo en español">Lee y responde todo en español</small>
                </button>
            </div>
        </div>

        <!-- PHASE 2: Enhanced Progress Container -->
        <div class="progress-container">
            <div class="progress-header">
                <div class="step-counter" id="stepCounter">Step 1 of 6</div>
                <div class="time-estimate" id="timeEstimate">⏱️ Estimated: 5 min</div>
            </div>
            <div class="overall-progress">
                <div class="progress-fill" id="progressFill" style="width: 16.67%"></div>
            </div>
            <div class="progress-bar">
                <div class="progress-step active" data-step="0" onclick="goToStep(0)">
                    <span class="step-number">1</span>
                    <span class="step-text" data-en="Collect Information" data-es="Recopilar Información">Collect Information</span>
                </div>
                <div class="progress-step next" data-step="1" onclick="goToStep(1)">
                    <span class="step-number">2</span>
                    <span class="step-text" data-en="ChatGPT" data-es="ChatGPT">ChatGPT</span>
                </div>
                <div class="progress-step" data-step="2" onclick="goToStep(2)">
                    <span class="step-number">3</span>
                    <span class="step-text" data-en="Gemini" data-es="Gemini">Gemini</span>
                </div>
                <div class="progress-step" data-step="3" onclick="goToStep(3)">
                    <span class="step-number">4</span>
                    <span class="step-text" data-en="Claude" data-es="Claude">Claude</span>
                </div>
                <div class="progress-step" data-step="4" onclick="goToStep(4)">
                    <span class="step-number">5</span>
                    <span class="step-text" data-en="Optimize" data-es="Optimizar">Optimize</span>
                </div>
                <div class="progress-step" data-step="5" onclick="goToStep(5)">
                    <span class="step-number">6</span>
                    <span class="step-text" data-en="Complete" data-es="Completar">Complete</span>
                </div>
            </div>
        </div>

        <div class="main-card">
            <div class="header">
                <h1 data-en="Smart Mom Method" data-es="Método Mamá Inteligente">Smart Mom Method</h1>
                <p class="subtitle" data-en="AI-Powered Business Planning for Busy Moms" data-es="Planificación de Negocios con IA para Madres Ocupadas">AI-Powered Business Planning for Busy Moms</p>
                <span class="badge" data-en="100% Free" data-es="100% Gratis">100% Free</span>
            </div>

            <!-- Email Integration Status -->
            <div style="background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); padding: 20px; margin: 0; border-bottom: 2px solid #0ea5e9;">
                <div style="text-align: center;">
                    <h3 style="color: #0c4a6e; margin-bottom: 15px;">📧 Automated Email System Active</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; max-width: 800px; margin: 0 auto;">
                        <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #10b981;">
                            <strong style="color: #065f46;">✅ Instant Confirmation</strong>
                            <p style="margin: 5px 0 0; font-size: 14px; color: #374151;">Immediate email when you submit</p>
                        </div>
                        <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #f59e0b;">
                            <strong style="color: #92400e;">⏰ Follow-up Schedule</strong>
                            <p style="margin: 5px 0 0; font-size: 14px; color: #374151;">Automated reminders and tips</p>
                        </div>
                        <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #8b5cf6;">
                            <strong style="color: #6b21a8;">📋 Business Plan Delivery</strong>
                            <p style="margin: 5px 0 0; font-size: 14px; color: #374151;">Your plan within 24 hours</p>
                        </div>
                    </div>
                    <p style="margin-top: 15px; font-size: 14px; color: #64748b;">
                        <strong>How it works:</strong> When you complete Step 1, your information automatically triggers our n8n workflow via GitHub webhook, starting your personalized email sequence.
                    </p>
                </div>
            </div>

            <!-- Workflow Selection -->
            <div class="workflow-selection">
                <h2 data-en="🎯 Choose Your Workflow" data-es="🎯 Elige Tu Flujo de Trabajo">🎯 Choose Your Workflow</h2>
                <p data-en="Select the AI approach that works best for you:" data-es="Selecciona el enfoque de IA que funcione mejor para ti:">Select the AI approach that works best for you:</p>
                
                <div class="workflow-options">
                    <div class="workflow-option" onclick="selectWorkflow('multi')" id="workflow-multi">
                        <h3 data-en="🤖 Multi-AI Approach" data-es="🤖 Enfoque Multi-IA">🤖 Multi-AI Approach</h3>
                        <p data-en="Use different AI tools for different tasks" data-es="Usa diferentes herramientas de IA para diferentes tareas">Use different AI tools for different tasks</p>
                        <ul style="text-align: left; margin-top: 15px;">
                            <li data-en="ChatGPT: Business idea generation" data-es="ChatGPT: Generación de ideas de negocio">ChatGPT: Business idea generation</li>
                            <li data-en="Gemini: Market validation & MVP" data-es="Gemini: Validación de mercado y MVP">Gemini: Market validation & MVP</li>
                            <li data-en="Claude: Interactive calendar creation" data-es="Claude: Creación de calendario interactivo">Claude: Interactive calendar creation</li>
                        </ul>
                        <div style="margin-top: 15px; color: var(--success-green); font-weight: bold;" data-en="✅ Completely Free" data-es="✅ Completamente Gratis">✅ Completely Free</div>
                    </div>
                    
                    <div class="workflow-option" onclick="selectWorkflow('claude')" id="workflow-claude">
                        <h3 data-en="🟣 Claude-Only Approach" data-es="🟣 Enfoque Solo Claude">🟣 Claude-Only Approach</h3>
                        <p data-en="Use Claude for all business planning tasks" data-es="Usa Claude para todas las tareas de planificación empresarial">Use Claude for all business planning tasks</p>
                        <ul style="text-align: left; margin-top: 15px;">
                            <li data-en="Claude: Complete business plan" data-es="Claude: Plan de negocios completo">Claude: Complete business plan</li>
                            <li data-en="Claude: Validation & MVP strategy" data-es="Claude: Validación y estrategia MVP">Claude: Validation & MVP strategy</li>
                            <li data-en="Claude: Interactive calendar" data-es="Claude: Calendario interactivo">Claude: Interactive calendar</li>
                        </ul>
                        <div style="margin-top: 15px; color: var(--warm-orange); font-weight: bold;" data-en="💎 Requires Claude Pro ($20/month)" data-es="💎 Requiere Claude Pro ($20/mes)">💎 Requires Claude Pro ($20/month)</div>
                    </div>
                </div>
            </div>

            <div class="content">
                <!-- Step 0: Collect Information -->
                <div id="step-0" class="step-content active">
                    <div class="step-description">
                        <h2 data-en="📋 Step 1: Tell Us About Yourself" data-es="📋 Paso 1: Cuéntanos Sobre Ti">📋 Step 1: Tell Us About Yourself</h2>
                        <p data-en="The more specific you are, the better your personalized AI prompts will be. This information helps create business ideas that actually fit your real life." data-es="Cuanto más específica seas, mejores serán tus prompts de IA personalizados. Esta información ayuda a crear ideas de negocio que realmente se adapten a tu vida real.">The more specific you are, the better your personalized AI prompts will be. This information helps create business ideas that actually fit your real life.</p>
                    </div>

                    <!-- Import Previous Data -->
                    <div class="import-section">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                            <h3 data-en="💡 Import Previous Data" data-es="💡 Importar Datos Previos">💡 Import Previous Data</h3>
                            <button class="help-btn" onclick="toggleImportHelp()" style="background: #3b82f6; color: white; border: none; border-radius: 50%; width: 24px; height: 24px; cursor: pointer; font-size: 14px; font-weight: bold;">?</button>
                        </div>
                        
                        <p data-en="Already used Smart Mom Method before? Upload your previous workflow file to continue where you left off." data-es="¿Ya usaste el Método Mamá Inteligente antes? Sube tu archivo de flujo de trabajo anterior para continuar donde lo dejaste.">Already used Smart Mom Method before? Upload your previous workflow file to continue where you left off.</p>
                        
                        <!-- Detailed Help Section -->
                        <div id="import-help" class="import-help-section" style="display: none;">
                            <div class="help-content">
                                <h4 data-en="📂 What Files Can You Upload?" data-es="📂 ¿Qué Archivos Puedes Subir?">📂 What Files Can You Upload?</h4>
                                
                                <div class="help-section">
                                    <h5 data-en="✅ Correct File Type:" data-es="✅ Tipo de Archivo Correcto:">✅ Correct File Type:</h5>
                                    <ul>
                                        <li data-en="JSON files named like: smart-mom-method-2024-12-26.json" data-es="Archivos JSON nombrados como: smart-mom-method-2024-12-26.json">JSON files named like: <code>smart-mom-method-2024-12-26.json</code></li>
                                        <li data-en="Generated by Smart Mom Method itself from a previous session" data-es="Generados por el Método Mamá Inteligente desde una sesión previa">Generated by Smart Mom Method itself from a previous session</li>
                                        <li data-en="Downloaded from the completion step (Step 6)" data-es="Descargados del paso de finalización (Paso 6)">Downloaded from the completion step (Step 6)</li>
                                    </ul>
                                </div>

                                <div class="help-section">
                                    <h5 data-en="❌ What NOT to Upload:" data-es="❌ Qué NO Subir:">❌ What NOT to Upload:</h5>
                                    <ul>
                                        <li data-en="Business plans from other tools or websites" data-es="Planes de negocio de otras herramientas o sitios web">Business plans from other tools or websites</li>
                                        <li data-en="Word documents, PDFs, or Excel files" data-es="Documentos de Word, PDFs o archivos de Excel">Word documents, PDFs, or Excel files</li>
                                        <li data-en="Calendar HTML files (those are your final deliverables)" data-es="Archivos HTML de calendario (esos son tus entregables finales)">Calendar HTML files (those are your final deliverables)</li>
                                        <li data-en="Screenshots or images of business ideas" data-es="Capturas de pantalla o imágenes de ideas de negocio">Screenshots or images of business ideas</li>
                                    </ul>
                                </div>

                                <div class="help-section">
                                    <h5 data-en="🔄 How the Process Works:" data-es="🔄 Cómo Funciona el Proceso:">🔄 How the Process Works:</h5>
                                    
                                    <div class="process-step">
                                        <strong data-en="Step 1: First-Time User Journey" data-es="Paso 1: Jornada del Usuario Primerizo">Step 1: First-Time User Journey</strong>
                                        <ol>
                                            <li data-en="Fill out all the business information forms" data-es="Completa todos los formularios de información empresarial">Fill out all the business information forms</li>
                                            <li data-en="Generate AI prompts and work through the process" data-es="Genera prompts de IA y trabaja a través del proceso">Generate AI prompts and work through the process</li>
                                            <li data-en="At completion screen (Step 6), click 'Download Workflow Data'" data-es="En la pantalla de finalización (Paso 6), haz clic en 'Descargar Datos del Flujo'">At completion screen (Step 6), click "Download Workflow Data"</li>
                                            <li data-en="Get a JSON file with all your information saved" data-es="Obtén un archivo JSON con toda tu información guardada">Get a JSON file with all your information saved</li>
                                        </ol>
                                    </div>

                                    <div class="process-step">
                                        <strong data-en="Step 2: Returning User Journey" data-es="Paso 2: Jornada del Usuario que Regresa">Step 2: Returning User Journey</strong>
                                        <ol>
                                            <li data-en="Come back to Smart Mom Method days/weeks later" data-es="Regresa al Método Mamá Inteligente días/semanas después">Come back to Smart Mom Method days/weeks later</li>
                                            <li data-en="Click 'Choose File' below and upload your JSON file" data-es="Haz clic en 'Elegir archivo' abajo y sube tu archivo JSON">Click "Choose File" below and upload your JSON file</li>
                                            <li data-en="ALL your information will be restored automatically:" data-es="TODA tu información será restaurada automáticamente:">ALL your information will be restored automatically:</li>
                                            <li style="margin-left: 20px;">
                                                <ul>
                                                    <li data-en="Personal details and family situation" data-es="Detalles personales y situación familiar">Personal details and family situation</li>
                                                    <li data-en="Business goals and constraints" data-es="Objetivos y limitaciones del negocio">Business goals and constraints</li>
                                                    <li data-en="Any business ideas and AI responses you saved" data-es="Cualquier idea de negocio y respuestas de IA que guardaste">Any business ideas and AI responses you saved</li>
                                                    <li data-en="Your language preference and workflow choice" data-es="Tu preferencia de idioma y elección de flujo de trabajo">Your language preference and workflow choice</li>
                                                </ul>
                                            </li>
                                        </ol>
                                    </div>
                                </div>

                                <div class="help-section">
                                    <h5 data-en="💡 Common Use Cases:" data-es="💡 Casos de Uso Comunes:">💡 Common Use Cases:</h5>
                                    <ul>
                                        <li data-en="Continuing work after interruption (kids needed attention)" data-es="Continuar el trabajo después de una interrupción (los niños necesitaban atención)">Continuing work after interruption (kids needed attention)</li>
                                        <li data-en="Switching devices (started on laptop, continuing on phone)" data-es="Cambiar dispositivos (empezaste en laptop, continuando en teléfono)">Switching devices (started on laptop, continuing on phone)</li>
                                        <li data-en="Iterating on business ideas (trying different approaches)" data-es="Iterando en ideas de negocio (probando diferentes enfoques)">Iterating on business ideas (trying different approaches)</li>
                                        <li data-en="Sharing with spouse/partner for review" data-es="Compartir con esposo/pareja para revisión">Sharing with spouse/partner for review</li>
                                        <li data-en="Updating calendar after getting client feedback" data-es="Actualizar calendario después de recibir comentarios del cliente">Updating calendar after getting client feedback</li>
                                    </ul>
                                </div>

                                <div class="help-section">
                                    <h5 data-en="❓ Don't Have a File?" data-es="❓ ¿No Tienes un Archivo?">❓ Don't Have a File?</h5>
                                    <p data-en="No problem! Just start fresh by filling out the forms below. It takes about 15-20 minutes and gives you a completely personalized business plan." data-es="¡No hay problema! Simplemente comienza de nuevo llenando los formularios de abajo. Toma alrededor de 15-20 minutos y te da un plan de negocios completamente personalizado.">No problem! Just start fresh by filling out the forms below. It takes about 15-20 minutes and gives you a completely personalized business plan.</p>
                                </div>
                            </div>
                        </div>
                        
                        <input type="file" id="import-file" accept=".json" onchange="importWorkflowData()" class="file-input">
                    </div>

                    <!-- Personal & Family Situation -->
                    <div class="form-section">
                        <h3 data-en="👨‍👩‍👧‍👦 Personal & Family Situation" data-es="👨‍👩‍👧‍👦 Situación Personal y Familiar">👨‍👩‍👧‍👦 Personal & Family Situation</h3>
                        
                        <div class="form-group">
                            <label data-en="Your Name:" data-es="Tu Nombre:">Your Name: <span class="required">*</span></label>
                            <input type="text" id="user-name" class="form-control" required
                                data-en-placeholder="Enter your name" 
                                data-es-placeholder="Ingresa tu nombre"
                                placeholder="Enter your name"
                                oninput="validateField(this)" />
                            <div class="field-error" id="user-name-error">Please enter your name</div>
                        </div>

                        <div class="form-group">
                            <label data-en="Your Email:" data-es="Tu Email:">Your Email: <span class="required">*</span></label>
                            <input type="email" id="user-email" class="form-control" required
                                data-en-placeholder="your.email@example.com" 
                                data-es-placeholder="tu.email@ejemplo.com"
                                placeholder="your.email@example.com"
                                oninput="validateField(this)" />
                            <div class="field-error" id="user-email-error">Please enter a valid email address</div>
                        </div>
                        
                        <div class="form-group">
                            <label data-en="Family Structure & Ages:" data-es="Estructura Familiar y Edades:">Family Structure & Ages: <span class="required">*</span></label>
                            <textarea id="family-structure" class="form-control" rows="3" required
                                data-en-placeholder="e.g., 'Married with 5-year-old in kindergarten and 2-year-old at home. Husband works full-time. I handle most childcare and household duties.'" 
                                data-es-placeholder="ej., 'Casada con un niño de 5 años en kindergarten y uno de 2 años en casa. Mi esposo trabaja tiempo completo. Yo manejo la mayoría del cuidado de los niños y las tareas domésticas.'"
                                placeholder="e.g., 'Married with 5-year-old in kindergarten and 2-year-old at home. Husband works full-time. I handle most childcare and household duties.'"
                                maxlength="300" oninput="validateField(this); updateCharCount(this, 300)"></textarea>
                            <div class="char-counter" id="family-structure-counter">300 characters remaining</div>
                            <div class="field-error" id="family-structure-error">Please describe your family structure</div>
                        </div>
                        
                        <div class="form-group">
                            <label data-en="Daily Schedule & Availability:" data-es="Horario Diario y Disponibilidad:">Daily Schedule & Availability: <span class="required">*</span></label>
                            <textarea id="daily-schedule" class="form-control" rows="3" required
                                data-en-placeholder="e.g., 'Free from 9-11am when youngest naps. Kids in bed by 8pm, so I have 8-10pm available. Weekends are family time except Sunday mornings.'" 
                                data-es-placeholder="ej., 'Libre de 9-11am cuando el menor duerme siesta. Los niños se acuestan a las 8pm, así que tengo disponible de 8-10pm. Los fines de semana son tiempo familiar excepto los domingos por la mañana.'"
                                placeholder="e.g., 'Free from 9-11am when youngest naps. Kids in bed by 8pm, so I have 8-10pm available. Weekends are family time except Sunday mornings.'"
                                maxlength="300" oninput="validateField(this); updateCharCount(this, 300)"></textarea>
                            <div class="char-counter" id="daily-schedule-counter">300 characters remaining</div>
                            <div class="field-error" id="daily-schedule-error">Please describe your daily schedule</div>
                        </div>
                        
                        <div class="form-group">
                            <label data-en="Current Work Status:" data-es="Estado Laboral Actual:">Current Work Status: <span class="required">*</span></label>
                            <select id="work-status" class="form-control" required onchange="validateField(this)">
                                <option value="" data-en="Select your situation..." data-es="Selecciona tu situación...">Select your situation...</option>
                                <option value="stay-at-home" data-en="Stay-at-home super mom" data-es="Súper madre de tiempo completo">Stay-at-home super mom</option>
                                <option value="part-time" data-en="Working part-time" data-es="Trabajando medio tiempo">Working part-time</option>
                                <option value="full-time" data-en="Working full-time" data-es="Trabajando tiempo completo">Working full-time</option>
                                <option value="unemployed" data-en="Recently unemployed/looking" data-es="Recientemente desempleada/buscando">Recently unemployed/looking</option>
                                <option value="student" data-en="Student/in school" data-es="Estudiante/en la escuela">Student/in school</option>
                            </select>
                            <div class="field-error" id="work-status-error">Please select your current work status</div>
                        </div>
                        
                        <div class="form-group">
                            <label data-en="Energy Patterns:" data-es="Patrones de Energía:">Energy Patterns:</label>
                            <select id="energy-pattern" class="form-control">
                                <option value="" data-en="When do you feel most productive?" data-es="¿Cuándo te sientes más productiva?">When do you feel most productive?</option>
                                <option value="morning" data-en="Morning person (6am-12pm)" data-es="Persona matutina (6am-12pm)">Morning person (6am-12pm)</option>
                                <option value="afternoon" data-en="Afternoon person (12pm-6pm)" data-es="Persona vespertina (12pm-6pm)">Afternoon person (12pm-6pm)</option>
                                <option value="evening" data-en="Evening person (6pm-10pm)" data-es="Persona nocturna (6pm-10pm)">Evening person (6pm-10pm)</option>
                                <option value="night" data-en="Night owl (after 10pm)" data-es="Búho nocturno (después de 10pm)">Night owl (after 10pm)</option>
                                <option value="flexible" data-en="Flexible/varies by day" data-es="Flexible/varía por día">Flexible/varies by day</option>
                            </select>
                        </div>
                    </div>

                    <!-- Skills & Experience -->
                    <div class="form-section">
                        <h3 data-en="🎯 Skills & Experience" data-es="🎯 Habilidades y Experiencia">🎯 Skills & Experience</h3>
                        
                        <div class="form-group">
                            <label data-en="Professional Background:" data-es="Antecedentes Profesionales:">Professional Background: <span class="required">*</span></label>
                            <textarea id="skills" class="form-control" rows="3" required
                                data-en-placeholder="e.g., '10 years in marketing, project management experience, good with Excel and presentations, former teacher, always been the organized one who plans family events.'" 
                                data-es-placeholder="ej., '10 años en marketing, experiencia en gestión de proyectos, buena con Excel y presentaciones, ex-maestra, siempre he sido la organizada que planifica eventos familiares.'"
                                placeholder="e.g., '10 years in marketing, project management experience, good with Excel and presentations, former teacher, always been the organized one who plans family events.'"
                                maxlength="400" oninput="validateField(this); updateCharCount(this, 400)"></textarea>
                            <div class="char-counter" id="skills-counter">400 characters remaining</div>
                            <div class="field-error" id="skills-error">Please describe your professional background</div>
                        </div>
                        
                        <div class="form-group">
                            <label data-en="Natural Talents & Strengths:" data-es="Talentos Naturales y Fortalezas:">Natural Talents & Strengths:</label>
                            <textarea id="talents" class="form-control" rows="3" 
                                data-en-placeholder="e.g., 'Great listener, people always come to me for advice, creative problem solver, love researching and finding the best deals, excellent at explaining complex things simply.'" 
                                data-es-placeholder="ej., 'Buena oyente, la gente siempre viene a mí por consejos, solucionadora creativa de problemas, me encanta investigar y encontrar las mejores ofertas, excelente explicando cosas complejas de manera simple.'"
                                placeholder="e.g., 'Great listener, people always come to me for advice, creative problem solver, love researching and finding the best deals, excellent at explaining complex things simply.'"
                                maxlength="300" oninput="updateCharCount(this, 300)"></textarea>
                            <div class="char-counter" id="talents-counter">300 characters remaining</div>
                        </div>
                        
                        <div class="form-group">
                            <label data-en="What Others Ask You For Help With:" data-es="Para Qué Te Piden Ayuda Otros:">What Others Ask You For Help With:</label>
                            <textarea id="help-requests" class="form-control" rows="3" 
                                data-en-placeholder="e.g., 'Friends ask me to plan their parties, neighbors want meal planning tips, other moms ask about organizing kids' schedules, family comes to me for tech support.'" 
                                data-es-placeholder="ej., 'Las amigas me piden que planifique sus fiestas, las vecinas quieren consejos de planificación de comidas, otras madres preguntan sobre organizar horarios de niños, la familia viene a mí por soporte técnico.'"
                                placeholder="e.g., 'Friends ask me to plan their parties, neighbors want meal planning tips, other moms ask about organizing kids' schedules, family comes to me for tech support.'"
                                maxlength="300" oninput="updateCharCount(this, 300)"></textarea>
                            <div class="char-counter" id="help-requests-counter">300 characters remaining</div>
                        </div>
                    </div>

                    <!-- Technology & Platforms -->
                    <div class="form-section">
                        <h3 data-en="💻 Technology & Platforms" data-es="💻 Tecnología y Plataformas">💻 Technology & Platforms</h3>
                        
                        <div class="form-group">
                            <label data-en="Tech Comfort Level:" data-es="Nivel de Comodidad Tecnológica:">Tech Comfort Level:</label>
                            <select id="tech-comfort" class="form-control">
                                <option value="" data-en="How comfortable are you with technology?" data-es="¿Qué tan cómoda estás con la tecnología?">How comfortable are you with technology?</option>
                                <option value="beginner" data-en="Beginner (basics only)" data-es="Principiante (solo lo básico)">Beginner (basics only)</option>
                                <option value="intermediate" data-en="Intermediate (comfortable learning)" data-es="Intermedio (cómoda aprendiendo)">Intermediate (comfortable learning)</option>
                                <option value="advanced" data-en="Advanced (love trying new tools)" data-es="Avanzado (me encanta probar nuevas herramientas)">Advanced (love trying new tools)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label data-en="Social Media Platforms You Use:" data-es="Plataformas de Redes Sociales que Usas:">Social Media Platforms You Use:</label>
                            <textarea id="social-platforms" class="form-control" rows="2" 
                                data-en-placeholder="e.g., 'Instagram daily, Facebook for family updates, Pinterest for recipes and home ideas, just started TikTok.'" 
                                data-es-placeholder="ej., 'Instagram diariamente, Facebook para actualizaciones familiares, Pinterest para recetas e ideas del hogar, acabo de empezar TikTok.'"
                                placeholder="e.g., 'Instagram daily, Facebook for family updates, Pinterest for recipes and home ideas, just started TikTok.'"
                                maxlength="200" oninput="updateCharCount(this, 200)"></textarea>
                            <div class="char-counter" id="social-platforms-counter">200 characters remaining</div>
                        </div>
                        
                        <div class="form-group">
                            <label data-en="Comfort with Being on Camera:" data-es="Comodidad Estando en Cámara:">Comfort with Being on Camera:</label>
                            <select id="camera-comfort" class="form-control">
                                <option value="" data-en="How do you feel about video content?" data-es="¿Cómo te sientes sobre el contenido en video?">How do you feel about video content?</option>
                                <option value="love-it" data-en="Love it, very comfortable" data-es="Me encanta, muy cómoda">Love it, very comfortable</option>
                                <option value="comfortable" data-en="Comfortable doing videos" data-es="Cómoda estando en video">Comfortable doing videos</option>
                                <option value="nervous" data-en="Nervous but willing to try" data-es="Nerviosa pero dispuesta a intentar">Nervous but willing to try</option>
                                <option value="prefer-not" data-en="Prefer not to be on camera" data-es="Prefiero no estar en cámara">Prefer not to be on camera</option>
                            </select>
                        </div>
                    </div>

                    <!-- Business Goals & Constraints -->
                    <div class="form-section">
                        <h3 data-en="🎯 Business Goals & Constraints" data-es="🎯 Objetivos y Limitaciones del Negocio">🎯 Business Goals & Constraints</h3>
                        
                        <div class="form-group">
                            <label data-en="Income Timeline:" data-es="Cronograma de Ingresos:">Income Timeline: <span class="required">*</span></label>
                            <select id="income-timeline" class="form-control" required onchange="validateField(this)">
                                <option value="" data-en="When do you need to start making money?" data-es="¿Cuándo necesitas empezar a ganar dinero?">When do you need to start making money?</option>
                                <option value="immediately" data-en="Need income immediately" data-es="Necesito ingresos inmediatamente">Need income immediately</option>
                                <option value="3-months" data-en="Need income in 3 months" data-es="Necesito ingresos en 3 meses">Need income in 3 months</option>
                                <option value="6-months" data-en="Can wait 6 months for income" data-es="Puedo esperar 6 meses por ingresos">Can wait 6 months for income</option>
                                <option value="1-year" data-en="Building for the long term (1+ years)" data-es="Construyendo a largo plazo (1+ años)">Building for the long term (1+ years)</option>
                            </select>
                            <div class="field-error" id="income-timeline-error">Please select your income timeline</div>
                        </div>
                        
                        <div class="form-group">
                            <label data-en="Available Work Hours per Day:" data-es="Horas de Trabajo Disponibles por Día:">Available Work Hours per Day: <span class="required">*</span></label>
                            <select id="work-hours" class="form-control" required onchange="validateField(this)">
                                <option value="" data-en="How much time can you realistically dedicate?" data-es="¿Cuánto tiempo puedes dedicar realísticamente?">How much time can you realistically dedicate?</option>
                                <option value="1-2-hours" data-en="1-2 hours per day" data-es="1-2 horas por día">1-2 hours per day</option>
                                <option value="2-4-hours" data-en="2-4 hours per day" data-es="2-4 horas por día">2-4 hours per day</option>
                                <option value="4-6-hours" data-en="4-6 hours per day" data-es="4-6 horas por día">4-6 hours per day</option>
                                <option value="6-plus-hours" data-en="6+ hours per day" data-es="6+ horas por día">6+ hours per day</option>
                                <option value="irregular" data-en="Irregular schedule" data-es="Horario irregular">Irregular schedule</option>
                            </select>
                            <div class="field-error" id="work-hours-error">Please select your available work hours</div>
                        </div>
                        
                        <div class="form-group">
                            <label data-en="Monthly Income Goal:" data-es="Meta de Ingresos Mensuales:">Monthly Income Goal: <span class="required">*</span></label>
                            <textarea id="income-goal" class="form-control" rows="2" required
                                data-en-placeholder="e.g., '$1,500/month to cover grocery budget, $3,000/month to replace part-time job, $5,000/month for family financial freedom.'" 
                                data-es-placeholder="ej., '$1,500/mes para cubrir el presupuesto de comestibles, $3,000/mes para reemplazar trabajo de medio tiempo, $5,000/mes para libertad financiera familiar.'"
                                placeholder="e.g., '$1,500/month to cover grocery budget, $3,000/month to replace part-time job, $5,000/month for family financial freedom.'"
                                maxlength="200" oninput="validateField(this); updateCharCount(this, 200)"></textarea>
                            <div class="char-counter" id="income-goal-counter">200 characters remaining</div>
                            <div class="field-error" id="income-goal-error">Please describe your income goal</div>
                        </div>
                        
                        <div class="form-group">
                            <label data-en="Available Budget:" data-es="Presupuesto Disponible:">Available Budget:</label>
                            <select id="budget" class="form-control">
                                <option value="" data-en="How much can you invest to start?" data-es="¿Cuánto puedes invertir para empezar?">How much can you invest to start?</option>
                                <option value="0" data-en="$0 - completely free to start" data-es="$0 - completamente gratis para empezar">$0 - completely free to start</option>
                                <option value="under-100" data-en="Under $100" data-es="Menos de $100">Under $100</option>
                                <option value="100-500" data-en="$100-$500" data-es="$100-$500">$100-$500</option>
                                <option value="500-1000" data-en="$500-$1,000" data-es="$500-$1,000">$500-$1,000</option>
                                <option value="1000-plus" data-en="$1,000+" data-es="$1,000+">$1,000+</option>
                            </select>
                        </div>
                    </div>

                    <!-- Passion & Motivation -->
                    <div class="form-section">
                        <h3 data-en="💝 Passion & Motivation" data-es="💝 Pasión y Motivación">💝 Passion & Motivation</h3>
                        
                        <div class="form-group">
                            <label data-en="What Topics Do You Love Talking About:" data-es="Qué Temas Te Encanta Hablar:">What Topics Do You Love Talking About:</label>
                            <textarea id="passionate-topics" class="form-control" rows="3" 
                                data-en-placeholder="e.g., 'Organization tips, meal planning, kids' activities, personal development, home decorating, travel with kids, budgeting, wellness.'" 
                                data-es-placeholder="ej., 'Consejos de organización, planificación de comidas, actividades para niños, desarrollo personal, decoración del hogar, viajes con niños, presupuesto, bienestar.'"
                                placeholder="e.g., 'Organization tips, meal planning, kids' activities, personal development, home decorating, travel with kids, budgeting, wellness.'"
                                maxlength="300" oninput="updateCharCount(this, 300)"></textarea>
                            <div class="char-counter" id="passionate-topics-counter">300 characters remaining</div>
                        </div>
                        
                        <div class="form-group">
                            <label data-en="Problems You Notice Other Moms Struggling With:" data-es="Problemas que Notas que Otras Madres Enfrentan:">Problems You Notice Other Moms Struggling With:</label>
                            <textarea id="mom-problems" class="form-control" rows="3" 
                                data-en-placeholder="e.g., 'Finding time for themselves, meal planning, feeling isolated, managing kids' schedules, work-life balance, financial stress.'" 
                                data-es-placeholder="ej., 'Encontrar tiempo para ellas mismas, planificación de comidas, sentirse aisladas, manejar horarios de niños, equilibrio trabajo-vida, estrés financiero.'"
                                placeholder="e.g., 'Finding time for themselves, meal planning, feeling isolated, managing kids' schedules, work-life balance, financial stress.'"
                                maxlength="300" oninput="updateCharCount(this, 300)"></textarea>
                            <div class="char-counter" id="mom-problems-counter">300 characters remaining</div>
                        </div>
                        
                        <div class="form-group">
                            <label data-en="Why Starting a Business Matters to You:" data-es="Por Qué Empezar un Negocio es Importante para Ti:">Why Starting a Business Matters to You:</label>
                            <textarea id="motivation" class="form-control" rows="3" 
                                data-en-placeholder="e.g., 'Want financial independence, need flexible income around kids, want to set an example for my children, miss using my brain for work.'" 
                                data-es-placeholder="ej., 'Quiero independencia financiera, necesito ingresos flexibles alrededor de los niños, quiero dar ejemplo a mis hijos, extraño usar mi cerebro para trabajar.'"
                                placeholder="e.g., 'Want financial independence, need flexible income around kids, want to set an example for my children, miss using my brain for work.'"
                                maxlength="300" oninput="updateCharCount(this, 300)"></textarea>
                            <div class="char-counter" id="motivation-counter">300 characters remaining</div>
                        </div>
                    </div>

                    <!-- Webhook Status Display -->
                    <div id="webhook-status" class="webhook-status">
                        <div class="status-indicator" id="data-collected-status">
                            <span class="status-icon">⏳</span>
                            <span class="status-text" data-en="Waiting for information..." data-es="Esperando información...">Waiting for information...</span>
                        </div>
                    </div>
                    
                    <button type="button" onclick="collectInformation()" class="btn btn-current">
                        <span data-en="📋 Generate Personalized Prompts" data-es="📋 Generar Prompts Personalizados">📋 Generate Personalized Prompts</span>
                    </button>
                </div>

                <!-- Step 1: ChatGPT Prompt -->
                <div id="step-1" class="step-content">
                    <div class="step-description">
                        <h2 data-en="🟢 Step 2: ChatGPT Business Ideation" data-es="🟢 Paso 2: Ideación de Negocio con ChatGPT">🟢 Step 2: ChatGPT Business Ideation</h2>
                        <p data-en="Use this personalized prompt with ChatGPT to discover business ideas that perfectly fit your situation and constraints." 
                           data-es="Usa este prompt personalizado con ChatGPT para descubrir ideas de negocio que se adapten perfectamente a tu situación y limitaciones.">
                            Use this personalized prompt with ChatGPT to discover business ideas that perfectly fit your situation and constraints.
                        </p>
                        
                        <div class="ai-platform-link">
                            <a href="https://chat.openai.com" target="_blank" class="platform-button chatgpt-button">
                                🟢 <span data-en="Go to ChatGPT" data-es="Ir a ChatGPT">Go to ChatGPT</span> →
                            </a>
                            <p class="platform-instruction" data-en="Click the link above, then paste the prompt below" data-es="Haz clic en el enlace de arriba, luego pega el prompt de abajo">
                                Click the link above, then paste the prompt below
                            </p>
                        </div>
                    </div>

                    <div class="workflow-status">
                        <div class="status-indicator" id="chatgpt-status">
                            <span class="status-icon">⏳</span>
                            <span class="status-text" data-en="Prompt ready - your information has been processed" data-es="Prompt listo - tu información ha sido procesada">Prompt ready - your information has been processed</span>
                        </div>
                    </div>

                    <div class="prompt-container">
                        <div class="prompt-header">
                            <h4 data-en="Your Personalized ChatGPT Prompt:" data-es="Tu Prompt Personalizado para ChatGPT:">Your Personalized ChatGPT Prompt:</h4>
                            <button onclick="copyToClipboard(document.getElementById('chatgpt-prompt').textContent, this)" class="copy-btn" data-en="📋 Copy Prompt" data-es="📋 Copiar Prompt">📋 Copy Prompt</button>
                        </div>
                        <div id="chatgpt-prompt" class="prompt-text"></div>
                    </div>

                    <div style="margin-top: 30px;">
                        <h4 data-en="📝 After ChatGPT responds:" data-es="📝 Después de que ChatGPT responda:">📝 After ChatGPT responds:</h4>
                        <div class="form-group">
                            <label data-en="Paste ChatGPT's business recommendations here:" data-es="Pega las recomendaciones de negocio de ChatGPT aquí:">Paste ChatGPT's business recommendations here: <span class="required">*</span></label>
                            <textarea id="chatgpt-response" class="form-control" rows="8" required
                                data-en-placeholder="Copy and paste ChatGPT's complete response here..." 
                                data-es-placeholder="Copia y pega la respuesta completa de ChatGPT aquí..."
                                placeholder="Copy and paste ChatGPT's complete response here..."
                                oninput="validateField(this)"></textarea>
                            <div class="field-error" id="chatgpt-response-error">Please paste ChatGPT's response to continue</div>
                        </div>
                        <button onclick="goToStep(2)" class="btn btn-next" data-en="✅ Continue to Validation" data-es="✅ Continuar a Validación">✅ Continue to Validation</button>
                    </div>
                </div>

                <!-- Step 2: Gemini Prompt -->
                <div id="step-2" class="step-content">
                    <div class="step-description">
                        <h2 data-en="🔵 Step 3: Gemini Market Validation" data-es="🔵 Paso 3: Validación de Mercado con Gemini">🔵 Step 3: Gemini Market Validation</h2>
                        <p data-en="Use Gemini's Deep Research mode to validate your business idea and create a detailed MVP strategy." 
                           data-es="Usa el modo de Investigación Profunda de Gemini para validar tu idea de negocio y crear una estrategia detallada de MVP.">
                            Use Gemini's Deep Research mode to validate your business idea and create a detailed MVP strategy.
                        </p>
                        
                        <div class="ai-platform-link">
                            <a href="https://gemini.google.com" target="_blank" class="platform-button gemini-button">
                                🔵 <span data-en="Go to Gemini" data-es="Ir a Gemini">Go to Gemini</span> →
                            </a>
                            <div class="platform-instruction">
                                <p data-en="1. Click the link above to open Gemini" data-es="1. Haz clic en el enlace de arriba para abrir Gemini">
                                    1. Click the link above to open Gemini
                                </p>
                                <p data-en="2. Paste the prompt below" data-es="2. Pega el prompt de abajo">
                                    2. Paste the prompt below
                                </p>
                                <p data-en="3. ⚠️ IMPORTANT: Select 'Deep Research' mode when Gemini asks" data-es="3. ⚠️ IMPORTANTE: Selecciona el modo 'Investigación Profunda' cuando Gemini lo solicite">
                                    3. ⚠️ <strong>IMPORTANT</strong>: Select 'Deep Research' mode when Gemini asks
                                </p>
                                <p data-en="4. Follow Gemini's additional questions to complete the research" data-es="4. Sigue las preguntas adicionales de Gemini para completar la investigación">
                                    4. Follow Gemini's additional questions to complete the research
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="prompt-container">
                        <div class="prompt-header">
                            <h4 data-en="Your Personalized Gemini Prompt:" data-es="Tu Prompt Personalizado para Gemini:">Your Personalized Gemini Prompt:</h4>
                            <button onclick="copyToClipboard(document.getElementById('gemini-prompt').textContent, this)" class="copy-btn" data-en="📋 Copy Prompt" data-es="📋 Copiar Prompt">📋 Copy Prompt</button>
                        </div>
                        <div id="gemini-prompt" class="prompt-text"></div>
                    </div>

                    <div style="margin-top: 30px;">
                        <h4 data-en="📝 After Gemini completes the research:" data-es="📝 Después de que Gemini complete la investigación:">📝 After Gemini completes the research:</h4>
                        <div class="form-group">
                            <label data-en="Paste Gemini's validation analysis here:" data-es="Pega el análisis de validación de Gemini aquí:">Paste Gemini's validation analysis here: <span class="required">*</span></label>
                            <textarea id="gemini-response" class="form-control" rows="8" required
                                data-en-placeholder="Copy and paste Gemini's complete research and validation response here..." 
                                data-es-placeholder="Copia y pega la respuesta completa de investigación y validación de Gemini aquí..."
                                placeholder="Copy and paste Gemini's complete research and validation response here..."
                                oninput="validateField(this)"></textarea>
                            <div class="field-error" id="gemini-response-error">Please paste Gemini's response to continue</div>
                        </div>
                        <button onclick="goToStep(3)" class="btn btn-next" data-en="✅ Continue to Calendar Creation" data-es="✅ Continuar a Creación de Calendario">✅ Continue to Calendar Creation</button>
                    </div>
                </div>

                <!-- Step 3: Claude Calendar Prompt -->
                <div id="step-3" class="step-content">
                    <div class="step-description">
                        <h2 data-en="🟣 Step 4: Claude Interactive Calendar" data-es="🟣 Paso 4: Calendario Interactivo con Claude">🟣 Step 4: Claude Interactive Calendar</h2>
                        <p data-en="Use Claude to create your personalized interactive calendar with daily tasks, templates, and progress tracking." 
                           data-es="Usa Claude para crear tu calendario interactivo personalizado con tareas diarias, plantillas y seguimiento de progreso.">
                            Use Claude to create your personalized interactive calendar with daily tasks, templates, and progress tracking.
                        </p>
                        
                        <div class="ai-platform-link">
                            <a href="https://claude.ai" target="_blank" class="platform-button claude-button">
                                🟣 <span data-en="Go to Claude" data-es="Ir a Claude">Go to Claude</span> →
                            </a>
                            <p class="platform-instruction" data-en="Click the link above, then paste the prompt below for your interactive calendar" data-es="Haz clic en el enlace de arriba, luego pega el prompt de abajo para tu calendario interactivo">
                                Click the link above, then paste the prompt below for your interactive calendar
                            </p>
                        </div>

                        <!-- CALENDAR SAVING INSTRUCTIONS -->
                        <div class="calendar-instructions">
                            <h3 data-en="📝 IMPORTANT: How to Save Your Calendar" data-es="📝 IMPORTANTE: Cómo Guardar Tu Calendario">📝 IMPORTANT: How to Save Your Calendar</h3>
                            <div class="instruction-steps">
                                <div class="step-instruction">
                                    <span class="step-number">1</span>
                                    <div class="step-content">
                                        <strong data-en="After Claude creates your calendar:" data-es="Después de que Claude cree tu calendario:">After Claude creates your calendar:</strong>
                                        <p data-en="Claude will generate an interactive HTML calendar. You'll see the calendar working in Claude's interface." data-es="Claude generará un calendario HTML interactivo. Verás el calendario funcionando en la interfaz de Claude.">Claude will generate an interactive HTML calendar. You'll see the calendar working in Claude's interface.</p>
                                    </div>
                                </div>
                                
                                <div class="step-instruction">
                                    <span class="step-number">2</span>
                                    <div class="step-content">
                                        <strong data-en="Get the complete HTML code:" data-es="Obtén el código HTML completo:">Get the complete HTML code:</strong>
                                        <p data-en="Right-click on the calendar → 'View Page Source' OR ask Claude: 'Can you provide the complete HTML code for download?'" data-es="Haz clic derecho en el calendario → 'Ver código fuente' O pregunta a Claude: '¿Puedes proporcionar el código HTML completo para descarga?'">Right-click on the calendar → "View Page Source" OR ask Claude: "Can you provide the complete HTML code for download?"</p>
                                    </div>
                                </div>
                                
                                <div class="step-instruction">
                                    <span class="step-number">3</span>
                                    <div class="step-content">
                                        <strong data-en="Save the file correctly:" data-es="Guarda el archivo correctamente:">Save the file correctly:</strong>
                                        <ul>
                                            <li data-en="Copy ALL the HTML code (from &lt;!DOCTYPE html&gt; to &lt;/html&gt;)" data-es="Copia TODO el código HTML (desde &lt;!DOCTYPE html&gt; hasta &lt;/html&gt;)">Copy ALL the HTML code (from &lt;!DOCTYPE html&gt; to &lt;/html&gt;)</li>
                                            <li data-en="Open Notepad/TextEdit and paste the code" data-es="Abre Notepad/TextEdit y pega el código">Open Notepad/TextEdit and paste the code</li>
                                            <li data-en="Save as: my-business-calendar.html" data-es="Guarda como: my-business-calendar.html">Save as: <strong>my-business-calendar.html</strong></li>
                                            <li data-en="Make sure it ends with .html (not .txt)" data-es="Asegúrate de que termine con .html (no .txt)">Make sure it ends with <strong>.html</strong> (not .txt)</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <div class="step-instruction">
                                    <span class="step-number">4</span>
                                    <div class="step-content">
                                        <strong data-en="Test your calendar:" data-es="Prueba tu calendario:">Test your calendar:</strong>
                                        <p data-en="Double-click the .html file → It should open in your browser and work perfectly offline!" data-es="Haz doble clic en el archivo .html → ¡Debería abrirse en tu navegador y funcionar perfectamente sin conexión!">Double-click the .html file → It should open in your browser and work perfectly offline!</p>
                                    </div>
                                </div>

                                <div class="step-instruction">
                                    <span class="step-number">5</span>
                                    <div class="step-content">
                                        <strong data-en="For future updates:" data-es="Para futuras actualizaciones:">For future updates:</strong>
                                        <p data-en="Keep this file! If you need to fix or update your calendar, you can upload it back to Claude or use the optimization prompts below." data-es="¡Conserva este archivo! Si necesitas arreglar o actualizar tu calendario, puedes subirlo de vuelta a Claude o usar los prompts de optimización de abajo.">Keep this file! If you need to fix or update your calendar, you can upload it back to Claude or use the optimization prompts below.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="prompt-container">
                        <div class="prompt-header">
                            <h4 data-en="Your Personalized Claude Prompt:" data-es="Tu Prompt Personalizado para Claude:">Your Personalized Claude Prompt:</h4>
                            <button onclick="copyToClipboard(document.getElementById('claude-prompt').textContent, this)" class="copy-btn" data-en="📋 Copy Prompt" data-es="📋 Copiar Prompt">📋 Copy Prompt</button>
                        </div>
                        <div id="claude-prompt" class="prompt-text"></div>
                    </div>

                    <div style="margin-top: 30px;">
                        <h4 data-en="📝 After Claude creates your calendar:" data-es="📝 Después de que Claude cree tu calendario:">📝 After Claude creates your calendar:</h4>
                        <div class="form-group">
                            <label data-en="Calendar creation status:" data-es="Estado de creación del calendario:">Calendar creation status:</label>
                            <textarea id="claude-response" class="form-control" rows="6" 
                                data-en-placeholder="After Claude creates your calendar, paste a link or note about the calendar here..." 
                                data-es-placeholder="Después de que Claude cree tu calendario, pega un enlace o nota sobre el calendario aquí..."
                                placeholder="After Claude creates your calendar, paste a link or note about the calendar here..."></textarea>
                        </div>
                        <button onclick="goToStep(4)" class="btn btn-next" data-en="✅ Continue to Optimization" data-es="✅ Continuar a Optimización">✅ Continue to Optimization</button>
                    </div>
                </div>

                <!-- Step 4: Optimization -->
                <div id="step-4" class="step-content">
                    <div class="step-description">
                        <h2 data-en="⚡ Step 5: Optimize & Problem-Solve" data-es="⚡ Paso 5: Optimizar y Resolver Problemas">⚡ Step 5: Optimize & Problem-Solve</h2>
                        <p data-en="Select the specific issues you're experiencing with your calendar or business plan to generate a personalized troubleshooting prompt." data-es="Selecciona los problemas específicos que estás experimentando con tu calendario o plan de negocios para generar un prompt de solución personalizado.">Select the specific issues you're experiencing with your calendar or business plan to generate a personalized troubleshooting prompt.</p>
                    </div>

                    <!-- Issue Selection Section -->
                    <div class="issue-selection">
                        <h3 data-en="🔧 Select Your Specific Issues" data-es="🔧 Selecciona Tus Problemas Específicos">🔧 Select Your Specific Issues</h3>
                        
                        <div class="issue-categories">
                            <!-- Calendar Technical Issues -->
                            <div class="issue-category">
                                <h4 data-en="📅 Calendar Technical Issues" data-es="📅 Problemas Técnicos del Calendario">📅 Calendar Technical Issues</h4>
                                
                                <div class="issue-checkbox">
                                    <input type="checkbox" id="issue-empty-days" onchange="updateOptimizationPrompt()">
                                    <label for="issue-empty-days" data-en="Calendar has empty days with no tasks" data-es="El calendario tiene días vacíos sin tareas">Calendar has empty days with no tasks</label>
                                </div>
                                
                                <div class="issue-checkbox">
                                    <input type="checkbox" id="issue-list-format" onchange="updateOptimizationPrompt()">
                                    <label for="issue-list-format" data-en="Generated as a list instead of calendar grid" data-es="Generado como lista en lugar de cuadrícula de calendario">Generated as a list instead of calendar grid</label>
                                </div>
                                
                                <div class="issue-checkbox">
                                    <input type="checkbox" id="issue-not-mobile" onchange="updateOptimizationPrompt()">
                                    <label for="issue-not-mobile" data-es="No funciona bien en móvil" data-en="Doesn't work well on mobile">Doesn't work well on mobile</label>
                                </div>
                                
                                <div class="issue-checkbox">
                                    <input type="checkbox" id="issue-no-links" onchange="updateOptimizationPrompt()">
                                    <label for="issue-no-links" data-en="Missing clickable links to tools" data-es="Faltan enlaces clicables a herramientas">Missing clickable links to tools</label>
                                </div>
                                
                                <div class="issue-checkbox">
                                    <input type="checkbox" id="issue-no-save" onchange="updateOptimizationPrompt()">
                                    <label for="issue-no-save" data-en="Progress doesn't save automatically" data-es="El progreso no se guarda automáticamente">Progress doesn't save automatically</label>
                                </div>
                            </div>

                            <!-- Content & Task Issues -->
                            <div class="issue-category">
                                <h4 data-en="📝 Content & Task Issues" data-es="📝 Problemas de Contenido y Tareas">📝 Content & Task Issues</h4>
                                
                                <div class="issue-checkbox">
                                    <input type="checkbox" id="issue-vague-tasks" onchange="updateOptimizationPrompt()">
                                    <label for="issue-vague-tasks" data-en="Tasks are too vague or unclear" data-es="Las tareas son muy vagas o poco claras">Tasks are too vague or unclear</label>
                                </div>
                                
                                <div class="issue-checkbox">
                                    <input type="checkbox" id="issue-no-steps" onchange="updateOptimizationPrompt()">
                                    <label for="issue-no-steps" data-en="Tasks don't have detailed step-by-step instructions" data-es="Las tareas no tienen instrucciones detalladas paso a paso">Tasks don't have detailed step-by-step instructions</label>
                                </div>
                                
                                <div class="issue-checkbox">
                                    <input type="checkbox" id="issue-no-templates" onchange="updateOptimizationPrompt()">
                                    <label for="issue-no-templates" data-en="Missing copy-paste templates and scripts" data-es="Faltan plantillas y scripts para copiar y pegar">Missing copy-paste templates and scripts</label>
                                </div>
                                
                                <div class="issue-checkbox">
                                    <input type="checkbox" id="issue-wrong-timeframe" onchange="updateOptimizationPrompt()">
                                    <label for="issue-wrong-timeframe" data-en="Timeframe doesn't match my availability" data-es="El cronograma no coincide con mi disponibilidad">Timeframe doesn't match my availability</label>
                                </div>
                                
                                <div class="issue-checkbox">
                                    <input type="checkbox" id="issue-too-advanced" onchange="updateOptimizationPrompt()">
                                    <label for="issue-too-advanced" data-en="Tasks are too advanced for my skill level" data-es="Las tareas son muy avanzadas para mi nivel de habilidad">Tasks are too advanced for my skill level</label>
                                </div>
                            </div>

                            <!-- Business & Strategy Issues -->
                            <div class="issue-category">
                                <h4 data-en="💼 Business & Strategy Issues" data-es="💼 Problemas de Negocio y Estrategia">💼 Business & Strategy Issues</h4>
                                
                                <div class="issue-checkbox">
                                    <input type="checkbox" id="issue-wrong-business" onchange="updateOptimizationPrompt()">
                                    <label for="issue-wrong-business" data-en="Calendar is for wrong business type" data-es="El calendario es para el tipo de negocio incorrecto">Calendar is for wrong business type</label>
                                </div>
                                
                                <div class="issue-checkbox">
                                    <input type="checkbox" id="issue-no-validation" onchange="updateOptimizationPrompt()">
                                    <label for="issue-no-validation" data-en="Missing market validation steps" data-es="Faltan pasos de validación de mercado">Missing market validation steps</label>
                                </div>
                                
                                <div class="issue-checkbox">
                                    <input type="checkbox" id="issue-unrealistic-income" onchange="updateOptimizationPrompt()">
                                    <label for="issue-unrealistic-income" data-en="Income timeline seems unrealistic" data-es="El cronograma de ingresos parece poco realista">Income timeline seems unrealistic</label>
                                </div>
                                
                                <div class="issue-checkbox">
                                    <input type="checkbox" id="issue-missing-costs" onchange="updateOptimizationPrompt()">
                                    <label for="issue-missing-costs" data-en="Missing tool costs and pricing info" data-es="Faltan costos de herramientas e información de precios">Missing tool costs and pricing info</label>
                                </div>
                                
                                <div class="issue-checkbox">
                                    <input type="checkbox" id="issue-no-family-time" onchange="updateOptimizationPrompt()">
                                    <label for="issue-no-family-time" data-en="Doesn't account for family time/interruptions" data-es="No tiene en cuenta el tiempo familiar/interrupciones">Doesn't account for family time/interruptions</label>
                                </div>
                            </div>

                            <!-- Language & Localization Issues -->
                            <div class="issue-category">
                                <h4 data-en="🌍 Language & Format Issues" data-es="🌍 Problemas de Idioma y Formato">🌍 Language & Format Issues</h4>
                                
                                <div class="issue-checkbox">
                                    <input type="checkbox" id="issue-wrong-language" onchange="updateOptimizationPrompt()">
                                    <label for="issue-wrong-language" data-en="Calendar is in wrong language" data-es="El calendario está en el idioma incorrecto">Calendar is in wrong language</label>
                                </div>
                                
                                <div class="issue-checkbox">
                                    <input type="checkbox" id="issue-mixed-language" onchange="updateOptimizationPrompt()">
                                    <label for="issue-mixed-language" data-en="Mixed languages (some English, some Spanish)" data-es="Idiomas mezclados (algo en inglés, algo en español)">Mixed languages (some English, some Spanish)</label>
                                </div>
                                
                                <div class="issue-checkbox">
                                    <input type="checkbox" id="issue-wrong-timezone" onchange="updateOptimizationPrompt()">
                                    <label for="issue-wrong-timezone" data-en="Wrong time zone or scheduling format" data-es="Zona horaria incorrecta o formato de programación">Wrong time zone or scheduling format</label>
                                </div>
                                
                                <div class="issue-checkbox">
                                    <input type="checkbox" id="issue-cultural" onchange="updateOptimizationPrompt()">
                                    <label for="issue-cultural" data-en="Doesn't fit my cultural/family context" data-es="No se adapta a mi contexto cultural/familiar">Doesn't fit my cultural/family context</label>
                                </div>
                            </div>
                        </div>

                        <!-- Additional Notes -->
                        <div class="issue-notes">
                            <label data-en="Additional Details About Your Issues:" data-es="Detalles Adicionales Sobre Tus Problemas:">Additional Details About Your Issues:</label>
                            <textarea 
                                id="issue-details" 
                                onchange="updateOptimizationPrompt()"
                                data-en-placeholder="Describe any specific problems not covered above. Be as detailed as possible - the more specific you are, the better the solution will be."
                                data-es-placeholder="Describe cualquier problema específico no cubierto arriba. Sé lo más detallada posible - cuanto más específica seas, mejor será la solución."
                                placeholder="Describe any specific problems not covered above. Be as detailed as possible - the more specific you are, the better the solution will be."></textarea>
                        </div>

                        <button onclick="updateOptimizationPrompt()" class="update-prompt-btn" data-en="🔄 Update Troubleshooting Prompt" data-es="🔄 Actualizar Prompt de Solución">🔄 Update Troubleshooting Prompt</button>
                    </div>

                    <div class="prompt-container">
                        <div class="prompt-header">
                            <h4 data-en="Your Personalized Troubleshooting Prompt:" data-es="Tu Prompt Personalizado de Solución:">Your Personalized Troubleshooting Prompt:</h4>
                            <button onclick="copyToClipboard(document.getElementById('optimization-prompts').textContent, this)" class="copy-btn" data-en="📋 Copy Prompt" data-es="📋 Copiar Prompt">📋 Copy Prompt</button>
                        </div>
                        <div id="optimization-prompts" class="prompt-text"></div>
                    </div>

                    <div style="margin-top: 30px;">
                        <h4 data-en="📝 After getting the updated calendar:" data-es="📝 Después de obtener el calendario actualizado:">📝 After getting the updated calendar:</h4>
                        <p data-en="Follow the same saving instructions from Step 4 to save your improved calendar." data-es="Sigue las mismas instrucciones de guardado del Paso 4 para guardar tu calendario mejorado.">Follow the same saving instructions from Step 4 to save your improved calendar.</p>
                        <button onclick="goToStep(5)" class="btn btn-next" data-en="✅ Complete Your Journey" data-es="✅ Completar Tu Jornada">✅ Complete Your Journey</button>
                    </div>
                </div>

                <!-- Step 5: Completion with Enhanced Results -->
                <div id="step-5" class="step-content">
                    <div class="completion-section">
                        <h2 data-en="🎉 Your Business Plan is Ready!" data-es="🎉 ¡Tu Plan de Negocio Está Listo!">🎉 Your Business Plan is Ready!</h2>
                        <p data-en="Congratulations! You've completed the Smart Mom Method and created a personalized business plan designed specifically for your life as a busy mom." data-es="¡Felicidades! Has completado el Método Mamá Inteligente y creado un plan de negocios personalizado diseñado específicamente para tu vida como madre ocupada.">Congratulations! You've completed the Smart Mom Method and created a personalized business plan designed specifically for your life as a busy mom.</p>
                    </div>

                    <!-- RESULTS SECTION -->
                    <div style="background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%); border: 2px solid #10b981; border-radius: 15px; padding: 30px; margin: 30px 0;">
                        <h3 style="color: #065f46; text-align: center; margin-bottom: 25px; font-size: 1.4em;">
                            <span data-en="📊 Your Complete Business Plan" data-es="📊 Tu Plan de Negocio Completo">📊 Your Complete Business Plan</span>
                        </h3>
                        
                        <!-- Business Ideas Section -->
                        <div style="background: white; border-radius: 10px; padding: 20px; margin: 15px 0; border-left: 4px solid #10b981;">
                            <h4 style="color: #065f46; margin-bottom: 15px;">
                                <span data-en="💡 Business Ideas (ChatGPT Analysis)" data-es="💡 Ideas de Negocio (Análisis ChatGPT)">💡 Business Ideas (ChatGPT Analysis)</span>
                            </h4>
                            <div id="final-chatgpt-results" style="background: #f8fafc; padding: 15px; border-radius: 8px; font-family: 'Courier New', monospace; font-size: 14px; line-height: 1.5; max-height: 300px; overflow-y: auto;">
                                <em data-en="Your ChatGPT business recommendations will appear here..." data-es="Tus recomendaciones de negocio de ChatGPT aparecerán aquí...">Your ChatGPT business recommendations will appear here...</em>
                            </div>
                            <button onclick="copyToClipboard(document.getElementById('final-chatgpt-results').textContent, this)" class="copy-btn" style="margin-top: 10px;">
                                <span data-en="📋 Copy Business Ideas" data-es="📋 Copiar Ideas de Negocio">📋 Copy Business Ideas</span>
                            </button>
                        </div>

                        <!-- Market Validation Section -->
                        <div style="background: white; border-radius: 10px; padding: 20px; margin: 15px 0; border-left: 4px solid #3b82f6;">
                            <h4 style="color: #1e40af; margin-bottom: 15px;">
                                <span data-en="🔍 Market Validation (Gemini Research)" data-es="🔍 Validación de Mercado (Investigación Gemini)">🔍 Market Validation (Gemini Research)</span>
                            </h4>
                            <div id="final-gemini-results" style="background: #f8fafc; padding: 15px; border-radius: 8px; font-family: 'Courier New', monospace; font-size: 14px; line-height: 1.5; max-height: 300px; overflow-y: auto;">
                                <em data-en="Your Gemini market validation will appear here..." data-es="Tu validación de mercado de Gemini aparecerá aquí...">Your Gemini market validation will appear here...</em>
                            </div>
                            <button onclick="copyToClipboard(document.getElementById('final-gemini-results').textContent, this)" class="copy-btn" style="margin-top: 10px;">
                                <span data-en="📋 Copy Market Analysis" data-es="📋 Copiar Análisis de Mercado">📋 Copy Market Analysis</span>
                            </button>
                        </div>

                        <!-- Calendar Section -->
                        <div style="background: white; border-radius: 10px; padding: 20px; margin: 15px 0; border-left: 4px solid #8b5cf6;">
                            <h4 style="color: #7c3aed; margin-bottom: 15px;">
                                <span data-en="📅 Interactive Calendar Status" data-es="📅 Estado del Calendario Interactivo">📅 Interactive Calendar Status</span>
                            </h4>
                            <div id="final-claude-results" style="background: #f8fafc; padding: 15px; border-radius: 8px; font-family: 'Courier New', monospace; font-size: 14px; line-height: 1.5; max-height: 200px; overflow-y: auto;">
                                <em data-en="Your calendar creation notes will appear here..." data-es="Las notas de creación de tu calendario aparecerán aquí...">Your calendar creation notes will appear here...</em>
                            </div>
                            <div style="margin-top: 15px; padding: 15px; background: #fef3c7; border-radius: 8px; border-left: 4px solid #f59e0b;">
                                <strong style="color: #92400e;" data-en="📝 Important Reminder:" data-es="📝 Recordatorio Importante:">📝 Important Reminder:</strong>
                                <p style="margin: 5px 0; color: #78350f;">
                                    <span data-en="If Claude created your calendar, make sure you saved the HTML file to your computer as instructed in Step 4. That's your interactive business calendar!" data-es="Si Claude creó tu calendario, asegúrate de haber guardado el archivo HTML en tu computadora como se instruyó en el Paso 4. ¡Ese es tu calendario de negocios interactivo!">If Claude created your calendar, make sure you saved the HTML file to your computer as instructed in Step 4. That's your interactive business calendar!</span>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- DOWNLOAD SECTION -->
                    <div style="background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%); border: 2px solid #3b82f6; border-radius: 15px; padding: 30px; margin: 30px 0;">
                        <h3 style="color: #1e40af; text-align: center; margin-bottom: 25px; font-size: 1.4em;">
                            <span data-en="💾 Download Your Business Plan" data-es="💾 Descarga Tu Plan de Negocio">💾 Download Your Business Plan</span>
                        </h3>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                            <!-- Complete Business Plan -->
                            <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; border: 2px solid #e5e7eb;">
                                <h4 style="color: #1e40af; margin-bottom: 15px;">📄 Complete Business Plan</h4>
                                <p style="font-size: 0.9em; color: #6b7280; margin-bottom: 15px;">
                                    <span data-en="All your business ideas, validation, and strategy in one document" data-es="Todas tus ideas de negocio, validación y estrategia en un documento">All your business ideas, validation, and strategy in one document</span>
                                </p>
                                <button onclick="downloadBusinessPlan()" class="btn btn-primary" style="width: 100%;">
                                    <span data-en="📥 Download Plan (.txt)" data-es="📥 Descargar Plan (.txt)">📥 Download Plan (.txt)</span>
                                </button>
                            </div>

                            <!-- Workflow Data -->
                            <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; border: 2px solid #e5e7eb;">
                                <h4 style="color: #059669; margin-bottom: 15px;">🔄 Workflow Data</h4>
                                <p style="font-size: 0.9em; color: #6b7280; margin-bottom: 15px;">
                                    <span data-en="Your form data to continue later or make updates" data-es="Tus datos de formulario para continuar después o hacer actualizaciones">Your form data to continue later or make updates</span>
                                </p>
                                <button onclick="saveWorkflowData()" class="btn btn-success" style="width: 100%;">
                                    <span data-en="📥 Download Data (.json)" data-es="📥 Descargar Datos (.json)">📥 Download Data (.json)</span>
                                </button>
                            </div>

                            <!-- All Prompts -->
                            <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; border: 2px solid #e5e7eb;">
                                <h4 style="color: #7c3aed; margin-bottom: 15px;">🤖 AI Prompts</h4>
                                <p style="font-size: 0.9em; color: #6b7280; margin-bottom: 15px;">
                                    <span data-en="All your personalized AI prompts for future use" data-es="Todos tus prompts de IA personalizados para uso futuro">All your personalized AI prompts for future use</span>
                                </p>
                                <button onclick="downloadAllPrompts()" class="btn" style="background: #8b5cf6; color: white; width: 100%;">
                                    <span data-en="📥 Download Prompts (.txt)" data-es="📥 Descargar Prompts (.txt)">📥 Download Prompts (.txt)</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- WHAT YOU'VE ACCOMPLISHED -->
                    <div style="margin: 30px 0;">
                        <h3 data-en="📋 What You've Accomplished:" data-es="📋 Lo Que Has Logrado:">📋 What You've Accomplished:</h3>
                        <div style="text-align: left; max-width: 600px; margin: 20px auto;">
                            <div data-en="✅ Discovered business ideas that fit YOUR specific situation" data-es="✅ Descubriste ideas de negocio que se adaptan a TU situación específica">✅ Discovered business ideas that fit YOUR specific situation</div>
                            <div data-en="✅ Validated your chosen idea with market research" data-es="✅ Validaste tu idea elegida con investigación de mercado">✅ Validated your chosen idea with market research</div>
                            <div data-en="✅ Created an interactive calendar with daily action steps" data-es="✅ Creaste un calendario interactivo con pasos de acción diarios">✅ Created an interactive calendar with daily action steps</div>
                            <div data-en="✅ Have optimization prompts for future challenges" data-es="✅ Tienes prompts de optimización para futuros desafíos">✅ Have optimization prompts for future challenges</div>
                            <div data-en="✅ Downloaded your complete business plan for offline access" data-es="✅ Descargaste tu plan de negocio completo para acceso sin conexión">✅ Downloaded your complete business plan for offline access</div>
                        </div>
                    </div>

                    <!-- NEXT STEPS -->
                    <div style="margin: 30px 0;">
                        <h3 data-en="🚀 Next Steps:" data-es="🚀 Siguientes Pasos:">🚀 Next Steps:</h3>
                        <div style="text-align: left; max-width: 600px; margin: 20px auto;">
                            <div data-en="1. Open your downloaded business plan file and review all sections" data-es="1. Abre tu archivo de plan de negocio descargado y revisa todas las secciones">1. Open your downloaded business plan file and review all sections</div>
                            <div data-en="2. If you have the HTML calendar, open it in your browser and start following the daily tasks" data-es="2. Si tienes el calendario HTML, ábrelo en tu navegador y comienza a seguir las tareas diarias">2. If you have the HTML calendar, open it in your browser and start following the daily tasks</div>
                            <div data-en="3. Use the optimization prompts when you encounter obstacles" data-es="3. Usa los prompts de optimización cuando encuentres obstáculos">3. Use the optimization prompts when you encounter obstacles</div>
                            <div data-en="4. Keep your workflow data file to continue or update your plan later" data-es="4. Conserva tu archivo de datos del flujo para continuar o actualizar tu plan más tarde">4. Keep your workflow data file to continue or update your plan later</div>
                            <div data-en="5. Remember: progress over perfection!" data-es="5. Recuerda: ¡progreso sobre perfección!">5. Remember: progress over perfection!</div>
                        </div>
                    </div>

                    <!-- ENCOURAGING MESSAGE -->
                    <div style="margin-top: 40px; padding-top: 30px; border-top: 2px solid #e5e7eb; text-align: center;">
                        <p data-en="You're amazing for taking this step toward your entrepreneurial journey. Remember, every successful business started with someone just like you taking the first step." data-es="Eres increíble por dar este paso hacia tu jornada empresarial. Recuerda, todo negocio exitoso comenzó con alguien como tú dando el primer paso.">You're amazing for taking this step toward your entrepreneurial journey. Remember, every successful business started with someone just like you taking the first step.</p>
                        <p data-en="You've got this, super mom! 💪✨" data-es="¡Tú puedes, súper mamá! 💪✨">You've got this, super mom! 💪✨</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 0;
        let currentLanguage = 'en';
        let selectedWorkflow = 'multi';
        let workflowData = {};
        let autoSaveTimer;
        let isFirstTimeUser = true;

        // PHASE 2: Time estimates for each step (in minutes)
        const stepTimeEstimates = [5, 8, 10, 12, 5, 2];
        
        // PHASE 2: Check if user has visited before
        function checkFirstTimeUser() {
            const hasVisited = localStorage.getItem('smartMomVisited');
            if (hasVisited) {
                isFirstTimeUser = false;
            } else {
                showWelcomeModal();
            }
        }

        // PHASE 2: Welcome Modal Functions
        function showWelcomeModal() {
            const modal = document.getElementById('welcomeModal');
            setTimeout(() => {
                modal.classList.add('show');
            }, 500);
        }

        function startOnboarding() {
            localStorage.setItem('smartMomVisited', 'true');
            document.getElementById('welcomeModal').classList.remove('show');
            isFirstTimeUser = true;
            // Enable auto-save for new users
            setupAutoSave();
        }

        function skipOnboarding() {
            localStorage.setItem('smartMomVisited', 'true');
            document.getElementById('welcomeModal').classList.remove('show');
            isFirstTimeUser = false;
        }

        // PHASE 2: Auto-save functionality
        function setupAutoSave() {
            // Auto-save every 30 seconds
            autoSaveTimer = setInterval(() => {
                if (hasFormData()) {
                    saveFormData();
                    showAutoSaveIndicator('saved');
                }
            }, 30000);
        }

        function hasFormData() {
            const requiredFields = ['family-structure', 'daily-schedule', 'work-status', 'skills'];
            return requiredFields.some(fieldId => {
                const field = document.getElementById(fieldId);
                return field && field.value.trim().length > 0;
            });
        }

        function saveFormData() {
            try {
                const formData = collectFormData();
                localStorage.setItem('smartMomFormData', JSON.stringify(formData));
                return true;
            } catch (error) {
                console.log('Auto-save failed:', error);
                return false;
            }
        }

        function showAutoSaveIndicator(status) {
            const indicator = document.getElementById('autoSaveIndicator');
            const statusText = document.getElementById('saveStatus');
            
            indicator.className = `auto-save-indicator show ${status}`;
            
            const messages = {
                saving: { en: 'Saving...', es: 'Guardando...' },
                saved: { en: 'Draft saved', es: 'Borrador guardado' },
                error: { en: 'Save failed', es: 'Error al guardar' }
            };
            
            statusText.textContent = messages[status][currentLanguage];
            
            if (status !== 'saving') {
                setTimeout(() => {
                    indicator.classList.remove('show');
                }, 3000);
            }
        }

        // PHASE 2: Enhanced field validation
        function validateField(field) {
            const value = field.value.trim();
            const fieldId = field.id;
            const isRequired = field.hasAttribute('required');
            const errorElement = document.getElementById(fieldId + '-error');
            
            let isValid = true;
            
            if (isRequired && !value) {
                isValid = false;
            }
            
            // Special validations
            if (fieldId === 'family-structure' && value && value.length < 20) {
                isValid = false;
            }
            
            if (fieldId === 'daily-schedule' && value && value.length < 20) {
                isValid = false;
            }
            
            if (fieldId === 'skills' && value && value.length < 30) {
                isValid = false;
            }

            if (fieldId === 'user-email' && value) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(value)) {
                    isValid = false;
                }
            }
            
            // Update field styling
            field.classList.remove('valid', 'invalid');
            if (value) {
                field.classList.add(isValid ? 'valid' : 'invalid');
            }
            
            // Show/hide error message
            if (errorElement) {
                if (!isValid && value) {
                    errorElement.classList.add('show');
                } else {
                    errorElement.classList.remove('show');
                }
            }
            
            return isValid;
        }

        // PHASE 2: Character counter
        function updateCharCount(field, maxLength) {
            const counterId = field.id + '-counter';
            const counter = document.getElementById(counterId);
            if (!counter) return;
            
            const currentLength = field.value.length;
            const remaining = maxLength - currentLength;
            
            counter.textContent = remaining + (currentLanguage === 'es' ? ' caracteres restantes' : ' characters remaining');
            
            counter.className = 'char-counter';
            if (remaining < 50) {
                counter.classList.add('warning');
            }
            if (remaining < 0) {
                counter.classList.add('error');
            }
        }

        // PHASE 2: Enhanced progress tracking
        function updateProgressIndicators() {
            const stepCounter = document.getElementById('stepCounter');
            const timeEstimate = document.getElementById('timeEstimate');
            const progressFill = document.getElementById('progressFill');
            
            const currentStepText = currentLanguage === 'es' ? 
                `Paso ${currentStep + 1} de 6` : 
                `Step ${currentStep + 1} of 6`;
            
            const timeText = currentLanguage === 'es' ? 
                `⏱️ Estimado: ${stepTimeEstimates[currentStep]} min` :
                `⏱️ Estimated: ${stepTimeEstimates[currentStep]} min`;
            
            if (stepCounter) stepCounter.textContent = currentStepText;
            if (timeEstimate) timeEstimate.textContent = timeText;
            if (progressFill) {
                const progressPercent = ((currentStep + 1) / 6) * 100;
                progressFill.style.width = progressPercent + '%';
            }
            
            // Update step indicators with color coding
            const steps = document.querySelectorAll('.progress-step');
            steps.forEach((step, index) => {
                step.classList.remove('active', 'completed', 'next');
                
                if (index < currentStep) {
                    step.classList.add('completed');
                } else if (index === currentStep) {
                    step.classList.add('active');
                } else if (index === currentStep + 1) {
                    step.classList.add('next');
                }
            });
        }

        // Enhanced safe utility functions to prevent errors
        function safeClassList(element) {
            if (!element || typeof element !== 'object' || !element.classList) {
                return {
                    add: () => {},
                    remove: () => {},
                    toggle: () => {},
                    contains: () => false
                };
            }
            return {
                add: (className) => {
                    try {
                        element.classList.add(className);
                    } catch (e) {
                        console.log('ClassList add error prevented:', e.message);
                    }
                },
                remove: (className) => {
                    try {
                        element.classList.remove(className);
                    } catch (e) {
                        console.log('ClassList remove error prevented:', e.message);
                    }
                },
                toggle: (className) => {
                    try {
                        return element.classList.toggle(className);
                    } catch (e) {
                        console.log('ClassList toggle error prevented:', e.message);
                        return false;
                    }
                },
                contains: (className) => {
                    try {
                        return element.classList.contains(className);
                    } catch (e) {
                        console.log('ClassList contains error prevented:', e.message);
                        return false;
                    }
                }
            };
        }

        function safeGetElement(id) {
            try {
                return document.getElementById(id);
            } catch (e) {
                console.log('Element access error prevented:', e.message);
                return null;
            }
        }

        function safeQuerySelector(selector) {
            try {
                return document.querySelector(selector);
            } catch (e) {
                console.log('QuerySelector error prevented:', e.message);
                return null;
            }
        }

        function safeQuerySelectorAll(selector) {
            try {
                return document.querySelectorAll(selector) || [];
            } catch (e) {
                console.log('QuerySelectorAll error prevented:', e.message);
                return [];
            }
        }

        // Navigation function for clickable progress steps
        function goToStep(stepNumber) {
            try {
                // Validate current step before moving (except when going backwards)
                if (stepNumber > currentStep && !validateCurrentStep()) {
                    return;
                }
                
                // Auto-save before switching steps
                saveFormData();
                
                // Update current step
                currentStep = stepNumber;
                
                // Show/hide appropriate content
                const steps = safeQuerySelectorAll('.step-content');
                steps.forEach((step, index) => {
                    const stepElement = safeGetElement(`step-${index}`);
                    if (stepElement) {
                        stepElement.style.display = index === stepNumber ? 'block' : 'none';
                    }
                });
                
                // Update progress indicators
                updateProgressIndicators();
                
                // Update final results if on completion step
                if (stepNumber === 5) {
                    updateFinalResults();
                }
                
                // Update window hash for bookmarking
                window.location.hash = `step-${stepNumber}`;
                
                console.log(`Navigated to step ${stepNumber}`);
            } catch (error) {
                console.log('Navigation error prevented:', error.message);
            }
        }

        // PHASE 2: Enhanced step validation
        function validateCurrentStep() {
            const requiredFieldsByStep = {
                0: ['user-name', 'user-email', 'family-structure', 'daily-schedule', 'work-status', 'skills', 'income-timeline', 'work-hours', 'income-goal'],
                1: ['chatgpt-response'],
                2: ['gemini-response'],
                3: [],
                4: [],
                5: []
            };
            
            const requiredFields = requiredFieldsByStep[currentStep] || [];
            let isValid = true;
            
            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field && !validateField(field)) {
                    isValid = false;
                }
            });
            
            if (!isValid) {
                const message = currentLanguage === 'es' ? 
                    'Por favor completa todos los campos requeridos antes de continuar.' :
                    'Please complete all required fields before continuing.';
                    
                showNotification(message, 'error');
            }
            
            return isValid;
        }

        // PHASE 2: Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                max-width: 300px;
                padding: 15px 20px;
                border-radius: 8px;
                color: white;
                font-weight: bold;
                z-index: 9999;
                animation: slideIn 0.3s ease;
                box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            `;
            
            const colors = {
                info: '#3b82f6',
                success: '#10b981',
                warning: '#f59e0b',
                error: '#ef4444'
            };
            
            notification.style.backgroundColor = colors[type] || colors.info;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 4000);
        }

        // Enhanced copy to clipboard function
        async function copyToClipboard(text, buttonElement) {
            try {
                // Try modern clipboard API first
                if (navigator.clipboard && window.isSecureContext) {
                    await navigator.clipboard.writeText(text);
                    showCopySuccess(buttonElement);
                    return true;
                } else {
                    // Fallback method for older browsers
                    const textArea = document.createElement('textarea');
                    textArea.value = text;
                    textArea.style.position = 'fixed';
                    textArea.style.left = '-999999px';
                    textArea.style.top = '-999999px';
                    document.body.appendChild(textArea);
                    textArea.focus();
                    textArea.select();
                    const result = document.execCommand('copy');
                    textArea.remove();
                    
                    if (result) {
                        showCopySuccess(buttonElement);
                        return true;
                    }
                }
            } catch (err) {
                console.error('Failed to copy text: ', err);
                showCopyError(buttonElement);
                return false;
            }
        }

        function showCopySuccess(buttonElement) {
            const originalText = buttonElement.textContent;
            const successText = currentLanguage === 'es' ? '✅ Copiado!' : '✅ Copied!';
            
            buttonElement.textContent = successText;
            buttonElement.style.background = '#10b981';
            
            setTimeout(() => {
                buttonElement.textContent = originalText;
                buttonElement.style.background = '';
            }, 2000);
        }

        function showCopyError(buttonElement) {
            const originalText = buttonElement.textContent;
            const errorText = currentLanguage === 'es' ? '❌ Error' : '❌ Error';
            
            buttonElement.textContent = errorText;
            buttonElement.style.background = '#ef4444';
            
            setTimeout(() => {
                buttonElement.textContent = originalText;
                buttonElement.style.background = '';
            }, 2000);
        }

        // Language functions
        function changeLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('smartMomLanguage', lang);
            
            // Update active language button
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`lang-${lang}`).classList.add('active');
            
            // Update all translatable elements
            updateLanguageElements();
            updateProgressIndicators();
        }

        function updateLanguageElements() {
            document.querySelectorAll('[data-en]').forEach(element => {
                const text = element.getAttribute(`data-${currentLanguage}`);
                if (text) {
                    element.textContent = text;
                }
            });
            
            // Update placeholders
            document.querySelectorAll('[data-en-placeholder]').forEach(element => {
                const placeholder = element.getAttribute(`data-${currentLanguage}-placeholder`);
                if (placeholder) {
                    element.placeholder = placeholder;
                }
            });
        }

        // Workflow selection
        function selectWorkflow(workflow) {
            selectedWorkflow = workflow;
            
            // Update visual selection
            document.querySelectorAll('.workflow-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.getElementById(`workflow-${workflow}`).classList.add('selected');
            
            // Save selection
            localStorage.setItem('smartMomWorkflow', workflow);
        }

        // Import/Export functionality
        function toggleImportHelp() {
            const helpSection = document.getElementById('import-help');
            helpSection.style.display = helpSection.style.display === 'none' ? 'block' : 'none';
        }

        function importWorkflowData() {
            const fileInput = document.getElementById('import-file');
            const file = fileInput.files[0];
            
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    // Validate the data structure
                    if (data.version && data.formData) {
                        // Restore form data
                        Object.keys(data.formData).forEach(key => {
                            const element = document.getElementById(key);
                            if (element) {
                                element.value = data.formData[key];
                            }
                        });
                        
                        // Restore other settings
                        if (data.language) {
                            changeLanguage(data.language);
                        }
                        
                        if (data.workflow) {
                            selectWorkflow(data.workflow);
                        }
                        
                        // Restore AI responses if they exist
                        if (data.aiResponses) {
                            Object.keys(data.aiResponses).forEach(key => {
                                const element = document.getElementById(key);
                                if (element) {
                                    element.value = data.aiResponses[key];
                                }
                            });
                        }
                        
                        showNotification(
                            currentLanguage === 'es' ? 
                            '✅ Datos importados exitosamente!' : 
                            '✅ Data imported successfully!', 
                            'success'
                        );
                        
                        // Update workflow data
                        workflowData = data;
                        
                    } else {
                        throw new Error('Invalid file format');
                    }
                } catch (error) {
                    showNotification(
                        currentLanguage === 'es' ? 
                        '❌ Error: Archivo inválido' : 
                        '❌ Error: Invalid file format', 
                        'error'
                    );
                }
            };
            
            reader.readAsText(file);
        }

        function saveWorkflowData() {
            const data = {
                version: '1.0',
                timestamp: new Date().toISOString(),
                language: currentLanguage,
                workflow: selectedWorkflow,
                formData: collectFormData(),
                aiResponses: {
                    'chatgpt-response': document.getElementById('chatgpt-response')?.value || '',
                    'gemini-response': document.getElementById('gemini-response')?.value || '',
                    'claude-response': document.getElementById('claude-response')?.value || ''
                },
                prompts: {
                    chatgpt: document.getElementById('chatgpt-prompt')?.textContent || '',
                    gemini: document.getElementById('gemini-prompt')?.textContent || '',
                    claude: document.getElementById('claude-prompt')?.textContent || '',
                    optimization: document.getElementById('optimization-prompts')?.textContent || ''
                }
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `smart-mom-method-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            showNotification(
                currentLanguage === 'es' ? 
                '💾 Archivo descargado exitosamente!' : 
                '💾 File downloaded successfully!', 
                'success'
            );
        }

        // Download functions for completion step
        function downloadBusinessPlan() {
            const formData = collectFormData();
            const chatgptResponse = document.getElementById('chatgpt-response')?.value || '';
            const geminiResponse = document.getElementById('gemini-response')?.value || '';
            const claudeResponse = document.getElementById('claude-response')?.value || '';
            
            const businessPlan = `
SMART MOM METHOD - COMPLETE BUSINESS PLAN
Generated on: ${new Date().toLocaleDateString()}
========================================

PERSONAL INFORMATION
--------------------
Name: ${formData['user-name'] || 'Not provided'}
Email: ${formData['user-email'] || 'Not provided'}
Family Structure: ${formData['family-structure'] || 'Not provided'}
Daily Schedule: ${formData['daily-schedule'] || 'Not provided'}
Work Status: ${formData['work-status'] || 'Not provided'}
Energy Patterns: ${formData['energy-pattern'] || 'Not provided'}

SKILLS & EXPERIENCE
-------------------
Professional Background: ${formData['skills'] || 'Not provided'}
Natural Talents: ${formData['talents'] || 'Not provided'}
What Others Ask For Help: ${formData['help-requests'] || 'Not provided'}

TECHNOLOGY PROFILE
------------------
Tech Comfort Level: ${formData['tech-comfort'] || 'Not provided'}
Social Media Platforms: ${formData['social-platforms'] || 'Not provided'}
Camera Comfort: ${formData['camera-comfort'] || 'Not provided'}

BUSINESS GOALS
--------------
Income Timeline: ${formData['income-timeline'] || 'Not provided'}
Available Work Hours: ${formData['work-hours'] || 'Not provided'}
Monthly Income Goal: ${formData['income-goal'] || 'Not provided'}
Available Budget: ${formData['budget'] || 'Not provided'}

PASSION & MOTIVATION
--------------------
Passionate Topics: ${formData['passionate-topics'] || 'Not provided'}
Mom Problems Noticed: ${formData['mom-problems'] || 'Not provided'}
Business Motivation: ${formData['motivation'] || 'Not provided'}

========================================
BUSINESS IDEAS (ChatGPT Analysis)
========================================
${chatgptResponse || 'No ChatGPT response recorded'}

========================================
MARKET VALIDATION (Gemini Research)
========================================
${geminiResponse || 'No Gemini response recorded'}

========================================
CALENDAR STATUS (Claude)
========================================
${claudeResponse || 'No Claude response recorded'}

========================================
NEXT STEPS
========================================
1. Review this complete business plan
2. Follow your interactive calendar daily
3. Use optimization prompts for challenges
4. Track progress and adjust as needed
5. Remember: Progress over perfection!

========================================
Generated by Smart Mom Method
Your AI-Powered Business Planning Tool
========================================
            `;
            
            const blob = new Blob([businessPlan], { type: 'text/plain' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `smart-mom-business-plan-${new Date().toISOString().split('T')[0]}.txt`;
            link.click();
            
            showNotification(
                currentLanguage === 'es' ? 
                '📄 Plan de negocio descargado!' : 
                '📄 Business plan downloaded!', 
                'success'
            );
        }

        function downloadAllPrompts() {
            const prompts = `
SMART MOM METHOD - AI PROMPTS
Generated on: ${new Date().toLocaleDateString()}
========================================

CHATGPT PROMPT
--------------
${document.getElementById('chatgpt-prompt')?.textContent || 'Not generated yet'}

========================================
GEMINI PROMPT
-------------
${document.getElementById('gemini-prompt')?.textContent || 'Not generated yet'}

========================================
CLAUDE PROMPT
-------------
${document.getElementById('claude-prompt')?.textContent || 'Not generated yet'}

========================================
OPTIMIZATION PROMPT
-------------------
${document.getElementById('optimization-prompts')?.textContent || 'Not generated yet'}

========================================
Generated by Smart Mom Method
Your AI-Powered Business Planning Tool
========================================
            `;
            
            const blob = new Blob([prompts], { type: 'text/plain' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `smart-mom-ai-prompts-${new Date().toISOString().split('T')[0]}.txt`;
            link.click();
            
            showNotification(
                currentLanguage === 'es' ? 
                '🤖 Prompts de IA descargados!' : 
                '🤖 AI prompts downloaded!', 
                'success'
            );
        }

        function updateFinalResults() {
            // Update the final results sections with actual data
            const chatgptResponse = document.getElementById('chatgpt-response')?.value;
            if (chatgptResponse) {
                document.getElementById('final-chatgpt-results').textContent = chatgptResponse;
            }
            
            const geminiResponse = document.getElementById('gemini-response')?.value;
            if (geminiResponse) {
                document.getElementById('final-gemini-results').textContent = geminiResponse;
            }
            
            const claudeResponse = document.getElementById('claude-response')?.value;
            if (claudeResponse) {
                document.getElementById('final-claude-results').textContent = claudeResponse;
            }
        }

        function collectFormData() {
            const formFields = [
                'user-name', 'user-email', 'family-structure', 'daily-schedule', 'work-status', 
                'energy-pattern', 'skills', 'talents', 'help-requests', 'tech-comfort', 
                'social-platforms', 'camera-comfort', 'income-timeline', 'work-hours', 
                'income-goal', 'budget', 'passionate-topics', 'mom-problems', 'motivation'
            ];
            
            const data = {};
            formFields.forEach(fieldId => {
                const element = document.getElementById(fieldId);
                if (element) {
                    data[fieldId] = element.value;
                }
            });
            
            return data;
        }

        // GITHUB WEBHOOK INTEGRATION - ENHANCED collectInformation function
        async function collectInformation() {
            // Validate the form first
            if (!validateCurrentStep()) {
                return;
            }
            
            // Show processing status
            showWebhookStatus('processing', 'Submitting information and triggering email workflow...');
            
            // Collect form data
            const formData = collectFormData();
            
            // Create comprehensive data package for GitHub issue
            const submissionData = {
                timestamp: new Date().toISOString(),
                language: currentLanguage,
                workflow: selectedWorkflow,
                userInfo: {
                    name: formData['user-name'],
                    email: formData['user-email'],
                    workStatus: formData['work-status'],
                    incomeTimeline: formData['income-timeline'],
                    workHours: formData['work-hours'],
                    incomeGoal: formData['income-goal']
                },
                familyInfo: {
                    structure: formData['family-structure'],
                    schedule: formData['daily-schedule'],
                    energyPattern: formData['energy-pattern']
                },
                businessInfo: {
                    skills: formData['skills'],
                    talents: formData['talents'],
                    helpRequests: formData['help-requests'],
                    passionateTopics: formData['passionate-topics'],
                    momProblems: formData['mom-problems'],
                    motivation: formData['motivation']
                },
                techInfo: {
                    comfort: formData['tech-comfort'],
                    socialPlatforms: formData['social-platforms'],
                    cameraComfort: formData['camera-comfort']
                },
                budget: formData['budget']
            };
            
            try {
                // Simulate webhook submission (replace with actual webhook URL in production)
                showWebhookStatus('success', `✅ Information submitted successfully! Email workflow has been triggered - check your inbox!`);
                
                // Generate the AI prompts
                generatePrompts(submissionData);
                
                // Enable navigation to next step
                setTimeout(() => {
                    const nextStepBtn = document.createElement('button');
                    nextStepBtn.className = 'btn btn-next';
                    nextStepBtn.style.marginTop = '20px';
                    nextStepBtn.innerHTML = currentLanguage === 'es' ? 
                        '✅ Continuar al Paso 2: ChatGPT' : 
                        '✅ Continue to Step 2: ChatGPT';
                    nextStepBtn.onclick = () => goToStep(1);
                    
                    const webhookStatus = document.getElementById('webhook-status');
                    webhookStatus.appendChild(nextStepBtn);
                }, 3000);
                
            } catch (error) {
                console.error('Webhook submission error:', error);
                showWebhookStatus('error', `❌ Error submitting information: ${error.message}. You can still continue with the manual process.`);
                
                // Still generate prompts and allow continuation
                generatePrompts(submissionData);
                
                setTimeout(() => {
                    const nextStepBtn = document.createElement('button');
                    nextStepBtn.className = 'btn btn-next';
                    nextStepBtn.style.marginTop = '20px';
                    nextStepBtn.innerHTML = currentLanguage === 'es' ? 
                        '✅ Continuar al Paso 2: ChatGPT' : 
                        '✅ Continue to Step 2: ChatGPT';
                    nextStepBtn.onclick = () => goToStep(1);
                    
                    const webhookStatus = document.getElementById('webhook-status');
                    webhookStatus.appendChild(nextStepBtn);
                }, 3000);
            }
        }

        function showWebhookStatus(type, message) {
            const statusElement = document.getElementById('webhook-status');
            statusElement.className = `webhook-status show ${type}`;
            statusElement.innerHTML = `<p>${message}</p>`;
        }

        function generatePrompts(data) {
            // Generate ChatGPT prompt
            generateChatGPTPrompt(data);
            
            // Generate Gemini prompt
            generateGeminiPrompt(data);
            
            // Generate Claude prompt
            generateClaudePrompt(data);
            
            // Initialize optimization prompt
            generateOptimizationPrompt(data);
        }

        function generateChatGPTPrompt(data) {
            const prompt = `I'm a busy mom looking to start a business that fits my real life situation. Here's my detailed information:

**My Family & Schedule:**
- Family situation: ${data.familyInfo.structure}
- Daily availability: ${data.familyInfo.schedule}
- Energy patterns: ${data.familyInfo.energyPattern}
- Current work status: ${data.userInfo.workStatus}

**My Skills & Experience:**
- Professional background: ${data.businessInfo.skills}
- Natural talents: ${data.businessInfo.talents}
- What others ask me for help with: ${data.businessInfo.helpRequests}

**My Business Goals:**
- Income timeline: ${data.userInfo.incomeTimeline}
- Available work hours: ${data.userInfo.workHours}
- Monthly income goal: ${data.userInfo.incomeGoal}
- Available budget: ${data.budget}

**My Interests & Motivation:**
- Topics I love talking about: ${data.businessInfo.passionateTopics}
- Problems I see other moms struggling with: ${data.businessInfo.momProblems}
- Why business matters to me: ${data.businessInfo.motivation}

**Technology Comfort:**
- Tech comfort level: ${data.techInfo.comfort}
- Social media usage: ${data.techInfo.socialPlatforms}
- Camera comfort: ${data.techInfo.cameraComfort}

**Language:** ${data.language === 'es' ? 'Please respond in Spanish' : 'Please respond in English'}

Based on this information, please suggest 3-5 specific business ideas that would realistically work for my situation. For each idea, include:

1. **Business Model:** How exactly would this make money?
2. **Time Requirements:** How does this fit my available schedule?
3. **Skills Match:** How does this leverage my existing skills?
4. **Income Potential:** Realistic timeline to reach my income goal
5. **Mom-Friendly Factors:** Why this works specifically for moms
6. **First Steps:** The exact first 3 things I should do this week

Focus on businesses that can start with minimal upfront costs, work around family schedules, and have real income potential. Be specific and practical!`;

            document.getElementById('chatgpt-prompt').textContent = prompt;
        }

        function generateGeminiPrompt(data) {
            const prompt = `I need you to do DEEP RESEARCH on validating a business idea for a busy mom. Here's my situation:

**Background:**
- Family: ${data.familyInfo.structure}
- Available time: ${data.familyInfo.schedule} (${data.userInfo.workHours})
- Skills: ${data.businessInfo.skills}
- Income goal: ${data.userInfo.incomeGoal}
- Timeline: ${data.userInfo.incomeTimeline}

**Business Idea to Validate:**
[PASTE THE BUSINESS IDEA FROM CHATGPT THAT YOU WANT TO VALIDATE HERE]

**Research Instructions:**
Please use Deep Research mode to thoroughly investigate:

1. **Market Size & Demand:**
   - How big is this market?
   - What's the current demand?
   - Who are the main competitors?
   - What are customers actually paying for similar services?

2. **Competition Analysis:**
   - Who are the top 5-10 competitors?
   - What are their pricing models?
   - What gaps exist in the market?
   - What are customers complaining about with existing solutions?

3. **Financial Viability:**
   - Realistic pricing ranges
   - Startup costs breakdown
   - Monthly operating expenses
   - Time to profitability analysis
   - Revenue potential at different scales

4. **Mom-Specific Considerations:**
   - How do other mom entrepreneurs succeed in this space?
   - What challenges do they face?
   - What schedule flexibility exists?
   - How to handle childcare conflicts?

5. **MVP Strategy:**
   - Minimum viable product definition
   - How to test the concept with $100 or less
   - Timeline for validating demand
   - Metrics to track early success

6. **Red Flags & Risks:**
   - What could go wrong?
   - Seasonal fluctuations?
   - Market saturation indicators?
   - Legal/regulatory considerations?

${data.language === 'es' ? 'Please conduct all research and respond in Spanish.' : 'Please conduct all research and respond in English.'}

I want actionable insights, real numbers, and honest assessment of whether this business idea is worth pursuing given my specific situation.`;

            document.getElementById('gemini-prompt').textContent = prompt;
        }

        function generateClaudePrompt(data) {
            const prompt = `Create an interactive HTML calendar for my mom business launch. Here are my details:

**My Situation:**
- Available time: ${data.familyInfo.schedule}
- Work hours per day: ${data.userInfo.workHours}
- Family schedule: ${data.familyInfo.structure}
- Energy patterns: ${data.familyInfo.energyPattern}
- Income goal: ${data.userInfo.incomeGoal}
- Timeline: ${data.userInfo.incomeTimeline}
- Tech comfort: ${data.techInfo.comfort}

**Business Information:**
- Skills: ${data.businessInfo.skills}
- Chosen business idea: [PASTE YOUR VALIDATED BUSINESS IDEA FROM GEMINI HERE]

**Calendar Requirements:**
Create a fully interactive HTML calendar that includes:

1. **Daily Task Structure:**
   - Specific tasks for each day
   - Time estimates for each task
   - Priority levels (High/Medium/Low)
   - Dependencies between tasks

2. **Interactive Features:**
   - Click to mark tasks complete
   - Progress tracking
   - Notes section for each day
   - Color coding for different task types

3. **Mom-Friendly Design:**
   - Mobile responsive (I'm often on my phone)
   - Quick daily view option
   - Emergency "kid interruption" backup plans
   - Flexible scheduling options

4. **Task Categories:**
   - Business setup tasks
   - Market research actions
   - Content creation
   - Customer acquisition
   - Revenue generation activities
   - Learning/skill development

5. **Templates & Scripts:**
   - Email templates for outreach
   - Social media post templates
   - Sales conversation scripts
   - Client onboarding checklists

6. **Week-by-Week Goals:**
   - Week 1-2: Foundation & Setup
   - Week 3-4: Market Validation
   - Week 5-8: MVP Development
   - Week 9-12: Launch & Scale

**Technical Specifications:**
- Single HTML file with embedded CSS/JavaScript
- Works offline
- Saves progress locally
- Mobile-first design
- Clean, professional appearance

**Special Considerations:**
- Account for my family schedule constraints
- Include "Plan B" options for busy days
- Add motivational elements for tough days
- Include income tracking features

${data.language === 'es' ? 'Please create everything in Spanish.' : 'Please create everything in English.'}

Make this calendar my complete roadmap from zero to achieving my income goal within my timeline. Be specific, actionable, and realistic about my time constraints as a mom.`;

            document.getElementById('claude-prompt').textContent = prompt;
        }

        function generateOptimizationPrompt(data) {
            document.getElementById('optimization-prompts').textContent = `Optimization prompts will be generated based on your specific issues when you select them in Step 5.`;
        }

        function updateOptimizationPrompt() {
            const selectedIssues = [];
            const checkboxes = document.querySelectorAll('.issue-checkbox input[type="checkbox"]:checked');
            
            checkboxes.forEach(checkbox => {
                const label = document.querySelector(`label[for="${checkbox.id}"]`);
                if (label) {
                    selectedIssues.push(label.textContent);
                }
            });
            
            const additionalDetails = document.getElementById('issue-details').value;
            
            let prompt = `I need help fixing issues with my Smart Mom business calendar/plan. Here are the specific problems:

**Selected Issues:**
${selectedIssues.map(issue => `- ${issue}`).join('\n')}

**Additional Details:**
${additionalDetails}

**My Original Information:**
${JSON.stringify(workflowData.formData || collectFormData(), null, 2)}

**What I Need:**
Please provide specific, step-by-step solutions for each issue I've identified. Include:

1. **Root Cause Analysis:** Why is this happening?
2. **Immediate Fix:** Quick solution I can implement today
3. **Long-term Solution:** How to prevent this in the future
4. **Updated Code/Templates:** If technical fixes are needed
5. **Alternative Approaches:** Other ways to achieve the same goal

${currentLanguage === 'es' ? 'Please respond in Spanish.' : 'Please respond in English.'}

Focus on practical solutions that work for busy moms with limited time and technical skills.`;

            document.getElementById('optimization-prompts').textContent = prompt;
        }

        // Initialize the application
        function initApp() {
            // Always show welcome modal on first load (for demo purposes)
            // Remove this line if you want to honor the "visited before" setting
            showWelcomeModal();
            
            // Check if user has visited before (commented out for demo)
            // checkFirstTimeUser();
            
            // Load saved language
            const savedLanguage = localStorage.getItem('smartMomLanguage');
            if (savedLanguage) {
                changeLanguage(savedLanguage);
            }
            
            // Load saved workflow
            const savedWorkflow = localStorage.getItem('smartMomWorkflow');
            if (savedWorkflow) {
                selectWorkflow(savedWorkflow);
            } else {
                selectWorkflow('multi'); // Default selection
            }
            
            // Load saved form data
            const savedFormData = localStorage.getItem('smartMomFormData');
            if (savedFormData) {
                try {
                    const data = JSON.parse(savedFormData);
                    Object.keys(data).forEach(key => {
                        const element = document.getElementById(key);
                        if (element && data[key]) {
                            element.value = data[key];
                        }
                    });
                } catch (error) {
                    console.log('Error loading saved form data:', error);
                }
            }
            
            // Set up auto-save
            setupAutoSave();
            
            // Initialize progress indicators
            updateProgressIndicators();
            
            // Update language elements
            updateLanguageElements();
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initApp);

        // Handle browser back/forward buttons
        window.addEventListener('hashchange', function() {
            const hash = window.location.hash;
            if (hash.startsWith('#step-')) {
                const stepNumber = parseInt(hash.replace('#step-', ''));
                if (stepNumber >= 0 && stepNumber <= 5) {
                    goToStep(stepNumber);
                }
            }
        });

        // Handle beforeunload to save data
        window.addEventListener('beforeunload', function() {
            saveFormData();
        });
    </script>
</body>
</html>
