<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Mom Method - AI Interactive Calendar & Business Wizard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    
    <style>
        :root {
            --sage-green: #556B2F;
            --warm-cream: #FCFBF8;
            --deep-teal: #343A40;
            --charcoal: #2C3E50;
            --soft-gold: #BC6C25;
            --light-sage: #EAEBE1;
            --sage-alpha: rgba(85, 107, 47, 0.1);
            --teal-alpha: rgba(52, 58, 64, 0.1);
            --gold-alpha: rgba(188, 108, 37, 0.1);
            --step-current: #3498db;
            --step-completed: #27ae60;
            --step-pending: #95a5a6;
            --button-next: #556B2F;
            --button-done: #7f8c8d;
            --button-back: #BC6C25;
            --success-green: #27ae60;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--charcoal);
            background: var(--warm-cream);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* User Status Bar */
        .user-status-bar {
            background: white;
            padding: 16px 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 16px rgba(85, 107, 47, 0.08);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--sage-green), var(--deep-teal));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 18px;
        }

        .user-details h4 {
            color: var(--charcoal);
            margin: 0;
            font-size: 16px;
        }

        .user-details p {
            color: var(--charcoal);
            opacity: 0.7;
            margin: 0;
            font-size: 14px;
        }

        .user-actions {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-badge.signed-in {
            background: var(--light-sage);
            color: var(--sage-green);
        }

        .status-badge.guest {
            background: #fff3cd;
            color: #856404;
        }

        /* Authentication Modal */
        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(44, 62, 80, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
        }

        .auth-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .auth-content {
            background: white;
            border-radius: 24px;
            padding: 50px;
            max-width: 500px;
            width: 90%;
            position: relative;
            transform: translateY(20px);
            transition: transform 0.4s ease;
        }

        .auth-modal.active .auth-content {
            transform: translateY(0);
        }

        .auth-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--charcoal);
            opacity: 0.7;
        }

        .auth-close:hover {
            opacity: 1;
        }

        .auth-title {
            font-family: 'Playfair Display', serif;
            color: var(--sage-green);
            margin-bottom: 32px;
            font-size: 2rem;
            text-align: center;
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .auth-input {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--light-sage);
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }

        .auth-input:focus {
            outline: none;
            border-color: var(--sage-green);
            box-shadow: 0 0 0 4px var(--sage-alpha);
        }

        .auth-button {
            background: linear-gradient(135deg, var(--sage-green), #455A26);
            color: white;
            padding: 18px 36px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .auth-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(85, 107, 47, 0.35);
        }

        .auth-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .auth-switch {
            text-align: center;
            margin-top: 24px;
            color: var(--charcoal);
            opacity: 0.8;
        }

        .auth-link {
            color: var(--sage-green);
            cursor: pointer;
            text-decoration: underline;
        }

        .auth-error {
            background: #ffebee;
            border: 1px solid #e57373;
            color: #c62828;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            font-size: 14px;
        }

        .auth-success {
            background: #e8f5e8;
            border: 1px solid var(--sage-green);
            color: var(--sage-green);
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            font-size: 14px;
        }

        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid var(--sage-green);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 8px;
            display: inline-block;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Welcome Modal */
        .welcome-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(44, 62, 80, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 1;
            visibility: visible;
            transition: all 0.4s ease;
        }

        .welcome-modal.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .welcome-content {
            background: white;
            border-radius: 24px;
            padding: 60px 50px;
            max-width: 600px;
            width: 90%;
            text-align: center;
            transform: translateY(0);
            transition: transform 0.4s ease;
            box-shadow: 0 30px 80px rgba(44, 62, 80, 0.2);
        }

        .welcome-content h2 {
            font-family: 'Playfair Display', serif;
            color: var(--sage-green);
            margin-bottom: 24px;
            font-size: 2.4rem;
            font-weight: 600;
        }

        .welcome-content p {
            color: var(--charcoal);
            margin-bottom: 40px;
            font-size: 1.1rem;
            line-height: 1.7;
            opacity: 0.8;
        }

        .welcome-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .welcome-btn {
            padding: 18px 36px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
            font-family: 'Inter', sans-serif;
        }

        .welcome-btn.primary {
            background: linear-gradient(135deg, var(--sage-green), #455A26);
            color: white;
            box-shadow: 0 8px 24px rgba(85, 107, 47, 0.3);
        }

        .welcome-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(85, 107, 47, 0.4);
        }

        .welcome-btn.secondary {
            background: var(--deep-teal);
            color: white;
        }

        .welcome-btn.secondary:hover {
            background: #1E3D47;
            transform: translateY(-2px);
        }

        .welcome-btn.auth {
            background: var(--soft-gold);
            color: white;
        }

        .welcome-btn.auth:hover {
            background: #A15D1F;
            transform: translateY(-2px);
        }

        /* Premium Services Section */
        .premium-services-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 32px;
            box-shadow: 0 8px 32px rgba(44, 62, 80, 0.08);
            display: none;
        }

        .premium-services-section.active {
            display: block;
        }

        .premium-services-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .premium-services-header h2 {
            font-family: 'Playfair Display', serif;
            color: var(--charcoal);
            font-size: 2.2rem;
            margin-bottom: 16px;
        }

        .premium-services-header p {
            color: var(--charcoal);
            opacity: 0.8;
            font-size: 1.1rem;
        }

        .service-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .service-card {
            background: var(--warm-cream);
            border-radius: 20px;
            padding: 40px 30px;
            text-align: center;
            border: 3px solid transparent;
            transition: all 0.3s ease;
            position: relative;
        }

        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(85, 107, 47, 0.2);
            border-color: var(--sage-green);
        }

        .service-card.premium {
            border-color: var(--soft-gold);
            background: white;
        }

        .service-card.premium::before {
            content: "MOST POPULAR";
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--soft-gold);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
        }

        .service-price {
            font-size: 3rem;
            font-weight: 700;
            color: var(--sage-green);
            margin-bottom: 8px;
        }

        .service-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--charcoal);
            margin-bottom: 16px;
        }

        .service-description {
            color: var(--charcoal);
            opacity: 0.8;
            margin-bottom: 24px;
            line-height: 1.6;
        }

        .service-features {
            list-style: none;
            padding: 0;
            margin: 24px 0;
            text-align: left;
        }

        .service-features li {
            padding: 8px 0;
            position: relative;
            padding-left: 24px;
            color: var(--charcoal);
            opacity: 0.9;
        }

        .service-features li::before {
            content: "✓";
            position: absolute;
            left: 0;
            color: var(--sage-green);
            font-weight: bold;
        }

        .service-button {
            background: linear-gradient(135deg, var(--sage-green), #455A26);
            color: white;
            padding: 16px 32px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 20px;
        }

        .service-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(85, 107, 47, 0.35);
        }

        .service-button.premium {
            background: linear-gradient(135deg, var(--soft-gold), #A15D1F);
        }

        .premium-nav-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .premium-nav-btn {
            padding: 16px 32px;
            border: 2px solid var(--sage-green);
            background: white;
            color: var(--sage-green);
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
        }

        .premium-nav-btn:hover {
            background: var(--sage-green);
            color: white;
            transform: translateY(-2px);
        }

        /* Consultation Options */
        .consultation-options {
            background: linear-gradient(135deg, var(--sage-alpha), var(--teal-alpha));
            border-radius: 20px;
            padding: 40px;
            margin: 40px 0;
            border: 2px solid var(--sage-green);
            display: none;
        }

        .consultation-options.active {
            display: block;
        }

        .consultation-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .consultation-header h3 {
            font-family: 'Playfair Display', serif;
            color: var(--charcoal);
            font-size: 1.8rem;
            margin-bottom: 12px;
        }

        .consultation-header p {
            color: var(--charcoal);
            opacity: 0.8;
        }

        .consultation-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
        }

        .consultation-card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .consultation-card:hover {
            transform: translateY(-5px);
        }

        .consultation-card h4 {
            color: var(--charcoal);
            margin-bottom: 16px;
            font-size: 1.3rem;
        }

        .consultation-card p {
            color: var(--charcoal);
            opacity: 0.8;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .consultation-btn {
            background: var(--deep-teal);
            color: white;
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .consultation-btn:hover {
            background: #1E3D47;
            transform: translateY(-2px);
        }

        /* Premium Access Button */
        .premium-access-container {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
        }

        .premium-access-btn {
            background: linear-gradient(135deg, var(--soft-gold), #A15D1F);
            color: white;
            padding: 18px 36px;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 24px rgba(188, 108, 37, 0.3);
        }

        .premium-access-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(188, 108, 37, 0.4);
        }

        /* Language Selection */
        .language-selector {
            text-align: center;
            margin-bottom: 40px;
            padding: 32px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(44, 62, 80, 0.08);
        }

        .language-selector h2 {
            margin-bottom: 24px;
            color: var(--charcoal);
            font-size: 1.6rem;
            font-weight: 600;
        }

        .language-buttons {
            display: flex;
            gap: 24px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .language-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 40px;
            background: var(--sage-green);
            color: white;
            border: none;
            border-radius: 16px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            min-width: 200px;
            box-shadow: 0 6px 20px rgba(85, 107, 47, 0.25);
        }

        .language-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(85, 107, 47, 0.35);
        }

        .language-btn.active {
            background: var(--soft-gold);
            transform: translateY(-2px);
        }

        .language-btn .flag {
            font-size: 2rem;
            margin-bottom: 12px;
        }

        .language-btn small {
            margin-top: 8px;
            opacity: 0.9;
        }

        /* Progress Container */
        .progress-container {
            background: white;
            border-radius: 20px;
            padding: 32px;
            margin-bottom: 32px;
            box-shadow: 0 8px 32px rgba(44, 62, 80, 0.08);
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .step-counter {
            font-weight: 700;
            color: var(--sage-green);
            font-size: 1.3rem;
        }

        .overall-progress {
            width: 100%;
            height: 12px;
            background: var(--light-sage);
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 32px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--sage-green), var(--deep-teal));
            transition: width 0.5s ease;
            border-radius: 6px;
            width: 10%;
        }

        .progress-bar {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 8px;
            margin-bottom: 0;
        }

        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 12px 8px;
            border-radius: 12px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--sage-alpha);
        }
        
        .progress-step:hover {
            background: var(--teal-alpha);
            transform: translateY(-2px);
        }

        .progress-step.active {
            background: var(--step-current);
            color: white;
        }

        .progress-step.completed {
            background: var(--step-completed);
            color: white;
        }

        .progress-step.pending {
            background: var(--step-pending);
            color: white;
        }

        .step-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-bottom: 8px;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .progress-step.active .step-number {
            background: rgba(255, 255, 255, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .step-text {
            font-size: 0.7rem;
            text-align: center;
            font-weight: 600;
            line-height: 1.2;
        }

        /* Main Card */
        .main-card {
            background: white;
            border-radius: 24px;
            box-shadow: 0 16px 48px rgba(44, 62, 80, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, var(--sage-green), var(--deep-teal));
            color: white;
            padding: 60px 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: shimmer 8s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
        }

        .header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            margin-bottom: 16px;
            position: relative;
            z-index: 1;
            font-weight: 600;
        }

        .header .subtitle {
            font-size: 1.3rem;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            font-weight: 400;
        }

        .badge {
            display: inline-block;
            background: var(--soft-gold);
            color: white;
            padding: 12px 28px;
            border-radius: 30px;
            font-weight: 700;
            margin-top: 24px;
            font-size: 1rem;
            position: relative;
            z-index: 1;
        }

        .header .cta-section {
            margin-top: 40px;
            position: relative;
            z-index: 1;
        }

        .btn-current {
            background: linear-gradient(135deg, var(--soft-gold), #A15D1F);
            color: white;
            box-shadow: 0 8px 24px rgba(188, 108, 37, 0.3);
            font-size: 1.2rem;
            padding: 20px 40px;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-current:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(188, 108, 37, 0.4);
        }

        .content {
            padding: 50px 40px;
        }

        .step-description {
            background: var(--light-sage);
            padding: 32px;
            border-radius: 16px;
            margin-bottom: 40px;
            border-left: 6px solid var(--sage-green);
        }

        .step-description h2 {
            font-family: 'Playfair Display', serif;
            color: var(--charcoal);
            margin-bottom: 16px;
            font-size: 2rem;
            font-weight: 600;
        }

        .step-description p {
            color: var(--charcoal);
            font-size: 1.1rem;
            opacity: 0.8;
        }

        .empowerment-message {
            background: linear-gradient(135deg, var(--gold-alpha), rgba(212, 165, 116, 0.15));
            border: 2px solid var(--soft-gold);
            border-radius: 20px;
            padding: 32px;
            margin: 32px 0;
            text-align: center;
        }

        .empowerment-title {
            color: var(--charcoal);
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 16px;
            font-family: 'Playfair Display', serif;
        }

        .empowerment-text {
            color: var(--charcoal);
            line-height: 1.7;
            opacity: 0.9;
        }

        /* Form Sections */
        .form-section {
            margin-bottom: 40px;
            padding: 40px;
            background: white;
            border-radius: 20px;
            border: 2px solid var(--light-sage);
            box-shadow: 0 4px 16px rgba(107, 142, 107, 0.08);
            display: block !important;
        }

        .form-section h2 {
            font-family: 'Playfair Display', serif;
            color: var(--charcoal);
            margin-bottom: 32px;
            font-size: 1.8rem;
            font-weight: 600;
            text-align: center;
        }

        .form-group {
            margin-bottom: 28px;
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            color: var(--charcoal);
            font-size: 1rem;
        }

        .required {
            color: var(--soft-gold);
            margin-left: 4px;
        }

        .form-control {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--light-sage);
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            background: var(--warm-cream);
            resize: vertical;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--sage-green);
            box-shadow: 0 0 0 4px var(--sage-alpha);
            background: white;
        }

        .validation-message {
            margin-top: 8px;
            font-size: 14px;
            color: #e57373;
        }

        .validation-message.success {
            color: var(--sage-green);
        }

        .char-counter {
            text-align: right;
            font-size: 12px;
            color: var(--charcoal);
            opacity: 0.6;
            margin-top: 4px;
        }

        /* NEW: Time Availability Styles */
        .time-availability-section {
            background: linear-gradient(135deg, var(--sage-alpha), var(--gold-alpha));
            border: 2px solid var(--sage-green);
            border-radius: 16px;
            padding: 32px;
            margin: 32px 0;
        }

        .time-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-top: 24px;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: white;
            border-radius: 8px;
            border: 2px solid var(--light-sage);
            transition: all 0.3s ease;
        }

        .checkbox-item:hover {
            border-color: var(--sage-green);
        }

        .checkbox-item input[type="checkbox"] {
            margin: 0;
            padding: 0;
        }

        .checkbox-item.checked {
            background: var(--light-sage);
            border-color: var(--sage-green);
        }

        /* AI Workflow Section */
        .ai-section {
            background: linear-gradient(135deg, var(--sage-alpha), var(--teal-alpha));
            border-radius: 20px;
            padding: 40px;
            margin: 40px 0;
            border: 2px solid var(--sage-green);
        }

        .ai-section h2 {
            font-family: 'Playfair Display', serif;
            color: var(--charcoal);
            margin-bottom: 24px;
            font-size: 1.8rem;
            text-align: center;
        }

        .ai-workflow {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 30px 0;
        }

        .ai-platform {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .ai-platform:hover {
            transform: translateY(-5px);
        }

        .ai-platform .icon {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        .ai-platform h3 {
            color: var(--charcoal);
            margin-bottom: 16px;
            font-size: 1.3rem;
        }

        /* UPDATED: Increased height for Claude prompt box */
        .ai-platform .prompt-box {
            background: var(--warm-cream);
            border: 1px solid var(--light-sage);
            border-radius: 8px;
            padding: 16px;
            margin: 16px 0;
            font-size: 14px;
            text-align: left;
            max-height: 400px; /* Increased from 200px */
            overflow-y: auto;
            word-wrap: break-word;
            white-space: pre-wrap;
        }

        .ai-platform .response-area {
            width: 100%;
            min-height: 120px;
            margin: 16px 0;
            padding: 16px;
            border: 2px solid var(--light-sage);
            border-radius: 8px;
            resize: vertical;
        }

        .copy-btn {
            background: var(--sage-green);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            margin: 8px 4px;
            transition: background 0.3s ease;
        }

        .copy-btn:hover {
            background: #455A26;
        }

        .open-ai-btn {
            background: var(--deep-teal);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            margin: 8px 4px;
            transition: all 0.3s ease;
        }

        .open-ai-btn:hover {
            background: #1E3D47;
            transform: translateY(-2px);
        }

        /* Path Selection */
        .path-selection {
            margin: 50px 0;
            text-align: center;
        }

        .path-selection h2 {
            font-family: 'Playfair Display', serif;
            color: var(--charcoal);
            margin-bottom: 40px;
            font-size: 2.2rem;
            font-weight: 600;
        }

        .path-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .path-option {
            background: var(--warm-cream);
            border-radius: 20px;
            padding: 40px 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            position: relative;
            text-align: center;
        }

        .path-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(85, 107, 47, 0.2);
            border-color: var(--sage-green);
        }

        .path-option.selected {
            border-color: var(--soft-gold);
            background: white;
            transform: translateY(-3px);
            box-shadow: 0 12px 36px rgba(188, 108, 37, 0.25);
        }

        .path-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            display: block;
        }

        .path-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--charcoal);
            margin-bottom: 16px;
        }

        .path-description {
            color: var(--charcoal);
            opacity: 0.8;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 40px 0;
            gap: 20px;
        }

        .nav-btn {
            padding: 16px 32px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
        }

        .nav-btn.back {
            background: var(--button-back);
            color: white;
        }

        .nav-btn.back:hover {
            background: #c0392b;
            transform: translateY(-2px);
        }

        .nav-btn.next {
            background: var(--button-next);
            color: white;
        }

        .nav-btn.next:hover {
            background: #27ae60;
            transform: translateY(-2px);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Success Message */
        .success-message {
            background: linear-gradient(135deg, var(--sage-green), var(--deep-teal));
            color: white;
            padding: 60px 40px;
            text-align: center;
            border-radius: 24px;
            margin: 40px 0;
        }

        .success-message h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        .success-message p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .success-actions {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .success-btn {
            background: var(--soft-gold);
            color: white;
            padding: 18px 36px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
        }

        .success-btn:hover {
            background: #A15D1F;
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(188, 108, 37, 0.3);
        }

        .success-btn.primary {
            background: var(--sage-green);
        }

        /* Step Content Areas */
        .step-content {
            margin-bottom: 40px;
        }

        .step-content.hidden {
            display: none;
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .container {
                padding: 0 16px;
            }
            
            .header h1 {
                font-size: 2.2rem;
            }
            
            .header .subtitle {
                font-size: 1.1rem;
            }
            
            .content {
                padding: 30px 20px;
            }
            
            .progress-bar {
                grid-template-columns: repeat(5, 1fr);
                gap: 4px;
            }

            .progress-step {
                padding: 8px 4px;
            }

            .step-text {
                font-size: 0.6rem;
            }

            .step-number {
                width: 28px;
                height: 28px;
                font-size: 12px;
            }

            .language-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .language-btn {
                min-width: 280px;
            }

            .welcome-content {
                padding: 40px 30px;
            }

            .welcome-buttons {
                flex-direction: column;
            }

            .form-control {
                font-size: 16px;
                padding: 18px;
            }

            .auth-content {
                padding: 30px 20px;
            }

            .path-options {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .path-option {
                padding: 30px 20px;
            }

            .form-section {
                padding: 30px 20px;
            }

            .user-status-bar {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }

            .user-actions {
                width: 100%;
                justify-content: space-between;
            }

            .success-actions {
                flex-direction: column;
                align-items: center;
            }

            .success-btn {
                min-width: 100%;
                max-width: 300px;
            }

            .nav-buttons {
                flex-direction: column;
            }

            .nav-btn {
                width: 100%;
            }

            .ai-workflow {
                grid-template-columns: 1fr;
            }

            .service-grid {
                grid-template-columns: 1fr;
            }

            .service-card {
                padding: 30px 20px;
            }

            .consultation-cards {
                grid-template-columns: 1fr;
            }

            .premium-nav-buttons {
                flex-direction: column;
                align-items: center;
            }

            .premium-nav-btn {
                min-width: 100%;
                max-width: 300px;
            }

            .time-grid {
                grid-template-columns: 1fr;
            }

            .checkbox-group {
                grid-template-columns: 1fr;
            }
        }

        .hidden {
            display: none !important;
            visibility: hidden;
        }

        /* Path-specific content styling */
        .path-specific-content {
            transition: all 0.3s ease;
        }
        
        .path-specific-content.hidden {
            display: none !important;
            visibility: hidden;
        }
        
        .path-specific-content:not(.hidden) {
            display: block !important;
            visibility: visible;
        }
    </style>
</head>
<body>
    <!-- Authentication Modal -->
    <div id="authModal" class="auth-modal">
        <div class="auth-content">
            <button class="auth-close" onclick="closeAuthModal()">&times;</button>
            <h2 class="auth-title" id="authTitle">Create Your Account</h2>
            
            <div id="authError" class="auth-error hidden"></div>
            <div id="authSuccess" class="auth-success hidden"></div>
            
            <form class="auth-form" id="authForm">
                <input type="text" id="authName" class="auth-input" placeholder="Your Name" style="display: none;">
                <input type="email" id="authEmail" class="auth-input" placeholder="Email Address" required>
                <input type="password" id="authPassword" class="auth-input" placeholder="Password" required>
                <input type="password" id="authConfirmPassword" class="auth-input" placeholder="Confirm Password" style="display: none;">
                
                <button type="submit" class="auth-button" id="authSubmitBtn">
                    <span id="authSubmitText">Create Account</span>
                </button>
            </form>
            
            <div class="auth-switch">
                <span id="authSwitchText">Already have an account?</span>
                <span class="auth-link" id="authSwitchLink" onclick="toggleAuthMode()">Sign In</span>
            </div>
        </div>
    </div>

    <!-- Welcome Modal -->
    <div id="welcomeModal" class="welcome-modal">
        <div class="welcome-content">
            <h2 id="welcomeTitle">Welcome to Smart Mom Method!</h2>
            <p id="welcomeDescription">Create your personalized interactive calendar and business plan in 10 comprehensive steps. This process will take approximately 30-40 minutes and will generate a complete interactive calendar and business strategy tailored specifically for busy moms like you.</p>
            <div class="welcome-buttons">
                <button class="welcome-btn primary" onclick="startOnboarding()">
                    <span id="welcomeStart">Get Started</span>
                </button>
                <button class="welcome-btn auth" onclick="showAuthModal('signup')">
                    <span id="welcomeCreate">Create Account & Save Progress</span>
                </button>
                <button class="welcome-btn secondary" onclick="handleReturningUser()">
                    <span id="welcomeReturning">I'm a returning user</span>
                </button>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- User Status Bar -->
        <div id="userStatusBar" class="user-status-bar hidden">
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">?</div>
                <div class="user-details">
                    <h4 id="userDisplayName">Guest User</h4>
                    <p id="userStatusText">Progress will not be saved</p>
                </div>
            </div>
            <div class="user-actions">
                <div class="status-badge guest" id="statusBadge">Guest Mode</div>
                <button onclick="showAuthModal('signup')" style="background: var(--sage-green); color: white; border: none; padding: 8px 16px; border-radius: 8px; font-size: 14px; cursor: pointer;">
                    Save Progress
                </button>
                <button id="signOutBtn" onclick="signOut()" style="background: none; border: 1px solid var(--charcoal); color: var(--charcoal); padding: 8px 16px; border-radius: 8px; font-size: 14px; cursor: pointer; display: none;">
                    Sign Out
                </button>
            </div>
        </div>

        <!-- Connection Status Notice -->
        <div id="connectionNotice" class="hidden" style="background: #fff3cd; border: 1px solid #ffeaa7; color: #856404; padding: 12px 20px; border-radius: 8px; margin-bottom: 20px; text-align: center; font-size: 14px;">
            <strong>📡 Local Mode:</strong> Server connection unavailable. Your data will be stored locally on this device.
        </div>

        <!-- Premium Services Section -->
        <div id="premiumServicesSection" class="premium-services-section">
            <div class="premium-services-header">
                <h2 id="premiumServicesTitle">Premium Smart Mom Services</h2>
                <p id="premiumServicesDescription">Get personalized calendars, training, and ongoing support to fast-track your success</p>
            </div>

            <div class="service-grid">
                <!-- Life Organization Calendar -->
                <div class="service-card">
                    <div class="service-price">$39</div>
                    <h3 class="service-title" id="lifeCalendarTitle">Life Organization Calendar</h3>
                    <p class="service-description" id="lifeCalendarDescription">12-week personalized home organization plan with weekly tasks, decluttering guides, and family routine optimization.</p>
                    <ul class="service-features">
                        <li id="lifeCalendarFeature1">Personalized 12-week calendar</li>
                        <li id="lifeCalendarFeature2">Home organization systems</li>
                        <li id="lifeCalendarFeature3">Family routine optimization</li>
                        <li id="lifeCalendarFeature4">Progress tracking tools</li>
                    </ul>
                    <button class="service-button" onclick="openStripeLink('life-calendar')">
                        <span id="getLifeCalendar">Get Life Calendar</span>
                    </button>
                </div>

                <!-- Life Training -->
                <div class="service-card premium">
                    <div class="service-price">$89</div>
                    <h3 class="service-title" id="lifeTrainingTitle">Complete Life Organization Training</h3>
                    <p class="service-description" id="lifeTrainingDescription">Comprehensive training program with calendar plus personal coaching, advanced organizing strategies, and ongoing support.</p>
                    <ul class="service-features">
                        <li id="lifeTrainingFeature1">Everything in Life Calendar</li>
                        <li id="lifeTrainingFeature2">Personal coaching session</li>
                        <li id="lifeTrainingFeature3">Advanced organizing strategies</li>
                        <li id="lifeTrainingFeature4">Email support for 30 days</li>
                    </ul>
                    <button class="service-button premium" onclick="openStripeLink('life-training')">
                        <span id="getLifeTraining">Get Life Training</span>
                    </button>
                </div>

                <!-- Business Calendar -->
                <div class="service-card">
                    <div class="service-price">$49</div>
                    <h3 class="service-title" id="businessCalendarTitle">Business Launch Calendar</h3>
                    <p class="service-description" id="businessCalendarDescription">12-week business implementation plan with market research, step-by-step launch guide, and revenue optimization strategies.</p>
                    <ul class="service-features">
                        <li id="businessCalendarFeature1">Personalized business calendar</li>
                        <li id="businessCalendarFeature2">Market research insights</li>
                        <li id="businessCalendarFeature3">Launch strategy guide</li>
                        <li id="businessCalendarFeature4">Revenue optimization tips</li>
                    </ul>
                    <button class="service-button" onclick="openStripeLink('business-calendar')">
                        <span id="getBusinessCalendar">Get Business Calendar</span>
                    </button>
                </div>

                <!-- Business Training -->
                <div class="service-card">
                    <div class="service-price">$100</div>
                    <h3 class="service-title" id="businessTrainingTitle">Complete Business Training Program</h3>
                    <p class="service-description" id="businessTrainingDescription">Full business training with calendar plus personal mentoring, advanced strategies, and ongoing business support.</p>
                    <ul class="service-features">
                        <li id="businessTrainingFeature1">Everything in Business Calendar</li>
                        <li id="businessTrainingFeature2">Personal business mentoring</li>
                        <li id="businessTrainingFeature3">Advanced growth strategies</li>
                        <li id="businessTrainingFeature4">Email support for 60 days</li>
                    </ul>
                    <button class="service-button" onclick="openStripeLink('business-training')">
                        <span id="getBusinessTraining">Get Business Training</span>
                    </button>
                </div>
            </div>

            <div class="premium-nav-buttons">
                <button class="premium-nav-btn" onclick="backToAssessment()">
                    <span id="backToAssessment">← Back to Assessment</span>
                </button>
                <button class="premium-nav-btn" onclick="backToMainPage()">
                    <span id="backToMainPage">Back to Main Page</span>
                </button>
            </div>
        </div>

        <!-- Progress Container -->
        <div class="progress-container">
            <div class="progress-header">
                <div class="step-counter" id="stepCounter">Step 1 of 10</div>
            </div>
            <div class="overall-progress">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-bar">
                <div class="progress-step active" id="step-1">
                    <span class="step-number">1</span>
                    <span class="step-text" id="stepText1">Language</span>
                </div>
                <div class="progress-step pending" id="step-2">
                    <span class="step-number">2</span>
                    <span class="step-text" id="stepText2">Basic Info</span>
                </div>
                <div class="progress-step pending" id="step-3">
                    <span class="step-number">3</span>
                    <span class="step-text" id="stepText3">Path Select</span>
                </div>
                <div class="progress-step pending" id="step-4">
                    <span class="step-number">4</span>
                    <span class="step-text" id="stepText4">Family</span>
                </div>
                <div class="progress-step pending" id="step-5">
                    <span class="step-number">5</span>
                    <span class="step-text" id="stepText5">Schedule</span>
                </div>
                <div class="progress-step pending" id="step-6">
                    <span class="step-number">6</span>
                    <span class="step-text" id="stepText6">Investment</span>
                </div>
                <div class="progress-step pending" id="step-7">
                    <span class="step-number">7</span>
                    <span class="step-text" id="stepText7">AI Ideas</span>
                </div>
                <div class="progress-step pending" id="step-8">
                    <span class="step-number">8</span>
                    <span class="step-text" id="stepText8">Research</span>
                </div>
                <div class="progress-step pending" id="step-9">
                    <span class="step-number">9</span>
                    <span class="step-text" id="stepText9">Calendar</span>
                </div>
                <div class="progress-step pending" id="step-10">
                    <span class="step-number">10</span>
                    <span class="step-text" id="stepText10">Dashboard</span>
                </div>
            </div>
        </div>

        <div class="main-card">
            <div class="header">
                <h1 id="mainTitle">Smart Mom Method</h1>
                <p class="subtitle" id="mainSubtitle">AI-Powered Interactive Calendar & Business Planning for Busy Moms</p>
                <span class="badge" id="freeBadge">100% Free</span>
                
                <div class="cta-section">
                    <button class="btn-current" onclick="scrollToCurrentStep()">
                        <span id="ctaButton">Start Your Free Interactive Calendar & Business Plan Now</span>
                    </button>
                    <p style="margin-top: 16px; font-size: 0.95rem; opacity: 0.9;" id="ctaSubtext">No email required to browse • Full process takes 30 minutes</p>
                </div>
            </div>

            <div class="content">
                <!-- Premium Access Button -->
                <div class="premium-access-container">
                    <button class="premium-access-btn" onclick="showPremiumServices()">
                        <span id="viewPremiumServices">💎 View Premium Services</span>
                    </button>
                </div>

                <!-- Step 1: Language Selection -->
                <div id="step1Content" class="step-content">
                    <div class="language-selector">
                        <h2 id="languageTitle">Choose Your Language / Elige Tu Idioma</h2>
                        <div class="language-buttons">
                            <button class="language-btn active" onclick="changeLanguage('en')" id="lang-en">
                                <span class="flag">🇺🇸</span>
                                <span>English</span>
                                <small>Read and answer everything in English</small>
                            </button>
                            <button class="language-btn" onclick="changeLanguage('es')" id="lang-es">
                                <span class="flag">🇪🇸</span>
                                <span>Español</span>
                                <small>Lee y responde todo en español</small>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Basic Information -->
                <div id="step2Content" class="step-content hidden">
                    <div class="step-description">
                        <h2 id="stepDesc2Title">Basic Information</h2>
                        <p id="stepDesc2Text">Let's get to know you better so we can create the perfect interactive calendar and business plan for your unique situation.</p>
                    </div>

                    <div class="form-section">
                        <h2 id="basicInfoTitle">Your Information</h2>
                        
                        <div class="form-group">
                            <label id="nameLabel">Your Name: <span class="required">*</span></label>
                            <input type="text" id="user-name" class="form-control" placeholder="Enter your name" onchange="validateField(this)" />
                            <div class="validation-message" id="user-name-validation"></div>
                        </div>

                        <div class="form-group">
                            <label id="emailLabel">Your Email: <span class="required">*</span></label>
                            <input type="email" id="user-email" class="form-control" placeholder="your.email@example.com" onchange="validateField(this)" />
                            <div class="validation-message" id="user-email-validation"></div>
                        </div>
                    </div>

                    <!-- Free Consultation Options -->
                    <div id="consultationOptions" class="consultation-options">
                        <div class="consultation-header">
                            <h3 id="consultationTitle">Free Consultation Options</h3>
                            <p id="consultationDescription">Ready to accelerate your success? Book a free consultation call (optional)</p>
                        </div>
                        
                        <div class="consultation-cards">
                            <div class="consultation-card">
                                <h4 id="smartMomCallTitle">Free Smart Mom Call (30 min)</h4>
                                <p id="smartMomCallDescription">Perfect for life organization questions, family scheduling help, and home management strategies.</p>
                                <button class="consultation-btn" onclick="openCalendlyLink('smart-mom-call')">
                                    <span id="bookSmartMomCall">Book Smart Mom Call</span>
                                </button>
                            </div>
                            
                            <div class="consultation-card">
                                <h4 id="strategyCallTitle">Strategy Call (30 min)</h4>
                                <p id="strategyCallDescription">Focused on business planning, income strategies, and entrepreneurial guidance for busy moms.</p>
                                <button class="consultation-btn" onclick="openCalendlyLink('strategy-call')">
                                    <span id="bookStrategyCall">Book Strategy Call</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="empowerment-message">
                        <div class="empowerment-title" id="empowermentTitle">You're Already Successful!</div>
                        <p class="empowerment-text" id="empowermentText">Managing a family is running a complex organization. You have negotiation skills, time management expertise, and crisis resolution abilities that most CEOs would envy. Now let's channel that into YOUR organized life and successful business!</p>
                    </div>
                </div>

                <!-- Step 3: Path Selection -->
                <div id="step3Content" class="step-content hidden">
                    <div class="step-description">
                        <h2 id="stepDesc3Title">Choose Your Focus</h2>
                        <p id="stepDesc3Text">What brings you here today? Choose your main focus so we can customize your experience.</p>
                    </div>

                    <div class="path-selection">
                        <h2 id="pathSelectionTitle">Select Your Path:</h2>
                        
                        <div class="path-options">
                            <div class="path-option" data-path="life-organization" onclick="selectPath('life-organization')">
                                <span class="path-icon">🏠</span>
                                <h3 class="path-title" id="pathTitle1">Life Organization</h3>
                                <p class="path-description" id="pathDesc1">I need help organizing my daily life, family schedules, and home systems</p>
                            </div>
                            
                            <div class="path-option" data-path="business-launch" onclick="selectPath('business-launch')">
                                <span class="path-icon">💼</span>
                                <h3 class="path-title" id="pathTitle2">Business Launch</h3>
                                <p class="path-description" id="pathDesc2">I want to start a business or create passive income streams</p>
                            </div>
                            
                            <div class="path-option" data-path="both" onclick="selectPath('both')">
                                <span class="path-icon">☀️</span>
                                <h3 class="path-title" id="pathTitle3">Both Life & Business</h3>
                                <p class="path-description" id="pathDesc3">I need life organization AND want to start a business</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Family Structure -->
                <div id="step4Content" class="step-content hidden">
                    <div class="step-description">
                        <h2 id="stepDesc4Title">Family Structure</h2>
                        <p id="stepDesc4Text">Understanding your family situation helps us create realistic recommendations that fit your actual life.</p>
                    </div>

                    <div class="form-section">
                        <h2 id="familyStructureTitle">Tell Us About Your Family</h2>
                        
                        <div class="form-group">
                            <label id="familyStructureLabel">Describe your family structure: <span class="required">*</span></label>
                            <textarea id="family-structure" class="form-control" maxlength="1000" 
                                      placeholder="Tell us about your family size, ages of children, support system, partner situation, etc. Be as detailed as you'd like - this helps us give you better recommendations."
                                      onchange="validateField(this)" oninput="updateCharCounter(this)"></textarea>
                            <div class="char-counter">
                                <span id="family-structure-counter">1000 characters remaining</span>
                            </div>
                            <div class="validation-message" id="family-structure-validation"></div>
                        </div>
                    </div>
                </div>

                <!-- Step 5: Daily Schedule & Time Availability -->
                <div id="step5Content" class="step-content hidden">
                    <div class="step-description">
                        <h2 id="stepDesc5Title">Daily Schedule & Time Availability</h2>
                        <p id="stepDesc5Text">Your daily routine and available time determine what's realistic for your business and organization goals.</p>
                    </div>

                    <div class="form-section">
                        <h2 id="dailyScheduleTitle">Describe Your Typical Day</h2>
                        
                        <div class="form-group">
                            <label id="dailyScheduleLabel">What does your typical daily schedule look like? <span class="required">*</span></label>
                            <textarea id="daily-schedule" class="form-control" maxlength="1000" 
                                      placeholder="Describe your typical day from morning to night. Include work schedule, kids' activities, household responsibilities, available free time, etc."
                                      onchange="validateField(this)" oninput="updateCharCounter(this)"></textarea>
                            <div class="char-counter">
                                <span id="daily-schedule-counter">1000 characters remaining</span>
                            </div>
                            <div class="validation-message" id="daily-schedule-validation"></div>
                        </div>
                    </div>

                    <!-- NEW: Time Availability Section -->
                    <div class="time-availability-section">
                        <h2 id="timeAvailabilityTitle">⏰ Time Availability for Your Goals</h2>
                        <p id="timeAvailabilityDescription">Help us create a realistic calendar by telling us how much time you can commit and when you're available to work on your goals.</p>
                        
                        <div class="time-grid">
                            <div class="form-group">
                                <label id="hoursPerDayLabel">How many hours per day can you dedicate? <span class="required">*</span></label>
                                <select id="hours-per-day" class="form-control" onchange="validateField(this)">
                                    <option value="" id="chooseHoursOption">Choose your available time...</option>
                                    <option value="15-30-minutes" data-en="15-30 minutes per day" data-es="15-30 minutos por día">15-30 minutes per day</option>
                                    <option value="30-60-minutes" data-en="30-60 minutes per day" data-es="30-60 minutos por día">30-60 minutes per day</option>
                                    <option value="1-2-hours" data-en="1-2 hours per day" data-es="1-2 horas por día">1-2 hours per day</option>
                                    <option value="2-3-hours" data-en="2-3 hours per day" data-es="2-3 horas por día">2-3 hours per day</option>
                                    <option value="3-4-hours" data-en="3-4 hours per day" data-es="3-4 horas por día">3-4 hours per day</option>
                                    <option value="4-plus-hours" data-en="4+ hours per day" data-es="4+ horas por día">4+ hours per day</option>
                                    <option value="varies-daily" data-en="Varies daily" data-es="Varía diariamente">Varies daily</option>
                                </select>
                                <div class="validation-message" id="hours-per-day-validation"></div>
                            </div>

                            <div class="form-group">
                                <label id="preferredTimesLabel">What times work best for you? <span class="required">*</span> (Select all that apply)</label>
                                <div class="checkbox-group" id="preferred-times-group">
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="time-early-morning" value="early-morning" onchange="updateTimePreferences()">
                                        <label for="time-early-morning" id="timeEarlyMorning">Early Morning (5-7 AM)</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="time-morning" value="morning" onchange="updateTimePreferences()">
                                        <label for="time-morning" id="timeMorning">Morning (7-11 AM)</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="time-midday" value="midday" onchange="updateTimePreferences()">
                                        <label for="time-midday" id="timeMidday">Midday (11 AM-2 PM)</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="time-afternoon" value="afternoon" onchange="updateTimePreferences()">
                                        <label for="time-afternoon" id="timeAfternoon">Afternoon (2-5 PM)</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="time-evening" value="evening" onchange="updateTimePreferences()">
                                        <label for="time-evening" id="timeEvening">Evening (5-8 PM)</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="time-night" value="night" onchange="updateTimePreferences()">
                                        <label for="time-night" id="timeNight">Night (8-11 PM)</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="time-late-night" value="late-night" onchange="updateTimePreferences()">
                                        <label for="time-late-night" id="timeLateNight">Late Night (11 PM+)</label>
                                    </div>
                                </div>
                                <div class="validation-message" id="preferred-times-validation"></div>
                                <input type="hidden" id="preferred-times" />
                            </div>
                        </div>

                        <div style="background: rgba(255,255,255,0.8); padding: 20px; border-radius: 12px; margin-top: 24px;">
                            <p style="font-size: 14px; color: var(--charcoal); margin: 0;">
                                <strong>💡 Why this matters:</strong> <span id="timeAvailabilityWhy">We'll create a calendar that matches your actual availability. If you can dedicate 2 hours daily, we'll create bigger tasks to reach your goals faster. If you only have 30 minutes, we'll break everything into tiny, manageable steps.</span>
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Step 6: Investment & Timeline OR Organization Goals -->
                <div id="step6Content" class="step-content hidden">
                    <div id="step6Container">
                        <!-- Life Organization Path -->
                        <div id="lifeOrganizationQuestions" class="path-specific-content hidden">
                            <div class="step-description">
                                <h2 id="stepDesc6TitleLife">Organization Goals & Timeline</h2>
                                <p id="stepDesc6TextLife">Let's understand your organization priorities and how quickly you want to see results.</p>
                            </div>

                            <div class="form-section" style="display: block;">
                                <h2 id="organizationGoalsTitle">Your Organization Goals</h2>
                                
                                <div class="form-group">
                                    <label id="organizationPriorityLabel">What's your biggest organization challenge? <span class="required">*</span></label>
                                    <select id="organization-priority" class="form-control" onchange="validateField(this)">
                                        <option value="" data-en="Choose your main challenge..." data-es="Elige tu desafío principal...">Choose your main challenge...</option>
                                        <option value="daily-chaos" data-en="Daily schedule chaos - need morning/evening routines" data-es="Caos en horario diario - necesito rutinas mañana/noche">Daily schedule chaos - need morning/evening routines</option>
                                        <option value="home-clutter" data-en="Home clutter - need decluttering systems" data-es="Desorden en casa - necesito sistemas de orden">Home clutter - need decluttering systems</option>
                                        <option value="meal-planning" data-en="Meal planning - need food organization" data-es="Planificación de comidas - necesito organización de alimentos">Meal planning - need food organization</option>
                                        <option value="kids-activities" data-en="Kids' activities - need family scheduling" data-es="Actividades de niños - necesito horarios familiares">Kids' activities - need family scheduling</option>
                                        <option value="paper-digital" data-en="Paper/digital mess - need filing systems" data-es="Desorden papel/digital - necesito sistemas de archivo">Paper/digital mess - need filing systems</option>
                                        <option value="all-above" data-en="All of the above - need complete overhaul" data-es="Todo lo anterior - necesito renovación completa">All of the above - need complete overhaul</option>
                                    </select>
                                    <div class="validation-message" id="organization-priority-validation"></div>
                                </div>

                                <div class="form-group">
                                    <label id="organizationTimelineLabel">How soon do you want an organized home? <span class="required">*</span></label>
                                    <select id="organization-timeline" class="form-control" onchange="validateField(this)">
                                        <option value="" data-en="Choose your timeline..." data-es="Elige tu cronograma...">Choose your timeline...</option>
                                        <option value="urgent" data-en="Urgent - within 30 days" data-es="Urgente - en 30 días">Urgent - within 30 days</option>
                                        <option value="moderate" data-en="Moderate - within 3 months" data-es="Moderado - en 3 meses">Moderate - within 3 months</option>
                                        <option value="relaxed" data-en="Relaxed - within 6 months" data-es="Relajado - en 6 meses">Relaxed - within 6 months</option>
                                        <option value="gradual" data-en="Gradual - take my time" data-es="Gradual - tomarme mi tiempo">Gradual - take my time</option>
                                    </select>
                                    <div class="validation-message" id="organization-timeline-validation"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Business Launch Path -->
                        <div id="businessLaunchQuestions" class="path-specific-content hidden">
                            <div class="step-description">
                                <h2 id="stepDesc6Title">Investment & Timeline</h2>
                                <p id="stepDesc6Text">Understanding your budget and timeline helps us recommend realistic business options.</p>
                            </div>

                            <div class="form-section" style="display: block;">
                                <h2 id="investmentTitle">Investment Level & Timeline</h2>
                                
                                <div class="form-group">
                                    <label id="investmentLevelLabel">How much can you invest to start? <span class="required">*</span></label>
                                    <select id="investment-level" class="form-control" onchange="validateField(this)">
                                        <option value="" id="chooseInvestmentLevel">Choose your investment level...</option>
                                        <option value="no-money" data-en="No money to invest ($0)" data-es="Sin dinero para invertir ($0)">No money to invest ($0)</option>
                                        <option value="minimal" data-en="Minimal investment ($1-$500)" data-es="Inversión mínima ($1-$500)">Minimal investment ($1-$500)</option>
                                        <option value="moderate" data-en="Moderate investment ($500-$2000)" data-es="Inversión moderada ($500-$2000)">Moderate investment ($500-$2000)</option>
                                        <option value="flexible" data-en="Flexible budget ($2000+)" data-es="Presupuesto flexible ($2000+)">Flexible budget ($2000+)</option>
                                    </select>
                                    <div class="validation-message" id="investment-level-validation"></div>
                                </div>

                                <div class="form-group">
                                    <label id="incomeTimelineLabel">When do you need income? <span class="required">*</span></label>
                                    <select id="income-timeline" class="form-control" onchange="validateField(this)">
                                        <option value="" id="chooseTimeline">Choose your timeline...</option>
                                        <option value="immediate" data-en="Need income immediately (0-3 months)" data-es="Necesito ingresos inmediatamente (0-3 meses)">Need income immediately (0-3 months)</option>
                                        <option value="moderate" data-en="Income needed soon (3-6 months)" data-es="Necesito ingresos pronto (3-6 meses)">Income needed soon (3-6 months)</option>
                                        <option value="patient" data-en="Can wait for income (6-12 months)" data-es="Puedo esperar ingresos (6-12 meses)">Can wait for income (6-12 months)</option>
                                        <option value="long-term" data-en="Long-term planning (12+ months)" data-es="Planificación a largo plazo (12+ meses)">Long-term planning (12+ months)</option>
                                    </select>
                                    <div class="validation-message" id="income-timeline-validation"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Both Path -->
                        <div id="bothPathQuestions" class="path-specific-content hidden">
                            <div class="step-description">
                                <h2 id="stepDesc6TitleBoth">Goals, Investment & Timeline</h2>
                                <p id="stepDesc6TextBoth">Let's understand both your organization goals and business timeline.</p>
                            </div>

                            <div class="form-section" style="display: block;">
                                <h2 id="bothGoalsTitle">Organization & Business Goals</h2>
                                
                                <div class="form-group">
                                    <label id="bothPriorityLabel">What needs attention first? <span class="required">*</span></label>
                                    <select id="both-priority" class="form-control" onchange="validateField(this)">
                                        <option value="" data-en="Choose your priority..." data-es="Elige tu prioridad...">Choose your priority...</option>
                                        <option value="organize-first" data-en="Get organized first, then start business" data-es="Organizarme primero, luego comenzar negocio">Get organized first, then start business</option>
                                        <option value="business-first" data-en="Start earning quickly, organize as I go" data-es="Empezar a ganar rápido, organizar mientras avanzo">Start earning quickly, organize as I go</option>
                                        <option value="simultaneous" data-en="Work on both simultaneously" data-es="Trabajar en ambos simultáneamente">Work on both simultaneously</option>
                                        <option value="integrated" data-en="Create business from organization skills" data-es="Crear negocio de habilidades de organización">Create business from organization skills</option>
                                    </select>
                                    <div class="validation-message" id="both-priority-validation"></div>
                                </div>

                                <div class="form-group">
                                    <label id="bothInvestmentLabel">Business investment available? <span class="required">*</span></label>
                                    <select id="both-investment" class="form-control" onchange="validateField(this)">
                                        <option value="" data-en="Choose investment level..." data-es="Elige nivel de inversión...">Choose investment level...</option>
                                        <option value="no-money" data-en="No money to invest ($0)" data-es="Sin dinero para invertir ($0)">No money to invest ($0)</option>
                                        <option value="minimal" data-en="Minimal investment ($1-$500)" data-es="Inversión mínima ($1-$500)">Minimal investment ($1-$500)</option>
                                        <option value="moderate" data-en="Moderate investment ($500-$2000)" data-es="Inversión moderada ($500-$2000)">Moderate investment ($500-$2000)</option>
                                        <option value="flexible" data-en="Flexible budget ($2000+)" data-es="Presupuesto flexible ($2000+)">Flexible budget ($2000+)</option>
                                    </select>
                                    <div class="validation-message" id="both-investment-validation"></div>
                                </div>

                                <div class="form-group">
                                    <label id="bothTimelineLabel">Timeline for both goals? <span class="required">*</span></label>
                                    <select id="both-timeline" class="form-control" onchange="validateField(this)">
                                        <option value="" data-en="Choose your timeline..." data-es="Elige tu cronograma...">Choose your timeline...</option>
                                        <option value="urgent" data-en="Urgent - need results in 30 days" data-es="Urgente - necesito resultados en 30 días">Urgent - need results in 30 days</option>
                                        <option value="moderate" data-en="Moderate - 3-6 months is fine" data-es="Moderado - 3-6 meses está bien">Moderate - 3-6 months is fine</option>
                                        <option value="patient" data-en="Patient - 6-12 months works" data-es="Paciente - 6-12 meses funciona">Patient - 6-12 months works</option>
                                        <option value="flexible" data-en="Flexible - quality over speed" data-es="Flexible - calidad sobre velocidad">Flexible - quality over speed</option>
                                    </select>
                                    <div class="validation-message" id="both-timeline-validation"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Fallback message if no path is selected -->
                        <div id="noPathSelectedMessage" style="display: none; padding: 40px; text-align: center; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; margin: 20px 0;">
                            <h3 style="color: #856404; margin-bottom: 10px;">Path Not Selected</h3>
                            <p style="color: #856404;">Please go back to Step 3 and select your path (Life Organization, Business Launch, or Both).</p>
                            <button class="nav-btn back" onclick="currentStep = 3; showCurrentStep();" style="margin-top: 20px;">
                                ← Go to Path Selection
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Step 7: AI Business Ideas -->
                <div id="step7Content" class="step-content hidden">
                    <div class="step-description">
                        <h2 id="stepDesc7Title">AI Business Ideas</h2>
                        <p id="stepDesc7Text">We'll use ChatGPT to generate personalized business ideas based on your specific situation.</p>
                    </div>

                    <div class="ai-section">
                        <h2>🤖 ChatGPT Business Ideas Generator</h2>
                        
                        <div class="ai-workflow">
                            <div class="ai-platform">
                                <div class="icon">🚀</div>
                                <h3>Step 1: Get AI Ideas</h3>
                                
                                <div class="prompt-box" id="chatgptPrompt">
                                    Loading personalized prompt...
                                </div>
                                
                                <div style="margin: 16px 0;">
                                    <button class="copy-btn" onclick="copyPrompt('chatgpt')" id="copyChatGPTBtn">Copy Prompt</button>
                                    <button class="copy-btn" onclick="viewFullPrompt('chatgpt')" style="background: var(--deep-teal);" id="viewChatGPTBtn">View Full Prompt</button>
                                    <button class="open-ai-btn" onclick="openAI('chatgpt')" id="openChatGPTBtn">Open ChatGPT</button>
                                </div>
                                
                                <label>Paste ChatGPT's response here:</label>
                                <textarea class="response-area" id="chatgpt-response" 
                                          placeholder="Copy and paste the business ideas from ChatGPT here..."
                                          onchange="saveAIResponse('chatgpt', this.value)"></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 8: Market Research -->
                <div id="step8Content" class="step-content hidden">
                    <div class="step-description">
                        <h2 id="stepDesc8Title">Market Research</h2>
                        <p id="stepDesc8Text">Now we'll use Google Gemini to research the market for your chosen business idea.</p>
                    </div>

                    <div class="ai-section">
                        <h2>📊 Gemini Market Research</h2>
                        
                        <div class="ai-workflow">
                            <div class="ai-platform">
                                <div class="icon">📈</div>
                                <h3>Step 2: Market Analysis</h3>
                                
                                <div class="prompt-box" id="geminiPrompt">
                                    Select a business idea from Step 7 first...
                                </div>
                                
                                <div style="margin: 16px 0;">
                                    <label id="selectedIdeaLabel">Choose your favorite business idea from ChatGPT:</label>
                                    <input type="text" id="selected-business-idea" class="form-control" 
                                           placeholder="Type or paste your chosen business idea here..."
                                           onchange="updateGeminiPrompt(this.value)" oninput="updateGeminiPrompt(this.value)">
                                </div>
                                
                                <div style="margin: 16px 0;">
                                    <button class="copy-btn" onclick="copyPrompt('gemini')" id="copyGeminiBtn">Copy Prompt</button>
                                    <button class="copy-btn" onclick="viewFullPrompt('gemini')" style="background: var(--deep-teal);" id="viewGeminiBtn">View Full Prompt</button>
                                    <button class="open-ai-btn" onclick="openAI('gemini')" id="openGeminiBtn">Open Gemini</button>
                                </div>
                                
                                <label>Paste Gemini's market research here:</label>
                                <textarea class="response-area" id="gemini-response" 
                                          placeholder="Copy and paste the market research from Gemini here..."
                                          onchange="saveAIResponse('gemini', this.value)"></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 9: Calendar Creation -->
                <div id="step9Content" class="step-content hidden">
                    <div class="step-description">
                        <h2 id="stepDesc9Title">Calendar Creation</h2>
                        <p id="stepDesc9Text">Finally, we'll use Claude to create your personalized 12-week implementation calendar with time-optimized daily tasks.</p>
                    </div>

                    <div class="ai-section">
                        <h2>📅 Claude Interactive Calendar Creator</h2>
                        
                        <div class="ai-workflow">
                            <div class="ai-platform">
                                <div class="icon">🗓️</div>
                                <h3>Step 3: Time-Optimized Interactive Calendar</h3>
                                
                                <div class="prompt-box" id="claudePrompt">
                                    Complete Steps 7 and 8 first...
                                </div>
                                
                                <div style="margin: 16px 0;">
                                    <button class="copy-btn" onclick="copyPrompt('claude')" id="copyClaudeBtn">Copy Prompt</button>
                                    <button class="copy-btn" onclick="viewFullPrompt('claude')" style="background: var(--deep-teal);" id="viewClaudeBtn">View Full Prompt</button>
                                    <button class="open-ai-btn" onclick="openAI('claude')" id="openClaudeBtn">Open Claude</button>
                                </div>
                                
                                <div style="background: var(--light-sage); padding: 16px; border-radius: 8px; margin: 16px 0;">
                                    <p style="font-size: 14px; color: var(--charcoal); margin: 0;">
                                        <strong>🎯 What Claude Will Create:</strong><br>
                                        • Complete 84-day interactive calendar (12 weeks × 7 days)<br>
                                        • <strong>Tasks sized to your available time</strong> - bigger tasks if you have more time, tiny steps if you're limited<br>
                                        • ADHD-friendly format with emojis and clear structure<br>
                                        • Built-in breaks, celebrations, and energy level indicators<br>
                                        • Exact time estimates including buffer time<br>
                                        • Free resources and step-by-step instructions<br>
                                        • Daily victory checks and tomorrow's prep<br>
                                        • Color-coded sections for easy visual scanning
                                    </p>
                                </div>
                                
                                <label>Paste Claude's interactive calendar here:</label>
                                <textarea class="response-area" id="claude-response" 
                                          placeholder="Copy and paste the complete 84-day interactive calendar from Claude here..."
                                          onchange="saveAIResponse('claude', this.value)"></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 10: Final Dashboard -->
                <div id="step10Content" class="step-content hidden">
                    <div class="step-description">
                        <h2 id="stepDesc10Title">Your Complete Business Plan</h2>
                        <p id="stepDesc10Text">Congratulations! Here's your complete personalized business plan and next steps.</p>
                    </div>

                    <!-- Success Message -->
                    <div id="finalSuccessMessage" class="success-message">
                        <h2>🎉 Congratulations!</h2>
                        <p id="successMainText">Your Smart Mom Method interactive calendar and business plan have been created successfully!</p>
                        
                        <div style="background: rgba(255,255,255,0.15); padding: 30px; border-radius: 16px; margin: 30px 0;">
                            <h3 style="margin-bottom: 15px;">What You've Accomplished:</h3>
                            <ul style="list-style: none; padding: 0; text-align: left;">
                                <li style="margin: 10px 0;">✅ Completed comprehensive assessment</li>
                                <li style="margin: 10px 0;" id="accomplishment2">✅ Received AI-generated ideas customized to your situation</li>
                                <li style="margin: 10px 0;" id="accomplishment3">✅ Got market research insights</li>
                                <li style="margin: 10px 0;">✅ Created your time-optimized interactive calendar</li>
                                <li style="margin: 10px 0;">✅ Your progress is automatically saved</li>
                            </ul>
                        </div>

                        <div style="background: rgba(255,255,255,0.2); padding: 24px; border-radius: 12px; margin: 24px 0;">
                            <h3 style="margin-bottom: 12px;">📋 How to Use Your Calendar:</h3>
                            <ol style="list-style: decimal; padding-left: 20px; text-align: left;">
                                <li style="margin: 8px 0;">Copy your calendar from the Claude response box above</li>
                                <li style="margin: 8px 0;">Paste it into a document (Google Docs, Word, or Notes app)</li>
                                <li style="margin: 8px 0;">Print it out or keep it digital - whatever works for you!</li>
                                <li style="margin: 8px 0;">Check off tasks as you complete them</li>
                                <li style="margin: 8px 0;">Tasks are sized to your available time - no overwhelm!</li>
                            </ol>
                        </div>

                        <div class="success-actions">
                            <button class="success-btn primary" onclick="downloadCalendar()">
                                Download Calendar Instructions
                            </button>
                            
                            <button class="success-btn" onclick="viewCompleteProfile()">
                                View Complete Profile
                            </button>
                            
                            <button class="success-btn" onclick="startOver()">
                                Start New Assessment
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Navigation Buttons -->
                <div class="nav-buttons" id="navButtons">
                    <button class="nav-btn back" id="backBtn" onclick="previousStep()" disabled>
                        ← Previous Step
                    </button>
                    <button class="nav-btn next" id="nextBtn" onclick="nextStep()">
                        Next Step →
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===== GLOBAL VARIABLES =====
        let currentLanguage = 'en';
        let selectedPath = '';
        let authMode = 'signup';
        let currentUser = null;
        let formData = {};
        let currentStep = 1;
        let useLocalStorageOnly = false; // PRESERVED - DO NOT MODIFY
        let aiResponses = {
            chatgpt: '',
            gemini: '',
            claude: ''
        };

        const TOTAL_STEPS = 10;

        // ===== COMPLETE TRANSLATION SYSTEM =====
        const translations = {
            en: {
                welcomeTitle: "Welcome to Smart Mom Method!",
                welcomeDescription: "Create your personalized interactive calendar and business plan in 10 comprehensive steps. This process will take approximately 30-40 minutes and will generate a complete interactive calendar and business strategy tailored specifically for busy moms like you.",
                welcomeStart: "Get Started",
                welcomeCreate: "Create Account & Save Progress",
                welcomeReturning: "I'm a returning user",
                mainTitle: "Smart Mom Method",
                mainSubtitle: "AI-Powered Interactive Calendar & Business Planning for Busy Moms",
                freeBadge: "100% Free",
                ctaButton: "Start Your Free Interactive Calendar & Business Plan Now",
                ctaSubtext: "No email required to browse • Full process takes 30 minutes",
                languageTitle: "Choose Your Language / Elige Tu Idioma",
                viewPremiumServices: "💎 View Premium Services",
                premiumServicesTitle: "Premium Smart Mom Services",
                premiumServicesDescription: "Get personalized calendars, training, and ongoing support to fast-track your success",
                lifeCalendarTitle: "Life Organization Calendar",
                lifeCalendarDescription: "12-week personalized home organization plan with weekly tasks, decluttering guides, and family routine optimization.",
                lifeCalendarFeature1: "Personalized 12-week calendar",
                lifeCalendarFeature2: "Home organization systems",
                lifeCalendarFeature3: "Family routine optimization",
                lifeCalendarFeature4: "Progress tracking tools",
                getLifeCalendar: "Get Life Calendar",
                lifeTrainingTitle: "Complete Life Organization Training",
                lifeTrainingDescription: "Comprehensive training program with calendar plus personal coaching, advanced organizing strategies, and ongoing support.",
                lifeTrainingFeature1: "Everything in Life Calendar",
                lifeTrainingFeature2: "Personal coaching session",
                lifeTrainingFeature3: "Advanced organizing strategies",
                lifeTrainingFeature4: "Email support for 30 days",
                getLifeTraining: "Get Life Training",
                businessCalendarTitle: "Business Launch Calendar",
                businessCalendarDescription: "12-week business implementation plan with market research, step-by-step launch guide, and revenue optimization strategies.",
                businessCalendarFeature1: "Personalized business calendar",
                businessCalendarFeature2: "Market research insights",
                businessCalendarFeature3: "Launch strategy guide",
                businessCalendarFeature4: "Revenue optimization tips",
                getBusinessCalendar: "Get Business Calendar",
                businessTrainingTitle: "Complete Business Training Program",
                businessTrainingDescription: "Full business training with calendar plus personal mentoring, advanced strategies, and ongoing business support.",
                businessTrainingFeature1: "Everything in Business Calendar",
                businessTrainingFeature2: "Personal business mentoring",
                businessTrainingFeature3: "Advanced growth strategies",
                businessTrainingFeature4: "Email support for 60 days",
                getBusinessTraining: "Get Business Training",
                backToAssessment: "← Back to Assessment",
                backToMainPage: "Back to Main Page",
                consultationTitle: "Free Consultation Options",
                consultationDescription: "Ready to accelerate your success? Book a free consultation call (optional)",
                smartMomCallTitle: "Free Smart Mom Call (30 min)",
                smartMomCallDescription: "Perfect for life organization questions, family scheduling help, and home management strategies.",
                bookSmartMomCall: "Book Smart Mom Call",
                strategyCallTitle: "Strategy Call (30 min)",
                strategyCallDescription: "Focused on business planning, income strategies, and entrepreneurial guidance for busy moms.",
                bookStrategyCall: "Book Strategy Call",
                stepDesc2Title: "Basic Information",
                stepDesc2Text: "Let's get to know you better so we can create the perfect interactive calendar and business plan for your unique situation.",
                basicInfoTitle: "Your Information",
                nameLabel: "Your Name:",
                emailLabel: "Your Email:",
                empowermentTitle: "You're Already Successful!",
                empowermentText: "Managing a family is running a complex organization. You have negotiation skills, time management expertise, and crisis resolution abilities that most CEOs would envy. Now let's channel that into YOUR organized life and successful business!",
                stepDesc3Title: "Choose Your Focus",
                stepDesc3Text: "What brings you here today? Choose your main focus so we can customize your experience.",
                pathSelectionTitle: "Select Your Path:",
                pathTitle1: "Life Organization",
                pathDesc1: "I need help organizing my daily life, family schedules, and home systems",
                pathTitle2: "Business Launch", 
                pathDesc2: "I want to start a business or create passive income streams",
                pathTitle3: "Both Life & Business",
                pathDesc3: "I need life organization AND want to start a business",
                stepDesc4Title: "Family Structure",
                stepDesc4Text: "Understanding your family situation helps us create realistic recommendations that fit your actual life.",
                familyStructureTitle: "Tell Us About Your Family",
                familyStructureLabel: "Describe your family structure:",
                stepDesc5Title: "Daily Schedule & Time Availability",
                stepDesc5Text: "Your daily routine and available time determine what's realistic for your business and organization goals.",
                dailyScheduleTitle: "Describe Your Typical Day",
                dailyScheduleLabel: "What does your typical daily schedule look like?",
                timeAvailabilityTitle: "⏰ Time Availability for Your Goals",
                timeAvailabilityDescription: "Help us create a realistic calendar by telling us how much time you can commit and when you're available to work on your goals.",
                hoursPerDayLabel: "How many hours per day can you dedicate?",
                preferredTimesLabel: "What times work best for you? (Select all that apply)",
                timeAvailabilityWhy: "We'll create a calendar that matches your actual availability. If you can dedicate 2 hours daily, we'll create bigger tasks to reach your goals faster. If you only have 30 minutes, we'll break everything into tiny, manageable steps.",
                chooseHoursOption: "Choose your available time...",
                timeEarlyMorning: "Early Morning (5-7 AM)",
                timeMorning: "Morning (7-11 AM)",
                timeMidday: "Midday (11 AM-2 PM)",
                timeAfternoon: "Afternoon (2-5 PM)",
                timeEvening: "Evening (5-8 PM)",
                timeNight: "Night (8-11 PM)",
                timeLateNight: "Late Night (11 PM+)",
                stepDesc6Title: "Investment & Timeline",
                stepDesc6Text: "Understanding your budget and timeline helps us recommend realistic business options.",
                investmentTitle: "Investment Level & Timeline",
                investmentLevelLabel: "How much can you invest to start?",
                incomeTimelineLabel: "When do you need income?",
                stepDesc7Title: "AI Business Ideas",
                stepDesc7Text: "We'll use ChatGPT to generate personalized business ideas based on your specific situation.",
                stepDesc8Title: "Market Research",
                stepDesc8Text: "Now we'll use Google Gemini to research the market for your chosen business idea.",
                stepDesc9Title: "Calendar Creation",
                stepDesc9Text: "Finally, we'll use Claude to create your personalized 12-week implementation calendar with time-optimized daily tasks.",
                stepDesc10Title: "Your Complete Business Plan",
                stepDesc10Text: "Congratulations! Here's your complete personalized business plan and next steps.",
                chooseInvestmentLevel: "Choose your investment level...",
                chooseTimeline: "Choose your timeline...",
                copyChatGPTBtn: "Copy Prompt",
                openChatGPTBtn: "Open ChatGPT",
                viewChatGPTBtn: "View Full Prompt",
                copyGeminiBtn: "Copy Prompt", 
                openGeminiBtn: "Open Gemini",
                viewGeminiBtn: "View Full Prompt",
                copyClaudeBtn: "Copy Prompt",
                openClaudeBtn: "Open Claude",
                viewClaudeBtn: "View Full Prompt"
            },
            es: {
                welcomeTitle: "¡Bienvenida al Método Smart Mom!",
                welcomeDescription: "Crea tu calendario interactivo personalizado y plan de negocio en 10 pasos completos. Este proceso tomará aproximadamente 30-40 minutos y generará un calendario interactivo completo y estrategia de negocio diseñada específicamente para madres ocupadas como tú.",
                welcomeStart: "Comenzar",
                welcomeCreate: "Crear Cuenta y Guardar Progreso", 
                welcomeReturning: "Soy usuario que regresa",
                mainTitle: "Método Smart Mom",
                mainSubtitle: "Calendario Interactivo y Planificación de Negocios con IA para Madres Ocupadas",
                freeBadge: "100% Gratis",
                ctaButton: "Comienza Tu Calendario Interactivo y Plan de Negocio Gratis Ahora",
                ctaSubtext: "No se requiere email para navegar • El proceso completo toma 30 minutos",
                languageTitle: "Choose Your Language / Elige Tu Idioma",
                viewPremiumServices: "💎 Ver Servicios Premium",
                premiumServicesTitle: "Servicios Premium Smart Mom",
                premiumServicesDescription: "Obtén calendarios personalizados, entrenamiento y soporte continuo para acelerar tu éxito",
                lifeCalendarTitle: "Calendario de Organización de Vida",
                lifeCalendarDescription: "Plan personalizado de organización del hogar de 12 semanas con tareas semanales, guías de orden y optimización de rutinas familiares.",
                lifeCalendarFeature1: "Calendario personalizado de 12 semanas",
                lifeCalendarFeature2: "Sistemas de organización del hogar",
                lifeCalendarFeature3: "Optimización de rutinas familiares",
                lifeCalendarFeature4: "Herramientas de seguimiento de progreso",
                getLifeCalendar: "Obtener Calendario de Vida",
                lifeTrainingTitle: "Entrenamiento Completo de Organización de Vida",
                lifeTrainingDescription: "Programa integral de entrenamiento con calendario más coaching personal, estrategias avanzadas de organización y soporte continuo.",
                lifeTrainingFeature1: "Todo en Calendario de Vida",
                lifeTrainingFeature2: "Sesión de coaching personal",
                lifeTrainingFeature3: "Estrategias avanzadas de organización",
                lifeTrainingFeature4: "Soporte por email por 30 días",
                getLifeTraining: "Obtener Entrenamiento de Vida",
                businessCalendarTitle: "Calendario de Lanzamiento de Negocio",
                businessCalendarDescription: "Plan de implementación de negocio de 12 semanas con investigación de mercado, guía de lanzamiento paso a paso y estrategias de optimización de ingresos.",
                businessCalendarFeature1: "Calendario de negocio personalizado",
                businessCalendarFeature2: "Insights de investigación de mercado",
                businessCalendarFeature3: "Guía de estrategia de lanzamiento",
                businessCalendarFeature4: "Consejos de optimización de ingresos",
                getBusinessCalendar: "Obtener Calendario de Negocio",
                businessTrainingTitle: "Programa Completo de Entrenamiento de Negocio",
                businessTrainingDescription: "Entrenamiento completo de negocio con calendario más mentoría personal, estrategias avanzadas y soporte continuo de negocio.",
                businessTrainingFeature1: "Todo en Calendario de Negocio",
                businessTrainingFeature2: "Mentoría personal de negocio",
                businessTrainingFeature3: "Estrategias avanzadas de crecimiento",
                businessTrainingFeature4: "Soporte por email por 60 días",
                getBusinessTraining: "Obtener Entrenamiento de Negocio",
                backToAssessment: "← Volver a Evaluación",
                backToMainPage: "Volver a Página Principal",
                consultationTitle: "Opciones de Consulta Gratis",
                consultationDescription: "¿Lista para acelerar tu éxito? Reserva una llamada de consulta gratis (opcional)",
                smartMomCallTitle: "Llamada Smart Mom Gratis (30 min)",
                smartMomCallDescription: "Perfecta para preguntas de organización de vida, ayuda con horarios familiares y estrategias de manejo del hogar.",
                bookSmartMomCall: "Reservar Llamada Smart Mom",
                strategyCallTitle: "Llamada de Estrategia (30 min)",
                strategyCallDescription: "Enfocada en planificación de negocio, estrategias de ingresos y orientación empresarial para madres ocupadas.",
                bookStrategyCall: "Reservar Llamada de Estrategia",
                stepDesc2Title: "Información Básica",
                stepDesc2Text: "Conozcámonos mejor para crear el calendario interactivo y plan de negocio perfecto para tu situación única.",
                basicInfoTitle: "Tu Información",
                nameLabel: "Tu Nombre:",
                emailLabel: "Tu Email:",
                empowermentTitle: "¡Ya Eres Exitosa!",
                empowermentText: "Manejar una familia es dirigir una organización compleja. Tienes habilidades de negociación, experiencia en gestión del tiempo y capacidades de resolución de crisis que la mayoría de los CEOs envidiarían. ¡Ahora canalicemos eso hacia TU vida organizada y negocio exitoso!",
                stepDesc3Title: "Elige Tu Enfoque",
                stepDesc3Text: "¿Qué te trae aquí hoy? Elige tu enfoque principal para que podamos personalizar tu experiencia.",
                pathSelectionTitle: "Selecciona Tu Camino:",
                pathTitle1: "Organización de Vida",
                pathDesc1: "Necesito ayuda organizando mi vida diaria, horarios familiares y sistemas del hogar",
                pathTitle2: "Lanzamiento de Negocio",
                pathDesc2: "Quiero comenzar un negocio o crear fuentes de ingresos pasivos",
                pathTitle3: "Vida y Negocio",
                pathDesc3: "Necesito organización de vida Y quiero comenzar un negocio",
                stepDesc4Title: "Estructura Familiar",
                stepDesc4Text: "Entender tu situación familiar nos ayuda a crear recomendaciones realistas que se ajusten a tu vida real.",
                familyStructureTitle: "Cuéntanos Sobre Tu Familia",
                familyStructureLabel: "Describe la estructura de tu familia:",
                stepDesc5Title: "Horario Diario y Disponibilidad de Tiempo",
                stepDesc5Text: "Tu rutina diaria y tiempo disponible determinan qué es realista para tus objetivos de negocio y organización.",
                dailyScheduleTitle: "Describe Tu Día Típico",
                dailyScheduleLabel: "¿Cómo se ve tu horario diario típico?",
                timeAvailabilityTitle: "⏰ Disponibilidad de Tiempo para Tus Metas",
                timeAvailabilityDescription: "Ayúdanos a crear un calendario realista diciéndonos cuánto tiempo puedes comprometer y cuándo estás disponible para trabajar en tus metas.",
                hoursPerDayLabel: "¿Cuántas horas por día puedes dedicar?",
                preferredTimesLabel: "¿Qué horarios funcionan mejor para ti? (Selecciona todos los que apliquen)",
                timeAvailabilityWhy: "Crearemos un calendario que coincida con tu disponibilidad real. Si puedes dedicar 2 horas diarias, crearemos tareas más grandes para alcanzar tus metas más rápido. Si solo tienes 30 minutos, dividiremos todo en pasos pequeños y manejables.",
                chooseHoursOption: "Elige tu tiempo disponible...",
                timeEarlyMorning: "Madrugada (5-7 AM)",
                timeMorning: "Mañana (7-11 AM)",
                timeMidday: "Mediodía (11 AM-2 PM)",
                timeAfternoon: "Tarde (2-5 PM)",
                timeEvening: "Noche (5-8 PM)",
                timeNight: "Noche tardía (8-11 PM)",
                timeLateNight: "Muy tarde (11 PM+)",
                stepDesc6Title: "Inversión y Cronograma",
                stepDesc6Text: "Entender tu presupuesto y cronograma nos ayuda a recomendar opciones de negocio realistas.",
                investmentTitle: "Nivel de Inversión y Cronograma",
                investmentLevelLabel: "¿Cuánto puedes invertir para comenzar?",
                incomeTimelineLabel: "¿Cuándo necesitas ingresos?",
                stepDesc7Title: "Ideas de Negocio con IA",
                stepDesc7Text: "Usaremos ChatGPT para generar ideas de negocio personalizadas basadas en tu situación específica.",
                stepDesc8Title: "Investigación de Mercado",
                stepDesc8Text: "Ahora usaremos Google Gemini para investigar el mercado de tu idea de negocio elegida.",
                stepDesc9Title: "Creación de Calendario",
                stepDesc9Text: "Finalmente, usaremos Claude para crear tu calendario de implementación personalizado de 12 semanas con tareas diarias optimizadas en tiempo.",
                stepDesc10Title: "Tu Plan de Negocio Completo",
                stepDesc10Text: "¡Felicitaciones! Aquí está tu plan de negocio personalizado completo y próximos pasos.",
                chooseInvestmentLevel: "Elige tu nivel de inversión...",
                chooseTimeline: "Elige tu cronograma...",
                copyChatGPTBtn: "Copiar",
                openChatGPTBtn: "Abrir ChatGPT",
                viewChatGPTBtn: "Ver Prompt Completo",
                copyGeminiBtn: "Copiar",
                openGeminiBtn: "Abrir Gemini",
                viewGeminiBtn: "Ver Prompt Completo",
                copyClaudeBtn: "Copiar",
                openClaudeBtn: "Abrir Claude",
                viewClaudeBtn: "Ver Prompt Completo"
            }
        };

        function updateLanguageContent(lang) {
            const t = translations[lang];
            if (t) {
                // Update text content elements
                Object.keys(t).forEach(key => {
                    const element = document.getElementById(key);
                    if (element) {
                        element.textContent = t[key];
                    }
                });
                
                // Update dropdown options with data attributes
                document.querySelectorAll('option[data-en][data-es]').forEach(option => {
                    if (lang === 'es' && option.getAttribute('data-es')) {
                        option.textContent = option.getAttribute('data-es');
                    } else if (lang === 'en' && option.getAttribute('data-en')) {
                        option.textContent = option.getAttribute('data-en');
                    }
                });
                
                // Update step 6 path-specific content
                if (lang === 'es') {
                    // Life Organization Path
                    const stepDesc6TitleLife = document.getElementById('stepDesc6TitleLife');
                    if (stepDesc6TitleLife) stepDesc6TitleLife.textContent = 'Metas y Cronograma de Organización';
                    const stepDesc6TextLife = document.getElementById('stepDesc6TextLife');
                    if (stepDesc6TextLife) stepDesc6TextLife.textContent = 'Entendamos tus prioridades de organización y qué tan rápido quieres ver resultados.';
                    const organizationGoalsTitle = document.getElementById('organizationGoalsTitle');
                    if (organizationGoalsTitle) organizationGoalsTitle.textContent = 'Tus Metas de Organización';
                    const organizationPriorityLabel = document.getElementById('organizationPriorityLabel');
                    if (organizationPriorityLabel) organizationPriorityLabel.innerHTML = '¿Cuál es tu mayor desafío de organización? <span class="required">*</span>';
                    const organizationTimelineLabel = document.getElementById('organizationTimelineLabel');
                    if (organizationTimelineLabel) organizationTimelineLabel.innerHTML = '¿Qué tan pronto quieres un hogar organizado? <span class="required">*</span>';
                    
                    // Both Path
                    const stepDesc6TitleBoth = document.getElementById('stepDesc6TitleBoth');
                    if (stepDesc6TitleBoth) stepDesc6TitleBoth.textContent = 'Metas, Inversión y Cronograma';
                    const stepDesc6TextBoth = document.getElementById('stepDesc6TextBoth');
                    if (stepDesc6TextBoth) stepDesc6TextBoth.textContent = 'Entendamos tanto tus metas de organización como tu cronograma de negocio.';
                    const bothGoalsTitle = document.getElementById('bothGoalsTitle');
                    if (bothGoalsTitle) bothGoalsTitle.textContent = 'Metas de Organización y Negocio';
                    const bothPriorityLabel = document.getElementById('bothPriorityLabel');
                    if (bothPriorityLabel) bothPriorityLabel.innerHTML = '¿Qué necesita atención primero? <span class="required">*</span>';
                    const bothInvestmentLabel = document.getElementById('bothInvestmentLabel');
                    if (bothInvestmentLabel) bothInvestmentLabel.innerHTML = '¿Inversión disponible para negocio? <span class="required">*</span>';
                    const bothTimelineLabel = document.getElementById('bothTimelineLabel');
                    if (bothTimelineLabel) bothTimelineLabel.innerHTML = '¿Cronograma para ambas metas? <span class="required">*</span>';
                }
                
                // Update placeholder text
                const placeholders = {
                    en: {
                        'family-structure': 'Tell us about your family size, ages of children, support system, partner situation, etc. Be as detailed as you\'d like - this helps us give you better recommendations.',
                        'daily-schedule': 'Describe your typical day from morning to night. Include work schedule, kids\' activities, household responsibilities, available free time, etc.',
                        'selected-business-idea': 'Type or paste your chosen business idea here...',
                        'chatgpt-response': 'Copy and paste the business ideas from ChatGPT here...',
                        'gemini-response': 'Copy and paste the market research from Gemini here...',
                        'claude-response': 'Copy and paste the complete 84-day interactive calendar from Claude here...'
                    },
                    es: {
                        'family-structure': 'Cuéntanos sobre el tamaño de tu familia, edades de los niños, sistema de apoyo, situación de pareja, etc. Sé tan detallada como quieras - esto nos ayuda a darte mejores recomendaciones.',
                        'daily-schedule': 'Describe tu día típico de la mañana a la noche. Incluye horario de trabajo, actividades de los niños, responsabilidades del hogar, tiempo libre disponible, etc.',
                        'selected-business-idea': 'Escribe o pega tu idea de negocio elegida aquí...',
                        'chatgpt-response': 'Copia y pega las ideas de negocio de ChatGPT aquí...',
                        'gemini-response': 'Copia y pega la investigación de mercado de Gemini aquí...',
                        'claude-response': 'Copia y pega el calendario interactivo completo de 84 días de Claude aquí...'
                    }
                };
                
                if (placeholders[lang]) {
                    Object.keys(placeholders[lang]).forEach(fieldId => {
                        const field = document.getElementById(fieldId);
                        if (field) {
                            field.placeholder = placeholders[lang][fieldId];
                        }
                    });
                }
            }
        }

        // Helper function for translations
        function t(key) {
            return translations[currentLanguage][key] || key;
        }

        // ===== NEW TIME AVAILABILITY FUNCTIONS =====
        
        function updateTimePreferences() {
            const checkboxes = document.querySelectorAll('#preferred-times-group input[type="checkbox"]');
            const selectedTimes = [];
            
            checkboxes.forEach(checkbox => {
                const item = checkbox.parentNode;
                if (checkbox.checked) {
                    selectedTimes.push(checkbox.value);
                    item.classList.add('checked');
                } else {
                    item.classList.remove('checked');
                }
            });
            
            // Save to hidden field and formData
            document.getElementById('preferred-times').value = selectedTimes.join(',');
            formData['preferred-times'] = selectedTimes.join(',');
            saveUserProgress();
            
            // Clear validation if at least one is selected
            if (selectedTimes.length > 0) {
                const validation = document.getElementById('preferred-times-validation');
                if (validation) {
                    validation.textContent = '';
                    validation.classList.add('success');
                }
            }
        }

        function validateTimeAvailability() {
            const hoursPerDay = document.getElementById('hours-per-day').value;
            const preferredTimes = document.getElementById('preferred-times').value;
            
            let isValid = true;
            
            // Validate hours per day
            if (!hoursPerDay) {
                const validation = document.getElementById('hours-per-day-validation');
                if (validation) {
                    validation.textContent = currentLanguage === 'es' ? 
                        'Por favor selecciona tu disponibilidad de tiempo' : 
                        'Please select your time availability';
                    validation.classList.remove('success');
                }
                isValid = false;
            }
            
            // Validate preferred times
            if (!preferredTimes) {
                const validation = document.getElementById('preferred-times-validation');
                if (validation) {
                    validation.textContent = currentLanguage === 'es' ? 
                        'Por favor selecciona al menos un horario preferido' : 
                        'Please select at least one preferred time';
                    validation.classList.remove('success');
                }
                isValid = false;
            }
            
            return isValid;
        }

        // ===== PAYMENT SYSTEM FUNCTIONS =====

        function showPremiumServices() {
            document.getElementById('premiumServicesSection').classList.add('active');
            document.querySelector('.progress-container').style.display = 'none';
            document.querySelector('.main-card').style.display = 'none';
            document.getElementById('premiumServicesSection').scrollIntoView({ behavior: 'smooth' });
        }

        function backToAssessment() {
            document.getElementById('premiumServicesSection').classList.remove('active');
            document.querySelector('.progress-container').style.display = 'block';
            document.querySelector('.main-card').style.display = 'block';
            scrollToCurrentStep();
        }

        function backToMainPage() {
            document.getElementById('premiumServicesSection').classList.remove('active');
            document.querySelector('.progress-container').style.display = 'block';
            document.querySelector('.main-card').style.display = 'block';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function openStripeLink(service) {
            const stripeLinks = {
                'life-calendar': 'https://buy.stripe.com/cNi00j9W0fo83eUa1D7Vm07',
                'life-training': 'https://buy.stripe.com/5kQ6oHb046RC5n22zb7Vm06',
                'business-calendar': 'https://buy.stripe.com/3cI8wP7NS2BmbLqc9L7Vm05',
                'business-training': 'https://buy.stripe.com/fZu8wP8RW1xi8zec9L7Vm04'
            };
            
            const url = stripeLinks[service];
            if (url) {
                window.open(url, '_blank');
            }
        }

        function openCalendlyLink(callType) {
            const calendlyLinks = {
                'smart-mom-call': 'https://calendly.com/momsurvivaltoolkit/free-smart-mom-support-call-30-min',
                'strategy-call': 'https://calendly.com/momsurvivaltoolkit/30min'
            };
            
            const url = calendlyLinks[callType];
            if (url) {
                window.open(url, '_blank');
            }
        }

        function showConsultationOptions() {
            const consultationSection = document.getElementById('consultationOptions');
            if (consultationSection && currentStep === 2) {
                consultationSection.classList.add('active');
            }
        }

        function hideConsultationOptions() {
            const consultationSection = document.getElementById('consultationOptions');
            if (consultationSection) {
                consultationSection.classList.remove('active');
            }
        }

        // ===== PRESERVED USER MANAGEMENT FUNCTIONS =====
        
        function getLocalUsers() {
            try {
                const data = localStorage.getItem('smartMomUsers');
                if (!data || data === 'null' || data === 'undefined') {
                    return [];
                }
                const parsed = JSON.parse(data);
                return Array.isArray(parsed) ? parsed : [];
            } catch (error) {
                console.warn('Error parsing local users, resetting:', error);
                localStorage.removeItem('smartMomUsers');
                return [];
            }
        }

        function saveLocalUser(userData) {
            try {
                const users = getLocalUsers();
                
                const existingIndex = users.findIndex(user => user.email === userData.email);
                if (existingIndex !== -1) {
                    throw new Error('User already exists');
                }
                
                users.push(userData);
                localStorage.setItem('smartMomUsers', JSON.stringify(users));
                console.log('User saved locally successfully');
                return userData;
            } catch (error) {
                console.error('Error saving user locally:', error);
                throw error;
            }
        }

        function findLocalUser(email, password = null) {
            try {
                const users = getLocalUsers();
                return users.find(user => {
                    if (password) {
                        return user.email === email && user.password === password;
                    }
                    return user.email === email;
                });
            } catch (error) {
                console.error('Error finding local user:', error);
                return null;
            }
        }

        async function hashPassword(password) {
            try {
                const encoder = new TextEncoder();
                const data = encoder.encode(password);
                const hash = await crypto.subtle.digest('SHA-256', data);
                return Array.from(new Uint8Array(hash))
                    .map(b => b.toString(16).padStart(2, '0'))
                    .join('');
            } catch (error) {
                console.warn('Using simple hash fallback');
                let hash = 0;
                for (let i = 0; i < password.length; i++) {
                    const char = password.charCodeAt(i);
                    hash = ((hash << 5) - hash) + char;
                    hash = hash & hash;
                }
                return Math.abs(hash).toString(16);
            }
        }

        // ===== PRESERVED CREATEUSER FUNCTION - DO NOT MODIFY =====
        async function createUser(email, password, name) {
            try {
                console.log('Creating user account...');
                
                // Send to N8N webhook (PRESERVED EXACTLY)
                const response = await fetch('https://momsurvivaltoolkit.app.n8n.cloud/webhook-test/smart-mom-form', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        name: name,
                        email: email,
                        selectedPath: selectedPath || 'not-selected',
                        source: 'smart-mom-website',
                        timestamp: new Date().toISOString(),
                        language: currentLanguage
                    })
                });

                const result = await response.json();
                
                if (response.ok && result.success) {
                    console.log('✅ User registration successful!');
                    
                    currentUser = {
                        id: Date.now().toString(),
                        email: email,
                        name: name,
                        displayName: name,
                        source: 'webhook',
                        status: 'synced'
                    };
                    
                    updateUserSession(currentUser);
                    saveUserProgress();
                    
                    return result;
                    
                } else {
                    throw new Error('Registration failed on server');
                }
                
            } catch (error) {
                console.error('Registration failed, using local storage fallback:', error);
                
                const hashedPassword = await hashPassword(password);
                
                const userData = {
                    id: Date.now().toString(),
                    name: name,
                    email: email,
                    password: hashedPassword,
                    createdAt: new Date().toISOString(),
                    language: currentLanguage,
                    source: 'local'
                };
                
                saveLocalUser(userData);
                
                currentUser = {
                    id: userData.id,
                    email: email,
                    name: name,
                    displayName: name,
                    source: 'local',
                    status: 'local'
                };
                
                updateUserSession(currentUser);
                showAuthSuccess('Account created successfully! (Using local storage)');
                
                return userData;
            }
        }

        async function signIn(email, password) {
            try {
                console.log('Signing in locally...');
                const hashedPassword = await hashPassword(password);
                const localUser = findLocalUser(email, hashedPassword);
                
                if (!localUser) {
                    throw new Error('Invalid email or password');
                }

                currentUser = {
                    id: localUser.id,
                    email: email,
                    name: localUser.name,
                    displayName: localUser.name,
                    source: 'local',
                    status: 'local'
                };

                updateUserSession(currentUser);
                loadUserProgress();
                showConnectionNotice();
                
                return localUser;
                
            } catch (error) {
                console.error('Error signing in:', error);
                throw error;
            }
        }

        // ===== PROGRESS MANAGEMENT =====
        
        function saveUserProgress() {
            // Ensure selectedPath is in formData
            if (selectedPath) {
                formData.selectedPath = selectedPath;
            }
            
            const progressData = {
                currentStep,
                selectedPath,
                formData,
                aiResponses,
                currentLanguage,
                timestamp: new Date().toISOString()
            };
            
            console.log('Saving progress - Selected path:', selectedPath);
            
            localStorage.setItem('smartMomProgress', JSON.stringify(progressData));
            
            if (!useLocalStorageOnly && currentUser && currentUser.status === 'synced') {
                sendProgressUpdate(progressData);
            }
        }

        async function sendProgressUpdate(progressData) {
            try {
                const response = await fetch('https://momsurvivaltoolkit.app.n8n.cloud/webhook-test/smart-mom-form', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        ...progressData,
                        updateType: 'progress',
                        userId: currentUser.email,
                        source: 'smart-mom-website'
                    })
                });
            } catch (error) {
                console.log('Progress update failed, continuing with local storage');
            }
        }

        function loadUserProgress() {
            const saved = localStorage.getItem('smartMomProgress');
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    currentStep = data.currentStep || 1;
                    selectedPath = data.selectedPath || '';
                    formData = data.formData || {};
                    aiResponses = data.aiResponses || {};
                    currentLanguage = data.currentLanguage || 'en';
                    
                    // Ensure selectedPath is also in formData
                    if (selectedPath && !formData.selectedPath) {
                        formData.selectedPath = selectedPath;
                    }
                    
                    console.log('Loaded progress - Selected path:', selectedPath);
                    
                    if (currentLanguage !== 'en') {
                        changeLanguage(currentLanguage);
                    }
                    
                    restoreFormData();
                    updateProgressDisplay();
                    showCurrentStep();
                } catch (error) {
                    console.error('Error loading progress:', error);
                }
            }
        }

        function restoreFormData() {
            Object.keys(formData).forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) {
                    if (field.type === 'checkbox') {
                        field.checked = formData[fieldId] === 'true' || formData[fieldId] === true;
                    } else {
                        field.value = formData[fieldId];
                    }
                    if (field.type === 'textarea') {
                        updateCharCounter(field);
                    }
                }
            });
            
            // Restore time preferences checkboxes
            if (formData['preferred-times']) {
                const selectedTimes = formData['preferred-times'].split(',');
                selectedTimes.forEach(time => {
                    const checkbox = document.getElementById(`time-${time}`);
                    if (checkbox) {
                        checkbox.checked = true;
                        checkbox.parentNode.classList.add('checked');
                    }
                });
            }
            
            // Restore path-specific fields if they exist
            const pathSpecificFields = [
                'organization-priority', 'organization-timeline',
                'both-priority', 'both-investment', 'both-timeline'
            ];
            
            pathSpecificFields.forEach(fieldId => {
                if (formData[fieldId]) {
                    const field = document.getElementById(fieldId);
                    if (field) {
                        field.value = formData[fieldId];
                    }
                }
            });
            
            Object.keys(aiResponses).forEach(platform => {
                const field = document.getElementById(`${platform}-response`);
                if (field && aiResponses[platform]) {
                    field.value = aiResponses[platform];
                }
            });
            
            if (selectedPath) {
                const pathOption = document.querySelector(`[data-path="${selectedPath}"]`);
                if (pathOption) {
                    pathOption.classList.add('selected');
                }
                // Update path-specific content
                updatePathSpecificContent();
                
                // If we're on step 6, show the path-specific questions
                if (currentStep === 6) {
                    showPathSpecificQuestions();
                }
            }
        }

        // ===== USER SESSION MANAGEMENT =====
        
        function updateUserSession(user) {
            currentUser = user;
            
            localStorage.setItem('smartMomUser', JSON.stringify(user));
            
            document.getElementById('userStatusBar').classList.remove('hidden');
            document.getElementById('userDisplayName').textContent = user.displayName || 'Guest User';
            
            const userAvatar = document.getElementById('userAvatar');
            userAvatar.textContent = user.displayName ? user.displayName.charAt(0).toUpperCase() : '?';
            
            const statusBadge = document.getElementById('statusBadge');
            const statusText = document.getElementById('userStatusText');
            const signOutBtn = document.getElementById('signOutBtn');
            
            if (user.status === 'synced') {
                statusBadge.textContent = 'Signed In';
                statusBadge.classList.remove('guest');
                statusBadge.classList.add('signed-in');
                statusText.textContent = 'Progress is being saved';
                signOutBtn.style.display = 'inline-block';
            } else {
                statusBadge.textContent = 'Local Storage';
                statusBadge.classList.add('guest');
                statusBadge.classList.remove('signed-in');
                statusText.textContent = 'Progress saved locally only';
                signOutBtn.style.display = 'inline-block';
            }
        }

        function showConnectionNotice() {
            const notice = document.getElementById('connectionNotice');
            if (notice) {
                notice.classList.remove('hidden');
                setTimeout(() => {
                    notice.classList.add('hidden');
                }, 5000);
            }
        }

        function signOut() {
            if (confirm('Are you sure you want to sign out? Your progress will be saved locally.')) {
                currentUser = null;
                localStorage.removeItem('smartMomUser');
                
                document.getElementById('userStatusBar').classList.add('hidden');
                document.getElementById('signOutBtn').style.display = 'none';
                
                showAuthModal('signin');
            }
        }

        // ===== FORM VALIDATION =====
        
        function validateField(field) {
            const value = field.value.trim();
            const validationMsg = document.getElementById(`${field.id}-validation`);
            
            if (!value) {
                if (validationMsg) {
                    validationMsg.textContent = currentLanguage === 'es' ? 'Este campo es requerido' : 'This field is required';
                    validationMsg.classList.remove('success');
                }
                return false;
            }
            
            if (field.type === 'email') {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(value)) {
                    if (validationMsg) {
                        validationMsg.textContent = currentLanguage === 'es' ? 'Por favor ingresa un email válido' : 'Please enter a valid email';
                        validationMsg.classList.remove('success');
                    }
                    return false;
                }
            }
            
            if (validationMsg) {
                validationMsg.textContent = '';
                validationMsg.classList.add('success');
            }
            
            formData[field.id] = value;
            saveUserProgress();
            return true;
        }

        function updateCharCounter(textarea) {
            const maxLength = parseInt(textarea.getAttribute('maxlength'));
            const currentLength = textarea.value.length;
            const remaining = maxLength - currentLength;
            const counter = document.getElementById(`${textarea.id}-counter`);
            
            if (counter) {
                const text = currentLanguage === 'es' ? 
                    `${remaining} caracteres restantes` : 
                    `${remaining} characters remaining`;
                counter.textContent = text;
            }
        }

        function validateCurrentStep() {
            const stepValidations = {
                1: () => true, // Language selection doesn't need validation
                2: () => {
                    const name = document.getElementById('user-name');
                    const email = document.getElementById('user-email');
                    return validateField(name) && validateField(email);
                },
                3: () => selectedPath !== '',
                4: () => validateField(document.getElementById('family-structure')),
                5: () => {
                    const scheduleValid = validateField(document.getElementById('daily-schedule'));
                    const timeValid = validateTimeAvailability();
                    return scheduleValid && timeValid;
                },
                6: () => {
                    if (selectedPath === 'life-organization') {
                        return validateField(document.getElementById('organization-priority')) &&
                               validateField(document.getElementById('organization-timeline'));
                    } else if (selectedPath === 'business-launch') {
                        return validateField(document.getElementById('investment-level')) &&
                               validateField(document.getElementById('income-timeline'));
                    } else if (selectedPath === 'both') {
                        return validateField(document.getElementById('both-priority')) &&
                               validateField(document.getElementById('both-investment')) &&
                               validateField(document.getElementById('both-timeline'));
                    }
                    return false;
                },
                7: () => true, // AI steps are optional
                8: () => true,
                9: () => true,
                10: () => true
            };
            
            return stepValidations[currentStep] ? stepValidations[currentStep]() : true;
        }

        // ===== NAVIGATION =====
        
        function showCurrentStep() {
            // Hide all step contents
            document.querySelectorAll('.step-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Show current step content
            const currentContent = document.getElementById(`step${currentStep}Content`);
            if (currentContent) {
                currentContent.classList.remove('hidden');
                
                // Show consultation options on step 2
                if (currentStep === 2) {
                    setTimeout(() => showConsultationOptions(), 500);
                } else {
                    hideConsultationOptions();
                }
                
                // Show path-specific questions on step 6
                if (currentStep === 6) {
                    showPathSpecificQuestions();
                }
            }
            
            // Update navigation buttons
            updateNavigationButtons();
            
            // Update AI prompts when reaching those steps
            if (currentStep === 7) {
                generateChatGPTPrompt();
            } else if (currentStep === 9) {
                generateClaudePrompt();
            }
            
            // Scroll to top of content
            scrollToCurrentStep();
        }

        function showPathSpecificQuestions() {
            // Hide all path-specific content first
            document.querySelectorAll('.path-specific-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Hide the no path selected message
            document.getElementById('noPathSelectedMessage').style.display = 'none';
            
            // Show the appropriate questions based on selected path
            if (selectedPath === 'life-organization') {
                document.getElementById('lifeOrganizationQuestions').classList.remove('hidden');
            } else if (selectedPath === 'business-launch') {
                document.getElementById('businessLaunchQuestions').classList.remove('hidden');
            } else if (selectedPath === 'both') {
                document.getElementById('bothPathQuestions').classList.remove('hidden');
            } else {
                // No path selected, show the message
                document.getElementById('noPathSelectedMessage').style.display = 'block';
            }
        }

        function updateNavigationButtons() {
            const backBtn = document.getElementById('backBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            backBtn.disabled = currentStep === 1;
            
            if (currentStep === TOTAL_STEPS) {
                nextBtn.style.display = 'none';
            } else {
                nextBtn.style.display = 'block';
                nextBtn.textContent = currentLanguage === 'es' ? 'Siguiente Paso →' : 'Next Step →';
            }
        }

        function nextStep() {
            if (!validateCurrentStep()) {
                alert(currentLanguage === 'es' ? 
                      'Por favor completa todos los campos requeridos antes de continuar.' : 
                      'Please complete all required fields before continuing.');
                return;
            }
            
            if (currentStep < TOTAL_STEPS) {
                currentStep++;
                updateProgressDisplay();
                showCurrentStep();
                saveUserProgress();
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                updateProgressDisplay();
                showCurrentStep();
                saveUserProgress();
            }
        }

        function updateProgressDisplay() {
            // Update step counter
            const stepCounter = document.getElementById('stepCounter');
            stepCounter.textContent = currentLanguage === 'es' ? 
                `Paso ${currentStep} de ${TOTAL_STEPS}` : 
                `Step ${currentStep} of ${TOTAL_STEPS}`;
            
            // Update progress fill
            const progressFill = document.getElementById('progressFill');
            const progressPercentage = (currentStep / TOTAL_STEPS) * 100;
            progressFill.style.width = `${progressPercentage}%`;
            
            // Update progress steps
            for (let i = 1; i <= TOTAL_STEPS; i++) {
                const stepElement = document.getElementById(`step-${i}`);
                if (stepElement) {
                    stepElement.classList.remove('active', 'completed', 'pending');
                    
                    if (i < currentStep) {
                        stepElement.classList.add('completed');
                    } else if (i === currentStep) {
                        stepElement.classList.add('active');
                    } else {
                        stepElement.classList.add('pending');
                    }
                }
            }
        }

        function scrollToCurrentStep() {
            const progressContainer = document.querySelector('.progress-container');
            if (progressContainer) {
                progressContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        // ===== PATH SELECTION =====
        
        function selectPath(path) {
            selectedPath = path;
            formData.selectedPath = path;
            
            // Update visual selection
            document.querySelectorAll('.path-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            const selectedOption = document.querySelector(`[data-path="${path}"]`);
            if (selectedOption) {
                selectedOption.classList.add('selected');
            }
            
            // Update path-specific content
            updatePathSpecificContent();
            
            saveUserProgress();
        }

        function updatePathSpecificContent() {
            // Update step 6 title based on path
            const stepText6 = document.getElementById('stepText6');
            if (stepText6) {
                if (selectedPath === 'life-organization') {
                    stepText6.textContent = currentLanguage === 'es' ? 'Metas' : 'Goals';
                } else {
                    stepText6.textContent = currentLanguage === 'es' ? 'Inversión' : 'Investment';
                }
            }
            
            // Update step visibility based on path
            updateStepVisibility();
        }

        function updateStepVisibility() {
            // For life organization path, hide steps 7-8 (business AI steps)
            if (selectedPath === 'life-organization') {
                document.getElementById('step-7').style.display = 'none';
                document.getElementById('step-8').style.display = 'none';
            } else {
                document.getElementById('step-7').style.display = 'flex';
                document.getElementById('step-8').style.display = 'flex';
            }
        }

        // ===== AI PROMPT GENERATION =====
        
        function generateChatGPTPrompt() {
            const prompt = `I'm a mom with the following situation:

Name: ${formData['user-name'] || 'Not provided'}
Family Structure: ${formData['family-structure'] || 'Not provided'}
Daily Schedule: ${formData['daily-schedule'] || 'Not provided'}
Time Availability: ${formData['hours-per-day'] || 'Not specified'} during ${formData['preferred-times'] || 'Not specified'} times
Investment Level: ${formData['investment-level'] || formData['both-investment'] || 'Not specified'}
Income Timeline: ${formData['income-timeline'] || formData['both-timeline'] || 'Not specified'}

Please suggest 5 specific business ideas that:
1. Fit my schedule and family situation
2. Match my investment level and time availability
3. Can generate income within my timeline
4. Are realistic for a busy mom with ${formData['hours-per-day'] || 'limited'} time availability
5. Include both online and offline options

For each idea, please provide:
- Business name
- Brief description
- Startup steps that fit my time constraints
- Income potential
- Why it's perfect for my situation and time availability`;

            document.getElementById('chatgptPrompt').textContent = prompt;
        }

        function updateGeminiPrompt(businessIdea) {
            if (!businessIdea) return;
            
            const prompt = `Please provide detailed market research for this business idea: "${businessIdea}"

Consider the following constraints:
- Time availability: ${formData['hours-per-day'] || 'Not specified'}
- Preferred working times: ${formData['preferred-times'] || 'Not specified'}

Include:
1. Target market analysis
2. Competition overview
3. Pricing strategies
4. Marketing channels that work with limited time
5. Growth potential
6. Common challenges and solutions
7. First month action plan optimized for ${formData['hours-per-day'] || 'limited'} time availability

Focus on practical, actionable information for a mom with specific time constraints.`;

            document.getElementById('geminiPrompt').textContent = prompt;
        }

        // UPDATED CLAUDE PROMPT GENERATION
        function generateClaudePrompt() {
            // Extract family size from family structure
            const familyStructure = formData['family-structure'] || '';
            const familySizeMatch = familyStructure.match(/(\d+)\s*(people|person|family|members?|kids?|children)/i);
            const familySize = familySizeMatch ? parseInt(familySizeMatch[1]) : 4; // Default to 4 if not found

            // Get time availability info
            const hoursPerDay = formData['hours-per-day'] || 'not-specified';
            const preferredTimes = formData['preferred-times'] || 'not-specified';

            const prompt = `You are creating a personalized 84-day (12 weeks) interactive HTML calendar for a busy mom. This calendar must be extremely detailed, broken down into manageable steps with checkboxes for each task, and OPTIMIZED FOR HER SPECIFIC TIME AVAILABILITY.

USER PROFILE:
- Name: ${formData['user-name'] || 'Not provided'}
- Email: ${formData['user-email'] || 'Not provided'}
- Family Structure: ${formData['family-structure'] || 'Not provided'}
- Daily Schedule: ${formData['daily-schedule'] || 'Not provided'}
- Selected Path: ${selectedPath}
- Language: ${currentLanguage}
- Number of People in Household: ${familySize}

CRITICAL TIME CONSTRAINTS:
- Available Time Per Day: ${hoursPerDay}
- Preferred Working Times: ${preferredTimes}

${selectedPath === 'life-organization' ? `
- Organization Priority: ${formData['organization-priority'] || 'Not specified'}
- Organization Timeline: ${formData['organization-timeline'] || 'Not specified'}
` : ''}

${selectedPath === 'business-launch' ? `
- Investment Level: ${formData['investment-level'] || 'Not specified'}
- Income Timeline: ${formData['income-timeline'] || 'Not specified'}
- Business Ideas from ChatGPT: ${aiResponses.chatgpt || 'Not provided'}
- Market Research from Gemini: ${aiResponses.gemini || 'Not provided'}
- Selected Business Idea: ${formData['selected-business-idea'] || 'Not specified'}
` : ''}

${selectedPath === 'both' ? `
- Priority Focus: ${formData['both-priority'] || 'Not specified'}
- Investment Available: ${formData['both-investment'] || 'Not specified'}
- Timeline: ${formData['both-timeline'] || 'Not specified'}
- Business Ideas from ChatGPT: ${aiResponses.chatgpt || 'Not provided'}
- Market Research from Gemini: ${aiResponses.gemini || 'Not provided'}
- Selected Business Idea: ${formData['selected-business-idea'] || 'Not specified'}
` : ''}

CRITICAL REQUIREMENTS - TIME OPTIMIZATION:

**${hoursPerDay === '15-30-minutes' ? 'MICRO-TASK FORMAT (15-30 min/day):' : 
   hoursPerDay === '30-60-minutes' ? 'SHORT-TASK FORMAT (30-60 min/day):' :
   hoursPerDay === '1-2-hours' ? 'STANDARD-TASK FORMAT (1-2 hours/day):' :
   hoursPerDay === '2-3-hours' ? 'INTENSIVE-TASK FORMAT (2-3 hours/day):' :
   hoursPerDay === '3-4-hours' ? 'POWER-TASK FORMAT (3-4 hours/day):' :
   hoursPerDay === '4-plus-hours' ? 'ACCELERATED-TASK FORMAT (4+ hours/day):' :
   'FLEXIBLE-TASK FORMAT (Variable time):'
}**

${hoursPerDay === '15-30-minutes' ? `
- Maximum 1-2 tiny tasks per day (5-15 minutes each)
- Break everything into micro-steps
- Focus on quick wins and momentum
- Tasks should be completable during kids' snack time
` : hoursPerDay === '30-60-minutes' ? `
- Maximum 2-3 small tasks per day (10-20 minutes each)
- Moderate steps that fit into brief free periods
- Balance quick wins with meaningful progress
- Tasks designed for naptime or early morning
` : hoursPerDay === '1-2-hours' ? `
- 2-4 tasks per day (15-30 minutes each)
- Standard steps with good momentum
- Mix of organizational and action tasks
- Perfect for dedicated morning or evening blocks
` : hoursPerDay === '2-3-hours' ? `
- 3-5 substantial tasks per day (20-40 minutes each)
- Bigger chunks that create significant progress
- Can include planning + execution in same day
- Great for major organization overhauls
` : hoursPerDay === '3-4-hours' ? `
- 4-6 power tasks per day (30-60 minutes each)
- Large projects broken into meaningful segments
- Can tackle multiple areas simultaneously
- Accelerated timeline with major transformations
` : hoursPerDay === '4-plus-hours' ? `
- 5-8 intensive tasks per day (30-90 minutes each)
- Complete room transformations in single days
- Multiple business tasks can be completed daily
- Fast-track to goals with comprehensive daily work
` : `
- Flexible daily task load based on available time
- Include options for different time constraints
- Scale tasks up/down based on daily availability
`}

**TIMING OPTIMIZATION:**
- Schedule tasks during her preferred times: ${preferredTimes}
- If early morning (5-7 AM): Focus on planning, prep, quiet organizational tasks
- If morning (7-11 AM): Best for high-energy tasks, decision-making, calls
- If midday (11 AM-2 PM): Great for errands, organizing, business tasks
- If afternoon (2-5 PM): Good for creative work, content creation, follow-ups  
- If evening (5-8 PM): Family time integration, light organizing, planning
- If night (8-11 PM): Quiet tasks, online work, planning tomorrow
- If late night (11 PM+): Only light tasks, planning, digital organization

1. **NO DECISIONS NEEDED** - Every choice is already made
2. **TIME-SPECIFIC TASKS** - Sized exactly for her available time
3. **Everything Pre-Selected** - Meals, recipes, items to buy, which drawer to organize
4. **Visual Results** - Show before/after or completion visuals
5. **Instant Rewards** - Serotonin hits after each micro-step

MEAL PLANNING SPECIFICS:

Based on household size of ${familySize} people, create rotating 2-week meal plans with EXACT recipes:

**Week A Meals:**
- Monday: Spaghetti with Meat Sauce
  * 1 lb ground beef
  * 1 jar Prego sauce (24 oz)
  * 1 box spaghetti
  * Garlic bread (frozen)
  * Bagged salad
  * Cook time: 20 min

- Tuesday: Rotisserie Chicken Dinner
  * 1 pre-cooked rotisserie chicken (from store)
  * 2 bags microwave vegetables
  * 1 box instant mashed potatoes
  * 1 can gravy
  * Prep time: 10 min

[Continue with all meals...]

GROCERY LIST (Scheduled for her preferred time):

**Weekly Shopping List for Family of ${familySize}:**

□ **Produce Section:**
  - Bananas (${familySize > 3 ? '2 bunches' : '1 bunch'})
  - Apples (1 bag)
  - Baby carrots (1 bag)
  - Bagged salad (${familySize > 3 ? '3 bags' : '2 bags'})
  - Tomatoes (${familySize > 3 ? '6' : '4'})
  - Onions (1 bag)

[Continue with complete list...]

💰 Estimated cost: ${familySize > 4 ? '200-250' : familySize > 2 ? '150-200' : '100-150'}

ORGANIZATION TASK EXAMPLES:

${hoursPerDay === '15-30-minutes' ? `
**Day 3 - Kitchen Junk Drawer (15 min total)**

□ Get supplies ready (1 min):
  - 1 small trash bag
  - Wet paper towels

□ Empty just the front half of drawer (2 min):
  - Take photo of mess 📸

□ Throw away obvious trash (3 min):
  - Test 2 pens - toss if dry
  - Expired coupons only
  - Obviously broken items

□ Keep ONLY essentials (2 min):
  - 2 working pens
  - 1 pair scissors
  - Roll of tape

□ Put back neatly (2 min):
  - Pens on left
  - Scissors in middle

□ Victory photo & treat (5 min):
  - Take "after" photo 📸
  - Enjoy favorite snack

✅ Reward: 15-min TV break + proud text to friend
` : hoursPerDay === '1-2-hours' ? `
**Day 3 - Complete Kitchen Organization (90 min total)**

□ Phase 1: Declutter (30 min):
  - Empty 3 drawers completely
  - Sort into keep/donate/trash piles
  - Take before photos

□ Phase 2: Deep Clean (20 min):
  - Wipe all drawer interiors
  - Clean organizer trays

□ Phase 3: Organize (25 min):
  - Use drawer dividers
  - Label each section
  - Return items by category

□ Phase 4: Systems (15 min):
  - Create "homes" for new items
  - Set up daily maintenance routine
  - Take after photos

✅ Reward: Kitchen dance party + social media post
` : `
**Day 3 - Kitchen Command Center Setup (${hoursPerDay === '2-3-hours' ? '2.5 hours' : hoursPerDay === '3-4-hours' ? '3 hours' : '4+ hours'} total)**

□ Complete kitchen audit (45 min):
  - Inventory all cabinets and drawers
  - Photo documentation of current state
  - Create priority list

□ Major decluttering session (60-90 min):
  - Empty all cabinets
  - Sort into detailed categories
  - Donation bags ready

□ Deep cleaning (30-45 min):
  - Clean all surfaces
  - Organize cleaning supplies

□ System implementation (60+ min):
  - Install new organizers
  - Create labeling system
  - Set up meal planning center

✅ Reward: Order favorite takeout + family celebration
`}

${selectedPath === 'business-launch' || selectedPath === 'both' ? `
BUSINESS SETUP TASKS:

${hoursPerDay === '15-30-minutes' ? `
**Week 2, Day 3 - Create Business Email (15 min)**

□ Open Gmail (2 min):
  - Go to gmail.com
  - Click "Create account"

□ Fill basics only (5 min):
  - First name: ${formData['user-name']?.split(' ')[0] || 'Your name'}
  - Username: ${formData['user-name']?.toLowerCase().replace(' ', '') || 'yourname'}biz@gmail.com
  - Simple password

□ Save & verify (5 min):
  - Write down info
  - Verify phone number

□ Victory (3 min):
  - Screenshot confirmation
  - Text friend "I started!"

✅ Reward: Favorite drink + 10-min social media
` : `
**Week 2, Day 3 - Complete Business Setup (${hoursPerDay === '1-2-hours' ? '90 min' : '2+ hours'})**

□ Business email creation (20 min):
  - Professional Gmail setup
  - Password manager entry
  - Signature creation

□ Website builder start (${hoursPerDay === '1-2-hours' ? '40 min' : '60 min'}):
  - Carrd.co free account
  - Template selection
  - Basic content entry

□ Social media presence (${hoursPerDay === '1-2-hours' ? '30 min' : '45 min'}):
  - Business Facebook page
  - Instagram account
  - LinkedIn profile update

□ First marketing action (${hoursPerDay === '1-2-hours' ? '20 min' : '30 min'}):
  - Post in 3 local mom groups
  - Message 5 potential clients
  - Create content calendar

✅ Reward: Celebrate with family + success post
`}
` : ''}

CALENDAR FORMAT:

Create the full 84-day calendar as an interactive HTML document with:
- Inline CSS (calming colors: #6B8E6B sage green, #FAF7F0 cream, #2D5B69 teal)
- JavaScript for checkbox functionality
- Progress tracking that shows % complete
- Celebration animations every 7 days
- Print-friendly format
- Mobile responsive design
- **TIME-SPECIFIC task scheduling based on her preferred times**

DAILY STRUCTURE EXAMPLE:

**Day 15 - Tuesday - "Kitchen Victory Day" 🍳**

Morning Energy: ⚡⚡⚡ High
Today's Focus: ${selectedPath === 'life-organization' ? 'Meal prep system' : 'Client outreach'}
Available Time: ${hoursPerDay}
Best Time Slot: ${preferredTimes}

${hoursPerDay === '15-30-minutes' ? `
**☀️ ${preferredTimes.includes('morning') ? 'Morning' : preferredTimes.includes('evening') ? 'Evening' : 'Preferred'} Task (15 min)**
Quick Kitchen Win

□ Set timer for 15 minutes (1 min)
□ Clear one small counter space (5 min)
□ Wipe down with favorite cleaner (3 min)
□ Put 5 items in proper homes (4 min)
□ Victory dance + photo (2 min)

✅ Reward: Favorite snack + proud moment!
` : hoursPerDay === '1-2-hours' ? `
**☀️ Morning Block (45 min - ${preferredTimes.includes('morning') ? 'Perfect timing!' : 'Adapted for your schedule'})**
Kitchen Command Center Setup

□ Prep (5 min):
  - Play energizing music 🎵
  - Get supplies ready
  - Set phone timer

□ Clear & clean main counter (15 min):
  - Move everything to table temporarily
  - Deep clean surface
  - Before photo! 📸

□ Create meal planning station (20 min):
  - Hang whiteboard with Command strips
  - Add weekly meal planner sections
  - Stock with markers and eraser

□ Victory setup (5 min):
  - After photo! 📸
  - Update family on progress
  - Plan tomorrow's task

✅ Reward: Special coffee + 15-min break

**🌤️ Afternoon Block (30 min - During kids' quiet time)**
Tomorrow's Prep

□ Menu planning (15 min):
  - Choose 3 meals from master list
  - Check ingredients needed
  - Add to shopping list

□ Kitchen systems (15 min):
  - Set up breakfast station
  - Prep lunch boxes
  - Quick tidy of organized areas

✅ Reward: Guilt-free Netflix time!
` : `
**☀️ Extended Morning Session (2+ hours - Your power time!)**
Complete Kitchen Transformation

□ Phase 1: Total Declutter (45 min):
  - Empty all drawers and cabinets
  - Sort into detailed categories
  - Take comprehensive before photos
  - Fill donation bags

□ Phase 2: Deep Clean Everything (30 min):
  - Wipe all surfaces inside and out
  - Clean organizer tools
  - Vacuum/sweep thoroughly

□ Phase 3: System Implementation (60+ min):
  - Install new drawer organizers
  - Create labeled zones for everything
  - Set up meal planning command center
  - Implement new storage solutions

□ Phase 4: Family Integration (15 min):
  - Walk family through new systems
  - Assign maintenance responsibilities
  - Celebrate the transformation!

✅ Reward: Order favorite takeout + family movie night!
`}

WEEKLY THEMES:

Week 1: "Gentle Start" - Building habits at ${hoursPerDay} pace
Week 2: "Finding Rhythm" - Optimizing for your time slots
Week 3: "Quick Wins" - Visible results in your timeframe
Week 4: "Celebration" - Consolidate & appreciate progress
Week 5: "Level Up" - Expanding within time constraints
Week 6: "Systems Rock" - Making it automatic
Week 7: "Halfway Hero" - Major celebration!
Week 8: "Flexibility" - Adapting when time changes
Week 9: "Big Progress" - Seeing major transformation
Week 10: "Teaching Time" - Family involvement
Week 11: "Almost There" - Fine-tuning systems
Week 12: "Victory Lap" - Celebrate & plan ahead

Create the complete 84-day calendar following this exact format, with tasks perfectly sized for ${hoursPerDay} and scheduled during ${preferredTimes}. Every task broken down into tiny steps with checkboxes. All decisions pre-made. Maximum hand-holding and encouragement optimized for her specific time availability!`;

            document.getElementById('claudePrompt').textContent = prompt;
        }

        function copyPrompt(platform) {
            const promptElement = document.getElementById(`${platform}Prompt`);
            const promptText = promptElement.textContent;
            
            navigator.clipboard.writeText(promptText).then(() => {
                const copyBtn = document.querySelector(`#copy${platform.charAt(0).toUpperCase() + platform.slice(1)}Btn`);
                const originalText = copyBtn.textContent;
                copyBtn.textContent = currentLanguage === 'es' ? '¡Copiado!' : 'Copied!';
                setTimeout(() => {
                    copyBtn.textContent = originalText;
                }, 2000);
            });
        }

        function viewFullPrompt(platform) {
            const promptElement = document.getElementById(`${platform}Prompt`);
            const promptText = promptElement.textContent;
            
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                padding: 20px;
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: white;
                padding: 30px;
                border-radius: 12px;
                max-width: 800px;
                max-height: 80vh;
                overflow-y: auto;
                position: relative;
            `;
            
            const closeBtn = document.createElement('button');
            closeBtn.textContent = '×';
            closeBtn.style.cssText = `
                position: absolute;
                top: 10px;
                right: 10px;
                background: none;
                border: none;
                font-size: 24px;
                cursor: pointer;
            `;
            closeBtn.onclick = () => modal.remove();
            
            const pre = document.createElement('pre');
            pre.style.cssText = `
                white-space: pre-wrap;
                word-wrap: break-word;
                font-family: monospace;
                font-size: 14px;
                line-height: 1.5;
            `;
            pre.textContent = promptText;
            
            content.appendChild(closeBtn);
            content.appendChild(pre);
            modal.appendChild(content);
            document.body.appendChild(modal);
        }

        function openAI(platform) {
            const urls = {
                chatgpt: 'https://chat.openai.com',
                gemini: 'https://gemini.google.com',
                claude: 'https://claude.ai'
            };
            
            window.open(urls[platform], '_blank');
        }

        function saveAIResponse(platform, response) {
            aiResponses[platform] = response;
            saveUserProgress();
        }

        // ===== LANGUAGE MANAGEMENT =====
        
        function changeLanguage(lang) {
            currentLanguage = lang;
            
            // Update button states
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`lang-${lang}`).classList.add('active');
            
            // Update all content
            updateLanguageContent(lang);
            
            // Update navigation buttons
            updateNavigationButtons();
            
            // Update progress display
            updateProgressDisplay();
            
            // Save progress
            saveUserProgress();
        }

        // ===== AUTH MODAL FUNCTIONS =====
        
        function showAuthModal(mode = 'signup') {
            authMode = mode;
            const modal = document.getElementById('authModal');
            const form = document.getElementById('authForm');
            
            // Reset form
            form.reset();
            hideAuthMessages();
            
            // Update UI based on mode
            const authTitle = document.getElementById('authTitle');
            const authSubmitText = document.getElementById('authSubmitText');
            const authSwitchText = document.getElementById('authSwitchText');
            const authSwitchLink = document.getElementById('authSwitchLink');
            const nameField = document.getElementById('authName');
            const confirmPasswordField = document.getElementById('authConfirmPassword');
            
            if (mode === 'signin') {
                authTitle.textContent = currentLanguage === 'es' ? 'Iniciar Sesión' : 'Sign In';
                authSubmitText.textContent = currentLanguage === 'es' ? 'Iniciar Sesión' : 'Sign In';
                authSwitchText.textContent = currentLanguage === 'es' ? '¿No tienes cuenta?' : "Don't have an account?";
                authSwitchLink.textContent = currentLanguage === 'es' ? 'Crear Cuenta' : 'Create Account';
                nameField.style.display = 'none';
                confirmPasswordField.style.display = 'none';
            } else {
                authTitle.textContent = currentLanguage === 'es' ? 'Crear Tu Cuenta' : 'Create Your Account';
                authSubmitText.textContent = currentLanguage === 'es' ? 'Crear Cuenta' : 'Create Account';
                authSwitchText.textContent = currentLanguage === 'es' ? '¿Ya tienes cuenta?' : 'Already have an account?';
                authSwitchLink.textContent = currentLanguage === 'es' ? 'Iniciar Sesión' : 'Sign In';
                nameField.style.display = 'block';
                confirmPasswordField.style.display = 'block';
            }
            
            modal.classList.add('active');
        }

        function closeAuthModal() {
            document.getElementById('authModal').classList.remove('active');
            hideAuthMessages();
        }

        function toggleAuthMode() {
            authMode = authMode === 'signup' ? 'signin' : 'signup';
            showAuthModal(authMode);
        }

        function showAuthError(message) {
            const errorDiv = document.getElementById('authError');
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
            hideAuthSuccess();
        }

        function showAuthSuccess(message) {
            const successDiv = document.getElementById('authSuccess');
            successDiv.textContent = message;
            successDiv.classList.remove('hidden');
            hideAuthError();
        }

        function hideAuthError() {
            document.getElementById('authError').classList.add('hidden');
        }

        function hideAuthSuccess() {
            document.getElementById('authSuccess').classList.add('hidden');
        }

        function hideAuthMessages() {
            hideAuthError();
            hideAuthSuccess();
        }

        // ===== INITIALIZATION =====
        
        async function handleAuthSubmit(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('authSubmitBtn');
            const originalText = submitBtn.innerHTML;
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span class="loading-spinner"></span>' + 
                (currentLanguage === 'es' ? 'Procesando...' : 'Processing...');
            
            const email = document.getElementById('authEmail').value;
            const password = document.getElementById('authPassword').value;
            const name = document.getElementById('authName').value;
            const confirmPassword = document.getElementById('authConfirmPassword').value;
            
            try {
                if (authMode === 'signup') {
                    if (password !== confirmPassword) {
                        throw new Error(currentLanguage === 'es' ? 
                            'Las contraseñas no coinciden' : 
                            'Passwords do not match');
                    }
                    
                    if (password.length < 6) {
                        throw new Error(currentLanguage === 'es' ? 
                            'La contraseña debe tener al menos 6 caracteres' : 
                            'Password must be at least 6 characters');
                    }
                    
                    await createUser(email, password, name);
                    showAuthSuccess(currentLanguage === 'es' ? 
                        '¡Cuenta creada exitosamente!' : 
                        'Account created successfully!');
                    
                    setTimeout(() => {
                        closeAuthModal();
                        startOnboarding();
                    }, 1500);
                    
                } else {
                    await signIn(email, password);
                    showAuthSuccess(currentLanguage === 'es' ? 
                        '¡Bienvenida de vuelta!' : 
                        'Welcome back!');
                    
                    setTimeout(() => {
                        closeAuthModal();
                    }, 1500);
                }
            } catch (error) {
                showAuthError(error.message);
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = originalText;
            }
        }

        function startOnboarding() {
            document.getElementById('welcomeModal').classList.add('hidden');
            document.getElementById('userStatusBar').classList.remove('hidden');
            currentStep = 1;
            updateProgressDisplay();
            showCurrentStep();
        }

        function handleReturningUser() {
            document.getElementById('welcomeModal').classList.add('hidden');
            showAuthModal('signin');
        }

        // ===== FINAL STEP FUNCTIONS =====
        
        function downloadCalendar() {
            const instructions = `
Smart Mom Method - Calendar Instructions

1. Copy your calendar from the Claude response box
2. Open a new document:
   - Google Docs (docs.google.com)
   - Microsoft Word
   - Apple Notes
   - Any text editor

3. Paste your calendar into the document

4. Save the document with a memorable name like:
   "My Smart Mom Calendar - ${new Date().toLocaleDateString()}"

5. Optional: Print your calendar and put it on your fridge!

Tips for Success:
- Check off tasks as you complete them
- Tasks are sized to your available time: ${formData['hours-per-day'] || 'your schedule'}
- Scheduled for your best times: ${formData['preferred-times'] || 'your preferences'}
- It's okay to skip a day - just continue the next day
- Celebrate your wins, no matter how small!

You've got this, mama! 🌟
            `;
            
            const blob = new Blob([instructions], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'Smart_Mom_Calendar_Instructions.txt';
            document.body.appendChild(a);
            a.click();
            window.URL.revokeObjectURL(url);
            document.body.removeChild(a);
        }

        function viewCompleteProfile() {
            const profile = `
SMART MOM METHOD - YOUR COMPLETE PROFILE
========================================

Personal Information:
- Name: ${formData['user-name'] || 'Not provided'}
- Email: ${formData['user-email'] || 'Not provided'}

Family & Schedule:
- Family Structure: ${formData['family-structure'] || 'Not provided'}
- Daily Schedule: ${formData['daily-schedule'] || 'Not provided'}

Time Availability:
- Hours Per Day: ${formData['hours-per-day'] || 'Not specified'}
- Preferred Times: ${formData['preferred-times'] || 'Not specified'}

Selected Path: ${selectedPath}

${selectedPath === 'life-organization' ? `
Organization Goals:
- Priority: ${formData['organization-priority'] || 'Not specified'}
- Timeline: ${formData['organization-timeline'] || 'Not specified'}
` : ''}

${selectedPath === 'business-launch' || selectedPath === 'both' ? `
Business Goals:
- Investment Level: ${formData['investment-level'] || formData['both-investment'] || 'Not specified'}
- Income Timeline: ${formData['income-timeline'] || formData['both-timeline'] || 'Not specified'}
- Selected Business: ${formData['selected-business-idea'] || 'Not specified'}
` : ''}

Created on: ${new Date().toLocaleString()}
            `;
            
            alert(profile);
        }

        function startOver() {
            if (confirm(currentLanguage === 'es' ? 
                '¿Estás segura de que quieres comenzar de nuevo? Tu progreso actual se guardará.' : 
                'Are you sure you want to start over? Your current progress will be saved.')) {
                currentStep = 1;
                selectedPath = '';
                formData = {};
                aiResponses = { chatgpt: '', gemini: '', claude: '' };
                
                // Reset form fields
                document.querySelectorAll('.form-control').forEach(field => {
                    field.value = '';
                });
                
                // Reset checkboxes
                document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                    checkbox.checked = false;
                    checkbox.parentNode.classList.remove('checked');
                });
                
                // Reset path selection
                document.querySelectorAll('.path-option').forEach(option => {
                    option.classList.remove('selected');
                });
                
                updateProgressDisplay();
                showCurrentStep();
                saveUserProgress();
                
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // ===== EVENT LISTENERS =====
        
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize progress display
            updateProgressDisplay();
            
            // Check for returning user
            const savedUser = localStorage.getItem('smartMomUser');
            if (savedUser) {
                try {
                    const userData = JSON.parse(savedUser);
                    updateUserSession(userData);
                    loadUserProgress();
                    document.getElementById('welcomeModal').classList.add('hidden');
                } catch (error) {
                    console.error('Error loading user session:', error);
                }
            }
            
            // Auth form submission
            document.getElementById('authForm').addEventListener('submit', handleAuthSubmit);
            
            // Click outside modal to close
            document.getElementById('authModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeAuthModal();
                }
            });
            
            // Progress step clicks
            document.querySelectorAll('.progress-step').forEach((step, index) => {
                step.addEventListener('click', function() {
                    if (index + 1 <= currentStep) {
                        currentStep = index + 1;
                        updateProgressDisplay();
                        showCurrentStep();
                        saveUserProgress();
                    }
                });
            });
        });

        // Auto-save on input change
        document.addEventListener('change', function(e) {
            if (e.target.classList.contains('form-control')) {
                formData[e.target.id] = e.target.value;
                if (e.target.type === 'textarea') {
                    updateCharCounter(e.target);
                }
                saveUserProgress();
            }
        });
    </script>
</body>
</html>
