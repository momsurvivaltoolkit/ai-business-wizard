<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Mom Method - AI Interactive Calendar & Business Wizard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    
    <style>
        :root {
            --sage-green: #6B8E6B;
            --warm-cream: #FAF7F0;
            --deep-teal: #2D5B69;
            --charcoal: #2C3E50;
            --soft-gold: #D4A574;
            --light-sage: #E8F5E8;
            --sage-alpha: rgba(107, 142, 107, 0.1);
            --teal-alpha: rgba(45, 91, 105, 0.1);
            --gold-alpha: rgba(212, 165, 116, 0.1);
            --step-current: #3498db;
            --step-completed: #27ae60;
            --step-pending: #95a5a6;
            --button-next: #2ecc71;
            --button-done: #7f8c8d;
            --button-back: #e74c3c;
            --success-green: #27ae60;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--charcoal);
            background: var(--warm-cream);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* User Status Bar */
        .user-status-bar {
            background: white;
            padding: 16px 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 16px rgba(107, 142, 107, 0.08);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--sage-green), var(--deep-teal));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 18px;
        }

        .user-details h4 {
            color: var(--charcoal);
            margin: 0;
            font-size: 16px;
        }

        .user-details p {
            color: var(--charcoal);
            opacity: 0.7;
            margin: 0;
            font-size: 14px;
        }

        .user-actions {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-badge.signed-in {
            background: var(--light-sage);
            color: var(--sage-green);
        }

        .status-badge.guest {
            background: #fff3cd;
            color: #856404;
        }

        /* Authentication Modal */
        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(44, 62, 80, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
        }

        .auth-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .auth-content {
            background: white;
            border-radius: 24px;
            padding: 50px;
            max-width: 500px;
            width: 90%;
            position: relative;
            transform: translateY(20px);
            transition: transform 0.4s ease;
        }

        .auth-modal.active .auth-content {
            transform: translateY(0);
        }

        .auth-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--charcoal);
            opacity: 0.7;
        }

        .auth-close:hover {
            opacity: 1;
        }

        .auth-title {
            font-family: 'Playfair Display', serif;
            color: var(--sage-green);
            margin-bottom: 32px;
            font-size: 2rem;
            text-align: center;
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .auth-input {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--light-sage);
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }

        .auth-input:focus {
            outline: none;
            border-color: var(--sage-green);
            box-shadow: 0 0 0 4px var(--sage-alpha);
        }

        .auth-button {
            background: linear-gradient(135deg, var(--sage-green), #5A7A5A);
            color: white;
            padding: 18px 36px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .auth-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(107, 142, 107, 0.35);
        }

        .auth-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .auth-switch {
            text-align: center;
            margin-top: 24px;
            color: var(--charcoal);
            opacity: 0.8;
        }

        .auth-link {
            color: var(--sage-green);
            cursor: pointer;
            text-decoration: underline;
        }

        .auth-error {
            background: #ffebee;
            border: 1px solid #e57373;
            color: #c62828;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            font-size: 14px;
        }

        .auth-success {
            background: #e8f5e8;
            border: 1px solid var(--sage-green);
            color: var(--sage-green);
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            font-size: 14px;
        }

        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid var(--sage-green);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 8px;
            display: inline-block;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Welcome Modal */
        .welcome-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(44, 62, 80, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 1;
            visibility: visible;
            transition: all 0.4s ease;
        }

        .welcome-modal.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .welcome-content {
            background: white;
            border-radius: 24px;
            padding: 60px 50px;
            max-width: 600px;
            width: 90%;
            text-align: center;
            transform: translateY(0);
            transition: transform 0.4s ease;
            box-shadow: 0 30px 80px rgba(44, 62, 80, 0.2);
        }

        .welcome-content h2 {
            font-family: 'Playfair Display', serif;
            color: var(--sage-green);
            margin-bottom: 24px;
            font-size: 2.4rem;
            font-weight: 600;
        }

        .welcome-content p {
            color: var(--charcoal);
            margin-bottom: 40px;
            font-size: 1.1rem;
            line-height: 1.7;
            opacity: 0.8;
        }

        .welcome-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .welcome-btn {
            padding: 18px 36px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
            font-family: 'Inter', sans-serif;
        }

        .welcome-btn.primary {
            background: linear-gradient(135deg, var(--sage-green), #5A7A5A);
            color: white;
            box-shadow: 0 8px 24px rgba(107, 142, 107, 0.3);
        }

        .welcome-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(107, 142, 107, 0.4);
        }

        .welcome-btn.secondary {
            background: var(--deep-teal);
            color: white;
        }

        .welcome-btn.secondary:hover {
            background: #1E3D47;
            transform: translateY(-2px);
        }

        .welcome-btn.auth {
            background: var(--soft-gold);
            color: white;
        }

        .welcome-btn.auth:hover {
            background: #C79660;
            transform: translateY(-2px);
        }

        /* Premium Services Section */
        .premium-services-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 32px;
            box-shadow: 0 8px 32px rgba(44, 62, 80, 0.08);
            display: none;
        }

        .premium-services-section.active {
            display: block;
        }

        .premium-services-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .premium-services-header h2 {
            font-family: 'Playfair Display', serif;
            color: var(--charcoal);
            font-size: 2.2rem;
            margin-bottom: 16px;
        }

        .premium-services-header p {
            color: var(--charcoal);
            opacity: 0.8;
            font-size: 1.1rem;
        }

        .service-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .service-card {
            background: var(--warm-cream);
            border-radius: 20px;
            padding: 40px 30px;
            text-align: center;
            border: 3px solid transparent;
            transition: all 0.3s ease;
            position: relative;
        }

        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(107, 142, 107, 0.2);
            border-color: var(--sage-green);
        }

        .service-card.premium {
            border-color: var(--soft-gold);
            background: white;
        }

        .service-card.premium::before {
            content: "MOST POPULAR";
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--soft-gold);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
        }

        .service-price {
            font-size: 3rem;
            font-weight: 700;
            color: var(--sage-green);
            margin-bottom: 8px;
        }

        .service-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--charcoal);
            margin-bottom: 16px;
        }

        .service-description {
            color: var(--charcoal);
            opacity: 0.8;
            margin-bottom: 24px;
            line-height: 1.6;
        }

        .service-features {
            list-style: none;
            padding: 0;
            margin: 24px 0;
            text-align: left;
        }

        .service-features li {
            padding: 8px 0;
            position: relative;
            padding-left: 24px;
            color: var(--charcoal);
            opacity: 0.9;
        }

        .service-features li::before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: var(--sage-green);
            font-weight: bold;
        }

        .service-button {
            background: linear-gradient(135deg, var(--sage-green), #5A7A5A);
            color: white;
            padding: 16px 32px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 20px;
        }

        .service-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(107, 142, 107, 0.35);
        }

        .service-button.premium {
            background: linear-gradient(135deg, var(--soft-gold), #C79660);
        }

        .premium-nav-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .premium-nav-btn {
            padding: 16px 32px;
            border: 2px solid var(--sage-green);
            background: white;
            color: var(--sage-green);
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
        }

        .premium-nav-btn:hover {
            background: var(--sage-green);
            color: white;
            transform: translateY(-2px);
        }

        /* Consultation Options */
        .consultation-options {
            background: linear-gradient(135deg, var(--sage-alpha), var(--teal-alpha));
            border-radius: 20px;
            padding: 40px;
            margin: 40px 0;
            border: 2px solid var(--sage-green);
            display: none;
        }

        .consultation-options.active {
            display: block;
        }

        .consultation-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .consultation-header h3 {
            font-family: 'Playfair Display', serif;
            color: var(--charcoal);
            font-size: 1.8rem;
            margin-bottom: 12px;
        }

        .consultation-header p {
            color: var(--charcoal);
            opacity: 0.8;
        }

        .consultation-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
        }

        .consultation-card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .consultation-card:hover {
            transform: translateY(-5px);
        }

        .consultation-card h4 {
            color: var(--charcoal);
            margin-bottom: 16px;
            font-size: 1.3rem;
        }

        .consultation-card p {
            color: var(--charcoal);
            opacity: 0.8;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .consultation-btn {
            background: var(--deep-teal);
            color: white;
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .consultation-btn:hover {
            background: #1E3D47;
            transform: translateY(-2px);
        }

        /* Premium Access Button */
        .premium-access-container {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
        }

        .premium-access-btn {
            background: linear-gradient(135deg, var(--soft-gold), #C79660);
            color: white;
            padding: 18px 36px;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 24px rgba(212, 165, 116, 0.3);
        }

        .premium-access-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(212, 165, 116, 0.4);
        }

        /* Language Selection */
        .language-selector {
            text-align: center;
            margin-bottom: 40px;
            padding: 32px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(44, 62, 80, 0.08);
        }

        .language-selector h2 {
            margin-bottom: 24px;
            color: var(--charcoal);
            font-size: 1.6rem;
            font-weight: 600;
        }

        .language-buttons {
            display: flex;
            gap: 24px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .language-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 40px;
            background: var(--sage-green);
            color: white;
            border: none;
            border-radius: 16px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            min-width: 200px;
            box-shadow: 0 6px 20px rgba(107, 142, 107, 0.25);
        }

        .language-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(107, 142, 107, 0.35);
        }

        .language-btn.active {
            background: var(--soft-gold);
            transform: translateY(-2px);
        }

        .language-btn .flag {
            font-size: 2rem;
            margin-bottom: 12px;
        }

        .language-btn small {
            margin-top: 8px;
            opacity: 0.9;
        }

        /* Progress Container */
        .progress-container {
            background: white;
            border-radius: 20px;
            padding: 32px;
            margin-bottom: 32px;
            box-shadow: 0 8px 32px rgba(44, 62, 80, 0.08);
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .step-counter {
            font-weight: 700;
            color: var(--sage-green);
            font-size: 1.3rem;
        }

        .overall-progress {
            width: 100%;
            height: 12px;
            background: var(--light-sage);
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 32px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--sage-green), var(--deep-teal));
            transition: width 0.5s ease;
            border-radius: 6px;
            width: 10%;
        }

        .progress-bar {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 8px;
            margin-bottom: 0;
        }

        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 12px 8px;
            border-radius: 12px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--sage-alpha);
        }
        
        .progress-step:hover {
            background: var(--teal-alpha);
            transform: translateY(-2px);
        }

        .progress-step.active {
            background: var(--step-current);
            color: white;
        }

        .progress-step.completed {
            background: var(--step-completed);
            color: white;
        }

        .progress-step.pending {
            background: var(--step-pending);
            color: white;
        }

        .step-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-bottom: 8px;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .progress-step.active .step-number {
            background: rgba(255, 255, 255, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .step-text {
            font-size: 0.7rem;
            text-align: center;
            font-weight: 600;
            line-height: 1.2;
        }

        /* Main Card */
        .main-card {
            background: white;
            border-radius: 24px;
            box-shadow: 0 16px 48px rgba(44, 62, 80, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, var(--sage-green), var(--deep-teal));
            color: white;
            padding: 60px 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: shimmer 8s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
        }

        .header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            margin-bottom: 16px;
            position: relative;
            z-index: 1;
            font-weight: 600;
        }

        .header .subtitle {
            font-size: 1.3rem;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            font-weight: 400;
        }

        .badge {
            display: inline-block;
            background: var(--soft-gold);
            color: white;
            padding: 12px 28px;
            border-radius: 30px;
            font-weight: 700;
            margin-top: 24px;
            font-size: 1rem;
            position: relative;
            z-index: 1;
        }

        .header .cta-section {
            margin-top: 40px;
            position: relative;
            z-index: 1;
        }

        .btn-current {
            background: linear-gradient(135deg, var(--soft-gold), #C79660);
            color: white;
            box-shadow: 0 8px 24px rgba(212, 165, 116, 0.3);
            font-size: 1.2rem;
            padding: 20px 40px;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-current:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(212, 165, 116, 0.4);
        }

        .content {
            padding: 50px 40px;
        }

        .step-description {
            background: var(--light-sage);
            padding: 32px;
            border-radius: 16px;
            margin-bottom: 40px;
            border-left: 6px solid var(--sage-green);
        }

        .step-description h2 {
            font-family: 'Playfair Display', serif;
            color: var(--charcoal);
            margin-bottom: 16px;
            font-size: 2rem;
            font-weight: 600;
        }

        .step-description p {
            color: var(--charcoal);
            font-size: 1.1rem;
            opacity: 0.8;
        }

        .empowerment-message {
            background: linear-gradient(135deg, var(--gold-alpha), rgba(212, 165, 116, 0.15));
            border: 2px solid var(--soft-gold);
            border-radius: 20px;
            padding: 32px;
            margin: 32px 0;
            text-align: center;
        }

        .empowerment-title {
            color: var(--charcoal);
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 16px;
            font-family: 'Playfair Display', serif;
        }

        .empowerment-text {
            color: var(--charcoal);
            line-height: 1.7;
            opacity: 0.9;
        }

        /* Form Sections */
        .form-section {
            margin-bottom: 40px;
            padding: 40px;
            background: white;
            border-radius: 20px;
            border: 2px solid var(--light-sage);
            box-shadow: 0 4px 16px rgba(107, 142, 107, 0.08);
        }

        .form-section h2 {
            font-family: 'Playfair Display', serif;
            color: var(--charcoal);
            margin-bottom: 32px;
            font-size: 1.8rem;
            font-weight: 600;
            text-align: center;
        }

        .form-group {
            margin-bottom: 28px;
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            color: var(--charcoal);
            font-size: 1rem;
        }

        .required {
            color: var(--soft-gold);
            margin-left: 4px;
        }

        .form-control {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--light-sage);
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            background: var(--warm-cream);
            resize: vertical;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--sage-green);
            box-shadow: 0 0 0 4px var(--sage-alpha);
            background: white;
        }

        .validation-message {
            margin-top: 8px;
            font-size: 14px;
            color: #e57373;
        }

        .validation-message.success {
            color: var(--sage-green);
        }

        .char-counter {
            text-align: right;
            font-size: 12px;
            color: var(--charcoal);
            opacity: 0.6;
            margin-top: 4px;
        }

        /* AI Workflow Section */
        .ai-section {
            background: linear-gradient(135deg, var(--sage-alpha), var(--teal-alpha));
            border-radius: 20px;
            padding: 40px;
            margin: 40px 0;
            border: 2px solid var(--sage-green);
        }

        .ai-section h2 {
            font-family: 'Playfair Display', serif;
            color: var(--charcoal);
            margin-bottom: 24px;
            font-size: 1.8rem;
            text-align: center;
        }

        .ai-workflow {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 30px 0;
        }

        .ai-platform {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .ai-platform:hover {
            transform: translateY(-5px);
        }

        .ai-platform .icon {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        .ai-platform h3 {
            color: var(--charcoal);
            margin-bottom: 16px;
            font-size: 1.3rem;
        }

        .ai-platform .prompt-box {
            background: var(--warm-cream);
            border: 1px solid var(--light-sage);
            border-radius: 8px;
            padding: 16px;
            margin: 16px 0;
            font-size: 14px;
            text-align: left;
            max-height: 200px;
            overflow-y: auto;
            word-wrap: break-word;
            white-space: pre-wrap;
        }

        .ai-platform .response-area {
            width: 100%;
            min-height: 120px;
            margin: 16px 0;
            padding: 16px;
            border: 2px solid var(--light-sage);
            border-radius: 8px;
            resize: vertical;
        }

        .copy-btn {
            background: var(--sage-green);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            margin: 8px 4px;
            transition: background 0.3s ease;
        }

        .copy-btn:hover {
            background: #5A7A5A;
        }

        .open-ai-btn {
            background: var(--deep-teal);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            margin: 8px 4px;
            transition: all 0.3s ease;
        }

        .open-ai-btn:hover {
            background: #1E3D47;
            transform: translateY(-2px);
        }

        /* Path Selection */
        .path-selection {
            margin: 50px 0;
            text-align: center;
        }

        .path-selection h2 {
            font-family: 'Playfair Display', serif;
            color: var(--charcoal);
            margin-bottom: 40px;
            font-size: 2.2rem;
            font-weight: 600;
        }

        .path-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .path-option {
            background: var(--warm-cream);
            border-radius: 20px;
            padding: 40px 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            position: relative;
            text-align: center;
        }

        .path-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(107, 142, 107, 0.2);
            border-color: var(--sage-green);
        }

        .path-option.selected {
            border-color: var(--soft-gold);
            background: white;
            transform: translateY(-3px);
            box-shadow: 0 12px 36px rgba(212, 165, 116, 0.25);
        }

        .path-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            display: block;
        }

        .path-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--charcoal);
            margin-bottom: 16px;
        }

        .path-description {
            color: var(--charcoal);
            opacity: 0.8;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 40px 0;
            gap: 20px;
        }

        .nav-btn {
            padding: 16px 32px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
        }

        .nav-btn.back {
            background: var(--button-back);
            color: white;
        }

        .nav-btn.back:hover {
            background: #c0392b;
            transform: translateY(-2px);
        }

        .nav-btn.next {
            background: var(--button-next);
            color: white;
        }

        .nav-btn.next:hover {
            background: #27ae60;
            transform: translateY(-2px);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Success Message */
        .success-message {
            background: linear-gradient(135deg, var(--sage-green), var(--deep-teal));
            color: white;
            padding: 60px 40px;
            text-align: center;
            border-radius: 24px;
            margin: 40px 0;
        }

        .success-message h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        .success-message p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .success-actions {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .success-btn {
            background: var(--soft-gold);
            color: white;
            padding: 18px 36px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
        }

        .success-btn:hover {
            background: #C79660;
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(212, 165, 116, 0.3);
        }

        .success-btn.primary {
            background: var(--button-next);
        }

        /* Step Content Areas */
        .step-content {
            margin-bottom: 40px;
        }

        .step-content.hidden {
            display: none;
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .container {
                padding: 0 16px;
            }
            
            .header h1 {
                font-size: 2.2rem;
            }
            
            .header .subtitle {
                font-size: 1.1rem;
            }
            
            .content {
                padding: 30px 20px;
            }
            
            .progress-bar {
                grid-template-columns: repeat(5, 1fr);
                gap: 4px;
            }

            .progress-step {
                padding: 8px 4px;
            }

            .step-text {
                font-size: 0.6rem;
            }

            .step-number {
                width: 28px;
                height: 28px;
                font-size: 12px;
            }

            .language-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .language-btn {
                min-width: 280px;
            }

            .welcome-content {
                padding: 40px 30px;
            }

            .welcome-buttons {
                flex-direction: column;
            }

            .form-control {
                font-size: 16px;
                padding: 18px;
            }

            .auth-content {
                padding: 30px 20px;
            }

            .path-options {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .path-option {
                padding: 30px 20px;
            }

            .form-section {
                padding: 30px 20px;
            }

            .user-status-bar {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }

            .user-actions {
                width: 100%;
                justify-content: space-between;
            }

            .success-actions {
                flex-direction: column;
                align-items: center;
            }

            .success-btn {
                min-width: 100%;
                max-width: 300px;
            }

            .nav-buttons {
                flex-direction: column;
            }

            .nav-btn {
                width: 100%;
            }

            .ai-workflow {
                grid-template-columns: 1fr;
            }

            .service-grid {
                grid-template-columns: 1fr;
            }

            .service-card {
                padding: 30px 20px;
            }

            .consultation-cards {
                grid-template-columns: 1fr;
            }

            .premium-nav-buttons {
                flex-direction: column;
                align-items: center;
            }

            .premium-nav-btn {
                min-width: 100%;
                max-width: 300px;
            }
        }

        .hidden {
            display: none !important;
        }

        .path-specific-content {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Authentication Modal -->
    <div id="authModal" class="auth-modal">
        <div class="auth-content">
            <button class="auth-close" onclick="closeAuthModal()">&times;</button>
            <h2 class="auth-title" id="authTitle">Create Your Account</h2>
            
            <div id="authError" class="auth-error hidden"></div>
            <div id="authSuccess" class="auth-success hidden"></div>
            
            <form class="auth-form" id="authForm">
                <input type="text" id="authName" class="auth-input" placeholder="Your Name" style="display: none;">
                <input type="email" id="authEmail" class="auth-input" placeholder="Email Address" required>
                <input type="password" id="authPassword" class="auth-input" placeholder="Password" required>
                <input type="password" id="authConfirmPassword" class="auth-input" placeholder="Confirm Password" style="display: none;">
                
                <button type="submit" class="auth-button" id="authSubmitBtn">
                    <span id="authSubmitText">Create Account</span>
                </button>
            </form>
            
            <div class="auth-switch">
                <span id="authSwitchText">Already have an account?</span>
                <span class="auth-link" id="authSwitchLink" onclick="toggleAuthMode()">Sign In</span>
            </div>
        </div>
    </div>

    <!-- Welcome Modal -->
    <div id="welcomeModal" class="welcome-modal">
        <div class="welcome-content">
            <h2 id="welcomeTitle">Welcome to Smart Mom Method!</h2>
            <p id="welcomeDescription">Create your personalized interactive calendar and business plan in 10 comprehensive steps. This process will take approximately 30-40 minutes and will generate a complete interactive calendar and business strategy tailored specifically for busy moms like you.</p>
            <div class="welcome-buttons">
                <button class="welcome-btn primary" onclick="startOnboarding()">
                    <span id="welcomeStart">Get Started</span>
                </button>
                <button class="welcome-btn auth" onclick="showAuthModal('signup')">
                    <span id="welcomeCreate">Create Account & Save Progress</span>
                </button>
                <button class="welcome-btn secondary" onclick="handleReturningUser()">
                    <span id="welcomeReturning">I'm a returning user</span>
                </button>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- User Status Bar -->
        <div id="userStatusBar" class="user-status-bar hidden">
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">?</div>
                <div class="user-details">
                    <h4 id="userDisplayName">Guest User</h4>
                    <p id="userStatusText">Progress will not be saved</p>
                </div>
            </div>
            <div class="user-actions">
                <div class="status-badge guest" id="statusBadge">Guest Mode</div>
                <button onclick="showAuthModal('signup')" style="background: var(--sage-green); color: white; border: none; padding: 8px 16px; border-radius: 8px; font-size: 14px; cursor: pointer;">
                    Save Progress
                </button>
                <button id="signOutBtn" onclick="signOut()" style="background: none; border: 1px solid var(--charcoal); color: var(--charcoal); padding: 8px 16px; border-radius: 8px; font-size: 14px; cursor: pointer; display: none;">
                    Sign Out
                </button>
            </div>
        </div>

        <!-- Connection Status Notice -->
        <div id="connectionNotice" class="hidden" style="background: #fff3cd; border: 1px solid #ffeaa7; color: #856404; padding: 12px 20px; border-radius: 8px; margin-bottom: 20px; text-align: center; font-size: 14px;">
            <strong>üì° Local Mode:</strong> Server connection unavailable. Your data will be stored locally on this device.
        </div>

        <!-- Premium Services Section -->
        <div id="premiumServicesSection" class="premium-services-section">
            <div class="premium-services-header">
                <h2 id="premiumServicesTitle">Premium Smart Mom Services</h2>
                <p id="premiumServicesDescription">Get personalized calendars, training, and ongoing support to fast-track your success</p>
            </div>

            <div class="service-grid">
                <!-- Life Organization Calendar -->
                <div class="service-card">
                    <div class="service-price">$39</div>
                    <h3 class="service-title" id="lifeCalendarTitle">Life Organization Calendar</h3>
                    <p class="service-description" id="lifeCalendarDescription">12-week personalized home organization plan with weekly tasks, decluttering guides, and family routine optimization.</p>
                    <ul class="service-features">
                        <li id="lifeCalendarFeature1">Personalized 12-week calendar</li>
                        <li id="lifeCalendarFeature2">Home organization systems</li>
                        <li id="lifeCalendarFeature3">Family routine optimization</li>
                        <li id="lifeCalendarFeature4">Progress tracking tools</li>
                    </ul>
                    <button class="service-button" onclick="openStripeLink('life-calendar')">
                        <span id="getLifeCalendar">Get Life Calendar</span>
                    </button>
                </div>

                <!-- Life Training -->
                <div class="service-card premium">
                    <div class="service-price">$89</div>
                    <h3 class="service-title" id="lifeTrainingTitle">Complete Life Organization Training</h3>
                    <p class="service-description" id="lifeTrainingDescription">Comprehensive training program with calendar plus personal coaching, advanced organizing strategies, and ongoing support.</p>
                    <ul class="service-features">
                        <li id="lifeTrainingFeature1">Everything in Life Calendar</li>
                        <li id="lifeTrainingFeature2">Personal coaching session</li>
                        <li id="lifeTrainingFeature3">Advanced organizing strategies</li>
                        <li id="lifeTrainingFeature4">Email support for 30 days</li>
                    </ul>
                    <button class="service-button premium" onclick="openStripeLink('life-training')">
                        <span id="getLifeTraining">Get Life Training</span>
                    </button>
                </div>

                <!-- Business Calendar -->
                <div class="service-card">
                    <div class="service-price">$49</div>
                    <h3 class="service-title" id="businessCalendarTitle">Business Launch Calendar</h3>
                    <p class="service-description" id="businessCalendarDescription">12-week business implementation plan with market research, step-by-step launch guide, and revenue optimization strategies.</p>
                    <ul class="service-features">
                        <li id="businessCalendarFeature1">Personalized business calendar</li>
                        <li id="businessCalendarFeature2">Market research insights</li>
                        <li id="businessCalendarFeature3">Launch strategy guide</li>
                        <li id="businessCalendarFeature4">Revenue optimization tips</li>
                    </ul>
                    <button class="service-button" onclick="openStripeLink('business-calendar')">
                        <span id="getBusinessCalendar">Get Business Calendar</span>
                    </button>
                </div>

                <!-- Business Training -->
                <div class="service-card">
                    <div class="service-price">$100</div>
                    <h3 class="service-title" id="businessTrainingTitle">Complete Business Training Program</h3>
                    <p class="service-description" id="businessTrainingDescription">Full business training with calendar plus personal mentoring, advanced strategies, and ongoing business support.</p>
                    <ul class="service-features">
                        <li id="businessTrainingFeature1">Everything in Business Calendar</li>
                        <li id="businessTrainingFeature2">Personal business mentoring</li>
                        <li id="businessTrainingFeature3">Advanced growth strategies</li>
                        <li id="businessTrainingFeature4">Email support for 60 days</li>
                    </ul>
                    <button class="service-button" onclick="openStripeLink('business-training')">
                        <span id="getBusinessTraining">Get Business Training</span>
                    </button>
                </div>
            </div>

            <div class="premium-nav-buttons">
                <button class="premium-nav-btn" onclick="backToAssessment()">
                    <span id="backToAssessment">‚Üê Back to Assessment</span>
                </button>
                <button class="premium-nav-btn" onclick="backToMainPage()">
                    <span id="backToMainPage">Back to Main Page</span>
                </button>
            </div>
        </div>

        <!-- Progress Container -->
        <div class="progress-container">
            <div class="progress-header">
                <div class="step-counter" id="stepCounter">Step 1 of 10</div>
            </div>
            <div class="overall-progress">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-bar">
                <div class="progress-step active" id="step-1">
                    <span class="step-number">1</span>
                    <span class="step-text" id="stepText1">Language</span>
                </div>
                <div class="progress-step pending" id="step-2">
                    <span class="step-number">2</span>
                    <span class="step-text" id="stepText2">Basic Info</span>
                </div>
                <div class="progress-step pending" id="step-3">
                    <span class="step-number">3</span>
                    <span class="step-text" id="stepText3">Path Select</span>
                </div>
                <div class="progress-step pending" id="step-4">
                    <span class="step-number">4</span>
                    <span class="step-text" id="stepText4">Family</span>
                </div>
                <div class="progress-step pending" id="step-5">
                    <span class="step-number">5</span>
                    <span class="step-text" id="stepText5">Schedule</span>
                </div>
                <div class="progress-step pending" id="step-6">
                    <span class="step-number">6</span>
                    <span class="step-text" id="stepText6">Investment</span>
                </div>
                <div class="progress-step pending" id="step-7">
                    <span class="step-number">7</span>
                    <span class="step-text" id="stepText7">AI Ideas</span>
                </div>
                <div class="progress-step pending" id="step-8">
                    <span class="step-number">8</span>
                    <span class="step-text" id="stepText8">Research</span>
                </div>
                <div class="progress-step pending" id="step-9">
                    <span class="step-number">9</span>
                    <span class="step-text" id="stepText9">Calendar</span>
                </div>
                <div class="progress-step pending" id="step-10">
                    <span class="step-number">10</span>
                    <span class="step-text" id="stepText10">Dashboard</span>
                </div>
            </div>
        </div>

        <div class="main-card">
            <div class="header">
                <h1 id="mainTitle">Smart Mom Method</h1>
                <p class="subtitle" id="mainSubtitle">AI-Powered Interactive Calendar & Business Planning for Busy Moms</p>
                <span class="badge" id="freeBadge">100% Free</span>
                
                <div class="cta-section">
                    <button class="btn-current" onclick="scrollToCurrentStep()">
                        <span id="ctaButton">Start Your Free Interactive Calendar & Business Plan Now</span>
                    </button>
                    <p style="margin-top: 16px; font-size: 0.95rem; opacity: 0.9;" id="ctaSubtext">No email required to browse ‚Ä¢ Full process takes 30 minutes</p>
                </div>
            </div>

            <div class="content">
                <!-- Premium Access Button (NEW) -->
                <div class="premium-access-container">
                    <button class="premium-access-btn" onclick="showPremiumServices()">
                        <span id="viewPremiumServices">üíé View Premium Services</span>
                    </button>
                </div>

                <!-- Step 1: Language Selection -->
                <div id="step1Content" class="step-content">
                    <div class="language-selector">
                        <h2 id="languageTitle">Choose Your Language / Elige Tu Idioma</h2>
                        <div class="language-buttons">
                            <button class="language-btn active" onclick="changeLanguage('en')" id="lang-en">
                                <span class="flag">üá∫üá∏</span>
                                <span>English</span>
                                <small>Read and answer everything in English</small>
                            </button>
                            <button class="language-btn" onclick="changeLanguage('es')" id="lang-es">
                                <span class="flag">üá™üá∏</span>
                                <span>Espa√±ol</span>
                                <small>Lee y responde todo en espa√±ol</small>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Basic Information -->
                <div id="step2Content" class="step-content hidden">
                    <div class="step-description">
                        <h2 id="stepDesc2Title">Basic Information</h2>
                        <p id="stepDesc2Text">Let's get to know you better so we can create the perfect interactive calendar and business plan for your unique situation.</p>
                    </div>

                    <div class="form-section">
                        <h2 id="basicInfoTitle">Your Information</h2>
                        
                        <div class="form-group">
                            <label id="nameLabel">Your Name: <span class="required">*</span></label>
                            <input type="text" id="user-name" class="form-control" placeholder="Enter your name" onchange="validateField(this)" />
                            <div class="validation-message" id="user-name-validation"></div>
                        </div>

                        <div class="form-group">
                            <label id="emailLabel">Your Email: <span class="required">*</span></label>
                            <input type="email" id="user-email" class="form-control" placeholder="your.email@example.com" onchange="validateField(this)" />
                            <div class="validation-message" id="user-email-validation"></div>
                        </div>
                    </div>

                    <!-- Free Consultation Options (NEW) -->
                    <div id="consultationOptions" class="consultation-options">
                        <div class="consultation-header">
                            <h3 id="consultationTitle">Free Consultation Options</h3>
                            <p id="consultationDescription">Ready to accelerate your success? Book a free consultation call (optional)</p>
                        </div>
                        
                        <div class="consultation-cards">
                            <div class="consultation-card">
                                <h4 id="smartMomCallTitle">Free Smart Mom Call (30 min)</h4>
                                <p id="smartMomCallDescription">Perfect for life organization questions, family scheduling help, and home management strategies.</p>
                                <button class="consultation-btn" onclick="openCalendlyLink('smart-mom-call')">
                                    <span id="bookSmartMomCall">Book Smart Mom Call</span>
                                </button>
                            </div>
                            
                            <div class="consultation-card">
                                <h4 id="strategyCallTitle">Strategy Call (30 min)</h4>
                                <p id="strategyCallDescription">Focused on business planning, income strategies, and entrepreneurial guidance for busy moms.</p>
                                <button class="consultation-btn" onclick="openCalendlyLink('strategy-call')">
                                    <span id="bookStrategyCall">Book Strategy Call</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="empowerment-message">
                        <div class="empowerment-title" id="empowermentTitle">You're Already Successful!</div>
                        <p class="empowerment-text" id="empowermentText">Managing a family is running a complex organization. You have negotiation skills, time management expertise, and crisis resolution abilities that most CEOs would envy. Now let's channel that into YOUR organized life and successful business!</p>
                    </div>
                </div>

                <!-- Step 3: Path Selection -->
                <div id="step3Content" class="step-content hidden">
                    <div class="step-description">
                        <h2 id="stepDesc3Title">Choose Your Focus</h2>
                        <p id="stepDesc3Text">What brings you here today? Choose your main focus so we can customize your experience.</p>
                    </div>

                    <div class="path-selection">
                        <h2 id="pathSelectionTitle">Select Your Path:</h2>
                        
                        <div class="path-options">
                            <div class="path-option" data-path="life-organization" onclick="selectPath('life-organization')">
                                <span class="path-icon">üè†</span>
                                <h3 class="path-title" id="pathTitle1">Life Organization</h3>
                                <p class="path-description" id="pathDesc1">I need help organizing my daily life, family schedules, and home systems</p>
                            </div>
                            
                            <div class="path-option" data-path="business-launch" onclick="selectPath('business-launch')">
                                <span class="path-icon">üíº</span>
                                <h3 class="path-title" id="pathTitle2">Business Launch</h3>
                                <p class="path-description" id="pathDesc2">I want to start a business or create passive income streams</p>
                            </div>
                            
                            <div class="path-option" data-path="both" onclick="selectPath('both')">
                                <span class="path-icon">‚òÄÔ∏è</span>
                                <h3 class="path-title" id="pathTitle3">Both Life & Business</h3>
                                <p class="path-description" id="pathDesc3">I need life organization AND want to start a business</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Family Structure -->
                <div id="step4Content" class="step-content hidden">
                    <div class="step-description">
                        <h2 id="stepDesc4Title">Family Structure</h2>
                        <p id="stepDesc4Text">Understanding your family situation helps us create realistic recommendations that fit your actual life.</p>
                    </div>

                    <div class="form-section">
                        <h2 id="familyStructureTitle">Tell Us About Your Family</h2>
                        
                        <div class="form-group">
                            <label id="familyStructureLabel">Describe your family structure: <span class="required">*</span></label>
                            <textarea id="family-structure" class="form-control" maxlength="1000" 
                                      placeholder="Tell us about your family size, ages of children, support system, partner situation, etc. Be as detailed as you'd like - this helps us give you better recommendations."
                                      onchange="validateField(this)" oninput="updateCharCounter(this)"></textarea>
                            <div class="char-counter">
                                <span id="family-structure-counter">1000 characters remaining</span>
                            </div>
                            <div class="validation-message" id="family-structure-validation"></div>
                        </div>
                    </div>
                </div>

                <!-- Step 5: Daily Schedule -->
                <div id="step5Content" class="step-content hidden">
                    <div class="step-description">
                        <h2 id="stepDesc5Title">Daily Schedule</h2>
                        <p id="stepDesc5Text">Your daily routine determines what's realistic for your business and organization goals.</p>
                    </div>

                    <div class="form-section">
                        <h2 id="dailyScheduleTitle">Describe Your Typical Day</h2>
                        
                        <div class="form-group">
                            <label id="dailyScheduleLabel">What does your typical daily schedule look like? <span class="required">*</span></label>
                            <textarea id="daily-schedule" class="form-control" maxlength="1000" 
                                      placeholder="Describe your typical day from morning to night. Include work schedule, kids' activities, household responsibilities, available free time, etc."
                                      onchange="validateField(this)" oninput="updateCharCounter(this)"></textarea>
                            <div class="char-counter">
                                <span id="daily-schedule-counter">1000 characters remaining</span>
                            </div>
                            <div class="validation-message" id="daily-schedule-validation"></div>
                        </div>
                    </div>
                </div>

                <!-- Step 6: Investment & Timeline OR Organization Goals -->
                <div id="step6Content" class="step-content hidden">
                    <!-- Life Organization Path -->
                    <div id="lifeOrganizationQuestions" class="path-specific-content hidden">
                        <div class="step-description">
                            <h2 id="stepDesc6TitleLife">Organization Goals & Timeline</h2>
                            <p id="stepDesc6TextLife">Let's understand your organization priorities and how quickly you want to see results.</p>
                        </div>

                        <div class="form-section">
                            <h2 id="organizationGoalsTitle">Your Organization Goals</h2>
                            
                            <div class="form-group">
                                <label id="organizationPriorityLabel">What's your biggest organization challenge? <span class="required">*</span></label>
                                <select id="organization-priority" class="form-control" onchange="validateField(this)">
                                    <option value="" data-en="Choose your main challenge..." data-es="Elige tu desaf√≠o principal...">Choose your main challenge...</option>
                                    <option value="daily-chaos" data-en="Daily schedule chaos - need morning/evening routines" data-es="Caos en horario diario - necesito rutinas ma√±ana/noche">Daily schedule chaos - need morning/evening routines</option>
                                    <option value="home-clutter" data-en="Home clutter - need decluttering systems" data-es="Desorden en casa - necesito sistemas de orden">Home clutter - need decluttering systems</option>
                                    <option value="meal-planning" data-en="Meal planning - need food organization" data-es="Planificaci√≥n de comidas - necesito organizaci√≥n de alimentos">Meal planning - need food organization</option>
                                    <option value="kids-activities" data-en="Kids' activities - need family scheduling" data-es="Actividades de ni√±os - necesito horarios familiares">Kids' activities - need family scheduling</option>
                                    <option value="paper-digital" data-en="Paper/digital mess - need filing systems" data-es="Desorden papel/digital - necesito sistemas de archivo">Paper/digital mess - need filing systems</option>
                                    <option value="all-above" data-en="All of the above - need complete overhaul" data-es="Todo lo anterior - necesito renovaci√≥n completa">All of the above - need complete overhaul</option>
                                </select>
                                <div class="validation-message" id="organization-priority-validation"></div>
                            </div>

                            <div class="form-group">
                                <label id="organizationTimelineLabel">How soon do you want an organized home? <span class="required">*</span></label>
                                <select id="organization-timeline" class="form-control" onchange="validateField(this)">
                                    <option value="" data-en="Choose your timeline..." data-es="Elige tu cronograma...">Choose your timeline...</option>
                                    <option value="urgent" data-en="Urgent - within 30 days" data-es="Urgente - en 30 d√≠as">Urgent - within 30 days</option>
                                    <option value="moderate" data-en="Moderate - within 3 months" data-es="Moderado - en 3 meses">Moderate - within 3 months</option>
                                    <option value="relaxed" data-en="Relaxed - within 6 months" data-es="Relajado - en 6 meses">Relaxed - within 6 months</option>
                                    <option value="gradual" data-en="Gradual - take my time" data-es="Gradual - tomarme mi tiempo">Gradual - take my time</option>
                                </select>
                                <div class="validation-message" id="organization-timeline-validation"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Business Launch Path -->
                    <div id="businessLaunchQuestions" class="path-specific-content hidden">
                        <div class="step-description">
                            <h2 id="stepDesc6Title">Investment & Timeline</h2>
                            <p id="stepDesc6Text">Understanding your budget and timeline helps us recommend realistic business options.</p>
                        </div>

                        <div class="form-section">
                            <h2 id="investmentTitle">Investment Level & Timeline</h2>
                            
                            <div class="form-group">
                                <label id="investmentLevelLabel">How much can you invest to start? <span class="required">*</span></label>
                                <select id="investment-level" class="form-control" onchange="validateField(this)">
                                    <option value="" id="chooseInvestmentLevel">Choose your investment level...</option>
                                    <option value="no-money" data-en="No money to invest ($0)" data-es="Sin dinero para invertir ($0)">No money to invest ($0)</option>
                                    <option value="minimal" data-en="Minimal investment ($1-$500)" data-es="Inversi√≥n m√≠nima ($1-$500)">Minimal investment ($1-$500)</option>
                                    <option value="moderate" data-en="Moderate investment ($500-$2000)" data-es="Inversi√≥n moderada ($500-$2000)">Moderate investment ($500-$2000)</option>
                                    <option value="flexible" data-en="Flexible budget ($2000+)" data-es="Presupuesto flexible ($2000+)">Flexible budget ($2000+)</option>
                                </select>
                                <div class="validation-message" id="investment-level-validation"></div>
                            </div>

                            <div class="form-group">
                                <label id="incomeTimelineLabel">When do you need income? <span class="required">*</span></label>
                                <select id="income-timeline" class="form-control" onchange="validateField(this)">
                                    <option value="" id="chooseTimeline">Choose your timeline...</option>
                                    <option value="immediate" data-en="Need income immediately (0-3 months)" data-es="Necesito ingresos inmediatamente (0-3 meses)">Need income immediately (0-3 months)</option>
                                    <option value="moderate" data-en="Income needed soon (3-6 months)" data-es="Necesito ingresos pronto (3-6 meses)">Income needed soon (3-6 months)</option>
                                    <option value="patient" data-en="Can wait for income (6-12 months)" data-es="Puedo esperar ingresos (6-12 meses)">Can wait for income (6-12 months)</option>
                                    <option value="long-term" data-en="Long-term planning (12+ months)" data-es="Planificaci√≥n a largo plazo (12+ meses)">Long-term planning (12+ months)</option>
                                </select>
                                <div class="validation-message" id="income-timeline-validation"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Both Path -->
                    <div id="bothPathQuestions" class="path-specific-content hidden">
                        <div class="step-description">
                            <h2 id="stepDesc6TitleBoth">Goals, Investment & Timeline</h2>
                            <p id="stepDesc6TextBoth">Let's understand both your organization goals and business timeline.</p>
                        </div>

                        <div class="form-section">
                            <h2 id="bothGoalsTitle">Organization & Business Goals</h2>
                            
                            <div class="form-group">
                                <label id="bothPriorityLabel">What needs attention first? <span class="required">*</span></label>
                                <select id="both-priority" class="form-control" onchange="validateField(this)">
                                    <option value="" data-en="Choose your priority..." data-es="Elige tu prioridad...">Choose your priority...</option>
                                    <option value="organize-first" data-en="Get organized first, then start business" data-es="Organizarme primero, luego comenzar negocio">Get organized first, then start business</option>
                                    <option value="business-first" data-en="Start earning quickly, organize as I go" data-es="Empezar a ganar r√°pido, organizar mientras avanzo">Start earning quickly, organize as I go</option>
                                    <option value="simultaneous" data-en="Work on both simultaneously" data-es="Trabajar en ambos simult√°neamente">Work on both simultaneously</option>
                                    <option value="integrated" data-en="Create business from organization skills" data-es="Crear negocio de habilidades de organizaci√≥n">Create business from organization skills</option>
                                </select>
                                <div class="validation-message" id="both-priority-validation"></div>
                            </div>

                            <div class="form-group">
                                <label id="bothInvestmentLabel">Business investment available? <span class="required">*</span></label>
                                <select id="both-investment" class="form-control" onchange="validateField(this)">
                                    <option value="" data-en="Choose investment level..." data-es="Elige nivel de inversi√≥n...">Choose investment level...</option>
                                    <option value="no-money" data-en="No money to invest ($0)" data-es="Sin dinero para invertir ($0)">No money to invest ($0)</option>
                                    <option value="minimal" data-en="Minimal investment ($1-$500)" data-es="Inversi√≥n m√≠nima ($1-$500)">Minimal investment ($1-$500)</option>
                                    <option value="moderate" data-en="Moderate investment ($500-$2000)" data-es="Inversi√≥n moderada ($500-$2000)">Moderate investment ($500-$2000)</option>
                                    <option value="flexible" data-en="Flexible budget ($2000+)" data-es="Presupuesto flexible ($2000+)">Flexible budget ($2000+)</option>
                                </select>
                                <div class="validation-message" id="both-investment-validation"></div>
                            </div>

                            <div class="form-group">
                                <label id="bothTimelineLabel">Timeline for both goals? <span class="required">*</span></label>
                                <select id="both-timeline" class="form-control" onchange="validateField(this)">
                                    <option value="" data-en="Choose your timeline..." data-es="Elige tu cronograma...">Choose your timeline...</option>
                                    <option value="urgent" data-en="Urgent - need results in 30 days" data-es="Urgente - necesito resultados en 30 d√≠as">Urgent - need results in 30 days</option>
                                    <option value="moderate" data-en="Moderate - 3-6 months is fine" data-es="Moderado - 3-6 meses est√° bien">Moderate - 3-6 months is fine</option>
                                    <option value="patient" data-en="Patient - 6-12 months works" data-es="Paciente - 6-12 meses funciona">Patient - 6-12 months works</option>
                                    <option value="flexible" data-en="Flexible - quality over speed" data-es="Flexible - calidad sobre velocidad">Flexible - quality over speed</option>
                                </select>
                                <div class="validation-message" id="both-timeline-validation"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 7: AI Business Ideas -->
                <div id="step7Content" class="step-content hidden">
                    <div class="step-description">
                        <h2 id="stepDesc7Title">AI Business Ideas</h2>
                        <p id="stepDesc7Text">We'll use ChatGPT to generate personalized business ideas based on your specific situation.</p>
                    </div>

                    <div class="ai-section">
                        <h2>ü§ñ ChatGPT Business Ideas Generator</h2>
                        
                        <div class="ai-workflow">
                            <div class="ai-platform">
                                <div class="icon">üöÄ</div>
                                <h3>Step 1: Get AI Ideas</h3>
                                
                                <div class="prompt-box" id="chatgptPrompt">
                                    Loading personalized prompt...
                                </div>
                                
                                <div style="margin: 16px 0;">
                                    <button class="copy-btn" onclick="copyPrompt('chatgpt')" id="copyChatGPTBtn">Copy Prompt</button>
                                    <button class="copy-btn" onclick="viewFullPrompt('chatgpt')" style="background: var(--deep-teal);" id="viewChatGPTBtn">View Full Prompt</button>
                                    <button class="open-ai-btn" onclick="openAI('chatgpt')" id="openChatGPTBtn">Open ChatGPT</button>
                                </div>
                                
                                <label>Paste ChatGPT's response here:</label>
                                <textarea class="response-area" id="chatgpt-response" 
                                          placeholder="Copy and paste the business ideas from ChatGPT here..."
                                          onchange="saveAIResponse('chatgpt', this.value)"></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 8: Market Research -->
                <div id="step8Content" class="step-content hidden">
                    <div class="step-description">
                        <h2 id="stepDesc8Title">Market Research</h2>
                        <p id="stepDesc8Text">Now we'll use Google Gemini to research the market for your chosen business idea.</p>
                    </div>

                    <div class="ai-section">
                        <h2>üìä Gemini Market Research</h2>
                        
                        <div class="ai-workflow">
                            <div class="ai-platform">
                                <div class="icon">üìà</div>
                                <h3>Step 2: Market Analysis</h3>
                                
                                <div class="prompt-box" id="geminiPrompt">
                                    Select a business idea from Step 7 first...
                                </div>
                                
                                <div style="margin: 16px 0;">
                                    <label id="selectedIdeaLabel">Choose your favorite business idea from ChatGPT:</label>
                                    <input type="text" id="selected-business-idea" class="form-control" 
                                           placeholder="Type or paste your chosen business idea here..."
                                           onchange="updateGeminiPrompt(this.value)" oninput="updateGeminiPrompt(this.value)">
                                </div>
                                
                                <div style="margin: 16px 0;">
                                    <button class="copy-btn" onclick="copyPrompt('gemini')" id="copyGeminiBtn">Copy Prompt</button>
                                    <button class="copy-btn" onclick="viewFullPrompt('gemini')" style="background: var(--deep-teal);" id="viewGeminiBtn">View Full Prompt</button>
                                    <button class="open-ai-btn" onclick="openAI('gemini')" id="openGeminiBtn">Open Gemini</button>
                                </div>
                                
                                <label>Paste Gemini's market research here:</label>
                                <textarea class="response-area" id="gemini-response" 
                                          placeholder="Copy and paste the market research from Gemini here..."
                                          onchange="saveAIResponse('gemini', this.value)"></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 9: Calendar Creation -->
                <div id="step9Content" class="step-content hidden">
                    <div class="step-description">
                        <h2 id="stepDesc9Title">Calendar Creation</h2>
                        <p id="stepDesc9Text">Finally, we'll use Claude to create your personalized 12-week implementation calendar with ADHD-friendly features.</p>
                    </div>

                    <div class="ai-section">
                        <h2>üìÖ Claude Interactive Calendar Creator</h2>
                        
                        <div class="ai-workflow">
                            <div class="ai-platform">
                                <div class="icon">üóìÔ∏è</div>
                                <h3>Step 3: ADHD-Friendly Interactive Calendar</h3>
                                
                                <div class="prompt-box" id="claudePrompt">
                                    Complete Steps 7 and 8 first...
                                </div>
                                
                                <div style="margin: 16px 0;">
                                    <button class="copy-btn" onclick="copyPrompt('claude')" id="copyClaudeBtn">Copy Prompt</button>
                                    <button class="copy-btn" onclick="viewFullPrompt('claude')" style="background: var(--deep-teal);" id="viewClaudeBtn">View Full Prompt</button>
                                    <button class="open-ai-btn" onclick="openAI('claude')" id="openClaudeBtn">Open Claude</button>
                                </div>
                                
                                <div style="background: var(--light-sage); padding: 16px; border-radius: 8px; margin: 16px 0;">
                                    <p style="font-size: 14px; color: var(--charcoal); margin: 0;">
                                        <strong>üéØ What Claude Will Create:</strong><br>
                                        ‚Ä¢ Interactive daily calendar with checkboxes<br>
                                        ‚Ä¢ Maximum 4 tasks per day (ADHD-friendly)<br>
                                        ‚Ä¢ Each task broken into 3-7 tiny steps<br>
                                        ‚Ä¢ Visual progress tracking with emojis<br>
                                        ‚Ä¢ Built-in breaks and transitions<br>
                                        ‚Ä¢ Color-coded for easy scanning
                                    </p>
                                </div>
                                
                                <label>Paste Claude's interactive calendar here:</label>
                                <textarea class="response-area" id="claude-response" 
                                          placeholder="Copy and paste the complete 84-day interactive calendar from Claude here..."
                                          onchange="saveAIResponse('claude', this.value)"></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 10: Final Dashboard -->
                <div id="step10Content" class="step-content hidden">
                    <div class="step-description">
                        <h2 id="stepDesc10Title">Your Complete Business Plan</h2>
                        <p id="stepDesc10Text">Congratulations! Here's your complete personalized business plan and next steps.</p>
                    </div>

                    <!-- Success Message -->
                    <div id="finalSuccessMessage" class="success-message">
                        <h2>üéâ Congratulations!</h2>
                        <p id="successMainText">Your Smart Mom Method interactive calendar and business plan have been created successfully!</p>
                        
                        <div style="background: rgba(255,255,255,0.15); padding: 30px; border-radius: 16px; margin: 30px 0;">
                            <h3 style="margin-bottom: 15px;">What You've Accomplished:</h3>
                            <ul style="list-style: none; padding: 0; text-align: left;">
                                <li style="margin: 10px 0;">‚úÖ Completed comprehensive assessment</li>
                                <li style="margin: 10px 0;" id="accomplishment2">‚úÖ Received AI-generated ideas customized to your situation</li>
                                <li style="margin: 10px 0;" id="accomplishment3">‚úÖ Got market research insights</li>
                                <li style="margin: 10px 0;">‚úÖ Created your ADHD-friendly interactive calendar</li>
                                <li style="margin: 10px 0;">‚úÖ Your progress is automatically saved</li>
                            </ul>
                        </div>

                        <div style="background: rgba(255,255,255,0.2); padding: 24px; border-radius: 12px; margin: 24px 0;">
                            <h3 style="margin-bottom: 12px;">üìã How to Use Your Calendar:</h3>
                            <ol style="list-style: decimal; padding-left: 20px; text-align: left;">
                                <li style="margin: 8px 0;">Copy your calendar from the Claude response box above</li>
                                <li style="margin: 8px 0;">Paste it into a document (Google Docs, Word, or Notes app)</li>
                                <li style="margin: 8px 0;">Print it out or keep it digital - whatever works for you!</li>
                                <li style="margin: 8px 0;">Check off tasks as you complete them</li>
                                <li style="margin: 8px 0;">Remember: Maximum 4 tasks per day to avoid overwhelm</li>
                            </ol>
                        </div>

                        <div class="success-actions">
                            <button class="success-btn primary" onclick="downloadCalendar()">
                                Download Calendar Instructions
                            </button>
                            
                            <button class="success-btn" onclick="viewCompleteProfile()">
                                View Complete Profile
                            </button>
                            
                            <button class="success-btn" onclick="startOver()">
                                Start New Assessment
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Navigation Buttons -->
                <div class="nav-buttons" id="navButtons">
                    <button class="nav-btn back" id="backBtn" onclick="previousStep()" disabled>
                        ‚Üê Previous Step
                    </button>
                    <button class="nav-btn next" id="nextBtn" onclick="nextStep()">
                        Next Step ‚Üí
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===== GLOBAL VARIABLES =====
        let currentLanguage = 'en';
        let selectedPath = '';
        let authMode = 'signup';
        let currentUser = null;
        let formData = {};
        let currentStep = 1;
        let useLocalStorageOnly = false; // PRESERVED - DO NOT MODIFY
        let aiResponses = {
            chatgpt: '',
            gemini: '',
            claude: ''
        };

        const TOTAL_STEPS = 10;

        // ===== COMPLETE TRANSLATION SYSTEM =====
        const translations = {
            en: {
                welcomeTitle: "Welcome to Smart Mom Method!",
                welcomeDescription: "Create your personalized interactive calendar and business plan in 10 comprehensive steps. This process will take approximately 30-40 minutes and will generate a complete interactive calendar and business strategy tailored specifically for busy moms like you.",
                welcomeStart: "Get Started",
                welcomeCreate: "Create Account & Save Progress",
                welcomeReturning: "I'm a returning user",
                mainTitle: "Smart Mom Method",
                mainSubtitle: "AI-Powered Interactive Calendar & Business Planning for Busy Moms",
                freeBadge: "100% Free",
                ctaButton: "Start Your Free Interactive Calendar & Business Plan Now",
                ctaSubtext: "No email required to browse ‚Ä¢ Full process takes 30 minutes",
                languageTitle: "Choose Your Language / Elige Tu Idioma",
                viewPremiumServices: "üíé View Premium Services",
                premiumServicesTitle: "Premium Smart Mom Services",
                premiumServicesDescription: "Get personalized calendars, training, and ongoing support to fast-track your success",
                lifeCalendarTitle: "Life Organization Calendar",
                lifeCalendarDescription: "12-week personalized home organization plan with weekly tasks, decluttering guides, and family routine optimization.",
                lifeCalendarFeature1: "Personalized 12-week calendar",
                lifeCalendarFeature2: "Home organization systems",
                lifeCalendarFeature3: "Family routine optimization",
                lifeCalendarFeature4: "Progress tracking tools",
                getLifeCalendar: "Get Life Calendar",
                lifeTrainingTitle: "Complete Life Organization Training",
                lifeTrainingDescription: "Comprehensive training program with calendar plus personal coaching, advanced organizing strategies, and ongoing support.",
                lifeTrainingFeature1: "Everything in Life Calendar",
                lifeTrainingFeature2: "Personal coaching session",
                lifeTrainingFeature3: "Advanced organizing strategies",
                lifeTrainingFeature4: "Email support for 30 days",
                getLifeTraining: "Get Life Training",
                businessCalendarTitle: "Business Launch Calendar",
                businessCalendarDescription: "12-week business implementation plan with market research, step-by-step launch guide, and revenue optimization strategies.",
                businessCalendarFeature1: "Personalized business calendar",
                businessCalendarFeature2: "Market research insights",
                businessCalendarFeature3: "Launch strategy guide",
                businessCalendarFeature4: "Revenue optimization tips",
                getBusinessCalendar: "Get Business Calendar",
                businessTrainingTitle: "Complete Business Training Program",
                businessTrainingDescription: "Full business training with calendar plus personal mentoring, advanced strategies, and ongoing business support.",
                businessTrainingFeature1: "Everything in Business Calendar",
                businessTrainingFeature2: "Personal business mentoring",
                businessTrainingFeature3: "Advanced growth strategies",
                businessTrainingFeature4: "Email support for 60 days",
                getBusinessTraining: "Get Business Training",
                backToAssessment: "‚Üê Back to Assessment",
                backToMainPage: "Back to Main Page",
                consultationTitle: "Free Consultation Options",
                consultationDescription: "Ready to accelerate your success? Book a free consultation call (optional)",
                smartMomCallTitle: "Free Smart Mom Call (30 min)",
                smartMomCallDescription: "Perfect for life organization questions, family scheduling help, and home management strategies.",
                bookSmartMomCall: "Book Smart Mom Call",
                strategyCallTitle: "Strategy Call (30 min)",
                strategyCallDescription: "Focused on business planning, income strategies, and entrepreneurial guidance for busy moms.",
                bookStrategyCall: "Book Strategy Call",
                stepDesc2Title: "Basic Information",
                stepDesc2Text: "Let's get to know you better so we can create the perfect interactive calendar and business plan for your unique situation.",
                basicInfoTitle: "Your Information",
                nameLabel: "Your Name:",
                emailLabel: "Your Email:",
                empowermentTitle: "You're Already Successful!",
                empowermentText: "Managing a family is running a complex organization. You have negotiation skills, time management expertise, and crisis resolution abilities that most CEOs would envy. Now let's channel that into YOUR organized life and successful business!",
                stepDesc3Title: "Choose Your Focus",
                stepDesc3Text: "What brings you here today? Choose your main focus so we can customize your experience.",
                pathSelectionTitle: "Select Your Path:",
                pathTitle1: "Life Organization",
                pathDesc1: "I need help organizing my daily life, family schedules, and home systems",
                pathTitle2: "Business Launch", 
                pathDesc2: "I want to start a business or create passive income streams",
                pathTitle3: "Both Life & Business",
                pathDesc3: "I need life organization AND want to start a business",
                stepDesc4Title: "Family Structure",
                stepDesc4Text: "Understanding your family situation helps us create realistic recommendations that fit your actual life.",
                familyStructureTitle: "Tell Us About Your Family",
                familyStructureLabel: "Describe your family structure:",
                stepDesc5Title: "Daily Schedule",
                stepDesc5Text: "Your daily routine determines what's realistic for your business and organization goals.",
                dailyScheduleTitle: "Describe Your Typical Day",
                dailyScheduleLabel: "What does your typical daily schedule look like?",
                stepDesc6Title: "Investment & Timeline",
                stepDesc6Text: "Understanding your budget and timeline helps us recommend realistic business options.",
                investmentTitle: "Investment Level & Timeline",
                investmentLevelLabel: "How much can you invest to start?",
                incomeTimelineLabel: "When do you need income?",
                stepDesc7Title: "AI Business Ideas",
                stepDesc7Text: "We'll use ChatGPT to generate personalized business ideas based on your specific situation.",
                stepDesc8Title: "Market Research",
                stepDesc8Text: "Now we'll use Google Gemini to research the market for your chosen business idea.",
                stepDesc9Title: "Calendar Creation",
                stepDesc9Text: "Finally, we'll use Claude to create your personalized 12-week implementation calendar with ADHD-friendly features.",
                stepDesc10Title: "Your Complete Business Plan",
                stepDesc10Text: "Congratulations! Here's your complete personalized business plan and next steps.",
                chooseInvestmentLevel: "Choose your investment level...",
                chooseTimeline: "Choose your timeline...",
                copyChatGPTBtn: "Copy Prompt",
                openChatGPTBtn: "Open ChatGPT",
                viewChatGPTBtn: "View Full Prompt",
                copyGeminiBtn: "Copy Prompt", 
                openGeminiBtn: "Open Gemini",
                viewGeminiBtn: "View Full Prompt",
                copyClaudeBtn: "Copy Prompt",
                openClaudeBtn: "Open Claude",
                viewClaudeBtn: "View Full Prompt"
            },
            es: {
                welcomeTitle: "¬°Bienvenida al M√©todo Smart Mom!",
                welcomeDescription: "Crea tu calendario interactivo personalizado y plan de negocio en 10 pasos completos. Este proceso tomar√° aproximadamente 30-40 minutos y generar√° un calendario interactivo completo y estrategia de negocio dise√±ada espec√≠ficamente para madres ocupadas como t√∫.",
                welcomeStart: "Comenzar",
                welcomeCreate: "Crear Cuenta y Guardar Progreso", 
                welcomeReturning: "Soy usuario que regresa",
                mainTitle: "M√©todo Smart Mom",
                mainSubtitle: "Calendario Interactivo y Planificaci√≥n de Negocios con IA para Madres Ocupadas",
                freeBadge: "100% Gratis",
                ctaButton: "Comienza Tu Calendario Interactivo y Plan de Negocio Gratis Ahora",
                ctaSubtext: "No se requiere email para navegar ‚Ä¢ El proceso completo toma 30 minutos",
                languageTitle: "Choose Your Language / Elige Tu Idioma",
                viewPremiumServices: "üíé Ver Servicios Premium",
                premiumServicesTitle: "Servicios Premium Smart Mom",
                premiumServicesDescription: "Obt√©n calendarios personalizados, entrenamiento y soporte continuo para acelerar tu √©xito",
                lifeCalendarTitle: "Calendario de Organizaci√≥n de Vida",
                lifeCalendarDescription: "Plan personalizado de organizaci√≥n del hogar de 12 semanas con tareas semanales, gu√≠as de orden y optimizaci√≥n de rutinas familiares.",
                lifeCalendarFeature1: "Calendario personalizado de 12 semanas",
                lifeCalendarFeature2: "Sistemas de organizaci√≥n del hogar",
                lifeCalendarFeature3: "Optimizaci√≥n de rutinas familiares",
                lifeCalendarFeature4: "Herramientas de seguimiento de progreso",
                getLifeCalendar: "Obtener Calendario de Vida",
                lifeTrainingTitle: "Entrenamiento Completo de Organizaci√≥n de Vida",
                lifeTrainingDescription: "Programa integral de entrenamiento con calendario m√°s coaching personal, estrategias avanzadas de organizaci√≥n y soporte continuo.",
                lifeTrainingFeature1: "Todo en Calendario de Vida",
                lifeTrainingFeature2: "Sesi√≥n de coaching personal",
                lifeTrainingFeature3: "Estrategias avanzadas de organizaci√≥n",
                lifeTrainingFeature4: "Soporte por email por 30 d√≠as",
                getLifeTraining: "Obtener Entrenamiento de Vida",
                businessCalendarTitle: "Calendario de Lanzamiento de Negocio",
                businessCalendarDescription: "Plan de implementaci√≥n de negocio de 12 semanas con investigaci√≥n de mercado, gu√≠a de lanzamiento paso a paso y estrategias de optimizaci√≥n de ingresos.",
                businessCalendarFeature1: "Calendario de negocio personalizado",
                businessCalendarFeature2: "Insights de investigaci√≥n de mercado",
                businessCalendarFeature3: "Gu√≠a de estrategia de lanzamiento",
                businessCalendarFeature4: "Consejos de optimizaci√≥n de ingresos",
                getBusinessCalendar: "Obtener Calendario de Negocio",
                businessTrainingTitle: "Programa Completo de Entrenamiento de Negocio",
                businessTrainingDescription: "Entrenamiento completo de negocio con calendario m√°s mentor√≠a personal, estrategias avanzadas y soporte continuo de negocio.",
                businessTrainingFeature1: "Todo en Calendario de Negocio",
                businessTrainingFeature2: "Mentor√≠a personal de negocio",
                businessTrainingFeature3: "Estrategias avanzadas de crecimiento",
                businessTrainingFeature4: "Soporte por email por 60 d√≠as",
                getBusinessTraining: "Obtener Entrenamiento de Negocio",
                backToAssessment: "‚Üê Volver a Evaluaci√≥n",
                backToMainPage: "Volver a P√°gina Principal",
                consultationTitle: "Opciones de Consulta Gratis",
                consultationDescription: "¬øLista para acelerar tu √©xito? Reserva una llamada de consulta gratis (opcional)",
                smartMomCallTitle: "Llamada Smart Mom Gratis (30 min)",
                smartMomCallDescription: "Perfecta para preguntas de organizaci√≥n de vida, ayuda con horarios familiares y estrategias de manejo del hogar.",
                bookSmartMomCall: "Reservar Llamada Smart Mom",
                strategyCallTitle: "Llamada de Estrategia (30 min)",
                strategyCallDescription: "Enfocada en planificaci√≥n de negocio, estrategias de ingresos y orientaci√≥n empresarial para madres ocupadas.",
                bookStrategyCall: "Reservar Llamada de Estrategia",
                stepDesc2Title: "Informaci√≥n B√°sica",
                stepDesc2Text: "Conozc√°monos mejor para crear el calendario interactivo y plan de negocio perfecto para tu situaci√≥n √∫nica.",
                basicInfoTitle: "Tu Informaci√≥n",
                nameLabel: "Tu Nombre:",
                emailLabel: "Tu Email:",
                empowermentTitle: "¬°Ya Eres Exitosa!",
                empowermentText: "Manejar una familia es dirigir una organizaci√≥n compleja. Tienes habilidades de negociaci√≥n, experiencia en gesti√≥n del tiempo y capacidades de resoluci√≥n de crisis que la mayor√≠a de los CEOs envidiar√≠an. ¬°Ahora canalicemos eso hacia TU vida organizada y negocio exitoso!",
                stepDesc3Title: "Elige Tu Enfoque",
                stepDesc3Text: "¬øQu√© te trae aqu√≠ hoy? Elige tu enfoque principal para que podamos personalizar tu experiencia.",
                pathSelectionTitle: "Selecciona Tu Camino:",
                pathTitle1: "Organizaci√≥n de Vida",
                pathDesc1: "Necesito ayuda organizando mi vida diaria, horarios familiares y sistemas del hogar",
                pathTitle2: "Lanzamiento de Negocio",
                pathDesc2: "Quiero comenzar un negocio o crear fuentes de ingresos pasivos",
                pathTitle3: "Vida y Negocio",
                pathDesc3: "Necesito organizaci√≥n de vida Y quiero comenzar un negocio",
                stepDesc4Title: "Estructura Familiar",
                stepDesc4Text: "Entender tu situaci√≥n familiar nos ayuda a crear recomendaciones realistas que se ajusten a tu vida real.",
                familyStructureTitle: "Cu√©ntanos Sobre Tu Familia",
                familyStructureLabel: "Describe la estructura de tu familia:",
                stepDesc5Title: "Horario Diario",
                stepDesc5Text: "Tu rutina diaria determina qu√© es realista para tus objetivos de negocio y organizaci√≥n.",
                dailyScheduleTitle: "Describe Tu D√≠a T√≠pico",
                dailyScheduleLabel: "¬øC√≥mo se ve tu horario diario t√≠pico?",
                stepDesc6Title: "Inversi√≥n y Cronograma",
                stepDesc6Text: "Entender tu presupuesto y cronograma nos ayuda a recomendar opciones de negocio realistas.",
                investmentTitle: "Nivel de Inversi√≥n y Cronograma",
                investmentLevelLabel: "¬øCu√°nto puedes invertir para comenzar?",
                incomeTimelineLabel: "¬øCu√°ndo necesitas ingresos?",
                stepDesc7Title: "Ideas de Negocio con IA",
                stepDesc7Text: "Usaremos ChatGPT para generar ideas de negocio personalizadas basadas en tu situaci√≥n espec√≠fica.",
                stepDesc8Title: "Investigaci√≥n de Mercado",
                stepDesc8Text: "Ahora usaremos Google Gemini para investigar el mercado de tu idea de negocio elegida.",
                stepDesc9Title: "Creaci√≥n de Calendario",
                stepDesc9Text: "Finalmente, usaremos Claude para crear tu calendario de implementaci√≥n personalizado de 12 semanas con caracter√≠sticas amigables para TDAH.",
                stepDesc10Title: "Tu Plan de Negocio Completo",
                stepDesc10Text: "¬°Felicitaciones! Aqu√≠ est√° tu plan de negocio personalizado completo y pr√≥ximos pasos.",
                chooseInvestmentLevel: "Elige tu nivel de inversi√≥n...",
                chooseTimeline: "Elige tu cronograma...",
                copyChatGPTBtn: "Copiar",
                openChatGPTBtn: "Abrir ChatGPT",
                viewChatGPTBtn: "Ver Prompt Completo",
                copyGeminiBtn: "Copiar",
                openGeminiBtn: "Abrir Gemini",
                viewGeminiBtn: "Ver Prompt Completo",
                copyClaudeBtn: "Copiar",
                openClaudeBtn: "Abrir Claude",
                viewClaudeBtn: "Ver Prompt Completo"
            }
        };

        function updateLanguageContent(lang) {
            const t = translations[lang];
            if (t) {
                // Update text content elements
                Object.keys(t).forEach(key => {
                    const element = document.getElementById(key);
                    if (element) {
                        element.textContent = t[key];
                    }
                });
                
                // Update dropdown options with data attributes
                document.querySelectorAll('option[data-en][data-es]').forEach(option => {
                    if (lang === 'es' && option.getAttribute('data-es')) {
                        option.textContent = option.getAttribute('data-es');
                    } else if (lang === 'en' && option.getAttribute('data-en')) {
                        option.textContent = option.getAttribute('data-en');
                    }
                });
                
                // Update step 6 path-specific content
                if (lang === 'es') {
                    // Life Organization Path
                    const stepDesc6TitleLife = document.getElementById('stepDesc6TitleLife');
                    if (stepDesc6TitleLife) stepDesc6TitleLife.textContent = 'Metas y Cronograma de Organizaci√≥n';
                    const stepDesc6TextLife = document.getElementById('stepDesc6TextLife');
                    if (stepDesc6TextLife) stepDesc6TextLife.textContent = 'Entendamos tus prioridades de organizaci√≥n y qu√© tan r√°pido quieres ver resultados.';
                    const organizationGoalsTitle = document.getElementById('organizationGoalsTitle');
                    if (organizationGoalsTitle) organizationGoalsTitle.textContent = 'Tus Metas de Organizaci√≥n';
                    const organizationPriorityLabel = document.getElementById('organizationPriorityLabel');
                    if (organizationPriorityLabel) organizationPriorityLabel.innerHTML = '¬øCu√°l es tu mayor desaf√≠o de organizaci√≥n? <span class="required">*</span>';
                    const organizationTimelineLabel = document.getElementById('organizationTimelineLabel');
                    if (organizationTimelineLabel) organizationTimelineLabel.innerHTML = '¬øQu√© tan pronto quieres un hogar organizado? <span class="required">*</span>';
                    
                    // Both Path
                    const stepDesc6TitleBoth = document.getElementById('stepDesc6TitleBoth');
                    if (stepDesc6TitleBoth) stepDesc6TitleBoth.textContent = 'Metas, Inversi√≥n y Cronograma';
                    const stepDesc6TextBoth = document.getElementById('stepDesc6TextBoth');
                    if (stepDesc6TextBoth) stepDesc6TextBoth.textContent = 'Entendamos tanto tus metas de organizaci√≥n como tu cronograma de negocio.';
                    const bothGoalsTitle = document.getElementById('bothGoalsTitle');
                    if (bothGoalsTitle) bothGoalsTitle.textContent = 'Metas de Organizaci√≥n y Negocio';
                    const bothPriorityLabel = document.getElementById('bothPriorityLabel');
                    if (bothPriorityLabel) bothPriorityLabel.innerHTML = '¬øQu√© necesita atenci√≥n primero? <span class="required">*</span>';
                    const bothInvestmentLabel = document.getElementById('bothInvestmentLabel');
                    if (bothInvestmentLabel) bothInvestmentLabel.innerHTML = '¬øInversi√≥n disponible para negocio? <span class="required">*</span>';
                    const bothTimelineLabel = document.getElementById('bothTimelineLabel');
                    if (bothTimelineLabel) bothTimelineLabel.innerHTML = '¬øCronograma para ambas metas? <span class="required">*</span>';
                }
                
                // Update placeholder text
                const placeholders = {
                    en: {
                        'family-structure': 'Tell us about your family size, ages of children, support system, partner situation, etc. Be as detailed as you\'d like - this helps us give you better recommendations.',
                        'daily-schedule': 'Describe your typical day from morning to night. Include work schedule, kids\' activities, household responsibilities, available free time, etc.',
                        'selected-business-idea': 'Type or paste your chosen business idea here...',
                        'chatgpt-response': 'Copy and paste the business ideas from ChatGPT here...',
                        'gemini-response': 'Copy and paste the market research from Gemini here...',
                        'claude-response': 'Copy and paste the 12-week calendar from Claude here...'
                    },
                    es: {
                        'family-structure': 'Cu√©ntanos sobre el tama√±o de tu familia, edades de los ni√±os, sistema de apoyo, situaci√≥n de pareja, etc. S√© tan detallada como quieras - esto nos ayuda a darte mejores recomendaciones.',
                        'daily-schedule': 'Describe tu d√≠a t√≠pico de la ma√±ana a la noche. Incluye horario de trabajo, actividades de los ni√±os, responsabilidades del hogar, tiempo libre disponible, etc.',
                        'selected-business-idea': 'Escribe o pega tu idea de negocio elegida aqu√≠...',
                        'chatgpt-response': 'Copia y pega las ideas de negocio de ChatGPT aqu√≠...',
                        'gemini-response': 'Copia y pega la investigaci√≥n de mercado de Gemini aqu√≠...',
                        'claude-response': 'Copia y pega el calendario de 12 semanas de Claude aqu√≠...'
                    }
                };
                
                if (placeholders[lang]) {
                    Object.keys(placeholders[lang]).forEach(fieldId => {
                        const field = document.getElementById(fieldId);
                        if (field) {
                            field.placeholder = placeholders[lang][fieldId];
                        }
                    });
                }
            }
        }

        // Helper function for translations
        function t(key) {
            return translations[currentLanguage][key] || key;
        }

        // ===== NEW PAYMENT SYSTEM FUNCTIONS =====

        function showPremiumServices() {
            document.getElementById('premiumServicesSection').classList.add('active');
            document.querySelector('.progress-container').style.display = 'none';
            document.querySelector('.main-card').style.display = 'none';
            document.getElementById('premiumServicesSection').scrollIntoView({ behavior: 'smooth' });
        }

        function backToAssessment() {
            document.getElementById('premiumServicesSection').classList.remove('active');
            document.querySelector('.progress-container').style.display = 'block';
            document.querySelector('.main-card').style.display = 'block';
            scrollToCurrentStep();
        }

        function backToMainPage() {
            document.getElementById('premiumServicesSection').classList.remove('active');
            document.querySelector('.progress-container').style.display = 'block';
            document.querySelector('.main-card').style.display = 'block';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function openStripeLink(service) {
            const stripeLinks = {
                'life-calendar': 'https://buy.stripe.com/cN100gj9M0fo83e17Vm07',
                'life-training': 'https://buy.stripe.com/5kQ6oHb946RSn22zbz7Vm06',
                'business-calendar': 'https://buy.stripe.com/3cI8wP7NS2BmbLqgc9L7Vm05',
                'business-training': 'https://buy.stripe.com/fZu8wP8RW1x8i18eec97Vm04'
            };
            
            const url = stripeLinks[service];
            if (url) {
                window.open(url, '_blank');
            }
        }

        function openCalendlyLink(callType) {
            const calendlyLinks = {
                'smart-mom-call': 'https://calendly.com/momsurvivaltoolkit/free-smart-mom-call-30-min',
                'strategy-call': 'https://calendly.com/momsurvivaltoolkit/30min'
            };
            
            const url = calendlyLinks[callType];
            if (url) {
                window.open(url, '_blank');
            }
        }

        function showConsultationOptions() {
            const consultationSection = document.getElementById('consultationOptions');
            if (consultationSection && currentStep === 2) {
                consultationSection.classList.add('active');
            }
        }

        function hideConsultationOptions() {
            const consultationSection = document.getElementById('consultationOptions');
            if (consultationSection) {
                consultationSection.classList.remove('active');
            }
        }

        // ===== PRESERVED USER MANAGEMENT FUNCTIONS =====
        
        function getLocalUsers() {
            try {
                const data = localStorage.getItem('smartMomUsers');
                if (!data || data === 'null' || data === 'undefined') {
                    return [];
                }
                const parsed = JSON.parse(data);
                return Array.isArray(parsed) ? parsed : [];
            } catch (error) {
                console.warn('Error parsing local users, resetting:', error);
                localStorage.removeItem('smartMomUsers');
                return [];
            }
        }

        function saveLocalUser(userData) {
            try {
                const users = getLocalUsers();
                
                const existingIndex = users.findIndex(user => user.email === userData.email);
                if (existingIndex !== -1) {
                    throw new Error('User already exists');
                }
                
                users.push(userData);
                localStorage.setItem('smartMomUsers', JSON.stringify(users));
                console.log('User saved locally successfully');
                return userData;
            } catch (error) {
                console.error('Error saving user locally:', error);
                throw error;
            }
        }

        function findLocalUser(email, password = null) {
            try {
                const users = getLocalUsers();
                return users.find(user => {
                    if (password) {
                        return user.email === email && user.password === password;
                    }
                    return user.email === email;
                });
            } catch (error) {
                console.error('Error finding local user:', error);
                return null;
            }
        }

        async function hashPassword(password) {
            try {
                const encoder = new TextEncoder();
                const data = encoder.encode(password);
                const hash = await crypto.subtle.digest('SHA-256', data);
                return Array.from(new Uint8Array(hash))
                    .map(b => b.toString(16).padStart(2, '0'))
                    .join('');
            } catch (error) {
                console.warn('Using simple hash fallback');
                let hash = 0;
                for (let i = 0; i < password.length; i++) {
                    const char = password.charCodeAt(i);
                    hash = ((hash << 5) - hash) + char;
                    hash = hash & hash;
                }
                return Math.abs(hash).toString(16);
            }
        }

        // ===== PRESERVED CREATEUSER FUNCTION - DO NOT MODIFY =====
        async function createUser(email, password, name) {
            try {
                console.log('Creating user account...');
                
                // Send to N8N webhook (PRESERVED EXACTLY)
                const response = await fetch('https://momsurvivaltoolkit.app.n8n.cloud/webhook-test/smart-mom-form', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        name: name,
                        email: email,
                        selectedPath: selectedPath || 'not-selected',
                        source: 'smart-mom-website',
                        timestamp: new Date().toISOString(),
                        language: currentLanguage
                    })
                });

                const result = await response.json();
                
                if (response.ok && result.success) {
                    console.log('‚úÖ User registration successful!');
                    
                    currentUser = {
                        id: Date.now().toString(),
                        email: email,
                        name: name,
                        displayName: name,
                        source: 'webhook',
                        status: 'synced'
                    };
                    
                    updateUserSession(currentUser);
                    saveUserProgress();
                    
                    return result;
                    
                } else {
                    throw new Error('Registration failed on server');
                }
                
            } catch (error) {
                console.error('Registration failed, using local storage fallback:', error);
                
                const hashedPassword = await hashPassword(password);
                
                const userData = {
                    id: Date.now().toString(),
                    name: name,
                    email: email,
                    password: hashedPassword,
                    createdAt: new Date().toISOString(),
                    language: currentLanguage,
                    source: 'local'
                };
                
                saveLocalUser(userData);
                
                currentUser = {
                    id: userData.id,
                    email: email,
                    name: name,
                    displayName: name,
                    source: 'local',
                    status: 'local'
                };
                
                updateUserSession(currentUser);
                showAuthSuccess('Account created successfully! (Using local storage)');
                
                return userData;
            }
        }

        async function signIn(email, password) {
            try {
                console.log('Signing in locally...');
                const hashedPassword = await hashPassword(password);
                const localUser = findLocalUser(email, hashedPassword);
                
                if (!localUser) {
                    throw new Error('Invalid email or password');
                }

                currentUser = {
                    id: localUser.id,
                    email: email,
                    name: localUser.name,
                    displayName: localUser.name,
                    source: 'local',
                    status: 'local'
                };

                updateUserSession(currentUser);
                loadUserProgress();
                showConnectionNotice();
                
                return localUser;
                
            } catch (error) {
                console.error('Error signing in:', error);
                throw error;
            }
        }

        // ===== PROGRESS MANAGEMENT =====
        
        function saveUserProgress() {
            const progressData = {
                currentStep,
                selectedPath,
                formData,
                aiResponses,
                currentLanguage,
                timestamp: new Date().toISOString()
            };
            
            localStorage.setItem('smartMomProgress', JSON.stringify(progressData));
            
            if (!useLocalStorageOnly && currentUser && currentUser.status === 'synced') {
                sendProgressUpdate(progressData);
            }
        }

        async function sendProgressUpdate(progressData) {
            try {
                const response = await fetch('https://momsurvivaltoolkit.app.n8n.cloud/webhook-test/smart-mom-form', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        ...progressData,
                        updateType: 'progress',
                        userId: currentUser.email,
                        source: 'smart-mom-website'
                    })
                });
            } catch (error) {
                console.log('Progress update failed, continuing with local storage');
            }
        }

        function loadUserProgress() {
            const saved = localStorage.getItem('smartMomProgress');
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    currentStep = data.currentStep || 1;
                    selectedPath = data.selectedPath || '';
                    formData = data.formData || {};
                    aiResponses = data.aiResponses || {};
                    currentLanguage = data.currentLanguage || 'en';
                    
                    if (currentLanguage !== 'en') {
                        changeLanguage(currentLanguage);
                    }
                    
                    restoreFormData();
                    updateProgressDisplay();
                    showCurrentStep();
                } catch (error) {
                    console.error('Error loading progress:', error);
                }
            }
        }

        function restoreFormData() {
            Object.keys(formData).forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) {
                    field.value = formData[fieldId];
                    if (field.type === 'textarea') {
                        updateCharCounter(field);
                    }
                }
            });
            
            // Restore path-specific fields if they exist
            const pathSpecificFields = [
                'organization-priority', 'organization-timeline',
                'both-priority', 'both-investment', 'both-timeline'
            ];
            
            pathSpecificFields.forEach(fieldId => {
                if (formData[fieldId]) {
                    const field = document.getElementById(fieldId);
                    if (field) {
                        field.value = formData[fieldId];
                    }
                }
            });
            
            Object.keys(aiResponses).forEach(platform => {
                const field = document.getElementById(`${platform}-response`);
                if (field && aiResponses[platform]) {
                    field.value = aiResponses[platform];
                }
            });
            
            if (selectedPath) {
                const pathOption = document.querySelector(`[data-path="${selectedPath}"]`);
                if (pathOption) {
                    pathOption.classList.add('selected');
                }
                // Update path-specific content
                updatePathSpecificContent();
            }
        }

        // ===== USER SESSION MANAGEMENT =====
        
        function updateUserSession(user) {
            currentUser = user;
            
            localStorage.setItem('smartMomUser', JSON.stringify(user));
            
            document.getElementById('userStatusBar').classList.remove('hidden');
            document.getElementById('userAvatar').textContent = user.name.charAt(0).toUpperCase();
            document.getElementById('userDisplayName').textContent = user.name;
            
            if (user.status === 'synced') {
                document.getElementById('userStatusText').textContent = `Synced: ${user.email}`;
                document.getElementById('statusBadge').textContent = 'Synced';
                document.getElementById('statusBadge').className = 'status-badge signed-in';
            } else {
                document.getElementById('userStatusText').textContent = `Local Mode: ${user.email}`;
                document.getElementById('statusBadge').textContent = 'Local Mode';
                document.getElementById('statusBadge').className = 'status-badge guest';
                showConnectionNotice();
            }
            
            document.getElementById('signOutBtn').style.display = 'block';
            
            const saveBtn = document.querySelector('[onclick="showAuthModal(\'signup\')"]');
            if (saveBtn) saveBtn.style.display = 'none';
        }

        function checkExistingSession() {
            const savedUser = localStorage.getItem('smartMomUser');
            if (savedUser) {
                try {
                    currentUser = JSON.parse(savedUser);
                    updateUserSession(currentUser);
                    loadUserProgress();
                } catch (error) {
                    console.error('Error restoring session:', error);
                    localStorage.removeItem('smartMomUser');
                }
            }
            document.getElementById('userStatusBar').classList.remove('hidden');
        }

        function showConnectionNotice() {
            document.getElementById('connectionNotice').classList.remove('hidden');
        }

        function signOut() {
            currentUser = null;
            localStorage.removeItem('smartMomUser');
            localStorage.removeItem('smartMomProgress');
            
            document.getElementById('userAvatar').textContent = '?';
            document.getElementById('userDisplayName').textContent = 'Guest User';
            document.getElementById('userStatusText').textContent = 'Progress will not be saved';
            document.getElementById('statusBadge').textContent = 'Guest Mode';
            document.getElementById('statusBadge').className = 'status-badge guest';
            document.getElementById('signOutBtn').style.display = 'none';
            
            const saveBtn = document.querySelector('[onclick="showAuthModal(\'signup\')"]');
            if (saveBtn) saveBtn.style.display = 'block';
            
            document.querySelectorAll('.form-control').forEach(field => {
                field.value = '';
            });
            
            currentStep = 1;
            selectedPath = '';
            formData = {};
            aiResponses = {};
            updateProgressDisplay();
            showCurrentStep();
        }

        // ===== AUTHENTICATION MODAL FUNCTIONS =====
        
        function showAuthModal(mode) {
            authMode = mode || 'signup';
            
            const modal = document.getElementById('authModal');
            const title = document.getElementById('authTitle');
            const submitBtn = document.getElementById('authSubmitText');
            const switchText = document.getElementById('authSwitchText');
            const switchLink = document.getElementById('authSwitchLink');
            const nameField = document.getElementById('authName');
            const confirmField = document.getElementById('authConfirmPassword');

            clearAuthMessages();

            if (authMode === 'signup') {
                title.textContent = 'Create Your Account';
                submitBtn.textContent = 'Create Account';
                switchText.textContent = 'Already have an account?';
                switchLink.textContent = 'Sign In';
                nameField.style.display = 'block';
                confirmField.style.display = 'block';
                nameField.required = true;
                confirmField.required = true;
            } else {
                title.textContent = 'Sign In';
                submitBtn.textContent = 'Sign In';
                switchText.textContent = "Don't have an account?";
                switchLink.textContent = 'Create Account';
                nameField.style.display = 'none';
                confirmField.style.display = 'none';
                nameField.required = false;
                confirmField.required = false;
            }

            modal.classList.add('active');
        }

        function closeAuthModal() {
            document.getElementById('authModal').classList.remove('active');
            clearAuthMessages();
            document.getElementById('authForm').reset();
        }

        function toggleAuthMode() {
            showAuthModal(authMode === 'signup' ? 'signin' : 'signup');
        }

        function clearAuthMessages() {
            document.getElementById('authError').classList.add('hidden');
            document.getElementById('authSuccess').classList.add('hidden');
        }

        function showAuthError(message) {
            const errorDiv = document.getElementById('authError');
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
        }

        function showAuthSuccess(message) {
            const successDiv = document.getElementById('authSuccess');
            successDiv.textContent = message;
            successDiv.classList.remove('hidden');
        }

        // ===== STEP NAVIGATION =====
        
        function showCurrentStep() {
            for (let i = 1; i <= TOTAL_STEPS; i++) {
                const stepContent = document.getElementById(`step${i}Content`);
                if (stepContent) {
                    stepContent.classList.add('hidden');
                }
            }
            
            const currentStepContent = document.getElementById(`step${currentStep}Content`);
            if (currentStepContent) {
                currentStepContent.classList.remove('hidden');
            }
            
            // Show/hide consultation options based on step
            if (currentStep === 2) {
                showConsultationOptions();
            } else {
                hideConsultationOptions();
            }
            
            // Show path-specific questions for Step 6
            if (currentStep === 6) {
                showPathSpecificQuestions();
            }
            
            updateProgressDisplay();
            updateNavigationButtons();
            
            if (currentStep === 7) {
                updateChatGPTPrompt();
            } else if (currentStep === 8) {
                updateGeminiPrompt();
                updatePathSpecificContent(); // Update labels for step 8
            } else if (currentStep === 9) {
                updateClaudePrompt();
            } else if (currentStep === 10) {
                updateSuccessMessage();
            }
        }

        function showPathSpecificQuestions() {
            // Hide all path-specific content first
            document.querySelectorAll('.path-specific-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Show the appropriate questions based on selected path
            if (selectedPath === 'life-organization') {
                document.getElementById('lifeOrganizationQuestions').classList.remove('hidden');
            } else if (selectedPath === 'business-launch') {
                document.getElementById('businessLaunchQuestions').classList.remove('hidden');
            } else if (selectedPath === 'both') {
                document.getElementById('bothPathQuestions').classList.remove('hidden');
            }
        }

        function nextStep() {
            if (validateCurrentStep()) {
                if (currentStep < TOTAL_STEPS) {
                    currentStep++;
                    showCurrentStep();
                    saveUserProgress();
                    scrollToCurrentStep();
                }
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                showCurrentStep();
                saveUserProgress();
                scrollToCurrentStep();
            }
        }

        function validateCurrentStep() {
            switch (currentStep) {
                case 1:
                    return true;
                
                case 2:
                    const name = document.getElementById('user-name').value.trim();
                    const email = document.getElementById('user-email').value.trim();
                    if (!name || !email || !isValidEmail(email)) {
                        alert('Please fill in your name and valid email address');
                        return false;
                    }
                    break;
                
                case 3:
                    if (!selectedPath) {
                        alert('Please select a path first');
                        return false;
                    }
                    break;
                
                case 4:
                    const familyStructure = document.getElementById('family-structure').value.trim();
                    if (!familyStructure) {
                        alert('Please describe your family structure');
                        return false;
                    }
                    break;
                
                case 5:
                    const dailySchedule = document.getElementById('daily-schedule').value.trim();
                    if (!dailySchedule) {
                        alert('Please describe your daily schedule');
                        return false;
                    }
                    break;
                
                case 6:
                    if (selectedPath === 'life-organization') {
                        const orgPriority = document.getElementById('organization-priority').value;
                        const orgTimeline = document.getElementById('organization-timeline').value;
                        if (!orgPriority || !orgTimeline) {
                            alert('Please select both your organization priority and timeline');
                            return false;
                        }
                        // Save these values for the prompts
                        formData['organization-priority'] = orgPriority;
                        formData['organization-timeline'] = orgTimeline;
                    } else if (selectedPath === 'business-launch') {
                        const investment = document.getElementById('investment-level').value;
                        const timeline = document.getElementById('income-timeline').value;
                        if (!investment || !timeline) {
                            alert('Please select both investment level and income timeline');
                            return false;
                        }
                    } else if (selectedPath === 'both') {
                        const priority = document.getElementById('both-priority').value;
                        const investment = document.getElementById('both-investment').value;
                        const timeline = document.getElementById('both-timeline').value;
                        if (!priority || !investment || !timeline) {
                            alert('Please answer all questions about your goals and timeline');
                            return false;
                        }
                        // Save these values for the prompts
                        formData['both-priority'] = priority;
                        formData['both-investment'] = investment;
                        formData['both-timeline'] = timeline;
                        // Also save as standard fields for compatibility
                        formData['investment-level'] = investment;
                        formData['income-timeline'] = timeline;
                    }
                    break;
                
                case 7:
                    if (!aiResponses.chatgpt || aiResponses.chatgpt.trim().length < 50) {
                        alert('Please paste the ChatGPT response with business ideas');
                        return false;
                    }
                    break;
                
                case 8:
                    const selectedIdea = document.getElementById('selected-business-idea').value.trim();
                    if (!selectedIdea) {
                        alert('Please enter your chosen business idea first');
                        return false;
                    }
                    if (!aiResponses.gemini || aiResponses.gemini.trim().length < 50) {
                        alert('Please paste the Gemini market research response');
                        return false;
                    }
                    break;
                
                case 9:
                    if (!aiResponses.claude || aiResponses.claude.trim().length < 100) {
                        alert('Please paste the Claude calendar response');
                        return false;
                    }
                    break;
            }
            
            return true;
        }

        function updateProgressDisplay() {
            const stepCounter = document.getElementById('stepCounter');
            const progressFill = document.getElementById('progressFill');
            
            if (stepCounter) {
                stepCounter.textContent = `Step ${currentStep} of ${TOTAL_STEPS}`;
            }
            
            if (progressFill) {
                const percentage = (currentStep / TOTAL_STEPS) * 100;
                progressFill.style.width = `${percentage}%`;
            }

            for (let i = 1; i <= TOTAL_STEPS; i++) {
                const stepElement = document.getElementById(`step-${i}`);
                if (stepElement) {
                    stepElement.classList.remove('active', 'completed', 'pending');
                    
                    if (i < currentStep) {
                        stepElement.classList.add('completed');
                    } else if (i === currentStep) {
                        stepElement.classList.add('active');
                    } else {
                        stepElement.classList.add('pending');
                    }
                }
            }
        }

        function updateNavigationButtons() {
            const backBtn = document.getElementById('backBtn');
            const nextBtn = document.getElementById('nextBtn');
            const navButtons = document.getElementById('navButtons');
            
            if (backBtn) {
                backBtn.disabled = (currentStep === 1);
            }
            
            if (nextBtn) {
                if (currentStep === TOTAL_STEPS) {
                    nextBtn.textContent = 'Complete';
                    nextBtn.onclick = completeAssessment;
                } else {
                    nextBtn.textContent = 'Next Step ‚Üí';
                    nextBtn.onclick = nextStep;
                }
            }
            
            if (navButtons) {
                navButtons.style.display = (currentStep === TOTAL_STEPS) ? 'none' : 'flex';
            }
        }

        function scrollToCurrentStep() {
            const currentStepContent = document.getElementById(`step${currentStep}Content`);
            if (currentStepContent) {
                currentStepContent.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        // ===== FORM VALIDATION =====
        
        function validateField(field) {
            if (!field) return true;
            
            const validation = document.getElementById(field.id + '-validation');
            let isValid = true;
            let message = '';

            if (field.required && !field.value.trim()) {
                isValid = false;
                message = 'This field is required';
            } else if (field.type === 'email' && field.value && !isValidEmail(field.value)) {
                isValid = false;
                message = 'Please enter a valid email address';
            } else if (field.id === 'user-name' && field.value && field.value.length < 2) {
                isValid = false;
                message = 'Name must be at least 2 characters';
            }

            if (validation) {
                validation.textContent = message;
                validation.className = isValid ? 'validation-message success' : 'validation-message';
            }

            formData[field.id] = field.value;
            
            if (currentUser) {
                saveUserProgress();
            }

            return isValid;
        }

        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        function updateCharCounter(field) {
            if (!field) return;
            
            const maxLength = field.getAttribute('maxlength');
            const counter = document.getElementById(field.id + '-counter');
            
            if (counter && maxLength) {
                const remaining = maxLength - field.value.length;
                counter.textContent = `${remaining} characters remaining`;
                counter.style.color = remaining < 50 ? '#ff4444' : '#666';
            }
            
            formData[field.id] = field.value;
            if (currentUser) {
                saveUserProgress();
            }
        }

        // ===== LANGUAGE MANAGEMENT =====
        
        function changeLanguage(lang) {
            currentLanguage = lang;
            
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`lang-${lang}`).classList.add('active');
            
            localStorage.setItem('smartMomLanguage', lang);
            updateLanguageContent(lang);
            
            // Update path-specific content if a path is selected
            if (selectedPath) {
                updatePathSpecificContent();
            }
            
            if (currentUser) {
                saveUserProgress();
            }
        }

        // ===== PATH SELECTION =====
        
        function selectPath(path) {
            selectedPath = path;
            
            document.querySelectorAll('.path-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            document.querySelector(`[data-path="${path}"]`).classList.add('selected');
            
            formData.selectedPath = path;
            if (currentUser) {
                saveUserProgress();
            }
            
            // Update step descriptions based on selected path
            updatePathSpecificContent();
        }

        function updatePathSpecificContent() {
            // Update step 7 title based on path
            const step7Title = document.getElementById('stepDesc7Title');
            const step7Text = document.getElementById('stepDesc7Text');
            
            if (selectedPath === 'life-organization') {
                if (currentLanguage === 'es') {
                    if (step7Title) step7Title.textContent = 'Ideas de Organizaci√≥n con IA';
                    if (step7Text) step7Text.textContent = 'Usaremos ChatGPT para generar soluciones de organizaci√≥n del hogar personalizadas basadas en tu situaci√≥n familiar espec√≠fica.';
                } else {
                    if (step7Title) step7Title.textContent = 'AI Organization Ideas';
                    if (step7Text) step7Text.textContent = "We'll use ChatGPT to generate personalized home organization solutions based on your specific family situation.";
                }
            } else if (selectedPath === 'business-launch') {
                if (currentLanguage === 'es') {
                    if (step7Title) step7Title.textContent = 'Ideas de Negocio con IA';
                    if (step7Text) step7Text.textContent = 'Usaremos ChatGPT para generar ideas de negocio personalizadas basadas en tu situaci√≥n espec√≠fica.';
                } else {
                    if (step7Title) step7Title.textContent = 'AI Business Ideas';
                    if (step7Text) step7Text.textContent = "We'll use ChatGPT to generate personalized business ideas based on your specific situation.";
                }
            } else {
                if (currentLanguage === 'es') {
                    if (step7Title) step7Title.textContent = 'Soluciones Integradas con IA';
                    if (step7Text) step7Text.textContent = 'Usaremos ChatGPT para generar soluciones integradas que combinen organizaci√≥n del hogar con oportunidades de negocio.';
                } else {
                    if (step7Title) step7Title.textContent = 'AI Life + Business Solutions';
                    if (step7Text) step7Text.textContent = "We'll use ChatGPT to generate integrated solutions that combine home organization with business opportunities.";
                }
            }

            // Update step 8 title based on path
            const step8Title = document.getElementById('stepDesc8Title');
            const step8Text = document.getElementById('stepDesc8Text');
            const selectedIdeaLabel = document.getElementById('selectedIdeaLabel');
            const selectedIdeaInput = document.getElementById('selected-business-idea');
            
            if (selectedPath === 'life-organization') {
                if (currentLanguage === 'es') {
                    if (step8Title) step8Title.textContent = 'Investigaci√≥n de Implementaci√≥n';
                    if (step8Text) step8Text.textContent = 'Ahora usaremos Google Gemini para investigar las mejores pr√°cticas para implementar tu soluci√≥n de organizaci√≥n elegida.';
                    if (selectedIdeaLabel) selectedIdeaLabel.textContent = 'Elige tu soluci√≥n de organizaci√≥n favorita de ChatGPT:';
                    if (selectedIdeaInput) selectedIdeaInput.placeholder = 'Escribe o pega tu soluci√≥n de organizaci√≥n elegida aqu√≠...';
                } else {
                    if (step8Title) step8Title.textContent = 'Implementation Research';
                    if (step8Text) step8Text.textContent = "Now we'll use Google Gemini to research the best practices for implementing your chosen organization solution.";
                    if (selectedIdeaLabel) selectedIdeaLabel.textContent = 'Choose your favorite organization solution from ChatGPT:';
                    if (selectedIdeaInput) selectedIdeaInput.placeholder = 'Type or paste your chosen organization solution here...';
                }
            } else if (selectedPath === 'business-launch') {
                if (currentLanguage === 'es') {
                    if (step8Title) step8Title.textContent = 'Investigaci√≥n de Mercado';
                    if (step8Text) step8Text.textContent = 'Ahora usaremos Google Gemini para investigar el mercado de tu idea de negocio elegida.';
                    if (selectedIdeaLabel) selectedIdeaLabel.textContent = 'Elige tu idea de negocio favorita de ChatGPT:';
                    if (selectedIdeaInput) selectedIdeaInput.placeholder = 'Escribe o pega tu idea de negocio elegida aqu√≠...';
                } else {
                    if (step8Title) step8Title.textContent = 'Market Research';
                    if (step8Text) step8Text.textContent = "Now we'll use Google Gemini to research the market for your chosen business idea.";
                    if (selectedIdeaLabel) selectedIdeaLabel.textContent = 'Choose your favorite business idea from ChatGPT:';
                    if (selectedIdeaInput) selectedIdeaInput.placeholder = 'Type or paste your chosen business idea here...';
                }
            } else {
                if (currentLanguage === 'es') {
                    if (step8Title) step8Title.textContent = 'Investigaci√≥n Combinada';
                    if (step8Text) step8Text.textContent = 'Ahora usaremos Google Gemini para investigar tanto los m√©todos de organizaci√≥n como las oportunidades de negocio para tu soluci√≥n integrada.';
                    if (selectedIdeaLabel) selectedIdeaLabel.textContent = 'Elige tu soluci√≥n integrada favorita de ChatGPT:';
                    if (selectedIdeaInput) selectedIdeaInput.placeholder = 'Escribe o pega tu soluci√≥n integrada elegida aqu√≠...';
                } else {
                    if (step8Title) step8Title.textContent = 'Combined Research';
                    if (step8Text) step8Text.textContent = "Now we'll use Google Gemini to research both the organization methods and business opportunities for your integrated solution.";
                    if (selectedIdeaLabel) selectedIdeaLabel.textContent = 'Choose your favorite integrated solution from ChatGPT:';
                    if (selectedIdeaInput) selectedIdeaInput.placeholder = 'Type or paste your chosen integrated solution here...';
                }
            }

            // Update step 9 title based on path
            const step9Title = document.getElementById('stepDesc9Title');
            const step9Text = document.getElementById('stepDesc9Text');
            
            if (selectedPath === 'life-organization') {
                if (currentLanguage === 'es') {
                    if (step9Title) step9Title.textContent = 'Calendario de Organizaci√≥n';
                    if (step9Text) step9Text.textContent = 'Finalmente, usaremos Claude para crear tu plan de implementaci√≥n de organizaci√≥n del hogar personalizado de 12 semanas.';
                } else {
                    if (step9Title) step9Title.textContent = 'Organization Calendar';
                    if (step9Text) step9Text.textContent = "Finally, we'll use Claude to create your personalized 12-week home organization implementation plan.";
                }
            } else if (selectedPath === 'business-launch') {
                if (currentLanguage === 'es') {
                    if (step9Title) step9Title.textContent = 'Calendario de Negocio';
                    if (step9Text) step9Text.textContent = 'Finalmente, usaremos Claude para crear tu calendario de implementaci√≥n de negocio personalizado de 12 semanas.';
                } else {
                    if (step9Title) step9Title.textContent = 'Business Calendar';
                    if (step9Text) step9Text.textContent = "Finally, we'll use Claude to create your personalized 12-week business implementation calendar.";
                }
            } else {
                if (currentLanguage === 'es') {
                    if (step9Title) step9Title.textContent = 'Calendario Integrado';
                    if (step9Text) step9Text.textContent = 'Finalmente, usaremos Claude para crear tu plan personalizado de 12 semanas que integra tanto organizaci√≥n del hogar como desarrollo de negocio.';
                } else {
                    if (step9Title) step9Title.textContent = 'Integrated Calendar';
                    if (step9Text) step9Text.textContent = "Finally, we'll use Claude to create your personalized 12-week plan that integrates both home organization and business development.";
                }
            }
        }

        // ===== AI WORKFLOW FUNCTIONS =====
        
        function generateChatGPTPrompt() {
            const userData = {
                familyStructure: formData['family-structure'] || 'Not specified',
                dailySchedule: formData['daily-schedule'] || 'Not specified',
                investmentLevel: formData['investment-level'] || formData['both-investment'] || 'Not specified',
                incomeTimeline: formData['income-timeline'] || formData['both-timeline'] || 'Not specified',
                organizationPriority: formData['organization-priority'] || 'Not specified',
                organizationTimeline: formData['organization-timeline'] || 'Not specified',
                bothPriority: formData['both-priority'] || 'Not specified',
                selectedPath: selectedPath || 'Not specified'
            };
            
            // PATH-AWARE PROMPTS
            if (selectedPath === 'life-organization') {
                return `You are a home organization expert helping a mom organize her life and home. Here's her situation:

Family Structure: ${userData.familyStructure}

Daily Schedule: ${userData.dailySchedule}

Organization Priority: ${userData.organizationPriority}

Timeline Goal: ${userData.organizationTimeline}

Selected Focus: Life Organization (no business focus needed)

Generate 3 realistic, specific home and life organization systems that fit this exact situation. Focus on practical, achievable solutions that work with their family constraints and available time. Each solution should include:
- Brief description of the organization system
- Why it fits their family situation
- Time required to implement
- How it will improve their daily life

Examples could include: meal planning systems, morning/evening routines, kids' activity organization, household management systems, etc.

Format as a numbered list with brief descriptions.`;
            
            } else if (selectedPath === 'business-launch') {
                return `You are a business strategist helping a mom start a business. Here's her situation:

Family Structure: ${userData.familyStructure}

Daily Schedule: ${userData.dailySchedule}

Investment Level: ${userData.investmentLevel}

Income Timeline: ${userData.incomeTimeline}

Selected Focus: Business Launch

Generate 3 realistic, specific business ideas that fit this exact situation. Focus on practical, achievable options that work with their family constraints and available time. Each idea should include:
- Brief description of the business
- Why it fits their situation
- Realistic earning potential
- Time investment required

Format as a numbered list with brief descriptions.`;
            
            } else {
                return `You are helping a mom who wants BOTH life organization AND to start a business. Here's her situation:

Family Structure: ${userData.familyStructure}

Daily Schedule: ${userData.dailySchedule}

Priority Approach: ${userData.bothPriority}

Investment Level: ${userData.investmentLevel}

Timeline: ${userData.incomeTimeline}

Selected Focus: Both Life Organization & Business Launch

Generate 3 integrated solutions that combine home organization WITH business opportunities. Focus on systems that organize her life while creating income potential. Each solution should include:
- Home organization component
- Business/income component
- How they work together
- Realistic time and earning expectations

Examples could include: organizing services that become consulting businesses, home systems that create product opportunities, etc.

Format as a numbered list with brief descriptions.`;
            }
        }

        function generateGeminiPrompt() {
            const businessIdea = document.getElementById('selected-business-idea').value.trim();
            const userData = {
                familyStructure: formData['family-structure'] || 'Not specified',
                investmentLevel: formData['investment-level'] || formData['both-investment'] || 'Not specified',
                organizationPriority: formData['organization-priority'] || 'Not specified',
                organizationTimeline: formData['organization-timeline'] || 'Not specified'
            };
            
            // PATH-AWARE PROMPTS
            if (selectedPath === 'life-organization') {
                return `Research implementation strategies for this home organization solution: ${businessIdea}

Target demographic: Moms with similar situation to ${userData.familyStructure}
Organization Priority: ${userData.organizationPriority}
Timeline: ${userData.organizationTimeline}

Provide specific guidance on:
1. Best practices and proven methods
2. Common challenges and solutions
3. Time investment and scheduling tips
4. Required supplies/tools and costs
5. Success metrics and tracking methods
6. Expert recommendations and resources

Focus on practical, evidence-based advice for successfully implementing this organization system.`;
            
            } else if (selectedPath === 'business-launch') {
                return `Research market viability for this business idea: ${businessIdea}

Target demographic: Moms with similar situation to ${userData.familyStructure}
Investment level: ${userData.investmentLevel}

Provide specific data on:
1. Market size and trends
2. Competition analysis (3-5 main competitors)
3. Startup costs breakdown
4. Potential revenue ranges
5. Key challenges and opportunities
6. Success factors for this market

Focus on realistic data and actionable insights for someone starting this business.`;
            
            } else {
                return `Research the combined implementation of this life organization + business solution: ${businessIdea}

Target demographic: Moms with similar situation to ${userData.familyStructure}
Investment level: ${userData.investmentLevel}

Provide specific guidance on:
1. Home organization best practices and methods
2. Business market viability and competition
3. Time management for both components
4. Startup costs for organization tools + business
5. Integration strategies and synergies
6. Success metrics for both life and business goals

Focus on realistic strategies for managing both life organization and business development simultaneously.`;
            }
        }

        function generateClaudePrompt() {
            const businessIdea = document.getElementById('selected-business-idea').value.trim();
            const marketResearch = aiResponses.gemini || 'No research provided';
            const userData = {
                name: formData['user-name'] || 'Not specified',
                dailySchedule: formData['daily-schedule'] || 'Not specified',
                investmentLevel: formData['investment-level'] || formData['both-investment'] || 'Not specified',
                familyStructure: formData['family-structure'] || 'Not specified',
                incomeTimeline: formData['income-timeline'] || formData['both-timeline'] || 'Not specified',
                organizationPriority: formData['organization-priority'] || 'Not specified',
                organizationTimeline: formData['organization-timeline'] || 'Not specified'
            };
            
            // Base prompt with ADHD-specific instructions
            let basePrompt = `**CRITICAL INSTRUCTIONS - BE EXTREMELY REALISTIC:**
- This person is a BEGINNER, not an expert
- Be brutally honest about challenges and timelines  
- Don't suggest tasks requiring experience they don't have
- Focus on DOWN-TO-EARTH, practical solutions only
- Consider their family constraints and available time
- If they said "free only," respect that completely

**CRITICAL: Design this calendar for ADHD, Autism, and Executive Function challenges**

DAILY STRUCTURE RULES:
- MAXIMUM 4 tasks per day (never exceed this number)
- Each task broken into 3-7 specific sub-steps
- No vague instructions - be extremely detailed
- Include exact links to platforms/tools needed
- Specify if account creation required (FREE vs PAID with exact costs)
- Add time estimates including thinking/processing time
- Build in 15-minute buffer between tasks

TASK FORMAT EXAMPLE:
‚úÖ Task 1: Create Instagram Business Account (FREE - 30 minutes)
  ‚ñ° Step 1: Go to instagram.com/business (click this exact link)
  ‚ñ° Step 2: Click "Create account" ‚Üí Select "Business Account"  
  ‚ñ° Step 3: Choose username: [yourname] + "business" or "coaching"
  ‚ñ° Step 4: Upload profile photo (phone selfie works perfectly)
  ‚ñ° Step 5: Write bio: "I help [your target audience] achieve [specific result]"
  ‚ñ° Step 6: Add contact info: your email and phone

**USER PROFILE:**
- Name: ${userData.name}
- Family Situation: ${userData.familyStructure}
- Daily Schedule: ${userData.dailySchedule}
- Investment Level: ${userData.investmentLevel}
- Income Timeline: ${userData.incomeTimeline}

**CHOSEN SOLUTION:** ${businessIdea}

**RESEARCH INSIGHTS:** 
${marketResearch.substring(0, 800)}...

`;
            
            // PATH-AWARE SECTIONS
            if (selectedPath === 'life-organization') {
                basePrompt += `
**FOCUS: HOME & LIFE ORGANIZATION ONLY**

Include in your calendar:
- Decluttering systems with exact room-by-room instructions
- Morning/evening routine optimization
- Kids' activity organization systems
- Meal planning and prep strategies
- Household management tools
- Time-blocking techniques for busy moms
- Paper/digital organization systems
- Family command center setup

NO business tasks - this is purely about creating an organized, efficient home and life.`;
            
            } else if (selectedPath === 'business-launch') {
                basePrompt += `
**FOCUS: BUSINESS LAUNCH**

**SOCIAL MEDIA BUSINESS REQUIREMENTS:**
If this is a social media business, include:
- SEO-optimized title ideas (10 options)
- Current viral hashtags for the niche
- 30-day content calendar with post ideas
- Platform-specific posting schedules
- Engagement strategies for each platform

**PLATFORM INTEGRATION REQUIREMENTS:**
For each platform/tool mentioned:
- Direct clickable links
- Step-by-step account creation (with screenshots description)
- Exact costs (FREE vs $X/month)
- What to look for on each page
- Common troubleshooting tips`;
            
            } else {
                basePrompt += `
**FOCUS: INTEGRATED LIFE ORGANIZATION + BUSINESS**

Balance both goals by including:
- Morning routines that prep for both home and business
- Time-blocking that accommodates family and work
- Systems that serve dual purposes (organized home = professional backdrop)
- Business tasks that can involve kids appropriately
- Evening routines that close both home and business loops`;
            }
            
            // Add final formatting instructions
            basePrompt += `

**12-WEEK DETAILED BREAKDOWN:**
Format each day EXACTLY like this for parsing:

WEEK 1 - DAY 1:
üåü Today's Focus: [Main Theme]
‚è∞ Total Time Needed: [X hours with buffers]

Task 1: [Task Title] (FREE/PAID $X - X minutes)
üéØ Goal: [One sentence goal]
- [ ] Step 1: [Exact instruction with link if needed]
- [ ] Step 2: [Exact instruction with link if needed]
- [ ] Step 3: [Exact instruction with link if needed]
- [ ] Step 4: [Exact instruction with link if needed]
üí° Tip: [Helpful hint for ADHD/executive function]

Task 2: [Task Title] (FREE/PAID $X - X minutes)
üéØ Goal: [One sentence goal]
- [ ] Step 1: [Exact instruction with link if needed]
- [ ] Step 2: [Exact instruction with link if needed]
- [ ] Step 3: [Exact instruction with link if needed]
üí° Tip: [Helpful hint for ADHD/executive function]

Task 3: [Task Title] (FREE/PAID $X - X minutes)
üéØ Goal: [One sentence goal]
- [ ] Step 1: [Exact instruction with link if needed]
- [ ] Step 2: [Exact instruction with link if needed]
- [ ] Step 3: [Exact instruction with link if needed]
üí° Tip: [Helpful hint for ADHD/executive function]

üìä Daily Progress Check:
- [ ] Completed Task 1
- [ ] Completed Task 2
- [ ] Completed Task 3
üéâ Celebrate: [Specific celebration/reward suggestion]

[Continue this EXACT format for all 84 days - 7 days √ó 12 weeks]

**VISUAL ELEMENTS TO INCLUDE:**
- Use emojis as visual markers (üåü for focus, ‚è∞ for time, üéØ for goals, üí° for tips)
- Include checkboxes [ ] for every sub-step
- Add celebration prompts for task completion
- Include energy level indicators (üî• High Energy Needed, üíö Low Energy OK)
- Add "Brain Break" reminders between tasks

**REMEMBER:**
- Be extremely specific (no "research" - say "Google 'virtual assistant rates Lincoln Nebraska' and write down top 3 results")
- Include comfort breaks and transition time
- Account for executive dysfunction days with built-in flexibility
- Make success inevitable with tiny, specific steps

Generate the COMPLETE 12-week calendar with all 84 days following this EXACT format.`;
            
            return basePrompt;
        }

        function updateChatGPTPrompt() {
            document.getElementById('chatgptPrompt').textContent = generateChatGPTPrompt();
        }

        function updateGeminiPrompt(businessIdea = null) {
            if (businessIdea) {
                formData['selected-business-idea'] = businessIdea;
                if (currentUser) saveUserProgress();
            }
            
            const prompt = generateGeminiPrompt();
            const promptElement = document.getElementById('geminiPrompt');
            
            if (promptElement) {
                promptElement.textContent = prompt;
                console.log('Gemini prompt updated, length:', prompt.length);
            }
        }

        function updateClaudePrompt() {
            document.getElementById('claudePrompt').textContent = generateClaudePrompt();
        }

        function copyPrompt(platform) {
            let promptText = '';
            
            switch (platform) {
                case 'chatgpt':
                    promptText = generateChatGPTPrompt();
                    break;
                case 'gemini':
                    promptText = generateGeminiPrompt();
                    break;
                case 'claude':
                    promptText = generateClaudePrompt();
                    break;
            }
            
            // Ensure we have a complete prompt
            if (!promptText || promptText.trim().length < 50) {
                alert('Please complete the required steps first to generate a complete prompt.');
                return;
            }
            
            // Try to copy to clipboard
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(promptText).then(() => {
                    alert(`Complete ${platform.toUpperCase()} prompt copied to clipboard! (${promptText.length} characters)`);
                }).catch(() => {
                    // Fallback: show prompt in alert for manual copy
                    alert('Clipboard not available. Here is the complete prompt to copy manually:\n\n' + promptText);
                });
            } else {
                // Fallback for older browsers
                alert('Here is the complete prompt to copy manually:\n\n' + promptText);
            }
        }

        function openAI(platform) {
            const urls = {
                chatgpt: 'https://chat.openai.com',
                gemini: 'https://gemini.google.com',
                claude: 'https://claude.ai'
            };
            
            const url = urls[platform];
            if (url) {
                window.open(url, '_blank');
            }
        }

        function saveAIResponse(platform, response) {
            aiResponses[platform] = response;
            if (currentUser) {
                saveUserProgress();
            }
        }

        function viewFullPrompt(platform) {
            let promptText = '';
            let title = '';
            
            switch (platform) {
                case 'chatgpt':
                    promptText = generateChatGPTPrompt();
                    title = 'Complete ChatGPT Prompt';
                    break;
                case 'gemini':
                    promptText = generateGeminiPrompt();
                    title = 'Complete Gemini Prompt';
                    break;
                case 'claude':
                    promptText = generateClaudePrompt();
                    title = 'Complete Claude Prompt';
                    break;
            }
            
            if (!promptText || promptText.trim().length < 50) {
                alert('Please complete the required steps first to generate a complete prompt.');
                return;
            }
            
            // Show the full prompt in an alert with copy option
            const result = confirm(`${title}\n\n${promptText}\n\n--- END OF PROMPT ---\n\nClick OK to copy this prompt to clipboard, or Cancel to close.`);
            
            if (result) {
                copyPrompt(platform);
            }
        }

        function updateSuccessMessage() {
            const successMainText = document.getElementById('successMainText');
            const accomplishment2 = document.getElementById('accomplishment2');
            const accomplishment3 = document.getElementById('accomplishment3');
            
            if (selectedPath === 'life-organization') {
                if (currentLanguage === 'es') {
                    if (successMainText) successMainText.textContent = '¬°Tu calendario interactivo de organizaci√≥n del hogar del M√©todo Smart Mom ha sido creado exitosamente!';
                    if (accomplishment2) accomplishment2.textContent = '‚úÖ Recibiste soluciones de organizaci√≥n generadas por IA personalizadas a tu situaci√≥n';
                    if (accomplishment3) accomplishment3.textContent = '‚úÖ Obtuviste estrategias de implementaci√≥n probadas';
                } else {
                    if (successMainText) successMainText.textContent = 'Your Smart Mom Method interactive home organization calendar has been created successfully!';
                    if (accomplishment2) accomplishment2.textContent = '‚úÖ Received AI-generated organization solutions customized to your situation';
                    if (accomplishment3) accomplishment3.textContent = '‚úÖ Got proven implementation strategies';
                }
            } else if (selectedPath === 'business-launch') {
                if (currentLanguage === 'es') {
                    if (successMainText) successMainText.textContent = '¬°Tu calendario interactivo y plan de negocio del M√©todo Smart Mom han sido creados exitosamente!';
                    if (accomplishment2) accomplishment2.textContent = '‚úÖ Recibiste ideas de negocio generadas por IA personalizadas a tu situaci√≥n';
                    if (accomplishment3) accomplishment3.textContent = '‚úÖ Obtuviste insights de investigaci√≥n de mercado';
                } else {
                    if (successMainText) successMainText.textContent = 'Your Smart Mom Method interactive calendar and business plan have been created successfully!';
                    if (accomplishment2) accomplishment2.textContent = '‚úÖ Received AI-generated business ideas customized to your situation';
                    if (accomplishment3) accomplishment3.textContent = '‚úÖ Got market research insights';
                }
            } else {
                if (currentLanguage === 'es') {
                    if (successMainText) successMainText.textContent = '¬°Tu calendario integrado de vida y negocio del M√©todo Smart Mom ha sido creado exitosamente!';
                    if (accomplishment2) accomplishment2.textContent = '‚úÖ Recibiste soluciones integradas de IA para vida y negocio';
                    if (accomplishment3) accomplishment3.textContent = '‚úÖ Obtuviste estrategias para equilibrar organizaci√≥n del hogar y desarrollo de negocio';
                } else {
                    if (successMainText) successMainText.textContent = 'Your Smart Mom Method integrated life & business calendar has been created successfully!';
                    if (accomplishment2) accomplishment2.textContent = '‚úÖ Received AI-generated integrated life & business solutions';
                    if (accomplishment3) accomplishment3.textContent = '‚úÖ Got strategies for balancing home organization and business development';
                }
            }
        }

        // ===== MODAL FUNCTIONS =====
        
        function startOnboarding() {
            document.getElementById('welcomeModal').classList.add('hidden');
        }

        function handleReturningUser() {
            document.getElementById('welcomeModal').classList.add('hidden');
            showAuthModal('signin');
        }

        function scrollToCurrentStep() {
            scrollToCurrentStep();
        }

        // ===== COMPLETION FUNCTIONS =====
        
        function downloadCalendar() {
            const calendar = aiResponses.claude || 'No calendar generated yet';
            const userName = formData['user-name'] || 'Smart Mom';
            const selectedIdea = formData['selected-business-idea'] || 'Your chosen solution';
            
            const instructions = `SMART MOM METHOD - INTERACTIVE CALENDAR INSTRUCTIONS
            
Hello ${userName}!

Your personalized 12-week interactive calendar has been created for: ${selectedIdea}

HOW TO USE YOUR CALENDAR:

1. SAVE YOUR CALENDAR:
   - Copy everything from the Claude response box
   - Paste into Google Docs, Microsoft Word, or Apple Notes
   - Save with a name like "My Smart Mom Calendar - ${new Date().toLocaleDateString()}"

2. DAILY USE:
   - Check off each sub-step as you complete it
   - Maximum 4 tasks per day (this is important!)
   - Take the suggested breaks between tasks
   - Use the visual emojis as guides:
     üåü = Today's main focus
     ‚è∞ = Time needed (including breaks)
     üéØ = Your goal for this task
     üí° = Helpful tips for ADHD/executive function
     üìä = Daily progress check
     üéâ = Celebration/reward

3. TIPS FOR SUCCESS:
   - Print weekly pages if that helps you focus
   - Use colorful pens/highlighters for completed tasks
   - Don't skip the celebration rewards!
   - If you miss a day, just continue the next day
   - Adjust timing based on your energy levels

4. ACCOUNTABILITY:
   - Share your daily wins in our community
   - Take photos of completed checklist pages
   - Track your streaks (but be kind to yourself!)

Remember: This calendar is designed for real moms with ADHD, autism, and executive function challenges. 
Every task is broken down into tiny, manageable steps. You've got this!

Need support? Book a free consultation call or join our community.

---
YOUR CALENDAR CONTENT:
${calendar}`;
            
            const blob = new Blob([instructions], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `smart-mom-calendar-${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function completeAssessment() {
            currentStep = TOTAL_STEPS;
            showCurrentStep();
            
            formData.completedAt = new Date().toISOString();
            if (currentUser) {
                saveUserProgress();
            }
            
            document.getElementById('finalSuccessMessage').scrollIntoView({ behavior: 'smooth' });
        }

        function viewCompleteProfile() {
            const profile = {
                name: formData['user-name'] || 'Not provided',
                email: formData['user-email'] || 'Not provided',
                language: currentLanguage,
                selectedPath: selectedPath || 'Not selected',
                familyStructure: formData['family-structure'] || 'Not provided',
                dailySchedule: formData['daily-schedule'] || 'Not provided',
                investmentLevel: formData['investment-level'] || 'Not provided',
                incomeTimeline: formData['income-timeline'] || 'Not provided',
                businessIdea: formData['selected-business-idea'] || 'Not provided',
                completedAt: formData.completedAt || 'Not completed'
            };
            
            let profileText = `SMART MOM METHOD - COMPLETE PROFILE\n\n`;
            profileText += `Name: ${profile.name}\n`;
            profileText += `Email: ${profile.email}\n`;
            profileText += `Language: ${profile.language}\n`;
            profileText += `Selected Path: ${profile.selectedPath}\n\n`;
            profileText += `FAMILY & SCHEDULE:\n`;
            profileText += `Family Structure: ${profile.familyStructure}\n`;
            profileText += `Daily Schedule: ${profile.dailySchedule}\n\n`;
            profileText += `PREFERENCES:\n`;
            profileText += `Investment Level: ${profile.investmentLevel}\n`;
            profileText += `Income Timeline: ${profile.incomeTimeline}\n`;
            profileText += `Chosen Solution: ${profile.businessIdea}\n\n`;
            profileText += `Status: ${currentUser?.status === 'synced' ? 'Synced to servers' : 'Stored locally'}\n`;
            
            alert(profileText);
        }

        function startOver() {
            if (confirm('Are you sure you want to start over? This will clear all your progress.')) {
                localStorage.removeItem('smartMomProgress');
                currentStep = 1;
                selectedPath = '';
                formData = {};
                aiResponses = {};
                
                document.querySelectorAll('.form-control').forEach(field => {
                    field.value = '';
                });
                
                document.querySelectorAll('.path-option').forEach(option => {
                    option.classList.remove('selected');
                });
                
                showCurrentStep();
                updateProgressDisplay();
                scrollToCurrentStep();
            }
        }

        // ===== INITIALIZATION =====
        
        document.addEventListener('DOMContentLoaded', function() {
            checkExistingSession();
            
            const savedLanguage = localStorage.getItem('smartMomLanguage');
            if (savedLanguage) {
                changeLanguage(savedLanguage);
            }
            
            showCurrentStep();

            // Auth form submission
            document.getElementById('authForm').addEventListener('submit', async function(event) {
                event.preventDefault();
                
                const email = document.getElementById('authEmail').value;
                const password = document.getElementById('authPassword').value;
                const name = document.getElementById('authName').value;
                const confirmPassword = document.getElementById('authConfirmPassword').value;
                
                clearAuthMessages();
                
                if (authMode === 'signup') {
                    if (!name.trim()) {
                        showAuthError('Name is required');
                        return;
                    }
                    
                    if (password !== confirmPassword) {
                        showAuthError('Passwords do not match');
                        return;
                    }
                    
                    if (password.length < 6) {
                        showAuthError('Password must be at least 6 characters');
                        return;
                    }
                    
                    try {
                        document.getElementById('authSubmitBtn').disabled = true;
                        document.getElementById('authSubmitText').innerHTML = '<span class="loading-spinner"></span>Creating Account...';
                        
                        await createUser(email, password, name);
                        
                        showAuthSuccess('Account created successfully! Welcome to Smart Mom Method!');
                        
                        setTimeout(() => {
                            closeAuthModal();
                        }, 2000);
                        
                    } catch (error) {
                        let errorMessage = 'Failed to create account';
                        
                        if (error.message === 'User already exists') {
                            errorMessage = 'An account with this email already exists';
                        }
                        
                        showAuthError(errorMessage);
                    } finally {
                        document.getElementById('authSubmitBtn').disabled = false;
                        document.getElementById('authSubmitText').textContent = 'Create Account';
                    }
                } else {
                    try {
                        document.getElementById('authSubmitBtn').disabled = true;
                        document.getElementById('authSubmitText').innerHTML = '<span class="loading-spinner"></span>Signing In...';
                        
                        await signIn(email, password);
                        
                        showAuthSuccess('Signed in successfully! Welcome back!');
                        
                        setTimeout(() => {
                            closeAuthModal();
                        }, 1500);
                        
                    } catch (error) {
                        let errorMessage = 'Invalid email or password';
                        showAuthError(errorMessage);
                    } finally {
                        document.getElementById('authSubmitBtn').disabled = false;
                        document.getElementById('authSubmitText').textContent = 'Sign In';
                    }
                }
            });
        });

        // Make functions globally available
        window.showAuthModal = showAuthModal;
        window.closeAuthModal = closeAuthModal;
        window.toggleAuthMode = toggleAuthMode;
        window.startOnboarding = startOnboarding;
        window.handleReturningUser = handleReturningUser;
        window.changeLanguage = changeLanguage;
        window.selectPath = selectPath;
        window.nextStep = nextStep;
        window.previousStep = previousStep;
        window.validateField = validateField;
        window.updateCharCounter = updateCharCounter;
        window.copyPrompt = copyPrompt;
        window.openAI = openAI;
        window.saveAIResponse = saveAIResponse;
        window.viewFullPrompt = viewFullPrompt;
        window.updateGeminiPrompt = updateGeminiPrompt;
        window.viewCompleteProfile = viewCompleteProfile;
        window.startOver = startOver;
        window.signOut = signOut;
        window.scrollToCurrentStep = scrollToCurrentStep;
        window.completeAssessment = completeAssessment;
        window.showPremiumServices = showPremiumServices;
        window.backToAssessment = backToAssessment;
        window.backToMainPage = backToMainPage;
        window.openStripeLink = openStripeLink;
        window.openCalendlyLink = openCalendlyLink;
        window.downloadCalendar = downloadCalendar;

        console.log('Smart Mom Method: All functions loaded successfully - Enhanced with Payment System');
    </script>
</body>
</html>
