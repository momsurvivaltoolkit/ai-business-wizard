<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Mom Method - AI Interactive Calendar & Business Wizard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    
    <style>
        :root {
            --sage-green: #6B8E6B;
            --warm-cream: #FAF7F0;
            --deep-teal: #2D5B69;
            --charcoal: #2C3E50;
            --soft-gold: #D4A574;
            --light-sage: #E8F5E8;
            --sage-alpha: rgba(107, 142, 107, 0.1);
            --teal-alpha: rgba(45, 91, 105, 0.1);
            --gold-alpha: rgba(212, 165, 116, 0.1);
            --step-current: #3498db;
            --step-completed: #27ae60;
            --step-pending: #95a5a6;
            --button-next: #2ecc71;
            --button-done: #7f8c8d;
            --button-back: #e74c3c;
            --success-green: #27ae60;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--charcoal);
            background: var(--warm-cream);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* User Status Bar */
        .user-status-bar {
            background: white;
            padding: 16px 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 16px rgba(107, 142, 107, 0.08);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--sage-green), var(--deep-teal));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 18px;
        }

        .user-details h4 {
            color: var(--charcoal);
            margin: 0;
            font-size: 16px;
        }

        .user-details p {
            color: var(--charcoal);
            opacity: 0.7;
            margin: 0;
            font-size: 14px;
        }

        .user-actions {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-badge.signed-in {
            background: var(--light-sage);
            color: var(--sage-green);
        }

        .status-badge.guest {
            background: #fff3cd;
            color: #856404;
        }

        /* Authentication Modal */
        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(44, 62, 80, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
        }

        .auth-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .auth-content {
            background: white;
            border-radius: 24px;
            padding: 50px;
            max-width: 500px;
            width: 90%;
            position: relative;
            transform: translateY(20px);
            transition: transform 0.4s ease;
        }

        .auth-modal.active .auth-content {
            transform: translateY(0);
        }

        .auth-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--charcoal);
            opacity: 0.7;
        }

        .auth-close:hover {
            opacity: 1;
        }

        .auth-title {
            font-family: 'Playfair Display', serif;
            color: var(--sage-green);
            margin-bottom: 32px;
            font-size: 2rem;
            text-align: center;
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .auth-input {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--light-sage);
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }

        .auth-input:focus {
            outline: none;
            border-color: var(--sage-green);
            box-shadow: 0 0 0 4px var(--sage-alpha);
        }

        .auth-button {
            background: linear-gradient(135deg, var(--sage-green), #5A7A5A);
            color: white;
            padding: 18px 36px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .auth-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(107, 142, 107, 0.35);
        }

        .auth-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .auth-switch {
            text-align: center;
            margin-top: 24px;
            color: var(--charcoal);
            opacity: 0.8;
        }

        .auth-link {
            color: var(--sage-green);
            cursor: pointer;
            text-decoration: underline;
        }

        .auth-error {
            background: #ffebee;
            border: 1px solid #e57373;
            color: #c62828;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            font-size: 14px;
        }

        .auth-success {
            background: #e8f5e8;
            border: 1px solid var(--sage-green);
            color: var(--sage-green);
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            font-size: 14px;
        }

        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid var(--sage-green);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 8px;
            display: inline-block;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Welcome Modal */
        .welcome-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(44, 62, 80, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 1;
            visibility: visible;
            transition: all 0.4s ease;
        }

        .welcome-modal.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .welcome-content {
            background: white;
            border-radius: 24px;
            padding: 60px 50px;
            max-width: 600px;
            width: 90%;
            text-align: center;
            transform: translateY(0);
            transition: transform 0.4s ease;
            box-shadow: 0 30px 80px rgba(44, 62, 80, 0.2);
        }

        .welcome-content h2 {
            font-family: 'Playfair Display', serif;
            color: var(--sage-green);
            margin-bottom: 24px;
            font-size: 2.4rem;
            font-weight: 600;
        }

        .welcome-content p {
            color: var(--charcoal);
            margin-bottom: 40px;
            font-size: 1.1rem;
            line-height: 1.7;
            opacity: 0.8;
        }

        .welcome-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .welcome-btn {
            padding: 18px 36px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
            font-family: 'Inter', sans-serif;
        }

        .welcome-btn.primary {
            background: linear-gradient(135deg, var(--sage-green), #5A7A5A);
            color: white;
            box-shadow: 0 8px 24px rgba(107, 142, 107, 0.3);
        }

        .welcome-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(107, 142, 107, 0.4);
        }

        .welcome-btn.secondary {
            background: var(--deep-teal);
            color: white;
        }

        .welcome-btn.secondary:hover {
            background: #1E3D47;
            transform: translateY(-2px);
        }

        .welcome-btn.auth {
            background: var(--soft-gold);
            color: white;
        }

        .welcome-btn.auth:hover {
            background: #C79660;
            transform: translateY(-2px);
        }

        /* Language Selection */
        .language-selector {
            text-align: center;
            margin-bottom: 40px;
            padding: 32px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(44, 62, 80, 0.08);
        }

        .language-selector h2 {
            margin-bottom: 24px;
            color: var(--charcoal);
            font-size: 1.6rem;
            font-weight: 600;
        }

        .language-buttons {
            display: flex;
            gap: 24px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .language-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 40px;
            background: var(--sage-green);
            color: white;
            border: none;
            border-radius: 16px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            min-width: 200px;
            box-shadow: 0 6px 20px rgba(107, 142, 107, 0.25);
        }

        .language-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(107, 142, 107, 0.35);
        }

        .language-btn.active {
            background: var(--soft-gold);
            transform: translateY(-2px);
        }

        .language-btn .flag {
            font-size: 2rem;
            margin-bottom: 12px;
        }

        .language-btn small {
            margin-top: 8px;
            opacity: 0.9;
        }

        /* Progress Container */
        .progress-container {
            background: white;
            border-radius: 20px;
            padding: 32px;
            margin-bottom: 32px;
            box-shadow: 0 8px 32px rgba(44, 62, 80, 0.08);
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .step-counter {
            font-weight: 700;
            color: var(--sage-green);
            font-size: 1.3rem;
        }

        .overall-progress {
            width: 100%;
            height: 12px;
            background: var(--light-sage);
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 32px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--sage-green), var(--deep-teal));
            transition: width 0.5s ease;
            border-radius: 6px;
            width: 16.67%;
        }

        .progress-bar {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 16px;
            margin-bottom: 0;
        }

        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 16px;
            border-radius: 16px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--sage-alpha);
        }
        
        .progress-step:hover {
            background: var(--teal-alpha);
            transform: translateY(-2px);
        }

        .progress-step.active {
            background: var(--step-current);
            color: white;
        }

        .progress-step.completed {
            background: var(--step-completed);
            color: white;
        }

        .progress-step.pending {
            background: var(--step-pending);
            color: white;
        }

        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-bottom: 12px;
            transition: all 0.3s ease;
        }

        .progress-step.active .step-number {
            background: rgba(255, 255, 255, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .step-text {
            font-size: 0.9rem;
            text-align: center;
            font-weight: 600;
        }

        /* Main Card */
        .main-card {
            background: white;
            border-radius: 24px;
            box-shadow: 0 16px 48px rgba(44, 62, 80, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, var(--sage-green), var(--deep-teal));
            color: white;
            padding: 60px 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: shimmer 8s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
        }

        .header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            margin-bottom: 16px;
            position: relative;
            z-index: 1;
            font-weight: 600;
        }

        .header .subtitle {
            font-size: 1.3rem;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            font-weight: 400;
        }

        .badge {
            display: inline-block;
            background: var(--soft-gold);
            color: white;
            padding: 12px 28px;
            border-radius: 30px;
            font-weight: 700;
            margin-top: 24px;
            font-size: 1rem;
            position: relative;
            z-index: 1;
        }

        .header .cta-section {
            margin-top: 40px;
            position: relative;
            z-index: 1;
        }

        .btn-current {
            background: linear-gradient(135deg, var(--soft-gold), #C79660);
            color: white;
            box-shadow: 0 8px 24px rgba(212, 165, 116, 0.3);
            font-size: 1.2rem;
            padding: 20px 40px;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-current:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(212, 165, 116, 0.4);
        }

        .content {
            padding: 50px 40px;
        }

        .step-description {
            background: var(--light-sage);
            padding: 32px;
            border-radius: 16px;
            margin-bottom: 40px;
            border-left: 6px solid var(--sage-green);
        }

        .step-description h2 {
            font-family: 'Playfair Display', serif;
            color: var(--charcoal);
            margin-bottom: 16px;
            font-size: 2rem;
            font-weight: 600;
        }

        .step-description p {
            color: var(--charcoal);
            font-size: 1.1rem;
            opacity: 0.8;
        }

        .empowerment-message {
            background: linear-gradient(135deg, var(--gold-alpha), rgba(212, 165, 116, 0.15));
            border: 2px solid var(--soft-gold);
            border-radius: 20px;
            padding: 32px;
            margin: 32px 0;
            text-align: center;
        }

        .empowerment-title {
            color: var(--charcoal);
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 16px;
            font-family: 'Playfair Display', serif;
        }

        .empowerment-text {
            color: var(--charcoal);
            line-height: 1.7;
            opacity: 0.9;
        }

        /* Form Sections */
        .form-section {
            margin-bottom: 40px;
            padding: 40px;
            background: white;
            border-radius: 20px;
            border: 2px solid var(--light-sage);
            box-shadow: 0 4px 16px rgba(107, 142, 107, 0.08);
        }

        .form-section h2 {
            font-family: 'Playfair Display', serif;
            color: var(--charcoal);
            margin-bottom: 32px;
            font-size: 1.8rem;
            font-weight: 600;
            text-align: center;
        }

        .form-group {
            margin-bottom: 28px;
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            color: var(--charcoal);
            font-size: 1rem;
        }

        .required {
            color: var(--soft-gold);
            margin-left: 4px;
        }

        .form-control {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--light-sage);
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            background: var(--warm-cream);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--sage-green);
            box-shadow: 0 0 0 4px var(--sage-alpha);
            background: white;
        }

        .validation-message {
            margin-top: 8px;
            font-size: 14px;
            color: #e57373;
        }

        .validation-message.success {
            color: var(--sage-green);
        }

        .char-counter {
            text-align: right;
            font-size: 12px;
            color: var(--charcoal);
            opacity: 0.6;
            margin-top: 4px;
        }

        /* Path Selection */
        .path-selection {
            margin: 50px 0;
            text-align: center;
        }

        .path-selection h2 {
            font-family: 'Playfair Display', serif;
            color: var(--charcoal);
            margin-bottom: 40px;
            font-size: 2.2rem;
            font-weight: 600;
        }

        .path-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .path-option {
            background: var(--warm-cream);
            border-radius: 20px;
            padding: 40px 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            position: relative;
            text-align: center;
        }

        .path-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(107, 142, 107, 0.2);
            border-color: var(--sage-green);
        }

        .path-option.selected {
            border-color: var(--soft-gold);
            background: white;
            transform: translateY(-3px);
            box-shadow: 0 12px 36px rgba(212, 165, 116, 0.25);
        }

        .path-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            display: block;
        }

        .path-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--charcoal);
            margin-bottom: 16px;
        }

        .path-description {
            color: var(--charcoal);
            opacity: 0.8;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .continue-btn {
            background: linear-gradient(135deg, var(--sage-green), #5A7A5A);
            color: white;
            padding: 18px 40px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 30px;
            opacity: 0;
            transform: translateY(20px);
            pointer-events: none;
        }

        .continue-btn.visible {
            opacity: 1;
            transform: translateY(0);
            pointer-events: all;
        }

        .continue-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(107, 142, 107, 0.3);
        }

        .continue-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Enhanced Interactive AI Steps */
        .interactive-ai-workflow {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            border: 2px solid var(--light-sage);
        }

        .ai-step-container {
            margin: 40px 0;
            padding: 30px;
            border-radius: 16px;
            border: 3px solid var(--step-pending);
            transition: all 0.3s ease;
        }

        .ai-step-container.current {
            border-color: var(--step-current);
            background: rgba(52, 152, 219, 0.05);
        }

        .ai-step-container.completed {
            border-color: var(--step-completed);
            background: rgba(39, 174, 96, 0.05);
        }

        .ai-step-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .ai-step-title {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--charcoal);
        }

        .ai-step-number {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--step-pending);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .ai-step-container.current .ai-step-number {
            background: var(--step-current);
        }

        .ai-step-container.completed .ai-step-number {
            background: var(--step-completed);
        }

        .ai-step-status {
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            background: var(--step-pending);
            color: white;
        }

        .ai-step-container.current .ai-step-status {
            background: var(--step-current);
        }

        .ai-step-container.completed .ai-step-status {
            background: var(--step-completed);
        }

        .ai-step-content {
            margin: 20px 0;
        }

        .ai-prompt-area {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
        }

        .ai-prompt-label {
            font-weight: 600;
            color: var(--charcoal);
            margin-bottom: 10px;
            display: block;
        }

        .ai-prompt-textarea {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            line-height: 1.5;
            resize: vertical;
            background: white;
        }

        .ai-response-area {
            background: #f0f8ff;
            border: 2px solid #b3d9ff;
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
        }

        .ai-response-textarea {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 1px solid #b3d9ff;
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            line-height: 1.5;
            resize: vertical;
            background: white;
        }

        .ai-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .ai-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            min-width: 140px;
        }

        .ai-btn.next {
            background: var(--button-next);
            color: white;
        }

        .ai-btn.next:hover {
            background: #27ae60;
            transform: translateY(-1px);
        }

        .ai-btn.done {
            background: var(--button-done);
            color: white;
        }

        .ai-btn.done:hover {
            background: #6c7b7d;
            transform: translateY(-1px);
        }

        .ai-btn.back {
            background: var(--button-back);
            color: white;
        }

        .ai-btn.back:hover {
            background: #c0392b;
            transform: translateY(-1px);
        }

        .ai-btn.copy {
            background: var(--sage-green);
            color: white;
        }

        .ai-btn.copy:hover {
            background: #5A7A5A;
            transform: translateY(-1px);
        }

        .ai-btn.open {
            background: var(--soft-gold);
            color: white;
        }

        .ai-btn.open:hover {
            background: #C79660;
            transform: translateY(-1px);
        }

        .ai-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .instructions-box {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border: 2px solid #f39c12;
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
        }

        .instructions-title {
            font-weight: 600;
            color: #d68910;
            margin-bottom: 10px;
        }

        .instructions-list {
            list-style: none;
            padding: 0;
        }

        .instructions-list li {
            margin: 8px 0;
            padding-left: 20px;
            position: relative;
        }

        .instructions-list li:before {
            content: "â†’";
            position: absolute;
            left: 0;
            color: #d68910;
            font-weight: bold;
        }

        /* Interactive Calendar System */
        .calendar-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 8px 32px rgba(44, 62, 80, 0.08);
        }

        .calendar-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--light-sage);
        }

        .calendar-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .week-selector {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .week-btn {
            padding: 8px 16px;
            border: 2px solid var(--light-sage);
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            min-width: 60px;
        }

        .week-btn.active {
            background: var(--sage-green);
            color: white;
            border-color: var(--sage-green);
        }

        .week-btn:hover {
            border-color: var(--sage-green);
            transform: translateY(-1px);
        }

        .calendar-progress {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .progress-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 4px solid var(--light-sage);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--sage-green);
            position: relative;
        }

        .week-content {
            display: none;
        }

        .week-content.active {
            display: block;
        }

        .day-card {
            background: var(--warm-cream);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 6px solid var(--sage-green);
            transition: all 0.3s ease;
        }

        .day-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(107, 142, 107, 0.15);
        }

        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .day-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--charcoal);
        }

        .day-progress {
            background: var(--light-sage);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            color: var(--sage-green);
        }

        .task-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .task-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            border: 2px solid var(--light-sage);
            transition: all 0.3s ease;
        }

        .task-card.completed {
            border-color: var(--success-green);
            background: #f8fff8;
        }

        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
            gap: 15px;
        }

        .task-title-section {
            flex: 1;
        }

        .task-title {
            font-weight: 600;
            color: var(--charcoal);
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .task-meta {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .task-cost {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .cost-free {
            background: #e8f5e8;
            color: var(--success-green);
        }

        .cost-paid {
            background: #fff3cd;
            color: #856404;
        }

        .task-time {
            color: var(--charcoal);
            opacity: 0.7;
            font-size: 14px;
        }

        .task-checkbox {
            width: 24px;
            height: 24px;
            margin-top: 2px;
            cursor: pointer;
        }

        .step-list {
            margin-top: 15px;
        }

        .step-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 12px;
            padding: 12px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .step-item:hover {
            background: var(--sage-alpha);
        }

        .step-item.completed {
            background: #f8fff8;
            text-decoration: line-through;
            opacity: 0.8;
        }

        .step-checkbox {
            width: 18px;
            height: 18px;
            margin-top: 2px;
            cursor: pointer;
        }

        .step-number {
            background: var(--sage-green);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
            flex-shrink: 0;
        }

        .step-text {
            flex: 1;
            line-height: 1.5;
            color: var(--charcoal);
        }

        .calendar-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .calendar-btn {
            background: var(--sage-green);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .calendar-btn:hover {
            background: var(--deep-teal);
            transform: translateY(-1px);
        }

        .calendar-btn.secondary {
            background: var(--soft-gold);
        }

        .calendar-btn.secondary:hover {
            background: #C79660;
        }

        .calendar-stats {
            background: var(--light-sage);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            text-align: center;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--sage-green);
        }

        .stat-label {
            font-size: 14px;
            color: var(--charcoal);
            opacity: 0.8;
        }

        .calendar-empty {
            text-align: center;
            padding: 60px 20px;
            color: var(--charcoal);
            opacity: 0.6;
        }

        .calendar-empty h3 {
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .parse-calendar-section {
            background: var(--light-sage);
            padding: 25px;
            border-radius: 16px;
            margin-bottom: 30px;
            text-align: center;
        }

        .parse-calendar-section h3 {
            color: var(--sage-green);
            margin-bottom: 15px;
        }

        .calendar-input {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 2px solid var(--sage-green);
            border-radius: 12px;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            line-height: 1.5;
            resize: vertical;
            margin-bottom: 15px;
        }

        .parse-btn {
            background: var(--sage-green);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            font-size: 16px;
        }

        .parse-btn:hover {
            background: var(--deep-teal);
        }

        /* Final Dashboard */
        .final-dashboard {
            background: linear-gradient(135deg, var(--sage-green), var(--deep-teal));
            color: white;
            padding: 50px 40px;
            border-radius: 24px;
            margin: 40px 0;
        }

        .dashboard-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .dashboard-header h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .dashboard-section {
            background: white;
            color: var(--charcoal);
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .dashboard-section h3 {
            color: var(--sage-green);
            margin-bottom: 20px;
            font-size: 1.4rem;
            font-weight: 600;
        }

        .business-summary {
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .final-actions {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .final-action-btn {
            background: var(--soft-gold);
            color: white;
            padding: 18px 36px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
        }

        .final-action-btn:hover {
            background: #C79660;
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(212, 165, 116, 0.3);
        }

        .final-action-btn.primary {
            background: var(--button-next);
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .container {
                padding: 0 16px;
            }
            
            .header h1 {
                font-size: 2.2rem;
            }
            
            .header .subtitle {
                font-size: 1.1rem;
            }
            
            .content {
                padding: 30px 20px;
            }
            
            .progress-bar {
                grid-template-columns: repeat(3, 1fr);
                gap: 8px;
            }

            .progress-step {
                padding: 12px 8px;
            }

            .step-text {
                font-size: 0.7rem;
            }

            .language-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .language-btn {
                min-width: 280px;
            }

            .welcome-content {
                padding: 40px 30px;
            }

            .welcome-buttons {
                flex-direction: column;
            }

            .form-control {
                font-size: 16px;
                padding: 18px;
            }

            .auth-content {
                padding: 30px 20px;
            }

            .path-options {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .path-option {
                padding: 30px 20px;
            }

            .form-section {
                padding: 30px 20px;
            }

            .user-status-bar {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }

            .user-actions {
                width: 100%;
                justify-content: space-between;
            }

            .ai-buttons {
                flex-direction: column;
            }

            .ai-btn {
                min-width: 100%;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .final-actions {
                flex-direction: column;
                align-items: center;
            }

            .final-action-btn {
                min-width: 100%;
                max-width: 300px;
            }

            .ai-step-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .calendar-navigation {
                flex-direction: column;
                gap: 20px;
            }

            .week-selector {
                justify-content: center;
            }

            .calendar-progress {
                justify-content: center;
            }

            .task-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .task-meta {
                flex-direction: column;
                gap: 8px;
            }

            .calendar-actions {
                flex-direction: column;
                align-items: center;
            }

            .calendar-btn {
                min-width: 200px;
            }

            .calendar-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .step-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            .step-number {
                align-self: flex-start;
            }
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- Authentication Modal -->
    <div id="authModal" class="auth-modal">
        <div class="auth-content">
            <button class="auth-close" onclick="closeAuthModal()">&times;</button>
            <h2 class="auth-title" id="authTitle">Create Your Account</h2>
            
            <div id="authError" class="auth-error hidden"></div>
            <div id="authSuccess" class="auth-success hidden"></div>
            
            <form class="auth-form" id="authForm">
                <input type="text" id="authName" class="auth-input" placeholder="Your Name" style="display: none;">
                <input type="email" id="authEmail" class="auth-input" placeholder="Email Address" required>
                <input type="password" id="authPassword" class="auth-input" placeholder="Password" required>
                <input type="password" id="authConfirmPassword" class="auth-input" placeholder="Confirm Password" style="display: none;">
                
                <button type="submit" class="auth-button" id="authSubmitBtn">
                    <span id="authSubmitText">Create Account</span>
                </button>
            </form>
            
            <div class="auth-switch">
                <span id="authSwitchText">Already have an account?</span>
                <span class="auth-link" id="authSwitchLink" onclick="toggleAuthMode()">Sign In</span>
            </div>
        </div>
    </div>

    <!-- Welcome Modal -->
    <div id="welcomeModal" class="welcome-modal">
        <div class="welcome-content">
            <h2 id="welcomeTitle">Welcome to Smart Mom Method!</h2>
            <p id="welcomeDescription">Create your personalized interactive calendar and business plan in 6 simple steps. This process will take approximately 25-30 minutes and will generate a comprehensive interactive calendar and plan tailored specifically for busy moms like you.</p>
            <div class="welcome-buttons">
                <button class="welcome-btn primary" onclick="startOnboarding()">
                    <span id="welcomeStart">Get Started</span>
                </button>
                <button class="welcome-btn auth" onclick="showAuthModal('signup')">
                    <span id="welcomeCreate">Create Account & Save Progress</span>
                </button>
                <button class="welcome-btn secondary" onclick="handleReturningUser()">
                    <span id="welcomeReturning">I'm a returning user</span>
                </button>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- User Status Bar -->
        <div id="userStatusBar" class="user-status-bar hidden">
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">?</div>
                <div class="user-details">
                    <h4 id="userDisplayName">Guest User</h4>
                    <p id="userStatusText">Progress will not be saved</p>
                </div>
            </div>
            <div class="user-actions">
                <div class="status-badge guest" id="statusBadge">Guest Mode</div>
                <button onclick="showAuthModal('signup')" style="background: var(--sage-green); color: white; border: none; padding: 8px 16px; border-radius: 8px; font-size: 14px; cursor: pointer;">
                    Save Progress
                </button>
                <button id="signOutBtn" onclick="signOut()" style="background: none; border: 1px solid var(--charcoal); color: var(--charcoal); padding: 8px 16px; border-radius: 8px; font-size: 14px; cursor: pointer; display: none;">
                    Sign Out
                </button>
            </div>
        </div>

        <!-- Language Selection -->
        <div class="language-selector">
            <h2 id="languageTitle">Choose Your Language / Elige Tu Idioma</h2>
            <div class="language-buttons">
                <button class="language-btn active" onclick="changeLanguage('en')" id="lang-en">
                    <span class="flag">ðŸ‡ºðŸ‡¸</span>
                    <span>English</span>
                    <small>Read and answer everything in English</small>
                </button>
                <button class="language-btn" onclick="changeLanguage('es')" id="lang-es">
                    <span class="flag">ðŸ‡ªðŸ‡¸</span>
                    <span>EspaÃ±ol</span>
                    <small>Lee y responde todo en espaÃ±ol</small>
                </button>
            </div>
        </div>

        <!-- Skip to Payment Button -->
        <div style="text-align: center; margin: 30px 0; padding: 20px; background: white; border-radius: 16px; box-shadow: 0 4px 16px rgba(107, 142, 107, 0.08);">
            <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin-bottom: 15px;">
                <button onclick="skipToPaymentOptions()" style="background: linear-gradient(135deg, var(--soft-gold), #C79660); color: white; padding: 15px 30px; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                    View Payment Options
                </button>
                <button id="calendarAccessBtn" onclick="showInteractiveCalendar()" style="background: linear-gradient(135deg, var(--sage-green), var(--deep-teal)); color: white; padding: 15px 30px; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: none;">
                    ðŸ“… My Interactive Calendar
                </button>
            </div>
            <p style="color: var(--charcoal); font-size: 1.1rem;">Skip ahead to our solutions or continue with the free planning process below</p>
        </div>

        <!-- Progress Container -->
        <div class="progress-container">
            <div class="progress-header">
                <div class="step-counter" id="stepCounter">Step 1 of 6</div>
            </div>
            <div class="overall-progress">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-bar">
                <div class="progress-step active" id="step-1">
                    <span class="step-number">1</span>
                    <span class="step-text" id="stepText1">Basic Info</span>
                </div>
                <div class="progress-step pending" id="step-2">
                    <span class="step-number">2</span>
                    <span class="step-text" id="stepText2">Path Selection</span>
                </div>
                <div class="progress-step pending" id="step-3">
                    <span class="step-number">3</span>
                    <span class="step-text" id="stepText3">Questions</span>
                </div>
                <div class="progress-step pending" id="step-4">
                    <span class="step-number">4</span>
                    <span class="step-text" id="stepText4">AI Analysis</span>
                </div>
                <div class="progress-step pending" id="step-5">
                    <span class="step-number">5</span>
                    <span class="step-text" id="stepText5">Calendar</span>
                </div>
                <div class="progress-step pending" id="step-6">
                    <span class="step-number">6</span>
                    <span class="step-text" id="stepText6">Complete</span>
                </div>
            </div>
        </div>

        <div class="main-card">
            <div class="header">
                <h1 id="mainTitle">Smart Mom Method</h1>
                <p class="subtitle" id="mainSubtitle">AI-Powered Interactive Calendar & Business Planning for Busy Moms</p>
                <span class="badge" id="freeBadge">100% Free</span>
                
                <div class="cta-section">
                    <button class="btn-current" onclick="scrollToForm()">
                        <span id="ctaButton">Start Your Free Interactive Calendar & Business Plan Now</span>
                    </button>
                    <p style="margin-top: 16px; font-size: 0.95rem; opacity: 0.9;" id="ctaSubtext">No email required to browse â€¢ Full process takes 25-30 minutes</p>
                </div>
            </div>

            <div class="content">
                <!-- Basic Information Section -->
                <div class="form-section" id="basicInfoSection">
                    <h2 id="basicInfoTitle">Basic Information</h2>
                    
                    <div class="form-group">
                        <label id="nameLabel">Your Name: <span class="required">*</span></label>
                        <input type="text" id="user-name" class="form-control" placeholder="Enter your name" onchange="validateField(this)" />
                        <div class="validation-message" id="user-name-validation"></div>
                    </div>

                    <div class="form-group">
                        <label id="emailLabel">Your Email: <span class="required">*</span></label>
                        <input type="email" id="user-email" class="form-control" placeholder="your.email@example.com" onchange="validateField(this)" />
                        <div class="validation-message" id="user-email-validation"></div>
                    </div>
                </div>

                <div class="step-description">
                    <h2 id="stepDescTitle">Let's Get Started</h2>
                    <p id="stepDescText">First, let's get to know you better so we can create the perfect interactive calendar and business plan for your unique situation.</p>
                </div>

                <div class="empowerment-message">
                    <div class="empowerment-title" id="empowermentTitle">You're Already Successful!</div>
                    <p class="empowerment-text" id="empowermentText">Managing a family is running a complex organization. You have negotiation skills, time management expertise, and crisis resolution abilities that most CEOs would envy. Now let's channel that into YOUR organized life and successful business!</p>
                </div>

                <!-- Path Selection -->
                <div class="path-selection hidden" id="pathSelection">
                    <h2 id="pathSelectionTitle">What brings you here today? Choose your main focus:</h2>
                    
                    <div class="path-options">
                        <div class="path-option" data-path="life-organization" onclick="selectPath('life-organization')">
                            <span class="path-icon">ðŸ </span>
                            <h3 class="path-title" id="pathTitle1">Life Organization</h3>
                            <p class="path-description" id="pathDesc1">I need help organizing my daily life, family schedules, and home systems</p>
                        </div>
                        
                        <div class="path-option" data-path="business-launch" onclick="selectPath('business-launch')">
                            <span class="path-icon">ðŸ’¼</span>
                            <h3 class="path-title" id="pathTitle2">Business Launch</h3>
                            <p class="path-description" id="pathDesc2">I want to start a business or create passive income streams</p>
                        </div>
                        
                        <div class="path-option" data-path="both" onclick="selectPath('both')">
                            <span class="path-icon">â˜€ï¸</span>
                            <h3 class="path-title" id="pathTitle3">Both Life & Business</h3>
                            <p class="path-description" id="pathDesc3">I need life organization AND want to start a business</p>
                        </div>
                    </div>
                    
                    <button class="continue-btn" id="continueBtn" onclick="showBusinessQuestionnaire()">
                        <span id="continueBtnText">Continue With Selected Path</span>
                    </button>
                </div>

                <!-- Business Questionnaire -->
                <div class="form-section hidden" id="businessQuestionnaire">
                    <h2 id="businessQuestionnaireTitle">Tell Us More About Your Situation</h2>
                    
                    <div class="form-group">
                        <label id="familyStructureLabel">Family structure & ages: <span class="required">*</span></label>
                        <textarea id="family-structure" class="form-control" rows="4" placeholder="Tell us about your family: How many kids? What ages? Any special needs or considerations?" oninput="updateCharCount(this, 1000)"></textarea>
                        <div class="char-counter" id="family-structure-counter">0/1000</div>
                        <div class="validation-message" id="family-structure-validation"></div>
                    </div>

                    <div class="form-group">
                        <label id="dailyScheduleLabel">Describe your typical daily schedule: <span class="required">*</span></label>
                        <textarea id="daily-schedule" class="form-control" rows="4" placeholder="Walk us through a typical day: When do you wake up? Kids' schedules? When do you have free time?" oninput="updateCharCount(this, 1000)"></textarea>
                        <div class="char-counter" id="daily-schedule-counter">0/1000</div>
                        <div class="validation-message" id="daily-schedule-validation"></div>
                    </div>

                    <div class="form-group">
                        <label id="investmentLabel">Investment level for business: <span class="required">*</span></label>
                        <select id="investment-level" class="form-control" onchange="validateField(this)">
                            <option value="">Select investment level...</option>
                            <option value="no-money">$0 - I need free options only</option>
                            <option value="minimal">Under $100 - Very limited budget</option>
                            <option value="moderate">$100-500 - Can invest if necessary</option>
                            <option value="flexible">$500+ - Flexible for right opportunity</option>
                        </select>
                        <div class="validation-message" id="investment-level-validation"></div>
                    </div>

                    <div class="form-group">
                        <label id="incomeTimelineLabel">Timeline to first income: <span class="required">*</span></label>
                        <select id="income-timeline" class="form-control" onchange="validateField(this)">
                            <option value="">Select timeline...</option>
                            <option value="immediate">Immediate need (within 1-2 months)</option>
                            <option value="moderate">3-6 months is fine</option>
                            <option value="patient">Can wait 6-12 months for good business</option>
                            <option value="long-term">Building for long-term (1+ years)</option>
                        </select>
                        <div class="validation-message" id="income-timeline-validation"></div>
                    </div>

                    <button class="continue-btn visible" onclick="proceedWithQuestionnaire()" id="proceedBtn">
                        <span id="proceedBtnText">Start AI-Powered Analysis</span>
                    </button>
                </div>

                <!-- Enhanced Interactive AI Workflow -->
                <div id="interactiveAIWorkflow" class="hidden">
                    <div class="step-description">
                        <h2>AI-Powered Business Plan Creation</h2>
                        <p>Follow the 4-step process below. Each step builds on the previous one to create your comprehensive business plan and interactive calendar.</p>
                    </div>

                    <div class="interactive-ai-workflow">
                        <!-- Step 1: ChatGPT Business Ideas -->
                        <div class="ai-step-container current" id="ai-step-1-container">
                            <div class="ai-step-header">
                                <div class="ai-step-title">
                                    <div class="ai-step-number">1</div>
                                    <span>ChatGPT Business Ideas</span>
                                </div>
                                <div class="ai-step-status">Current Step</div>
                            </div>
                            
                            <div class="ai-step-content">
                                <div class="instructions-box">
                                    <div class="instructions-title">Instructions:</div>
                                    <ul class="instructions-list">
                                        <li>Copy the prompt below</li>
                                        <li>Open ChatGPT in a new tab</li>
                                        <li>Paste the prompt and submit</li>
                                        <li>Copy ChatGPT's complete response</li>
                                        <li>Paste the response in the box below</li>
                                        <li>Click "Generate Next Prompt" to continue</li>
                                    </ul>
                                </div>

                                <div class="ai-prompt-area">
                                    <label class="ai-prompt-label">Generated Prompt for ChatGPT:</label>
                                    <textarea id="chatgpt-prompt" class="ai-prompt-textarea" readonly placeholder="Your ChatGPT prompt will be generated here..."></textarea>
                                </div>

                                <div class="ai-buttons">
                                    <button class="ai-btn copy" onclick="copyToClipboard('chatgpt-prompt')">Copy Prompt</button>
                                    <button class="ai-btn open" onclick="openChatGPT()">Open ChatGPT</button>
                                </div>

                                <div class="ai-response-area">
                                    <label class="ai-prompt-label">Paste ChatGPT's Response Here:</label>
                                    <textarea id="chatgpt-response" class="ai-response-textarea" placeholder="Paste the complete response from ChatGPT here..." oninput="checkResponseAndEnableNext(1)"></textarea>
                                </div>

                                <div class="ai-buttons">
                                    <button class="ai-btn next" id="next-btn-1" onclick="generateNextPrompt(2)" disabled>Generate Next Prompt</button>
                                </div>
                            </div>
                        </div>

                        <!-- Step 2: Gemini Market Research -->
                        <div class="ai-step-container pending" id="ai-step-2-container">
                            <div class="ai-step-header">
                                <div class="ai-step-title">
                                    <div class="ai-step-number">2</div>
                                    <span>Gemini Market Research</span>
                                </div>
                                <div class="ai-step-status">Waiting</div>
                            </div>
                            
                            <div class="ai-step-content">
                                <div class="instructions-box">
                                    <div class="instructions-title">Instructions:</div>
                                    <ul class="instructions-list">
                                        <li>Copy the prompt below (generated from your ChatGPT response)</li>
                                        <li>Open Gemini in a new tab</li>
                                        <li>Paste the prompt and submit</li>
                                        <li>IMPORTANT: Choose "Deep Search" option when prompted</li>
                                        <li>Wait for complete Deep Search results</li>
                                        <li>Copy Gemini's complete response</li>
                                        <li>Paste the response in the box below</li>
                                    </ul>
                                </div>

                                <div class="ai-prompt-area">
                                    <label class="ai-prompt-label">Generated Prompt for Gemini (Market Research):</label>
                                    <textarea id="gemini-market-prompt" class="ai-prompt-textarea" readonly placeholder="This prompt will be generated after you complete Step 1..."></textarea>
                                </div>

                                <div class="ai-buttons">
                                    <button class="ai-btn copy" onclick="copyToClipboard('gemini-market-prompt')" disabled id="copy-market-btn">Copy Prompt</button>
                                    <button class="ai-btn open" onclick="openGemini()" disabled id="open-gemini-market-btn">Open Gemini</button>
                                    <button class="ai-btn back" onclick="goBackToStep(1)">Go Back</button>
                                </div>

                                <div class="ai-response-area">
                                    <label class="ai-prompt-label">Paste Gemini's Market Research Response Here:</label>
                                    <textarea id="gemini-market-response" class="ai-response-textarea" placeholder="Paste the complete market research response from Gemini here..." oninput="checkResponseAndEnableNext(2)"></textarea>
                                </div>

                                <div class="ai-buttons">
                                    <button class="ai-btn next" id="next-btn-2" onclick="generateNextPrompt(3)" disabled>Generate Next Prompt</button>
                                </div>
                            </div>
                        </div>

                        <!-- Step 3: Gemini Pricing Research -->
                        <div class="ai-step-container pending" id="ai-step-3-container">
                            <div class="ai-step-header">
                                <div class="ai-step-title">
                                    <div class="ai-step-number">3</div>
                                    <span>Gemini Pricing Research</span>
                                </div>
                                <div class="ai-step-status">Waiting</div>
                            </div>
                            
                            <div class="ai-step-content">
                                <div class="instructions-box">
                                    <div class="instructions-title">Instructions:</div>
                                    <ul class="instructions-list">
                                        <li>Copy the pricing research prompt below</li>
                                        <li>Open Gemini in a new tab</li>
                                        <li>Paste the prompt and submit</li>
                                        <li>IMPORTANT: Choose "Deep Search" option when prompted</li>
                                        <li>Wait for complete Deep Search results</li>
                                        <li>Copy Gemini's complete pricing response</li>
                                        <li>Paste the response in the box below</li>
                                    </ul>
                                </div>

                                <div class="ai-prompt-area">
                                    <label class="ai-prompt-label">Generated Prompt for Gemini (Pricing Research):</label>
                                    <textarea id="gemini-pricing-prompt" class="ai-prompt-textarea" readonly placeholder="This prompt will be generated after you complete Step 2..."></textarea>
                                </div>

                                <div class="ai-buttons">
                                    <button class="ai-btn copy" onclick="copyToClipboard('gemini-pricing-prompt')" disabled id="copy-pricing-btn">Copy Prompt</button>
                                    <button class="ai-btn open" onclick="openGemini()" disabled id="open-gemini-pricing-btn">Open Gemini</button>
                                    <button class="ai-btn back" onclick="goBackToStep(2)">Go Back</button>
                                </div>

                                <div class="ai-response-area">
                                    <label class="ai-prompt-label">Paste Gemini's Pricing Research Response Here:</label>
                                    <textarea id="gemini-pricing-response" class="ai-response-textarea" placeholder="Paste the complete pricing research response from Gemini here..." oninput="checkResponseAndEnableNext(3)"></textarea>
                                </div>

                                <div class="ai-buttons">
                                    <button class="ai-btn next" id="next-btn-3" onclick="generateNextPrompt(4)" disabled>Generate Next Prompt</button>
                                </div>
                            </div>
                        </div>

                        <!-- Step 4: Claude Interactive Calendar -->
                        <div class="ai-step-container pending" id="ai-step-4-container">
                            <div class="ai-step-header">
                                <div class="ai-step-title">
                                    <div class="ai-step-number">4</div>
                                    <span>Claude Interactive Calendar</span>
                                </div>
                                <div class="ai-step-status">Waiting</div>
                            </div>
                            
                            <div class="ai-step-content">
                                <div class="instructions-box">
                                    <div class="instructions-title">Instructions:</div>
                                    <ul class="instructions-list">
                                        <li>Copy the comprehensive prompt below</li>
                                        <li>Open Claude in a new tab</li>
                                        <li>Paste the prompt and submit</li>
                                        <li>Wait for Claude to create your interactive calendar</li>
                                        <li>Copy the ENTIRE calendar artifact code from Claude</li>
                                        <li>Paste the calendar code below to complete your workflow</li>
                                    </ul>
                                </div>

                                <div class="ai-prompt-area">
                                    <label class="ai-prompt-label">Generated Prompt for Claude (Interactive Calendar):</label>
                                    <textarea id="claude-calendar-prompt" class="ai-prompt-textarea" readonly placeholder="This prompt will be generated after you complete Step 3..."></textarea>
                                </div>

                                <div class="ai-buttons">
                                    <button class="ai-btn copy" onclick="copyToClipboard('claude-calendar-prompt')" disabled id="copy-claude-btn">Copy Prompt</button>
                                    <button class="ai-btn open" onclick="openClaude()" disabled id="open-claude-btn">Open Claude</button>
                                    <button class="ai-btn back" onclick="goBackToStep(3)">Go Back</button>
                                </div>

                                <div class="ai-response-area">
                                    <label class="ai-prompt-label">Paste Your Complete Calendar Code Here:</label>
                                    <textarea id="claude-calendar-code" class="ai-response-textarea" placeholder="Paste the complete interactive calendar artifact code from Claude here..." oninput="checkCalendarCodeAndEnableFinish()"></textarea>
                                </div>

                                <div class="ai-buttons">
                                    <button class="ai-btn next" id="finish-workflow-btn" onclick="finishAIWorkflow()" disabled>Complete Workflow</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Interactive Calendar Display -->
                <div id="interactiveCalendarDisplay" class="hidden">
                    <div class="calendar-container">
                        <div class="calendar-header">
                            <h2 style="font-family: 'Playfair Display', serif; color: var(--sage-green); margin-bottom: 15px;">Your Interactive 12-Week Calendar</h2>
                            <p style="color: var(--charcoal); opacity: 0.8;">Track your progress, check off completed tasks, and stay organized on your journey!</p>
                        </div>

                        <!-- Calendar Stats -->
                        <div class="calendar-stats">
                            <div class="stat-item">
                                <div class="stat-number" id="totalTasks">0</div>
                                <div class="stat-label">Total Tasks</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="completedTasks">0</div>
                                <div class="stat-label">Completed</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="overallProgress">0%</div>
                                <div class="stat-label">Progress</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="currentWeekProgress">0%</div>
                                <div class="stat-label">This Week</div>
                            </div>
                        </div>

                        <!-- Parse Calendar Section (shown if no calendar data) -->
                        <div class="parse-calendar-section" id="parseCalendarSection">
                            <h3>Paste Your Calendar from Claude</h3>
                            <p style="margin-bottom: 20px;">Copy the complete calendar code from Claude and paste it below to create your interactive calendar:</p>
                            <textarea id="calendarInput" class="calendar-input" placeholder="Paste your calendar content here...

Example format:
WEEK 1 - DAY 1:
Task 1: Create Instagram Business Account (FREE - 30 minutes)
- Step 1: Go to instagram.com/business
- Step 2: Click 'Create account' â†’ Select 'Business Account'
- Step 3: Choose username: [yourname] + 'business'

WEEK 1 - DAY 2:
Task 1: Research Competitors (FREE - 45 minutes)
- Step 1: Search Google for '[your service] in [location]'
- Step 2: Make list of top 5 competitors"></textarea>
                            <button class="parse-btn" onclick="parseAndDisplayCalendar()">Create Interactive Calendar</button>
                        </div>

                        <!-- Calendar Navigation -->
                        <div class="calendar-navigation" id="calendarNavigation" style="display: none;">
                            <div class="week-selector" id="weekSelector">
                                <!-- Week buttons will be generated here -->
                            </div>
                            <div class="calendar-progress">
                                <div class="progress-circle" id="progressCircle">
                                    <span id="progressPercent">0%</span>
                                </div>
                                <div>
                                    <div style="font-weight: 600;">Week Progress</div>
                                    <div style="font-size: 14px; opacity: 0.7;" id="weekProgressText">0 of 0 tasks completed</div>
                                </div>
                            </div>
                        </div>

                        <!-- Calendar Content -->
                        <div id="calendarContent">
                            <!-- Week contents will be generated here -->
                        </div>

                        <!-- Calendar Actions -->
                        <div class="calendar-actions" id="calendarActions" style="display: none;">
                            <button class="calendar-btn" onclick="downloadCalendarProgress()">Download Progress</button>
                            <button class="calendar-btn secondary" onclick="printCalendar()">Print Calendar</button>
                            <button class="calendar-btn" onclick="resetCalendarProgress()">Reset Progress</button>
                            <button class="calendar-btn secondary" onclick="skipToPaymentOptions()">Get Professional Help</button>
                        </div>

                        <!-- Empty State -->
                        <div class="calendar-empty" id="calendarEmpty">
                            <h3>ðŸ—“ï¸ Ready to Create Your Calendar?</h3>
                            <p>Complete the AI workflow above to generate your personalized interactive calendar, or paste existing calendar content to get started!</p>
                        </div>
                    </div>
                </div>

                <!-- Final Dashboard -->
                <div id="finalDashboard" class="hidden">
                    <div class="final-dashboard">
                        <div class="dashboard-header">
                            <h2>Your Complete Smart Mom Method Plan</h2>
                            <p>Here's your comprehensive business plan with integrated pricing strategy and interactive calendar.</p>
                        </div>
                        
                        <div class="dashboard-grid">
                            <div class="dashboard-section">
                                <h3>Business Plan Summary</h3>
                                <div id="business-summary-content" class="business-summary">
                                    <p>Your business plan summary will appear here based on all AI responses.</p>
                                </div>
                            </div>
                            
                            <div class="dashboard-section">
                                <h3>Market Research Results</h3>
                                <div id="market-research-summary" class="business-summary">
                                    <p>Your market research insights will appear here.</p>
                                </div>
                            </div>
                            
                            <div class="dashboard-section">
                                <h3>Pricing Strategy</h3>
                                <div id="pricing-strategy-summary" class="business-summary">
                                    <p>Your pricing research results will appear here.</p>
                                </div>
                            </div>
                            
                            <div class="dashboard-section">
                                <h3>Interactive Calendar</h3>
                                <div id="calendar-preview-display" class="calendar-preview">
                                    <div style="text-align: center; padding: 20px;">
                                        <p style="margin-bottom: 20px;">Your interactive calendar is ready!</p>
                                        <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                                            <button class="ai-btn open" onclick="showInteractiveCalendar()" style="margin-top: 10px;">View Interactive Calendar</button>
                                            <button class="ai-btn copy" onclick="previewCalendar()" style="margin-top: 10px;">Preview Calendar Code</button>
                                        </div>
                                        <p style="margin-top: 15px; font-size: 14px; opacity: 0.7;">
                                            Click "View Interactive Calendar" to use your personalized calendar with progress tracking.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="final-actions">
                            <button class="final-action-btn primary" onclick="showInteractiveCalendar()">
                                ðŸ“… Use Interactive Calendar
                            </button>
                            <button class="final-action-btn" onclick="downloadCompletePackage()">
                                Download Complete Package
                            </button>
                            <button class="final-action-btn" onclick="skipToPaymentOptions()">
                                Get Professional Implementation
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Success Message -->
                <div id="successMessage" class="hidden" style="background: linear-gradient(135deg, var(--sage-green), var(--deep-teal)); color: white; padding: 60px 40px; text-align: center; border-radius: 24px; margin: 40px 0;">
                    <h2 style="font-family: 'Playfair Display', serif; font-size: 2.5rem; margin-bottom: 20px;">ðŸŽ‰ Thank You!</h2>
                    <p style="font-size: 1.2rem; margin-bottom: 30px; opacity: 0.9;">Your information has been saved successfully!</p>
                    
                    <div style="background: rgba(255,255,255,0.15); padding: 30px; border-radius: 16px; margin: 30px 0;">
                        <h3 style="margin-bottom: 15px;">What's Next:</h3>
                        <ul style="list-style: none; padding: 0;">
                            <li style="margin: 10px 0;">ðŸ“§ Check your email for welcome information</li>
                            <li style="margin: 10px 0;">ðŸ“… You can now proceed with the AI workflow</li>
                            <li style="margin: 10px 0;">ðŸ’¾ Your progress will be automatically saved</li>
                            <li style="margin: 10px 0;">ðŸ”’ Your data is secure in our Airtable database</li>
                        </ul>
                    </div>

                    <button onclick="proceedToAIWorkflow()" style="background: var(--soft-gold); color: white; padding: 20px 40px; border: none; border-radius: 12px; font-size: 1.2rem; font-weight: 600; cursor: pointer; margin: 10px;">
                        Continue to AI Analysis
                    </button>
                    
                    <button onclick="startOver()" style="background: white; color: var(--sage-green); padding: 20px 40px; border: none; border-radius: 12px; font-size: 1.2rem; font-weight: 600; cursor: pointer; margin: 10px;">
                        Create Another Plan
                    </button>
                </div>

                <!-- Payment Options -->
                <div id="paymentOptions" class="hidden">
                    <div style="background: linear-gradient(135deg, var(--sage-green), var(--deep-teal)); color: white; padding: 50px 40px; border-radius: 24px; margin: 40px 0; text-align: center;">
                        <h2 style="font-family: 'Playfair Display', serif; font-size: 2.5rem; margin-bottom: 20px;">Transform Your Plan Into Action</h2>
                        <p style="font-size: 1.2rem; margin-bottom: 40px; opacity: 0.9;">You've got the ideas - now let's make them happen! Get your personalized interactive calendar and expert guidance to succeed.</p>
                        
                        <!-- Back to Planning Button -->
                        <div style="text-align: center; margin-bottom: 30px;">
                            <button onclick="returnToPlanningProcess()" style="background: var(--deep-teal); color: white; padding: 12px 24px; border: none; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                                â† Return to Free Planning Process
                            </button>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; margin-top: 40px;">
                            <!-- FREE Life Organization Support Card -->
                            <div style="background: white; color: var(--charcoal); padding: 40px 30px; border-radius: 20px; transition: all 0.3s ease;">
                                <div style="font-size: 3rem; font-weight: 700; color: var(--sage-green); margin-bottom: 10px;">$0</div>
                                <div style="font-size: 1.5rem; font-weight: 600; margin-bottom: 20px; color: var(--charcoal);">Life Organization Support</div>
                                <div style="margin-bottom: 20px; color: var(--charcoal); opacity: 0.8;">Struggling with daily chaos? Let's troubleshoot your family organization challenges together!</div>
                                <ul style="list-style: none; margin-bottom: 30px; text-align: left;">
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        30-minute support call
                                    </li>
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Family schedule troubleshooting
                                    </li>
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Organization quick wins
                                    </li>
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Executive function strategies
                                    </li>
                                </ul>
                                <button onclick="window.open('https://calendly.com/momsurvivaltoolkit/free-smart-mom-support-call-30-min', '_blank')" style="width: 100%; padding: 15px; background: var(--sage-green); color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                                    Book Free Support Call
                                </button>
                            </div>

                            <!-- FREE Business Planning Support Card -->
                            <div style="background: white; color: var(--charcoal); padding: 40px 30px; border-radius: 20px; transition: all 0.3s ease;">
                                <div style="font-size: 3rem; font-weight: 700; color: var(--sage-green); margin-bottom: 10px;">$0</div>
                                <div style="font-size: 1.5rem; font-weight: 600; margin-bottom: 20px; color: var(--charcoal);">Business Planning Support</div>
                                <div style="margin-bottom: 20px; color: var(--charcoal); opacity: 0.8;">Stuck with your business calendar? Let's troubleshoot your entrepreneurial challenges together!</div>
                                <ul style="list-style: none; margin-bottom: 30px; text-align: left;">
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        30-minute strategy call
                                    </li>
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Business calendar troubleshooting
                                    </li>
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Revenue planning advice
                                    </li>
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Mom entrepreneur tips
                                    </li>
                                </ul>
                                <button onclick="window.open('https://calendly.com/momsurvivaltoolkit/30min', '_blank')" style="width: 100%; padding: 15px; background: var(--sage-green); color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                                    Book Free Strategy Call
                                </button>
                            </div>

                            <div style="background: white; color: var(--charcoal); padding: 40px 30px; border-radius: 20px; transition: all 0.3s ease;">
                                <div style="font-size: 3rem; font-weight: 700; color: var(--sage-green); margin-bottom: 10px;">$39</div>
                                <div style="font-size: 1.5rem; font-weight: 600; margin-bottom: 20px; color: var(--charcoal);">Life Organization Calendar</div>
                                <ul style="list-style: none; margin-bottom: 30px; text-align: left;">
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Personalized interactive calendar
                                    </li>
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Daily routines & time blocks
                                    </li>
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Family schedule optimization
                                    </li>
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Goal tracking templates
                                    </li>
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Printable planning sheets
                                    </li>
                                </ul>
                                <button onclick="window.open('https://buy.stripe.com/cNi00j9W0fo83eUa1D7Vm07', '_blank')" style="width: 100%; padding: 15px; background: var(--sage-green); color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                                    Get Life Calendar
                                </button>
                            </div>

                            <div style="background: white; color: var(--charcoal); padding: 40px 30px; border-radius: 20px; transition: all 0.3s ease; border: 3px solid var(--soft-gold);">
                                <div style="font-size: 3rem; font-weight: 700; color: var(--sage-green); margin-bottom: 10px;">$89</div>
                                <div style="font-size: 1.5rem; font-weight: 600; margin-bottom: 20px; color: var(--charcoal);">Life + Training Package</div>
                                <ul style="list-style: none; margin-bottom: 30px; text-align: left;">
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Everything in Life Calendar
                                    </li>
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        90-minute video training course
                                    </li>
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Step-by-step implementation guide
                                    </li>
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Time management strategies
                                    </li>
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Bonus productivity tools
                                    </li>
                                </ul>
                                <button onclick="window.open('https://buy.stripe.com/5kQ6oHb046RC5n22zb7Vm06', '_blank')" style="width: 100%; padding: 15px; background: var(--soft-gold); color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                                    Get Life + Training
                                </button>
                            </div>

                            <div style="background: white; color: var(--charcoal); padding: 40px 30px; border-radius: 20px; transition: all 0.3s ease;">
                                <div style="font-size: 3rem; font-weight: 700; color: var(--sage-green); margin-bottom: 10px;">$49</div>
                                <div style="font-size: 1.5rem; font-weight: 600; margin-bottom: 20px; color: var(--charcoal);">Business Launch Calendar</div>
                                <ul style="list-style: none; margin-bottom: 30px; text-align: left;">
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Business planning calendar
                                    </li>
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Revenue milestone tracking
                                    </li>
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Marketing action plans
                                    </li>
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Client management system
                                    </li>
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Financial tracking tools
                                    </li>
                                </ul>
                                <button onclick="window.open('https://buy.stripe.com/3cI8wP7NS2BmbLqc9L7Vm05', '_blank')" style="width: 100%; padding: 15px; background: var(--sage-green); color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                                    Get Business Calendar
                                </button>
                            </div>

                            <div style="background: white; color: var(--charcoal); padding: 40px 30px; border-radius: 20px; transition: all 0.3s ease; border: 3px solid var(--soft-gold);">
                                <div style="font-size: 3rem; font-weight: 700; color: var(--sage-green); margin-bottom: 10px;">$100</div>
                                <div style="font-size: 1.5rem; font-weight: 600; margin-bottom: 20px; color: var(--charcoal);">Complete Business Package</div>
                                <ul style="list-style: none; margin-bottom: 30px; text-align: left;">
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Everything in Business Calendar
                                    </li>
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        2-hour business training course
                                    </li>
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Market research templates
                                    </li>
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Pricing & sales strategies
                                    </li>
                                    <li style="padding: 8px 0; position: relative; padding-left: 25px;">
                                        <span style="position: absolute; left: 0; color: var(--sage-green); font-weight: bold;">âœ“</span>
                                        Launch timeline with milestones
                                    </li>
                                </ul>
                                <button onclick="window.open('https://buy.stripe.com/fZu8wP8RW1xi8zec9L7Vm04', '_blank')" style="width: 100%; padding: 15px; background: var(--soft-gold); color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                                    Get Complete Package
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===== AIRTABLE CONFIGURATION =====
        const airtableConfig = {
            baseId: "appQUF3zVLlHbB4fP",
            apiKey: "patjes1GsajwyYTSN.39633c18c6dc227b6e290d5da8lda3bde2f4d089d6bd4ae049787fecdb676f65",
            apiUrl: "https://api.airtable.com/v0/appQUF3zVLlHbB4fP"
        };

        const WEBHOOK_URL = 'https://momsurvivaltoolkit.app.n8n.cloud/webhook-test/smart-mom-form';

        // ===== GLOBAL VARIABLES =====
        let currentLanguage = 'en';
        let selectedPath = '';
        let authMode = 'signup';
        let currentUser = null;
        let formData = {};
        let currentStep = 1;
        let currentAIStep = 1;
        let aiResponses = {};
        let calendarData = null;
        let currentWeek = 1;

        // AI Platform URLs
        const AI_PLATFORMS = {
            chatgpt: 'https://chat.openai.com',
            gemini: 'https://gemini.google.com',
            claude: 'https://claude.ai'
        };

        // AI Realism Instructions
        const realismInstructions = `
**CRITICAL INSTRUCTIONS - BE EXTREMELY REALISTIC:**
- This person is a BEGINNER, not an expert
- Be brutally honest about challenges and timelines  
- Don't suggest businesses requiring experience they don't have
- Focus on DOWN-TO-EARTH, practical solutions only
- Consider their family constraints and available time
- If they said "free only," respect that completely
- Suggest pricing that will actually get clients, not scare them away

**REMEMBER:** A mom with 2 hours/day and no business experience should NOT be suggested:
- Businesses requiring 40+ hours/week
- High-skill services they've never done
- Anything requiring significant upfront investment (if they said free)
- Complex businesses with steep learning curves

Focus on what's ACTUALLY doable for their situation.
`;

        // ===== ENHANCED CORS PROXY FUNCTIONS =====
        
        const corsProxies = [
            'https://api.allorigins.win/raw?url=',
            'https://corsproxy.io/?',
            'https://cors-anywhere.herokuapp.com/',
            'https://proxy.cors.sh/',
            'https://api.codetabs.com/v1/proxy?quest='
        ];

        async function corsProxyFetch(url, options = {}, retryCount = 0) {
            const maxRetries = corsProxies.length;
            
            if (retryCount >= maxRetries) {
                console.error('All CORS proxies failed');
                throw new Error('CORS proxy request failed after all retries');
            }

            const proxy = corsProxies[retryCount];
            const proxiedUrl = proxy + encodeURIComponent(url);
            
            try {
                const response = await fetch(proxiedUrl, {
                    ...options,
                    headers: {
                        ...options.headers,
                        'X-Requested-With': 'XMLHttpRequest',
                        'Origin': window.location.origin
                    }
                });

                if (!response.ok && retryCount < maxRetries - 1) {
                    console.warn(`Proxy ${retryCount + 1} failed, trying next proxy...`);
                    return await corsProxyFetch(url, options, retryCount + 1);
                }

                return response;
            } catch (error) {
                console.warn(`Proxy ${retryCount + 1} failed:`, error.message);
                if (retryCount < maxRetries - 1) {
                    return await corsProxyFetch(url, options, retryCount + 1);
                }
                throw error;
            }
        }

        // ===== AIRTABLE API FUNCTIONS (WITH ENHANCED CORS) =====
        
        async function hashPassword(password) {
            const encoder = new TextEncoder();
            const data = encoder.encode(password);
            const hash = await crypto.subtle.digest('SHA-256', data);
            return Array.from(new Uint8Array(hash))
                .map(b => b.toString(16).padStart(2, '0'))
                .join('');
        }

        async function findUserByEmail(email) {
            try {
                const response = await corsProxyFetch(
                    `${airtableConfig.apiUrl}/Users?filterByFormula={Email}='${email}'`,
                    {
                        headers: {
                            'Authorization': `Bearer ${airtableConfig.apiKey}`,
                            'Content-Type': 'application/json'
                        }
                    }
                );
                
                const data = await response.json();
                return data.records[0] || null;
            } catch (error) {
                console.error('Error finding user:', error);
                return null;
            }
        }

        async function createRecord(table, fields) {
            try {
                const response = await corsProxyFetch(`${airtableConfig.apiUrl}/${table}`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${airtableConfig.apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ fields })
                });

                return await response.json();
            } catch (error) {
                console.error('Error creating record:', error);
                throw error;
            }
        }

        async function updateRecord(table, recordId, fields) {
            try {
                const response = await corsProxyFetch(`${airtableConfig.apiUrl}/${table}/${recordId}`, {
                    method: 'PATCH',
                    headers: {
                        'Authorization': `Bearer ${airtableConfig.apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ fields })
                });

                return await response.json();
            } catch (error) {
                console.error('Error updating record:', error);
                throw error;
            }
        }

        async function createUser(email, password, name) {
            try {
                const hashedPassword = await hashPassword(password);
                
                const userData = {
                    Name: name,
                    Email: email,
                    Password: hashedPassword,
                    CreatedAt: new Date().toISOString(),
                    Language: currentLanguage,
                    Provider: 'email'
                };

                const result = await createRecord('Users', userData);
                console.log('User created successfully:', result);
                
                currentUser = {
                    id: result.id,
                    email: email,
                    name: name,
                    displayName: name
                };
                
                updateUserSession(currentUser);
                return result;
            } catch (error) {
                console.error('Error creating user:', error);
                throw error;
            }
        }

        async function signIn(email, password) {
            try {
                const user = await findUserByEmail(email);
                if (!user) {
                    throw new Error('User not found');
                }

                const hashedPassword = await hashPassword(password);
                if (user.fields.Password !== hashedPassword) {
                    throw new Error('Invalid password');
                }

                currentUser = {
                    id: user.id,
                    email: email,
                    name: user.fields.Name,
                    displayName: user.fields.Name
                };

                updateUserSession(currentUser);
                await loadUserProgress(email);
                
                return user;
            } catch (error) {
                console.error('Error signing in:', error);
                throw error;
            }
        }

        async function saveProgress(userEmail, data) {
            if (!userEmail || !currentUser) return;
            
            try {
                const progressData = {
                    UserEmail: userEmail,
                    FormData: JSON.stringify(data),
                    CurrentStep: currentStep,
                    SelectedPath: selectedPath,
                    LastSaved: new Date().toISOString(),
                    Language: currentLanguage
                };

                const existingResponse = await corsProxyFetch(
                    `${airtableConfig.apiUrl}/Progress?filterByFormula={UserEmail}='${userEmail}'`,
                    {
                        headers: {
                            'Authorization': `Bearer ${airtableConfig.apiKey}`,
                            'Content-Type': 'application/json'
                        }
                    }
                );

                const existingData = await existingResponse.json();
                
                if (existingData.records && existingData.records.length > 0) {
                    const recordId = existingData.records[0].id;
                    return await updateRecord('Progress', recordId, progressData);
                } else {
                    return await createRecord('Progress', progressData);
                }
            } catch (error) {
                console.error('Error saving progress:', error);
                localStorage.setItem('smartMomProgress', JSON.stringify({
                    userEmail,
                    data,
                    currentStep,
                    selectedPath,
                    lastSaved: new Date().toISOString()
                }));
            }
        }

        async function loadUserProgress(userEmail) {
            try {
                const response = await corsProxyFetch(
                    `${airtableConfig.apiUrl}/Progress?filterByFormula={UserEmail}='${userEmail}'`,
                    {
                        headers: {
                            'Authorization': `Bearer ${airtableConfig.apiKey}`,
                            'Content-Type': 'application/json'
                        }
                    }
                );

                const data = await response.json();
                
                if (data.records && data.records.length > 0) {
                    const progressRecord = data.records[0].fields;
                    
                    if (progressRecord.FormData) {
                        formData = JSON.parse(progressRecord.FormData);
                        restoreFormData(formData);
                    }
                    
                    currentStep = progressRecord.CurrentStep || 1;
                    selectedPath = progressRecord.SelectedPath || '';
                    
                    updateProgressDisplay();
                    showReturningUserStatus(progressRecord.LastSaved);
                    
                    console.log('Progress loaded successfully');
                    return progressRecord;
                }
            } catch (error) {
                console.error('Error loading progress:', error);
                const localProgress = localStorage.getItem('smartMomProgress');
                if (localProgress) {
                    const parsed = JSON.parse(localProgress);
                    if (parsed.userEmail === userEmail) {
                        formData = parsed.data || {};
                        currentStep = parsed.currentStep || 1;
                        selectedPath = parsed.selectedPath || '';
                        restoreFormData(formData);
                        updateProgressDisplay();
                    }
                }
            }
        }

        async function sendToWebhook(data) {
            try {
                const response = await corsProxyFetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify({
                        ...data,
                        source: 'smart-mom-method-website',
                        version: '2.0'
                    })
                });

                if (response.ok) {
                    console.log('ðŸ“§ Webhook sent successfully!');
                    return true;
                } else {
                    console.warn('âš ï¸ Webhook failed:', response.status);
                    return false;
                }
            } catch (error) {
                console.warn('âš ï¸ Webhook error:', error.message);
                return false;
            }
        }

        async function sendWelcomeEmail(name, email) {
            const welcomeData = {
                trigger: 'welcome_email',
                name: name,
                email: email,
                timestamp: new Date().toISOString(),
                language: currentLanguage,
                source: 'smart-mom-method-website'
            };
            
            return await sendToWebhook(welcomeData);
        }

        // ===== USER SESSION MANAGEMENT =====
        
        function updateUserSession(user) {
            currentUser = user;
            
            localStorage.setItem('smartMomUser', JSON.stringify(user));
            
            document.getElementById('userStatusBar').classList.remove('hidden');
            document.getElementById('userAvatar').textContent = user.name.charAt(0).toUpperCase();
            document.getElementById('userDisplayName').textContent = user.name;
            document.getElementById('userStatusText').textContent = `Signed in as ${user.email}`;
            document.getElementById('statusBadge').textContent = 'Signed In';
            document.getElementById('statusBadge').className = 'status-badge signed-in';
            document.getElementById('signOutBtn').style.display = 'block';
            
            const saveBtn = document.querySelector('[onclick="showAuthModal(\'signup\')"]');
            if (saveBtn) saveBtn.style.display = 'none';
        }

        function checkExistingSession() {
            const savedUser = localStorage.getItem('smartMomUser');
            if (savedUser) {
                try {
                    currentUser = JSON.parse(savedUser);
                    updateUserSession(currentUser);
                    loadUserProgress(currentUser.email);
                } catch (error) {
                    console.error('Error restoring session:', error);
                    localStorage.removeItem('smartMomUser');
                }
            } else {
                document.getElementById('userStatusBar').classList.remove('hidden');
            }
        }

        function signOut() {
            currentUser = null;
            localStorage.removeItem('smartMomUser');
            localStorage.removeItem('smartMomProgress');
            
            document.getElementById('userAvatar').textContent = '?';
            document.getElementById('userDisplayName').textContent = 'Guest User';
            document.getElementById('userStatusText').textContent = 'Progress will not be saved';
            document.getElementById('statusBadge').textContent = 'Guest Mode';
            document.getElementById('statusBadge').className = 'status-badge guest';
            document.getElementById('signOutBtn').style.display = 'none';
            
            const saveBtn = document.querySelector('[onclick="showAuthModal(\'signup\')"]');
            if (saveBtn) saveBtn.style.display = 'block';
            
            document.querySelectorAll('.form-control').forEach(field => {
                field.value = '';
            });
            
            currentStep = 1;
            selectedPath = '';
            formData = {};
            updateProgressDisplay();
        }

        // ===== AUTHENTICATION MODAL FUNCTIONS =====
        
        function showAuthModal(mode) {
            authMode = mode || 'signup';
            
            const modal = document.getElementById('authModal');
            const title = document.getElementById('authTitle');
            const submitBtn = document.getElementById('authSubmitText');
            const switchText = document.getElementById('authSwitchText');
            const switchLink = document.getElementById('authSwitchLink');
            const nameField = document.getElementById('authName');
            const confirmField = document.getElementById('authConfirmPassword');

            clearAuthMessages();

            if (authMode === 'signup') {
                title.textContent = 'Create Your Account';
                submitBtn.textContent = 'Create Account';
                switchText.textContent = 'Already have an account?';
                switchLink.textContent = 'Sign In';
                nameField.style.display = 'block';
                confirmField.style.display = 'block';
                nameField.required = true;
                confirmField.required = true;
            } else {
                title.textContent = 'Sign In';
                submitBtn.textContent = 'Sign In';
                switchText.textContent = "Don't have an account?";
                switchLink.textContent = 'Create Account';
                nameField.style.display = 'none';
                confirmField.style.display = 'none';
                nameField.required = false;
                confirmField.required = false;
            }

            modal.classList.add('active');
        }

        function closeAuthModal() {
            document.getElementById('authModal').classList.remove('active');
            clearAuthMessages();
            document.getElementById('authForm').reset();
        }

        function toggleAuthMode() {
            showAuthModal(authMode === 'signup' ? 'signin' : 'signup');
        }

        function clearAuthMessages() {
            document.getElementById('authError').classList.add('hidden');
            document.getElementById('authSuccess').classList.add('hidden');
        }

        function showAuthError(message) {
            const errorDiv = document.getElementById('authError');
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
        }

        function showAuthSuccess(message) {
            const successDiv = document.getElementById('authSuccess');
            successDiv.textContent = message;
            successDiv.classList.remove('hidden');
        }

        // ===== FORM HANDLING =====
        
        function validateField(field) {
            const validation = document.getElementById(field.id + '-validation');
            let isValid = true;
            let message = '';

            if (field.required && !field.value.trim()) {
                isValid = false;
                message = 'This field is required';
            } else if (field.type === 'email' && field.value && !isValidEmail(field.value)) {
                isValid = false;
                message = 'Please enter a valid email address';
            } else if (field.id === 'user-name' && field.value && field.value.length < 2) {
                isValid = false;
                message = 'Name must be at least 2 characters';
            }

            if (validation) {
                validation.textContent = message;
                validation.className = isValid ? 'validation-message success' : 'validation-message';
            }

            formData[field.id] = field.value;
            
            if (currentUser) {
                saveProgress(currentUser.email, formData);
            }

            return isValid;
        }

        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        function updateCharCount(textarea, maxLength) {
            const counter = document.getElementById(textarea.id + '-counter');
            if (counter) {
                const current = textarea.value.length;
                counter.textContent = `${current}/${maxLength}`;
                
                if (current > maxLength) {
                    counter.style.color = '#e57373';
                    textarea.style.borderColor = '#e57373';
                } else {
                    counter.style.color = '';
                    textarea.style.borderColor = '';
                }
            }
            
            formData[textarea.id] = textarea.value;
            
            if (currentUser) {
                saveProgress(currentUser.email, formData);
            }
        }

        function restoreFormData(data) {
            Object.keys(data).forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) {
                    field.value = data[fieldId];
                    
                    if (field.type === 'textarea' && field.oninput) {
                        field.oninput();
                    }
                }
            });
        }

        // ===== PROGRESS MANAGEMENT =====
        
        function updateProgressDisplay() {
            const stepCounter = document.getElementById('stepCounter');
            const progressFill = document.getElementById('progressFill');
            
            if (stepCounter) {
                stepCounter.textContent = `Step ${currentStep} of 6`;
            }
            
            if (progressFill) {
                const percentage = (currentStep / 6) * 100;
                progressFill.style.width = `${percentage}%`;
            }

            // Update step indicators
            for (let i = 1; i <= 6; i++) {
                const stepElement = document.getElementById(`step-${i}`);
                if (stepElement) {
                    stepElement.classList.remove('active', 'completed', 'pending');
                    
                    if (i < currentStep) {
                        stepElement.classList.add('completed');
                    } else if (i === currentStep) {
                        stepElement.classList.add('active');
                    } else {
                        stepElement.classList.add('pending');
                    }
                }
            }
        }

        function showReturningUserStatus(lastSaved) {
            if (lastSaved) {
                const lastSavedDate = new Date(lastSaved);
                const now = new Date();
                const diffTime = Math.abs(now - lastSavedDate);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                let timeText = '';
                if (diffDays === 1) {
                    timeText = 'yesterday';
                } else if (diffDays < 7) {
                    timeText = `${diffDays} days ago`;
                } else {
                    timeText = 'recently';
                }
                
                document.getElementById('userStatusText').textContent = `Last saved ${timeText}`;
            }
        }

        // ===== MODAL FUNCTIONS =====
        
        function startOnboarding() {
            document.getElementById('welcomeModal').classList.add('hidden');
        }

        function handleReturningUser() {
            document.getElementById('welcomeModal').classList.add('hidden');
            showAuthModal('signin');
        }

        // ===== UTILITY FUNCTIONS =====
        
        function scrollToForm() {
            document.getElementById('basicInfoSection').scrollIntoView({ behavior: 'smooth' });
        }

        function changeLanguage(lang) {
            currentLanguage = lang;
            
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`lang-${lang}`).classList.add('active');
            
            localStorage.setItem('smartMomLanguage', lang);
            updateLanguageContent(lang);
        }

        function updateLanguageContent(lang) {
            const translations = {
                en: {
                    welcomeTitle: 'Welcome to Smart Mom Method!',
                    welcomeDescription: 'Create your personalized interactive calendar and business plan in 6 simple steps. This process will take approximately 25-30 minutes and will generate a comprehensive interactive calendar and plan tailored specifically for busy moms like you.',
                    welcomeStart: 'Get Started',
                    welcomeCreate: 'Create Account & Save Progress',
                    welcomeReturning: "I'm a returning user",
                    mainTitle: 'Smart Mom Method',
                    mainSubtitle: 'AI-Powered Interactive Calendar & Business Planning for Busy Moms',
                    freeBadge: '100% Free',
                    ctaButton: 'Start Your Free Interactive Calendar & Business Plan Now',
                    ctaSubtext: 'No email required to browse â€¢ Full process takes 25-30 minutes'
                },
                es: {
                    welcomeTitle: 'Â¡Bienvenida al MÃ©todo Smart Mom!',
                    welcomeDescription: 'Crea tu calendario interactivo personalizado y plan de negocio en 6 simples pasos. Este proceso tomarÃ¡ aproximadamente 25-30 minutos y generarÃ¡ un calendario interactivo integral y un plan diseÃ±ado especÃ­ficamente para madres ocupadas como tÃº.',
                    welcomeStart: 'Comenzar',
                    welcomeCreate: 'Crear Cuenta y Guardar Progreso',
                    welcomeReturning: 'Soy usuario que regresa',
                    mainTitle: 'MÃ©todo Smart Mom',
                    mainSubtitle: 'Calendario Interactivo y PlanificaciÃ³n de Negocios con IA para Madres Ocupadas',
                    freeBadge: '100% Gratis',
                    ctaButton: 'Comienza Tu Calendario Interactivo y Plan de Negocio Gratis Ahora',
                    ctaSubtext: 'No se requiere email para navegar â€¢ El proceso completo toma 25-30 minutos'
                }
            };

            const t = translations[lang];
            if (t) {
                Object.keys(t).forEach(key => {
                    const element = document.getElementById(key);
                    if (element) {
                        element.textContent = t[key];
                    }
                });
            }
        }

        // ===== PATH SELECTION =====
        
        function selectPath(path) {
            selectedPath = path;
            
            document.querySelectorAll('.path-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            document.querySelector(`[data-path="${path}"]`).classList.add('selected');
            
            const continueBtn = document.getElementById('continueBtn');
            continueBtn.classList.add('visible');
            
            formData.selectedPath = path;
            if (currentUser) {
                saveProgress(currentUser.email, formData);
            }
        }

        function showBusinessQuestionnaire() {
            if (!selectedPath) {
                alert('Please select a path first');
                return;
            }
            
            currentStep = 3;
            updateProgressDisplay();
            
            document.getElementById('pathSelection').classList.add('hidden');
            document.getElementById('businessQuestionnaire').classList.remove('hidden');
            
            document.getElementById('businessQuestionnaire').scrollIntoView({ behavior: 'smooth' });
        }

        function proceedWithQuestionnaire() {
            const requiredFields = ['family-structure', 'daily-schedule', 'investment-level', 'income-timeline'];
            let allValid = true;

            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (!validateField(field)) {
                    allValid = false;
                }
            });

            if (!allValid) {
                alert('Please fill in all required fields');
                return;
            }

            currentStep = 4;
            updateProgressDisplay();
            
            document.getElementById('businessQuestionnaire').classList.add('hidden');
            document.getElementById('interactiveAIWorkflow').classList.remove('hidden');
            
            generateInitialChatGPTPrompt();
            document.getElementById('interactiveAIWorkflow').scrollIntoView({ behavior: 'smooth' });
        }

        // ===== AI WORKFLOW FUNCTIONS =====
        
        function generateInitialChatGPTPrompt() {
            const name = document.getElementById('user-name').value;
            const familyStructure = document.getElementById('family-structure').value;
            const dailySchedule = document.getElementById('daily-schedule').value;
            const investmentLevel = document.getElementById('investment-level').value;
            const incomeTimeline = document.getElementById('income-timeline').value;

            const prompt = `${realismInstructions}

**USER PROFILE:**
- Name: ${name}
- Selected Path: ${selectedPath}
- Family Structure: ${familyStructure}
- Daily Schedule: ${dailySchedule}
- Investment Level: ${investmentLevel}
- Income Timeline: ${incomeTimeline}
- Language: ${currentLanguage}

**TASK:** Generate 3-5 REALISTIC business ideas that fit this person's actual situation. Be extremely practical and consider their time constraints, family obligations, and budget limitations. 

For each business idea, include:
1. Business name/concept
2. Why it fits their situation
3. Realistic time investment required
4. Startup costs (respect their budget!)
5. Potential monthly income (be conservative)
6. First steps to get started

Remember: This person is a BEGINNER. Don't suggest anything they couldn't realistically start and manage with their current situation.`;

            document.getElementById('chatgpt-prompt').value = prompt;
        }

        function checkResponseAndEnableNext(step) {
            const responseField = document.getElementById(step === 1 ? 'chatgpt-response' : 
                                                     step === 2 ? 'gemini-market-response' : 
                                                     'gemini-pricing-response');
            const nextBtn = document.getElementById(`next-btn-${step}`);
            
            if (responseField.value.trim().length > 100) {
                nextBtn.disabled = false;
                aiResponses[step] = responseField.value;
            } else {
                nextBtn.disabled = true;
            }
        }

        function generateNextPrompt(nextStep) {
            if (nextStep === 2) {
                generateGeminiMarketPrompt();
                goToStep(2);
            } else if (nextStep === 3) {
                generateGeminiPricingPrompt();
                goToStep(3);
            } else if (nextStep === 4) {
                generateClaudeCalendarPrompt();
                goToStep(4);
            }
        }

        function generateGeminiMarketPrompt() {
            const chatGptResponse = document.getElementById('chatgpt-response').value;
            
            const prompt = `Analyze the market for these business ideas from ChatGPT:

${chatGptResponse}

Please research and provide:
1. Market size and trends for each business idea
2. Target customer demographics
3. Competition analysis
4. Market opportunities and challenges
5. Geographic considerations
6. Seasonal factors
7. Growth potential

Use Deep Search to get current, accurate market data. Focus on realistic, actionable insights for a beginner entrepreneur.`;

            document.getElementById('gemini-market-prompt').value = prompt;
            document.getElementById('copy-market-btn').disabled = false;
            document.getElementById('open-gemini-market-btn').disabled = false;
        }

        function generateGeminiPricingPrompt() {
            const marketResponse = document.getElementById('gemini-market-response').value;
            
            const prompt = `Based on this market research:

${marketResponse}

Research and provide detailed pricing strategies:
1. Competitive pricing analysis for each business idea
2. Recommended pricing tiers (basic, standard, premium)
3. Value proposition for each pricing level
4. Payment models (hourly, project-based, subscription, etc.)
5. Pricing psychology considerations
6. Local market pricing factors
7. How to justify prices to customers
8. Pricing mistakes to avoid

Use Deep Search to find current pricing data. Focus on prices that will actually attract customers while ensuring profitability.`;

            document.getElementById('gemini-pricing-prompt').value = prompt;
            document.getElementById('copy-pricing-btn').disabled = false;
            document.getElementById('open-gemini-pricing-btn').disabled = false;
        }

        function generateClaudeCalendarPrompt() {
            const chatGptResponse = document.getElementById('chatgpt-response').value;
            const marketResponse = document.getElementById('gemini-market-response').value;
            const pricingResponse = document.getElementById('gemini-pricing-response').value;
            
            const name = document.getElementById('user-name').value;
            const familyStructure = document.getElementById('family-structure').value;
            const dailySchedule = document.getElementById('daily-schedule').value;

            const prompt = `Create an interactive 12-week business launch calendar for ${name}.

**CONTEXT:**
Family Situation: ${familyStructure}
Daily Schedule: ${dailySchedule}
Selected Path: ${selectedPath}

**BUSINESS IDEAS FROM CHATGPT:**
${chatGptResponse}

**MARKET RESEARCH FROM GEMINI:**
${marketResponse}

**PRICING STRATEGY FROM GEMINI:**
${pricingResponse}

**REQUIREMENTS:**
Create a comprehensive 12-week interactive calendar with:
- Daily actionable tasks (15-60 minutes each)
- Step-by-step instructions for each task
- Mix of FREE and low-cost activities
- Progress tracking capabilities
- Realistic timeline considering family obligations
- Tasks organized by week and day
- Both life organization AND business building tasks

Format as a complete interactive HTML artifact with:
- Week navigation
- Task checkboxes
- Progress tracking
- Mobile-responsive design
- Professional styling
- Calendar that works without external dependencies

Make it practical, actionable, and realistic for a busy mom!`;

            document.getElementById('claude-calendar-prompt').value = prompt;
            document.getElementById('copy-claude-btn').disabled = false;
            document.getElementById('open-claude-btn').disabled = false;
        }

        function goToStep(step) {
            // Update step containers
            for (let i = 1; i <= 4; i++) {
                const container = document.getElementById(`ai-step-${i}-container`);
                const status = container.querySelector('.ai-step-status');
                
                if (i < step) {
                    container.className = 'ai-step-container completed';
                    status.textContent = 'Completed';
                } else if (i === step) {
                    container.className = 'ai-step-container current';
                    status.textContent = 'Current Step';
                } else {
                    container.className = 'ai-step-container pending';
                    status.textContent = 'Waiting';
                }
            }
            
            currentAIStep = step;
        }

        function goBackToStep(step) {
            goToStep(step);
        }

        function checkCalendarCodeAndEnableFinish() {
            const calendarCode = document.getElementById('claude-calendar-code').value;
            const finishBtn = document.getElementById('finish-workflow-btn');
            
            if (calendarCode.trim().length > 500) {
                finishBtn.disabled = false;
                aiResponses.calendarCode = calendarCode;
            } else {
                finishBtn.disabled = true;
            }
        }

        function finishAIWorkflow() {
            const calendarCode = document.getElementById('claude-calendar-code').value;
            
            if (calendarCode.trim().length < 500) {
                alert('Please paste the complete calendar code from Claude');
                return;
            }

            currentStep = 6;
            updateProgressDisplay();
            
            // Save calendar data
            calendarData = calendarCode;
            localStorage.setItem('smartMomCalendar', calendarCode);
            
            // Show calendar access button
            document.getElementById('calendarAccessBtn').style.display = 'block';
            
            // Hide AI workflow and show final dashboard
            document.getElementById('interactiveAIWorkflow').classList.add('hidden');
            document.getElementById('finalDashboard').classList.remove('hidden');
            
            // Populate dashboard
            populateFinalDashboard();
            
            document.getElementById('finalDashboard').scrollIntoView({ behavior: 'smooth' });
        }

        function populateFinalDashboard() {
            // Populate business summary
            if (aiResponses[1]) {
                document.getElementById('business-summary-content').innerHTML = 
                    `<p><strong>Business Ideas:</strong></p><pre style="white-space: pre-wrap; font-family: inherit;">${aiResponses[1].substring(0, 1000)}...</pre>`;
            }
            
            // Populate market research
            if (aiResponses[2]) {
                document.getElementById('market-research-summary').innerHTML = 
                    `<p><strong>Market Analysis:</strong></p><pre style="white-space: pre-wrap; font-family: inherit;">${aiResponses[2].substring(0, 1000)}...</pre>`;
            }
            
            // Populate pricing strategy
            if (aiResponses[3]) {
                document.getElementById('pricing-strategy-summary').innerHTML = 
                    `<p><strong>Pricing Strategy:</strong></p><pre style="white-space: pre-wrap; font-family: inherit;">${aiResponses[3].substring(0, 1000)}...</pre>`;
            }
        }

        // ===== UTILITY FUNCTIONS =====
        
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            element.select();
            element.setSelectionRange(0, 99999);
            
            try {
                document.execCommand('copy');
                
                // Visual feedback
                const button = event.target;
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                button.style.background = '#27ae60';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '';
                }, 2000);
            } catch (err) {
                console.error('Could not copy text: ', err);
                alert('Please manually copy the text');
            }
        }

        function openChatGPT() {
            window.open(AI_PLATFORMS.chatgpt, '_blank');
        }

        function openGemini() {
            window.open(AI_PLATFORMS.gemini, '_blank');
        }

        function openClaude() {
            window.open(AI_PLATFORMS.claude, '_blank');
        }

        // ===== CALENDAR FUNCTIONS =====
        
        function showInteractiveCalendar() {
            currentStep = 5;
            updateProgressDisplay();
            
            document.getElementById('interactiveAIWorkflow').classList.add('hidden');
            document.getElementById('finalDashboard').classList.add('hidden');
            document.getElementById('interactiveCalendarDisplay').classList.remove('hidden');
            
            // Load calendar if we have data
            const savedCalendar = localStorage.getItem('smartMomCalendar');
            if (savedCalendar || calendarData) {
                document.getElementById('calendarInput').value = savedCalendar || calendarData;
                parseAndDisplayCalendar();
            }
            
            document.getElementById('interactiveCalendarDisplay').scrollIntoView({ behavior: 'smooth' });
        }

        function parseAndDisplayCalendar() {
            const calendarInput = document.getElementById('calendarInput').value;
            
            if (!calendarInput.trim()) {
                alert('Please paste your calendar content first');
                return;
            }

            try {
                // Simple calendar parser - you could make this more sophisticated
                const weeks = parseCalendarContent(calendarInput);
                
                if (weeks.length === 0) {
                    alert('Could not parse calendar content. Please check the format.');
                    return;
                }

                displayCalendarNavigation(weeks);
                displayCalendarContent(weeks);
                updateCalendarStats(weeks);
                
                // Hide parse section, show calendar
                document.getElementById('parseCalendarSection').style.display = 'none';
                document.getElementById('calendarNavigation').style.display = 'flex';
                document.getElementById('calendarActions').style.display = 'flex';
                document.getElementById('calendarEmpty').style.display = 'none';
                
                // Save parsed calendar
                localStorage.setItem('smartMomParsedCalendar', JSON.stringify(weeks));
                
            } catch (error) {
                console.error('Error parsing calendar:', error);
                alert('Error parsing calendar. Please check the format and try again.');
            }
        }

        function parseCalendarContent(content) {
            const weeks = [];
            const lines = content.split('\n').filter(line => line.trim());
            
            let currentWeek = null;
            let currentDay = null;
            let currentTask = null;
            
            lines.forEach(line => {
                line = line.trim();
                
                if (line.match(/WEEK \d+/i)) {
                    if (currentWeek) weeks.push(currentWeek);
                    currentWeek = {
                        number: parseInt(line.match(/\d+/)[0]),
                        days: []
                    };
                } else if (line.match(/DAY \d+/i)) {
                    if (currentDay) currentWeek.days.push(currentDay);
                    currentDay = {
                        number: parseInt(line.match(/\d+/)[0]),
                        tasks: []
                    };
                } else if (line.match(/Task \d+:/i)) {
                    if (currentTask) currentDay.tasks.push(currentTask);
                    currentTask = {
                        title: line.replace(/Task \d+:\s*/i, ''),
                        steps: [],
                        completed: false
                    };
                } else if (line.match(/^-\s+Step \d+:/i)) {
                    if (currentTask) {
                        currentTask.steps.push({
                            text: line.replace(/^-\s+Step \d+:\s*/i, ''),
                            completed: false
                        });
                    }
                }
            });
            
            // Add final items
            if (currentTask) currentDay.tasks.push(currentTask);
            if (currentDay) currentWeek.days.push(currentDay);
            if (currentWeek) weeks.push(currentWeek);
            
            return weeks;
        }

        function displayCalendarNavigation(weeks) {
            const weekSelector = document.getElementById('weekSelector');
            weekSelector.innerHTML = '';
            
            weeks.forEach((week, index) => {
                const btn = document.createElement('button');
                btn.className = `week-btn ${index === 0 ? 'active' : ''}`;
                btn.textContent = `W${week.number}`;
                btn.onclick = () => switchToWeek(index, weeks);
                weekSelector.appendChild(btn);
            });
        }

        function displayCalendarContent(weeks) {
            const calendarContent = document.getElementById('calendarContent');
            calendarContent.innerHTML = '';
            
            weeks.forEach((week, weekIndex) => {
                const weekDiv = document.createElement('div');
                weekDiv.className = `week-content ${weekIndex === 0 ? 'active' : ''}`;
                weekDiv.id = `week-${weekIndex}`;
                
                week.days.forEach(day => {
                    const dayCard = document.createElement('div');
                    dayCard.className = 'day-card';
                    
                    const dayHeader = document.createElement('div');
                    dayHeader.className = 'day-header';
                    dayHeader.innerHTML = `
                        <div class="day-title">Day ${day.number}</div>
                        <div class="day-progress">0 of ${day.tasks.length} completed</div>
                    `;
                    
                    const taskList = document.createElement('div');
                    taskList.className = 'task-list';
                    
                    day.tasks.forEach((task, taskIndex) => {
                        const taskCard = document.createElement('div');
                        taskCard.className = 'task-card';
                        
                        taskCard.innerHTML = `
                            <div class="task-header">
                                <div class="task-title-section">
                                    <div class="task-title">${task.title}</div>
                                    <div class="task-meta">
                                        <span class="task-cost cost-free">FREE</span>
                                        <span class="task-time">30-60 minutes</span>
                                    </div>
                                </div>
                                <input type="checkbox" class="task-checkbox" 
                                       onchange="toggleTask(${weekIndex}, ${day.number - 1}, ${taskIndex})">
                            </div>
                            <div class="step-list">
                                ${task.steps.map((step, stepIndex) => `
                                    <div class="step-item">
                                        <input type="checkbox" class="step-checkbox" 
                                               onchange="toggleStep(${weekIndex}, ${day.number - 1}, ${taskIndex}, ${stepIndex})">
                                        <div class="step-number">${stepIndex + 1}</div>
                                        <div class="step-text">${step.text}</div>
                                    </div>
                                `).join('')}
                            </div>
                        `;
                        
                        taskList.appendChild(taskCard);
                    });
                    
                    dayCard.appendChild(dayHeader);
                    dayCard.appendChild(taskList);
                    weekDiv.appendChild(dayCard);
                });
                
                calendarContent.appendChild(weekDiv);
            });
        }

        function switchToWeek(weekIndex, weeks) {
            document.querySelectorAll('.week-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.week-content').forEach(content => content.classList.remove('active'));
            
            document.querySelectorAll('.week-btn')[weekIndex].classList.add('active');
            document.getElementById(`week-${weekIndex}`).classList.add('active');
            
            updateWeekProgress(weekIndex, weeks);
        }

        function updateWeekProgress(weekIndex, weeks) {
            const week = weeks[weekIndex];
            let totalTasks = 0;
            let completedTasks = 0;
            
            week.days.forEach(day => {
                totalTasks += day.tasks.length;
                completedTasks += day.tasks.filter(task => task.completed).length;
            });
            
            const percentage = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
            
            document.getElementById('progressPercent').textContent = `${percentage}%`;
            document.getElementById('weekProgressText').textContent = `${completedTasks} of ${totalTasks} tasks completed`;
        }

        function updateCalendarStats(weeks) {
            let totalTasks = 0;
            let completedTasks = 0;
            
            weeks.forEach(week => {
                week.days.forEach(day => {
                    totalTasks += day.tasks.length;
                    completedTasks += day.tasks.filter(task => task.completed).length;
                });
            });
            
            const overallProgress = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
            
            document.getElementById('totalTasks').textContent = totalTasks;
            document.getElementById('completedTasks').textContent = completedTasks;
            document.getElementById('overallProgress').textContent = `${overallProgress}%`;
        }

        function toggleTask(weekIndex, dayIndex, taskIndex) {
            const savedCalendar = JSON.parse(localStorage.getItem('smartMomParsedCalendar') || '[]');
            
            if (savedCalendar[weekIndex] && savedCalendar[weekIndex].days[dayIndex] && savedCalendar[weekIndex].days[dayIndex].tasks[taskIndex]) {
                savedCalendar[weekIndex].days[dayIndex].tasks[taskIndex].completed = !savedCalendar[weekIndex].days[dayIndex].tasks[taskIndex].completed;
                localStorage.setItem('smartMomParsedCalendar', JSON.stringify(savedCalendar));
                
                // Update UI
                const taskCard = event.target.closest('.task-card');
                if (savedCalendar[weekIndex].days[dayIndex].tasks[taskIndex].completed) {
                    taskCard.classList.add('completed');
                } else {
                    taskCard.classList.remove('completed');
                }
                
                updateCalendarStats(savedCalendar);
                updateWeekProgress(weekIndex, savedCalendar);
            }
        }

        function toggleStep(weekIndex, dayIndex, taskIndex, stepIndex) {
            const savedCalendar = JSON.parse(localStorage.getItem('smartMomParsedCalendar') || '[]');
            
            if (savedCalendar[weekIndex] && savedCalendar[weekIndex].days[dayIndex] && 
                savedCalendar[weekIndex].days[dayIndex].tasks[taskIndex] && 
                savedCalendar[weekIndex].days[dayIndex].tasks[taskIndex].steps[stepIndex]) {
                
                savedCalendar[weekIndex].days[dayIndex].tasks[taskIndex].steps[stepIndex].completed = 
                    !savedCalendar[weekIndex].days[dayIndex].tasks[taskIndex].steps[stepIndex].completed;
                
                localStorage.setItem('smartMomParsedCalendar', JSON.stringify(savedCalendar));
                
                // Update UI
                const stepItem = event.target.closest('.step-item');
                if (savedCalendar[weekIndex].days[dayIndex].tasks[taskIndex].steps[stepIndex].completed) {
                    stepItem.classList.add('completed');
                } else {
                    stepItem.classList.remove('completed');
                }
            }
        }

        function downloadCalendarProgress() {
            const savedCalendar = JSON.parse(localStorage.getItem('smartMomParsedCalendar') || '[]');
            const userData = {
                name: document.getElementById('user-name').value,
                email: document.getElementById('user-email').value,
                selectedPath: selectedPath,
                calendarProgress: savedCalendar,
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(userData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `smart-mom-calendar-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }

        function printCalendar() {
            window.print();
        }

        function resetCalendarProgress() {
            if (confirm('Are you sure you want to reset all calendar progress? This cannot be undone.')) {
                localStorage.removeItem('smartMomParsedCalendar');
                location.reload();
            }
        }

        function downloadCompletePackage() {
            const completePackage = {
                userData: {
                    name: document.getElementById('user-name').value,
                    email: document.getElementById('user-email').value,
                    selectedPath: selectedPath,
                    formData: formData
                },
                aiResponses: aiResponses,
                calendarData: calendarData,
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(completePackage, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `smart-mom-complete-package-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }

        function previewCalendar() {
            if (calendarData) {
                const newWindow = window.open('', '_blank');
                newWindow.document.write(calendarData);
            } else {
                alert('No calendar data available');
            }
        }

        // ===== PAYMENT FUNCTIONS =====
        
        function skipToPaymentOptions() {
            document.querySelectorAll('.main-card .content > div').forEach(section => {
                section.classList.add('hidden');
            });
            
            document.getElementById('paymentOptions').classList.remove('hidden');
            document.getElementById('paymentOptions').scrollIntoView({ behavior: 'smooth' });
        }

        function returnToPlanningProcess() {
            document.getElementById('paymentOptions').classList.add('hidden');
            
            // Show the appropriate section based on current step
            if (currentStep === 1) {
                document.getElementById('basicInfoSection').classList.remove('hidden');
            } else if (currentStep === 2) {
                document.getElementById('pathSelection').classList.remove('hidden');
            } else if (currentStep === 3) {
                document.getElementById('businessQuestionnaire').classList.remove('hidden');
            } else if (currentStep === 4) {
                document.getElementById('interactiveAIWorkflow').classList.remove('hidden');
            } else if (currentStep === 5) {
                document.getElementById('interactiveCalendarDisplay').classList.remove('hidden');
            } else if (currentStep === 6) {
                document.getElementById('finalDashboard').classList.remove('hidden');
            }
        }

        // ===== SUCCESS FUNCTIONS =====
        
        function proceedToAIWorkflow() {
            document.getElementById('successMessage').classList.add('hidden');
            document.getElementById('interactiveAIWorkflow').classList.remove('hidden');
            generateInitialChatGPTPrompt();
            document.getElementById('interactiveAIWorkflow').scrollIntoView({ behavior: 'smooth' });
        }

        function startOver() {
            if (confirm('Are you sure you want to start over? This will clear all your progress.')) {
                localStorage.removeItem('smartMomProgress');
                localStorage.removeItem('smartMomCalendar');
                localStorage.removeItem('smartMomParsedCalendar');
                location.reload();
            }
        }

        // ===== FORM SUBMISSION =====
        
        document.addEventListener('DOMContentLoaded', function() {
            checkExistingSession();
            
            // Load saved language
            const savedLanguage = localStorage.getItem('smartMomLanguage');
            if (savedLanguage) {
                changeLanguage(savedLanguage);
            }

            // Continue button click handler
            document.addEventListener('click', function(event) {
                if (event.target.closest('.continue-btn, .btn-current')) {
                    const nameField = document.getElementById('user-name');
                    const emailField = document.getElementById('user-email');
                    
                    if (!nameField.value.trim() || !emailField.value.trim()) {
                        nameField.focus();
                        alert('Please fill in your name and email to continue');
                        return;
                    }
                    
                    if (!validateField(nameField) || !validateField(emailField)) {
                        return;
                    }
                    
                    // Move to path selection
                    currentStep = 2;
                    updateProgressDisplay();
                    
                    document.getElementById('basicInfoSection').style.display = 'none';
                    document.getElementById('pathSelection').classList.remove('hidden');
                    document.getElementById('pathSelection').scrollIntoView({ behavior: 'smooth' });
                }
            });

            // Auth form submission
            document.getElementById('authForm').addEventListener('submit', async function(event) {
                event.preventDefault();
                
                const email = document.getElementById('authEmail').value;
                const password = document.getElementById('authPassword').value;
                const name = document.getElementById('authName').value;
                const confirmPassword = document.getElementById('authConfirmPassword').value;
                
                clearAuthMessages();
                
                if (authMode === 'signup') {
                    if (!name.trim()) {
                        showAuthError('Name is required');
                        return;
                    }
                    
                    if (password !== confirmPassword) {
                        showAuthError('Passwords do not match');
                        return;
                    }
                    
                    if (password.length < 6) {
                        showAuthError('Password must be at least 6 characters');
                        return;
                    }
                    
                    try {
                        document.getElementById('authSubmitBtn').disabled = true;
                        document.getElementById('authSubmitText').innerHTML = '<span class="loading-spinner"></span>Creating Account...';
                        
                        await createUser(email, password, name);
                        await sendWelcomeEmail(name, email);
                        
                        showAuthSuccess('Account created successfully!');
                        
                        setTimeout(() => {
                            closeAuthModal();
                        }, 2000);
                        
                    } catch (error) {
                        showAuthError(error.message || 'Failed to create account');
                    } finally {
                        document.getElementById('authSubmitBtn').disabled = false;
                        document.getElementById('authSubmitText').textContent = 'Create Account';
                    }
                } else {
                    try {
                        document.getElementById('authSubmitBtn').disabled = true;
                        document.getElementById('authSubmitText').innerHTML = '<span class="loading-spinner"></span>Signing In...';
                        
                        await signIn(email, password);
                        
                        showAuthSuccess('Signed in successfully!');
                        
                        setTimeout(() => {
                            closeAuthModal();
                        }, 1500);
                        
                    } catch (error) {
                        showAuthError(error.message || 'Failed to sign in');
                    } finally {
                        document.getElementById('authSubmitBtn').disabled = false;
                        document.getElementById('authSubmitText').textContent = 'Sign In';
                    }
                }
            });
        });

        // ===== WINDOW LOAD =====
        
        window.addEventListener('load', function() {
            // Check if user has completed setup
            const savedCalendar = localStorage.getItem('smartMomParsedCalendar');
            if (savedCalendar) {
                document.getElementById('calendarAccessBtn').style.display = 'block';
            }
        });
    </script>
</body>
</html>
